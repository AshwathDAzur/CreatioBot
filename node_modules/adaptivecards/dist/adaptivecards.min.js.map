{"version":3,"file":"adaptivecards.min.js","mappings":"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","sources":["webpack://AdaptiveCards/webpack/universalModuleDefinition","webpack://AdaptiveCards/./src/activity-request.ts","webpack://AdaptiveCards/./src/adaptive-applet.ts","webpack://AdaptiveCards/./src/adaptivecards.ts","webpack://AdaptiveCards/./src/card-elements.ts","webpack://AdaptiveCards/./src/card-object.ts","webpack://AdaptiveCards/./src/carousel.ts","webpack://AdaptiveCards/./src/channel-adapter.ts","webpack://AdaptiveCards/./src/controls/collection.ts","webpack://AdaptiveCards/./src/controls/constants.ts","webpack://AdaptiveCards/./src/controls/index.ts","webpack://AdaptiveCards/./src/controls/menu-item.ts","webpack://AdaptiveCards/./src/controls/popup-control.ts","webpack://AdaptiveCards/./src/controls/popup-menu.ts","webpack://AdaptiveCards/./src/enums.ts","webpack://AdaptiveCards/./src/host-capabilities.ts","webpack://AdaptiveCards/./src/host-config.ts","webpack://AdaptiveCards/./src/registry.ts","webpack://AdaptiveCards/./src/serialization.ts","webpack://AdaptiveCards/./src/shared.ts","webpack://AdaptiveCards/./src/strings.ts","webpack://AdaptiveCards/./src/table.ts","webpack://AdaptiveCards/./src/text-formatters.ts","webpack://AdaptiveCards/./src/utils.ts","webpack://AdaptiveCards/./node_modules/ssr-window/ssr-window.esm.js","webpack://AdaptiveCards/./node_modules/dom7/dom7.esm.js","webpack://AdaptiveCards/./node_modules/swiper/shared/dom.js","webpack://AdaptiveCards/./node_modules/swiper/shared/utils.js","webpack://AdaptiveCards/./node_modules/swiper/shared/get-support.js","webpack://AdaptiveCards/./node_modules/swiper/shared/get-device.js","webpack://AdaptiveCards/./node_modules/swiper/shared/get-browser.js","webpack://AdaptiveCards/./node_modules/swiper/core/events-emitter.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateSize.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateSlides.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateAutoHeight.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateSlidesOffset.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateSlidesProgress.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateProgress.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateSlidesClasses.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateActiveIndex.js","webpack://AdaptiveCards/./node_modules/swiper/core/update/updateClickedSlide.js","webpack://AdaptiveCards/./node_modules/swiper/core/transition/transitionEmit.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideTo.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideToLoop.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideNext.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slidePrev.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideReset.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideToClosest.js","webpack://AdaptiveCards/./node_modules/swiper/core/slide/slideToClickedSlide.js","webpack://AdaptiveCards/./node_modules/swiper/core/loop/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/loop/loopCreate.js","webpack://AdaptiveCards/./node_modules/swiper/core/loop/loopFix.js","webpack://AdaptiveCards/./node_modules/swiper/core/loop/loopDestroy.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onTouchStart.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onTouchMove.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onTouchEnd.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onResize.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onClick.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/onScroll.js","webpack://AdaptiveCards/./node_modules/swiper/core/events/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/breakpoints/setBreakpoint.js","webpack://AdaptiveCards/./node_modules/swiper/core/classes/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/classes/addClasses.js","webpack://AdaptiveCards/./node_modules/swiper/core/classes/removeClasses.js","webpack://AdaptiveCards/./node_modules/swiper/core/defaults.js","webpack://AdaptiveCards/./node_modules/swiper/core/moduleExtendParams.js","webpack://AdaptiveCards/./node_modules/swiper/core/core.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/getTranslate.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/setTranslate.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/minTranslate.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/maxTranslate.js","webpack://AdaptiveCards/./node_modules/swiper/core/translate/translateTo.js","webpack://AdaptiveCards/./node_modules/swiper/core/transition/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/transition/setTransition.js","webpack://AdaptiveCards/./node_modules/swiper/core/transition/transitionStart.js","webpack://AdaptiveCards/./node_modules/swiper/core/transition/transitionEnd.js","webpack://AdaptiveCards/./node_modules/swiper/core/grab-cursor/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/grab-cursor/setGrabCursor.js","webpack://AdaptiveCards/./node_modules/swiper/core/grab-cursor/unsetGrabCursor.js","webpack://AdaptiveCards/./node_modules/swiper/core/breakpoints/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/breakpoints/getBreakpoint.js","webpack://AdaptiveCards/./node_modules/swiper/core/check-overflow/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/images/index.js","webpack://AdaptiveCards/./node_modules/swiper/core/images/loadImage.js","webpack://AdaptiveCards/./node_modules/swiper/core/images/preloadImages.js","webpack://AdaptiveCards/./node_modules/swiper/core/modules/resize/resize.js","webpack://AdaptiveCards/./node_modules/swiper/core/modules/observer/observer.js","webpack://AdaptiveCards/./node_modules/swiper/modules/virtual/virtual.js","webpack://AdaptiveCards/./node_modules/swiper/modules/keyboard/keyboard.js","webpack://AdaptiveCards/./node_modules/swiper/modules/mousewheel/mousewheel.js","webpack://AdaptiveCards/./node_modules/swiper/shared/create-element-if-not-defined.js","webpack://AdaptiveCards/./node_modules/swiper/modules/navigation/navigation.js","webpack://AdaptiveCards/./node_modules/swiper/shared/classes-to-selector.js","webpack://AdaptiveCards/./node_modules/swiper/modules/pagination/pagination.js","webpack://AdaptiveCards/./node_modules/swiper/modules/scrollbar/scrollbar.js","webpack://AdaptiveCards/./node_modules/swiper/modules/parallax/parallax.js","webpack://AdaptiveCards/./node_modules/swiper/modules/zoom/zoom.js","webpack://AdaptiveCards/./node_modules/swiper/modules/lazy/lazy.js","webpack://AdaptiveCards/./node_modules/swiper/modules/controller/controller.js","webpack://AdaptiveCards/./node_modules/swiper/modules/a11y/a11y.js","webpack://AdaptiveCards/./node_modules/swiper/modules/history/history.js","webpack://AdaptiveCards/./node_modules/swiper/modules/hash-navigation/hash-navigation.js","webpack://AdaptiveCards/./node_modules/swiper/modules/autoplay/autoplay.js","webpack://AdaptiveCards/./node_modules/swiper/modules/thumbs/thumbs.js","webpack://AdaptiveCards/./node_modules/swiper/modules/free-mode/free-mode.js","webpack://AdaptiveCards/./node_modules/swiper/modules/grid/grid.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/methods/appendSlide.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/methods/prependSlide.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/methods/addSlide.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/methods/removeSlide.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/methods/removeAllSlides.js","webpack://AdaptiveCards/./node_modules/swiper/modules/manipulation/manipulation.js","webpack://AdaptiveCards/./node_modules/swiper/shared/effect-init.js","webpack://AdaptiveCards/./node_modules/swiper/shared/effect-target.js","webpack://AdaptiveCards/./node_modules/swiper/shared/effect-virtual-transition-end.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-fade/effect-fade.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-cube/effect-cube.js","webpack://AdaptiveCards/./node_modules/swiper/shared/create-shadow.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-flip/effect-flip.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-coverflow/effect-coverflow.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-creative/effect-creative.js","webpack://AdaptiveCards/./node_modules/swiper/modules/effect-cards/effect-cards.js","webpack://AdaptiveCards/webpack/bootstrap","webpack://AdaptiveCards/webpack/runtime/define property getters","webpack://AdaptiveCards/webpack/runtime/hasOwnProperty shorthand","webpack://AdaptiveCards/webpack/runtime/make namespace object","webpack://AdaptiveCards/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AdaptiveCards\"] = factory();\n\telse\n\t\troot[\"AdaptiveCards\"] = factory();\n})(this, function() {\nreturn ","// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport {\r\n    Authentication,\r\n    AuthCardButton,\r\n    UniversalAction,\r\n    TokenExchangeResource\r\n} from \"./card-elements\";\r\n\r\nexport enum ActivityRequestTrigger {\r\n    Automatic = \"automatic\",\r\n    Manual = \"manual\"\r\n}\r\n\r\nexport interface IActivityRequest {\r\n    readonly action: UniversalAction;\r\n    readonly trigger: ActivityRequestTrigger;\r\n    readonly attemptNumber: number;\r\n    readonly consecutiveActions: number;\r\n\r\n    authCode?: string;\r\n    authToken?: string;\r\n\r\n    retryAsync(): void;\r\n}\r\n\r\nexport class ActivityRequestError {\r\n    constructor(readonly code?: string, readonly message?: string) {}\r\n}\r\n\r\nexport abstract class ActivityResponse {\r\n    constructor(readonly request: IActivityRequest) {}\r\n}\r\n\r\nexport class SuccessResponse extends ActivityResponse {\r\n    constructor(readonly request: IActivityRequest, readonly rawContent?: string) {\r\n        super(request);\r\n    }\r\n}\r\n\r\nexport class ErrorResponse extends ActivityResponse {\r\n    constructor(readonly request: IActivityRequest, readonly error: ActivityRequestError) {\r\n        super(request);\r\n    }\r\n}\r\n\r\nexport class LoginRequestResponse extends ActivityResponse {\r\n    private _auth: Authentication;\r\n    readonly signinButton?: AuthCardButton;\r\n\r\n    constructor(readonly request: IActivityRequest, auth: Authentication) {\r\n        super(request);\r\n        this._auth = auth;\r\n\r\n        for (const button of this._auth.buttons) {\r\n            if (button.type === \"signin\" && button.value !== undefined) {\r\n                try {\r\n                    new URL(button.value);\r\n\r\n                    this.signinButton = button;\r\n\r\n                    break;\r\n                } catch (e) {\r\n                    // Ignore parsing error\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get tokenExchangeResource(): TokenExchangeResource | undefined {\r\n        return this._auth.tokenExchangeResource;\r\n    }\r\n}\r\n","// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport * as Utils from \"./utils\";\r\nimport { GlobalSettings } from \"./shared\";\r\nimport { ChannelAdapter } from \"./channel-adapter\";\r\nimport {\r\n    ActivityResponse,\r\n    IActivityRequest,\r\n    ActivityRequestTrigger,\r\n    SuccessResponse,\r\n    ErrorResponse,\r\n    LoginRequestResponse\r\n} from \"./activity-request\";\r\nimport { Strings } from \"./strings\";\r\nimport {\r\n    SubmitAction,\r\n    ExecuteAction,\r\n    SerializationContext,\r\n    AdaptiveCard,\r\n    Action,\r\n    Input,\r\n    TokenExchangeResource,\r\n    AuthCardButton,\r\n    UniversalAction,\r\n    ChoiceSetInput,\r\n    DataQuery\r\n} from \"./card-elements\";\r\nimport { Versions } from \"./serialization\";\r\nimport { HostConfig } from \"./host-config\";\r\n\r\nfunction logEvent(level: Enums.LogLevel, message?: any, ...optionalParams: any[]) {\r\n    if (GlobalSettings.applets.logEnabled) {\r\n        if (GlobalSettings.applets.onLogEvent) {\r\n            GlobalSettings.applets.onLogEvent(level, message, optionalParams);\r\n        } else {\r\n            /* eslint-disable no-console */\r\n            switch (level) {\r\n                case Enums.LogLevel.Warning:\r\n                    console.warn(message, optionalParams);\r\n                    break;\r\n                case Enums.LogLevel.Error:\r\n                    console.error(message, optionalParams);\r\n                    break;\r\n                default:\r\n                    console.log(message, optionalParams);\r\n                    break;\r\n            }\r\n            /* eslint-enable no-console */\r\n        }\r\n    }\r\n}\r\n\r\nclass ActivityRequest implements IActivityRequest {\r\n    constructor(\r\n        readonly action: UniversalAction,\r\n        readonly trigger: ActivityRequestTrigger,\r\n        readonly consecutiveActions: number\r\n    ) {}\r\n\r\n    authCode?: string;\r\n    authToken?: string;\r\n    attemptNumber: number = 0;\r\n\r\n    onSend: (sender: ActivityRequest) => void;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/require-await\r\n    async retryAsync(): Promise<void> {\r\n        if (this.onSend) {\r\n            this.onSend(this);\r\n        }\r\n    }\r\n}\r\n\r\nexport class AdaptiveApplet {\r\n    private static readonly _submitMagicCodeActionId = \"submitMagicCode\";\r\n    private static readonly _cancelMagicCodeAuthActionId = \"cancelMagicCodeAuth\";\r\n\r\n    private _card?: AdaptiveCard;\r\n    private _cardPayload: any;\r\n    private _choiceSet?: ChoiceSetInput;\r\n    private _allowAutomaticCardUpdate: boolean = false;\r\n    private _refreshButtonHostElement: HTMLElement;\r\n    private _cardHostElement: HTMLElement;\r\n    private _progressOverlay?: HTMLElement;\r\n\r\n    private displayCard(card: AdaptiveCard) {\r\n        if (card.renderedElement) {\r\n            Utils.clearElementChildren(this._cardHostElement);\r\n\r\n            this._refreshButtonHostElement.style.display = \"none\";\r\n\r\n            this._cardHostElement.appendChild(card.renderedElement);\r\n        } else {\r\n            throw new Error(\"displayCard: undefined card.\");\r\n        }\r\n    }\r\n\r\n    private showManualRefreshButton(refreshAction: ExecuteAction) {\r\n        const displayBuiltInManualRefreshButton = this.onShowManualRefreshButton\r\n            ? this.onShowManualRefreshButton(this)\r\n            : true;\r\n\r\n        if (displayBuiltInManualRefreshButton) {\r\n            this._refreshButtonHostElement.style.display = \"none\";\r\n\r\n            let renderedRefreshButton: HTMLElement | undefined = undefined;\r\n\r\n            if (this.onRenderManualRefreshButton) {\r\n                renderedRefreshButton = this.onRenderManualRefreshButton(this);\r\n            } else {\r\n                let message = Strings.runtime.refreshThisCard();\r\n\r\n                if (GlobalSettings.applets.refresh.mode === Enums.RefreshMode.Automatic) {\r\n                    let autoRefreshPausedMessage = Strings.runtime.automaticRefreshPaused();\r\n\r\n                    if (autoRefreshPausedMessage[autoRefreshPausedMessage.length - 1] !== \" \") {\r\n                        autoRefreshPausedMessage += \" \";\r\n                    }\r\n\r\n                    message = Strings.runtime.clckToRestartAutomaticRefresh();\r\n                }\r\n\r\n                const cardPayload = {\r\n                    type: \"AdaptiveCard\",\r\n                    version: \"1.2\",\r\n                    body: [\r\n                        {\r\n                            type: \"RichTextBlock\",\r\n                            horizontalAlignment: \"right\",\r\n                            inlines: [\r\n                                {\r\n                                    type: \"TextRun\",\r\n                                    text: message,\r\n                                    selectAction: {\r\n                                        type: \"Action.Submit\",\r\n                                        id: \"refreshCard\"\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                };\r\n\r\n                const card = new AdaptiveCard();\r\n                card.parse(cardPayload, new SerializationContext(Versions.v1_2));\r\n                card.onExecuteAction = (action: Action) => {\r\n                    if (action.id === \"refreshCard\") {\r\n                        Utils.clearElementChildren(this._refreshButtonHostElement);\r\n\r\n                        this.internalExecuteAction(\r\n                            refreshAction,\r\n                            ActivityRequestTrigger.Automatic,\r\n                            0\r\n                        );\r\n                    }\r\n                };\r\n\r\n                renderedRefreshButton = card.render();\r\n            }\r\n\r\n            if (renderedRefreshButton) {\r\n                Utils.clearElementChildren(this._refreshButtonHostElement);\r\n\r\n                this._refreshButtonHostElement.appendChild(renderedRefreshButton);\r\n\r\n                this._refreshButtonHostElement.style.removeProperty(\"display\");\r\n            }\r\n        }\r\n    }\r\n\r\n    private createActivityRequest(\r\n        action: UniversalAction,\r\n        trigger: ActivityRequestTrigger,\r\n        consecutiveActions: number\r\n    ): ActivityRequest | undefined {\r\n        if (this.card) {\r\n            const request = new ActivityRequest(action, trigger, consecutiveActions);\r\n            request.onSend = (sender: ActivityRequest) => {\r\n                sender.attemptNumber++;\r\n\r\n                void this.internalSendActivityRequestAsync(request);\r\n            };\r\n\r\n            const cancel = this.onPrepareActivityRequest\r\n                ? !this.onPrepareActivityRequest(this, request, action)\r\n                : false;\r\n\r\n            return cancel ? undefined : request;\r\n        } else {\r\n            throw new Error(\"createActivityRequest: no card has been set.\");\r\n        }\r\n    }\r\n\r\n    private createMagicCodeInputCard(attemptNumber: number): AdaptiveCard {\r\n        const payload = {\r\n            type: \"AdaptiveCard\",\r\n            version: \"1.0\",\r\n            body: [\r\n                {\r\n                    type: \"TextBlock\",\r\n                    color: \"attention\",\r\n                    text: attemptNumber === 1 ? undefined : \"That didn't work... let's try again.\",\r\n                    wrap: true,\r\n                    horizontalAlignment: \"center\"\r\n                },\r\n                {\r\n                    type: \"TextBlock\",\r\n                    text: 'Please login in the popup. You will obtain a magic code. Paste that code below and select \"Submit\"',\r\n                    wrap: true,\r\n                    horizontalAlignment: \"center\"\r\n                },\r\n                {\r\n                    type: \"Input.Text\",\r\n                    id: \"magicCode\",\r\n                    placeholder: \"Enter magic code\"\r\n                },\r\n                {\r\n                    type: \"ActionSet\",\r\n                    horizontalAlignment: \"center\",\r\n                    actions: [\r\n                        {\r\n                            type: \"Action.Submit\",\r\n                            id: AdaptiveApplet._submitMagicCodeActionId,\r\n                            title: \"Submit\"\r\n                        },\r\n                        {\r\n                            type: \"Action.Submit\",\r\n                            id: AdaptiveApplet._cancelMagicCodeAuthActionId,\r\n                            title: \"Cancel\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        };\r\n\r\n        const card = new AdaptiveCard();\r\n        card.parse(payload);\r\n\r\n        return card;\r\n    }\r\n\r\n    private cancelAutomaticRefresh() {\r\n        if (this._allowAutomaticCardUpdate) {\r\n            logEvent(\r\n                Enums.LogLevel.Warning,\r\n                \"Automatic card refresh has been cancelled as a result of the user interacting with the card.\"\r\n            );\r\n        }\r\n\r\n        this._allowAutomaticCardUpdate = false;\r\n    }\r\n\r\n    private createSerializationContext(): SerializationContext {\r\n        return this.onCreateSerializationContext\r\n            ? this.onCreateSerializationContext(this)\r\n            : new SerializationContext();\r\n    }\r\n\r\n    private internalSetCard(payload: any, consecutiveActions: number) {\r\n        if (typeof payload === \"object\" && payload[\"type\"] === \"AdaptiveCard\") {\r\n            this._cardPayload = payload;\r\n        }\r\n\r\n        if (this._cardPayload) {\r\n            try {\r\n                const card = new AdaptiveCard();\r\n\r\n                if (this.hostConfig) {\r\n                    card.hostConfig = this.hostConfig;\r\n                }\r\n\r\n                const serializationContext = this.createSerializationContext();\r\n\r\n                card.parse(this._cardPayload, serializationContext);\r\n\r\n                const doChangeCard = this.onCardChanging\r\n                    ? this.onCardChanging(this, this._cardPayload)\r\n                    : true;\r\n\r\n                if (doChangeCard) {\r\n                    this._card = card;\r\n\r\n                    if (\r\n                        this._card.authentication &&\r\n                        this._card.authentication.tokenExchangeResource &&\r\n                        this.onPrefetchSSOToken\r\n                    ) {\r\n                        this.onPrefetchSSOToken(\r\n                            this,\r\n                            this._card.authentication.tokenExchangeResource\r\n                        );\r\n                    }\r\n\r\n                    this._card.onExecuteAction = (action: Action) => {\r\n                        // If the user takes an action, cancel any pending automatic refresh\r\n                        this.cancelAutomaticRefresh();\r\n\r\n                        this.internalExecuteAction(action, ActivityRequestTrigger.Manual, 0);\r\n                    };\r\n                    this._card.onInputValueChanged = (input: Input) => {\r\n                        // If the user modifies an input, cancel any pending automatic refresh\r\n                        this.cancelAutomaticRefresh();\r\n                        if (input instanceof ChoiceSetInput && input.isDynamicTypeahead()) {\r\n                            const filter = input.getFilterForDynamicSearch();\r\n                            if (filter) {\r\n                                const dataQueryAction = new DataQuery();\r\n                                dataQueryAction.filter = filter;\r\n                                dataQueryAction.dataset = input.choicesData?.dataset || \"\";\r\n                                dataQueryAction.count = input.choicesData?.count;\r\n                                dataQueryAction.skip = input.choicesData?.skip;\r\n\r\n                                this._choiceSet = input;\r\n                                this.internalExecuteAction(\r\n                                    dataQueryAction,\r\n                                    ActivityRequestTrigger.Manual,\r\n                                    0 // consecutiveActions\r\n                                );\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    this._card.render();\r\n\r\n                    if (this._card.renderedElement) {\r\n                        this.displayCard(this._card);\r\n\r\n                        if (this.onCardChanged) {\r\n                            this.onCardChanged(this);\r\n                        }\r\n\r\n                        if (this._card.refresh) {\r\n                            if (\r\n                                GlobalSettings.applets.refresh.mode ===\r\n                                    Enums.RefreshMode.Automatic &&\r\n                                consecutiveActions <\r\n                                    GlobalSettings.applets.refresh\r\n                                        .maximumConsecutiveAutomaticRefreshes\r\n                            ) {\r\n                                if (\r\n                                    GlobalSettings.applets.refresh.timeBetweenAutomaticRefreshes <=\r\n                                    0\r\n                                ) {\r\n                                    logEvent(\r\n                                        Enums.LogLevel.Info,\r\n                                        \"Triggering automatic card refresh number \" +\r\n                                            (consecutiveActions + 1)\r\n                                    );\r\n\r\n                                    this.internalExecuteAction(\r\n                                        this._card.refresh.action,\r\n                                        ActivityRequestTrigger.Automatic,\r\n                                        consecutiveActions + 1\r\n                                    );\r\n                                } else {\r\n                                    logEvent(\r\n                                        Enums.LogLevel.Info,\r\n                                        \"Scheduling automatic card refresh number \" +\r\n                                            (consecutiveActions + 1) +\r\n                                            \" in \" +\r\n                                            GlobalSettings.applets.refresh\r\n                                                .timeBetweenAutomaticRefreshes +\r\n                                            \"ms\"\r\n                                    );\r\n\r\n                                    const action = this._card.refresh.action;\r\n\r\n                                    this._allowAutomaticCardUpdate = true;\r\n\r\n                                    window.setTimeout(() => {\r\n                                        if (this._allowAutomaticCardUpdate) {\r\n                                            this.internalExecuteAction(\r\n                                                action,\r\n                                                ActivityRequestTrigger.Automatic,\r\n                                                consecutiveActions + 1\r\n                                            );\r\n                                        }\r\n                                    }, GlobalSettings.applets.refresh.timeBetweenAutomaticRefreshes);\r\n                                }\r\n                            } else if (\r\n                                GlobalSettings.applets.refresh.mode !== Enums.RefreshMode.Disabled\r\n                            ) {\r\n                                if (consecutiveActions > 0) {\r\n                                    logEvent(\r\n                                        Enums.LogLevel.Warning,\r\n                                        \"Stopping automatic refreshes after \" +\r\n                                            consecutiveActions +\r\n                                            \" consecutive refreshes.\"\r\n                                    );\r\n                                } else {\r\n                                    logEvent(\r\n                                        Enums.LogLevel.Warning,\r\n                                        \"The card has a refresh section, but automatic refreshes are disabled.\"\r\n                                    );\r\n                                }\r\n\r\n                                if (\r\n                                    GlobalSettings.applets.refresh\r\n                                        .allowManualRefreshesAfterAutomaticRefreshes ||\r\n                                    GlobalSettings.applets.refresh.mode === Enums.RefreshMode.Manual\r\n                                ) {\r\n                                    logEvent(Enums.LogLevel.Info, \"Showing manual refresh button.\");\r\n\r\n                                    this.showManualRefreshButton(this._card.refresh.action);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                // Ignore all errors\r\n                logEvent(Enums.LogLevel.Error, \"setCard: \" + error);\r\n            }\r\n        }\r\n    }\r\n\r\n    private internalExecuteAction(\r\n        action: Action,\r\n        trigger: ActivityRequestTrigger,\r\n        consecutiveActions: number\r\n    ) {\r\n        if (action instanceof UniversalAction) {\r\n            if (this.channelAdapter) {\r\n                const request = this.createActivityRequest(action, trigger, consecutiveActions);\r\n\r\n                if (request) {\r\n                    void request.retryAsync();\r\n                }\r\n            } else {\r\n                throw new Error(\"internalExecuteAction: No channel adapter set.\");\r\n            }\r\n        }\r\n\r\n        if (this.onAction) {\r\n            this.onAction(this, action);\r\n        }\r\n    }\r\n\r\n    private createProgressOverlay(request: ActivityRequest): HTMLElement | undefined {\r\n        if (!this._progressOverlay) {\r\n            if (this.onCreateProgressOverlay) {\r\n                this._progressOverlay = this.onCreateProgressOverlay(this, request);\r\n            } else {\r\n                this._progressOverlay = document.createElement(\"div\");\r\n                this._progressOverlay.className = \"aaf-progress-overlay\";\r\n\r\n                const spinner = document.createElement(\"div\");\r\n                spinner.className = \"aaf-spinner\";\r\n                spinner.style.width = \"28px\";\r\n                spinner.style.height = \"28px\";\r\n\r\n                this._progressOverlay.appendChild(spinner);\r\n            }\r\n        }\r\n\r\n        return this._progressOverlay;\r\n    }\r\n\r\n    private removeProgressOverlay(request: IActivityRequest) {\r\n        if (this.onRemoveProgressOverlay) {\r\n            this.onRemoveProgressOverlay(this, request);\r\n        }\r\n\r\n        if (this._progressOverlay !== undefined) {\r\n            this.renderedElement.removeChild(this._progressOverlay);\r\n\r\n            this._progressOverlay = undefined;\r\n        }\r\n    }\r\n\r\n    private activityRequestSucceeded(\r\n        response: SuccessResponse,\r\n        parsedContent: string | AdaptiveCard | undefined\r\n    ) {\r\n        if (this.onActivityRequestSucceeded) {\r\n            this.onActivityRequestSucceeded(this, response, parsedContent);\r\n        }\r\n    }\r\n\r\n    private activityRequestFailed(response: ErrorResponse): number {\r\n        return this.onActivityRequestFailed\r\n            ? this.onActivityRequestFailed(this, response)\r\n            : GlobalSettings.applets.defaultTimeBetweenRetryAttempts;\r\n    }\r\n\r\n    private showAuthCodeInputDialog(request: ActivityRequest) {\r\n        const showBuiltInAuthCodeInputCard = this.onShowAuthCodeInputDialog\r\n            ? this.onShowAuthCodeInputDialog(this, request)\r\n            : true;\r\n\r\n        if (showBuiltInAuthCodeInputCard) {\r\n            const authCodeInputCard = this.createMagicCodeInputCard(request.attemptNumber);\r\n            authCodeInputCard.render();\r\n            authCodeInputCard.onExecuteAction = (submitMagicCodeAction: Action) => {\r\n                if (this.card && submitMagicCodeAction instanceof SubmitAction) {\r\n                    switch (submitMagicCodeAction.id) {\r\n                        case AdaptiveApplet._submitMagicCodeActionId:\r\n                            let authCode: string | undefined = undefined;\r\n\r\n                            if (\r\n                                submitMagicCodeAction.data &&\r\n                                typeof (<any>submitMagicCodeAction.data)[\"magicCode\"] === \"string\"\r\n                            ) {\r\n                                authCode = (<any>submitMagicCodeAction.data)[\"magicCode\"];\r\n                            }\r\n\r\n                            if (authCode) {\r\n                                this.displayCard(this.card);\r\n\r\n                                request.authCode = authCode;\r\n                                void request.retryAsync();\r\n                            } else {\r\n                                alert(\"Please enter the magic code you received.\");\r\n                            }\r\n\r\n                            break;\r\n                        case AdaptiveApplet._cancelMagicCodeAuthActionId:\r\n                            logEvent(Enums.LogLevel.Warning, \"Authentication cancelled by user.\");\r\n\r\n                            this.displayCard(this.card);\r\n\r\n                            break;\r\n                        default:\r\n                            logEvent(\r\n                                Enums.LogLevel.Error,\r\n                                \"Unexpected action taken from magic code input card (id = \" +\r\n                                    submitMagicCodeAction.id +\r\n                                    \")\"\r\n                            );\r\n\r\n                            alert(Strings.magicCodeInputCard.somethingWentWrong());\r\n\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n\r\n            this.displayCard(authCodeInputCard);\r\n        }\r\n    }\r\n\r\n    private async internalSendActivityRequestAsync(request: ActivityRequest) {\r\n        if (!this.channelAdapter) {\r\n            throw new Error(\"internalSendActivityRequestAsync: channelAdapter is not set.\");\r\n        }\r\n        const { action } = request;\r\n        if (action instanceof ExecuteAction) {\r\n            await this.internalSendExecuteRequestAsync(request);\r\n        } else if (action instanceof DataQuery) {\r\n            await this.internalSendDataQueryRequestAsync(request);\r\n        } else {\r\n            throw new Error(\"internalSendActivityRequestAsync: Unhandled Action Type\");\r\n        }\r\n    }\r\n\r\n    private async internalSendExecuteRequestAsync(request: ActivityRequest) {\r\n        if (!this.channelAdapter) {\r\n            throw new Error(\"internalSendExecuteRequestAsync: channelAdapter is not set.\");\r\n        }\r\n\r\n        const overlay = this.createProgressOverlay(request);\r\n\r\n        if (overlay !== undefined) {\r\n            this.renderedElement.appendChild(overlay);\r\n        }\r\n\r\n        let done = false;\r\n\r\n        while (!done) {\r\n            let response: ActivityResponse | undefined = undefined;\r\n\r\n            if (request.attemptNumber === 1) {\r\n                logEvent(\r\n                    Enums.LogLevel.Info,\r\n                    \"Sending activity request to channel (attempt \" + request.attemptNumber + \")\"\r\n                );\r\n            } else {\r\n                logEvent(\r\n                    Enums.LogLevel.Info,\r\n                    \"Re-sending activity request to channel (attempt \" + request.attemptNumber + \")\"\r\n                );\r\n            }\r\n\r\n            try {\r\n                response = await this.channelAdapter.sendRequestAsync(request);\r\n            } catch (error) {\r\n                logEvent(Enums.LogLevel.Error, \"Activity request failed: \" + error);\r\n\r\n                this.removeProgressOverlay(request);\r\n\r\n                done = true;\r\n            }\r\n\r\n            if (response) {\r\n                if (response instanceof SuccessResponse) {\r\n                    this.removeProgressOverlay(request);\r\n\r\n                    if (response.rawContent === undefined) {\r\n                        throw new Error(\r\n                            \"internalSendExecuteRequestAsync: Action.Execute result is undefined\"\r\n                        );\r\n                    }\r\n\r\n                    let parsedContent = response.rawContent;\r\n\r\n                    try {\r\n                        parsedContent = JSON.parse(response.rawContent);\r\n                    } catch {\r\n                        // Leave parseContent as is\r\n                    }\r\n\r\n                    if (typeof parsedContent === \"string\") {\r\n                        logEvent(\r\n                            Enums.LogLevel.Info,\r\n                            \"The activity request returned a string after \" +\r\n                                request.attemptNumber +\r\n                                \" attempt(s).\"\r\n                        );\r\n\r\n                        this.activityRequestSucceeded(response, parsedContent);\r\n                    } else if (\r\n                        typeof parsedContent === \"object\" &&\r\n                        parsedContent[\"type\"] === \"AdaptiveCard\"\r\n                    ) {\r\n                        logEvent(\r\n                            Enums.LogLevel.Info,\r\n                            \"The activity request returned an Adaptive Card after \" +\r\n                                request.attemptNumber +\r\n                                \" attempt(s).\"\r\n                        );\r\n\r\n                        this.internalSetCard(parsedContent, request.consecutiveActions);\r\n                        this.activityRequestSucceeded(response, this.card);\r\n                    } else {\r\n                        throw new Error(\r\n                            \"internalSendExecuteRequestAsync: Action.Execute result is of unsupported type (\" +\r\n                                typeof response.rawContent +\r\n                                \")\"\r\n                        );\r\n                    }\r\n\r\n                    done = true;\r\n                } else if (response instanceof ErrorResponse) {\r\n                    const retryIn: number = this.activityRequestFailed(response);\r\n\r\n                    if (\r\n                        retryIn >= 0 &&\r\n                        request.attemptNumber < GlobalSettings.applets.maximumRetryAttempts\r\n                    ) {\r\n                        logEvent(\r\n                            Enums.LogLevel.Warning,\r\n                            `Activity request failed: ${response.error.message}. Retrying in ${retryIn}ms`\r\n                        );\r\n\r\n                        request.attemptNumber++;\r\n\r\n                        await new Promise<void>((resolve, _reject) => {\r\n                            window.setTimeout(() => {\r\n                                resolve();\r\n                            }, retryIn);\r\n                        });\r\n                    } else {\r\n                        logEvent(\r\n                            Enums.LogLevel.Error,\r\n                            `Activity request failed: ${response.error.message}. Giving up after ${request.attemptNumber} attempt(s)`\r\n                        );\r\n\r\n                        this.removeProgressOverlay(request);\r\n\r\n                        done = true;\r\n                    }\r\n                } else if (response instanceof LoginRequestResponse) {\r\n                    logEvent(\r\n                        Enums.LogLevel.Info,\r\n                        \"The activity request returned a LoginRequestResponse after \" +\r\n                            request.attemptNumber +\r\n                            \" attempt(s).\"\r\n                    );\r\n\r\n                    if (request.attemptNumber <= GlobalSettings.applets.maximumRetryAttempts) {\r\n                        let attemptOAuth = true;\r\n\r\n                        if (response.tokenExchangeResource && this.onSSOTokenNeeded) {\r\n                            // Attempt to use SSO. The host will return true if it can handle SSO, in which case\r\n                            // we bypass OAuth\r\n                            attemptOAuth = !this.onSSOTokenNeeded(\r\n                                this,\r\n                                request,\r\n                                response.tokenExchangeResource\r\n                            );\r\n                        }\r\n\r\n                        if (attemptOAuth) {\r\n                            // Attempt to use OAuth\r\n                            this.removeProgressOverlay(request);\r\n\r\n                            if (response.signinButton === undefined) {\r\n                                throw new Error(\r\n                                    \"internalSendExecuteRequestAsync: the login request doesn't contain a valid signin URL.\"\r\n                                );\r\n                            }\r\n\r\n                            logEvent(\r\n                                Enums.LogLevel.Info,\r\n                                \"Login required at \" + response.signinButton.value\r\n                            );\r\n\r\n                            if (this.onShowSigninPrompt) {\r\n                                // Bypass the built-in auth prompt if the host app handles it\r\n                                this.onShowSigninPrompt(this, request, response.signinButton);\r\n                            } else {\r\n                                this.showAuthCodeInputDialog(request);\r\n\r\n                                const left =\r\n                                    window.screenX +\r\n                                    (window.outerWidth - GlobalSettings.applets.authPromptWidth) /\r\n                                        2;\r\n                                const top =\r\n                                    window.screenY +\r\n                                    (window.outerHeight - GlobalSettings.applets.authPromptHeight) /\r\n                                        2;\r\n\r\n                                window.open(\r\n                                    response.signinButton.value,\r\n                                    response.signinButton.title\r\n                                        ? response.signinButton.title\r\n                                        : \"Sign in\",\r\n                                    `width=${GlobalSettings.applets.authPromptWidth},height=${GlobalSettings.applets.authPromptHeight},left=${left},top=${top}`\r\n                                );\r\n                            }\r\n                        }\r\n                    } else {\r\n                        logEvent(\r\n                            Enums.LogLevel.Error,\r\n                            \"Authentication failed. Giving up after \" +\r\n                                request.attemptNumber +\r\n                                \" attempt(s)\"\r\n                        );\r\n\r\n                        alert(Strings.magicCodeInputCard.authenticationFailed());\r\n                    }\r\n\r\n                    // Exit the loop. After a LoginRequestResponse, the host app is responsible for retrying the request\r\n                    break;\r\n                } else {\r\n                    throw new Error(\"Unhandled response type: \" + JSON.stringify(response));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private async internalSendDataQueryRequestAsync(request: ActivityRequest) {\r\n        if (!this.channelAdapter) {\r\n            throw new Error(\"internalSendDataQueryRequestAsync: channel adapter not set\");\r\n        }\r\n        const filter = (request.action as DataQuery).filter;\r\n        if (this._choiceSet) {\r\n            this._choiceSet.showLoadingIndicator();\r\n            let response: ActivityResponse | undefined = undefined;\r\n            try {\r\n                response = await this.channelAdapter.sendRequestAsync(request);\r\n            } catch (error) {\r\n                this._choiceSet.showErrorIndicator(filter, \"Unable to load\");\r\n                logEvent(Enums.LogLevel.Error, \"Activity request failed: \" + error);\r\n            }\r\n            if (response) {\r\n                if (response instanceof SuccessResponse) {\r\n                    const rawResponse = response.rawContent;\r\n                    if (rawResponse) {\r\n                        let parsedResponse;\r\n                        try {\r\n                            parsedResponse = JSON.parse(rawResponse);\r\n                        } catch (error) {\r\n                            this._choiceSet.showErrorIndicator(filter, \"Unable to load\");\r\n                            throw new Error(\r\n                                \"internalSendDataQueryRequestAsync: Cannot parse response object: \" +\r\n                                    rawResponse\r\n                            );\r\n                        }\r\n                        if (typeof parsedResponse === \"object\") {\r\n                            this._choiceSet.renderChoices(filter, parsedResponse);\r\n                            this.activityRequestSucceeded(response, rawResponse);\r\n                        } else {\r\n                            this._choiceSet.showErrorIndicator(filter, \"Error loading results\");\r\n                            throw new Error(\r\n                                \"internalSendDataQueryRequestAsync: Data.Query result is of unsupported type (\" +\r\n                                    typeof rawResponse +\r\n                                    \")\"\r\n                            );\r\n                        }\r\n                    } else {\r\n                        this._choiceSet.showErrorIndicator(filter, \"Unable to load\");\r\n                        throw new Error(\r\n                            \"internalSendDataQueryRequestAsync: Data.Query result is undefined\"\r\n                        );\r\n                    }\r\n                } else if (response instanceof ErrorResponse) {\r\n                    this._choiceSet.showErrorIndicator(\r\n                        filter,\r\n                        response.error.message || \"Error loading results\"\r\n                    );\r\n                    logEvent(\r\n                        Enums.LogLevel.Error,\r\n                        `Activity request failed: ${response.error.message}.`\r\n                    );\r\n                    this.activityRequestFailed(response);\r\n                } else {\r\n                    this._choiceSet.showErrorIndicator(filter, \"Unable to load\");\r\n                    throw new Error(\"Unhandled response type: \" + JSON.stringify(response));\r\n                }\r\n            } else {\r\n                this._choiceSet.removeLoadingIndicator();\r\n            }\r\n        }\r\n    }\r\n\r\n    readonly renderedElement: HTMLElement;\r\n\r\n    hostConfig?: HostConfig;\r\n    channelAdapter?: ChannelAdapter;\r\n\r\n    onCardChanging?: (sender: AdaptiveApplet, card: any) => boolean;\r\n    onCardChanged?: (sender: AdaptiveApplet) => void;\r\n    onPrefetchSSOToken?: (\r\n        sender: AdaptiveApplet,\r\n        tokenExchangeResource: TokenExchangeResource\r\n    ) => void;\r\n    onSSOTokenNeeded?: (\r\n        sender: AdaptiveApplet,\r\n        request: IActivityRequest,\r\n        tokenExchangeResource: TokenExchangeResource\r\n    ) => boolean;\r\n    onPrepareActivityRequest?: (\r\n        sender: AdaptiveApplet,\r\n        request: IActivityRequest,\r\n        action: UniversalAction\r\n    ) => boolean;\r\n    onActivityRequestSucceeded?: (\r\n        sender: AdaptiveApplet,\r\n        response: SuccessResponse,\r\n        parsedContent: string | AdaptiveCard | undefined\r\n    ) => void;\r\n    onActivityRequestFailed?: (sender: AdaptiveApplet, response: ErrorResponse) => number;\r\n    onCreateSerializationContext?: (sender: AdaptiveApplet) => SerializationContext;\r\n    onCreateProgressOverlay?: (\r\n        sender: AdaptiveApplet,\r\n        request: IActivityRequest\r\n    ) => HTMLElement | undefined;\r\n    onRemoveProgressOverlay?: (sender: AdaptiveApplet, request: IActivityRequest) => void;\r\n    onRenderManualRefreshButton?: (sender: AdaptiveApplet) => HTMLElement | undefined;\r\n    onAction?: (sender: AdaptiveApplet, action: Action) => void;\r\n    onShowManualRefreshButton?: (sender: AdaptiveApplet) => boolean;\r\n    onShowAuthCodeInputDialog?: (sender: AdaptiveApplet, request: IActivityRequest) => boolean;\r\n    onShowSigninPrompt?: (\r\n        sender: AdaptiveApplet,\r\n        request: IActivityRequest,\r\n        signinButton: AuthCardButton\r\n    ) => void;\r\n\r\n    constructor() {\r\n        this.renderedElement = document.createElement(\"div\");\r\n        this.renderedElement.className = \"aaf-cardHost\";\r\n        this.renderedElement.style.position = \"relative\";\r\n        this.renderedElement.style.display = \"flex\";\r\n        this.renderedElement.style.flexDirection = \"column\";\r\n\r\n        this._cardHostElement = document.createElement(\"div\");\r\n\r\n        this._refreshButtonHostElement = document.createElement(\"div\");\r\n        this._refreshButtonHostElement.className = \"aaf-refreshButtonHost\";\r\n        this._refreshButtonHostElement.style.display = \"none\";\r\n\r\n        this.renderedElement.appendChild(this._cardHostElement);\r\n        this.renderedElement.appendChild(this._refreshButtonHostElement);\r\n    }\r\n\r\n    refreshCard() {\r\n        if (this._card && this._card.refresh) {\r\n            this.internalExecuteAction(this._card.refresh.action, ActivityRequestTrigger.Manual, 0);\r\n        }\r\n    }\r\n\r\n    setCard(payload: any) {\r\n        this.internalSetCard(payload, 0);\r\n    }\r\n\r\n    get card(): AdaptiveCard | undefined {\r\n        return this._card;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport * from \"./strings\";\r\nexport * from \"./enums\";\r\nexport * from \"./shared\";\r\nexport * from \"./utils\";\r\nexport * from \"./serialization\";\r\nexport * from \"./host-capabilities\";\r\nexport * from \"./host-config\";\r\nexport * from \"./registry\";\r\nexport * from \"./card-object\";\r\nexport * from \"./card-elements\";\r\nexport * from \"./carousel\";\r\nexport * from \"./table\";\r\nexport * from \"./channel-adapter\";\r\nexport * from \"./activity-request\";\r\nexport * from \"./adaptive-applet\";\r\n\r\nexport { IAdaptiveCard, ICardElement } from \"./schema\";\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport { CarouselEvent } from \"./carousel\";\r\nimport {\r\n    PaddingDefinition,\r\n    GlobalSettings,\r\n    SizeAndUnit,\r\n    SpacingDefinition,\r\n    ISeparationDefinition,\r\n    Dictionary,\r\n    StringWithSubstitutions,\r\n    ContentTypes,\r\n    IInput,\r\n    IResourceInformation\r\n} from \"./shared\";\r\nimport * as Utils from \"./utils\";\r\nimport {\r\n    HostConfig,\r\n    defaultHostConfig,\r\n    BaseTextDefinition,\r\n    FontTypeDefinition,\r\n    ColorSetDefinition,\r\n    TextColorDefinition,\r\n    ContainerStyleDefinition,\r\n    TextStyleDefinition\r\n} from \"./host-config\";\r\nimport * as TextFormatters from \"./text-formatters\";\r\nimport { CardObject, ValidationResults } from \"./card-object\";\r\nimport {\r\n    Versions,\r\n    Version,\r\n    property,\r\n    BaseSerializationContext,\r\n    SerializableObject,\r\n    SerializableObjectSchema,\r\n    StringProperty,\r\n    BoolProperty,\r\n    ValueSetProperty,\r\n    EnumProperty,\r\n    SerializableObjectCollectionProperty,\r\n    SerializableObjectProperty,\r\n    PixelSizeProperty,\r\n    NumProperty,\r\n    PropertyBag,\r\n    CustomProperty,\r\n    PropertyDefinition,\r\n    StringArrayProperty\r\n} from \"./serialization\";\r\nimport { CardObjectRegistry, GlobalRegistry } from \"./registry\";\r\nimport { Strings } from \"./strings\";\r\nimport { MenuItem, PopupMenu } from \"./controls\";\r\n\r\n\r\nfunction clearElement(element: HTMLElement) : void {\r\n    const trustedHtml = (typeof window === 'undefined') ? \"\" : (window.trustedTypes?.emptyHTML ?? \"\");\r\n    element.innerHTML = trustedHtml as string;\r\n}\r\n\r\nexport function renderSeparation(\r\n    hostConfig: HostConfig,\r\n    separationDefinition: ISeparationDefinition,\r\n    orientation: Enums.Orientation\r\n): HTMLElement | undefined {\r\n    if (\r\n        separationDefinition.spacing > 0 ||\r\n        (separationDefinition.lineThickness && separationDefinition.lineThickness > 0)\r\n    ) {\r\n        const separator = document.createElement(\"div\");\r\n        separator.className = hostConfig.makeCssClassName(\r\n            \"ac-\" +\r\n                (orientation === Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\") +\r\n                \"-separator\"\r\n        );\r\n        separator.setAttribute(\"aria-hidden\", \"true\");\r\n\r\n        const color = separationDefinition.lineColor\r\n            ? Utils.stringToCssColor(separationDefinition.lineColor)\r\n            : \"\";\r\n\r\n        if (orientation === Enums.Orientation.Horizontal) {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingTop = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.marginBottom = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.borderBottom =\r\n                    separationDefinition.lineThickness + \"px solid \" + color;\r\n            } else {\r\n                separator.style.height = separationDefinition.spacing + \"px\";\r\n            }\r\n        } else {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingLeft = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.marginRight = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.borderRight =\r\n                    separationDefinition.lineThickness + \"px solid \" + color;\r\n            } else {\r\n                separator.style.width = separationDefinition.spacing + \"px\";\r\n            }\r\n        }\r\n\r\n        separator.style.overflow = \"hidden\";\r\n        separator.style.flex = \"0 0 auto\";\r\n\r\n        return separator;\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport type CardElementHeight = \"auto\" | \"stretch\";\r\n\r\nexport abstract class CardElement extends CardObject {\r\n    //#region Schema\r\n\r\n    static readonly langProperty = new StringProperty(\r\n        Versions.v1_1,\r\n        \"lang\",\r\n        true,\r\n        /^[a-z]{2,3}$/gi\r\n    );\r\n    static readonly isVisibleProperty = new BoolProperty(Versions.v1_2, \"isVisible\", true);\r\n    static readonly separatorProperty = new BoolProperty(Versions.v1_0, \"separator\", false);\r\n    static readonly heightProperty = new ValueSetProperty(\r\n        Versions.v1_1,\r\n        \"height\",\r\n        [{ value: \"auto\" }, { value: \"stretch\" }],\r\n        \"auto\"\r\n    );\r\n    static readonly horizontalAlignmentProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"horizontalAlignment\",\r\n        Enums.HorizontalAlignment\r\n    );\r\n    static readonly spacingProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"spacing\",\r\n        Enums.Spacing,\r\n        Enums.Spacing.Default\r\n    );\r\n\r\n    @property(CardElement.horizontalAlignmentProperty)\r\n    horizontalAlignment?: Enums.HorizontalAlignment;\r\n\r\n    @property(CardElement.spacingProperty)\r\n    spacing: Enums.Spacing;\r\n\r\n    @property(CardElement.separatorProperty)\r\n    separator: boolean;\r\n\r\n    @property(CardElement.heightProperty)\r\n    height: CardElementHeight;\r\n\r\n    @property(CardElement.langProperty)\r\n    get lang(): string | undefined {\r\n        const lang = this.getValue(CardElement.langProperty);\r\n\r\n        if (lang) {\r\n            return lang;\r\n        } else {\r\n            if (this.parent) {\r\n                return this.parent.lang;\r\n            } else {\r\n                return undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    set lang(value: string | undefined) {\r\n        this.setValue(CardElement.langProperty, value);\r\n    }\r\n\r\n    @property(CardElement.isVisibleProperty)\r\n    get isVisible(): boolean {\r\n        return this.getValue(CardElement.isVisibleProperty);\r\n    }\r\n\r\n    set isVisible(value: boolean) {\r\n        // If the element is going to be hidden, reset any changes that were due\r\n        // to overflow truncation (this ensures that if the element is later\r\n        // un-hidden it has the right content)\r\n        if (GlobalSettings.useAdvancedCardBottomTruncation && !value) {\r\n            this.undoOverflowTruncation();\r\n        }\r\n\r\n        if (this.isVisible !== value) {\r\n            this.setValue(CardElement.isVisibleProperty, value);\r\n\r\n            this.updateRenderedElementVisibility();\r\n\r\n            if (this._renderedElement) {\r\n                raiseElementVisibilityChangedEvent(this);\r\n            }\r\n        }\r\n\r\n        if (this._renderedElement) {\r\n            this._renderedElement.setAttribute(\"aria-expanded\", value.toString());\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private _hostConfig?: HostConfig;\r\n    private _separatorElement?: HTMLElement;\r\n    private _truncatedDueToOverflow: boolean = false;\r\n    private _defaultRenderedElementDisplayMode?: string;\r\n    private _padding?: PaddingDefinition;\r\n\r\n    private internalRenderSeparator(): HTMLElement | undefined {\r\n        const renderedSeparator = renderSeparation(\r\n            this.hostConfig,\r\n            {\r\n                spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\r\n                lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,\r\n                lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined\r\n            },\r\n            this.separatorOrientation\r\n        );\r\n\r\n        if (\r\n            GlobalSettings.alwaysBleedSeparators &&\r\n            renderedSeparator &&\r\n            this.separatorOrientation === Enums.Orientation.Horizontal\r\n        ) {\r\n            // Adjust separator's margins if the option to always bleed separators is turned on\r\n            const parentContainer = this.getParentContainer();\r\n\r\n            if (parentContainer && parentContainer.getEffectivePadding()) {\r\n                const parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(\r\n                    parentContainer.getEffectivePadding()\r\n                );\r\n\r\n                renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\r\n                renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\r\n            }\r\n        }\r\n\r\n        return renderedSeparator;\r\n    }\r\n\r\n    private updateRenderedElementVisibility() {\r\n        const displayMode =\r\n            this.isDesignMode() || this.isVisible\r\n                ? this._defaultRenderedElementDisplayMode\r\n                : \"none\";\r\n\r\n        if (this._renderedElement) {\r\n            if (displayMode) {\r\n                this._renderedElement.style.display = displayMode;\r\n            } else {\r\n                this._renderedElement.style.removeProperty(\"display\");\r\n            }\r\n        }\r\n\r\n        if (this._separatorElement) {\r\n            if (this.parent && this.parent.isFirstElement(this)) {\r\n                this._separatorElement.style.display = \"none\";\r\n            } else {\r\n                if (displayMode) {\r\n                    this._separatorElement.style.display = displayMode;\r\n                } else {\r\n                    this._separatorElement.style.removeProperty(\"display\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private hideElementDueToOverflow() {\r\n        if (this._renderedElement && this.isVisible) {\r\n            this._renderedElement.style.visibility = \"hidden\";\r\n\r\n            this.isVisible = false;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    }\r\n\r\n    private showElementHiddenDueToOverflow() {\r\n        if (this._renderedElement && !this.isVisible) {\r\n            this._renderedElement.style.removeProperty(\"visibility\");\r\n\r\n            this.isVisible = true;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    }\r\n\r\n    // Marked private to emulate internal access\r\n    private handleOverflow(maxHeight: number) {\r\n        if (this.isVisible || this.isHiddenDueToOverflow()) {\r\n            const handled = this.truncateOverflow(maxHeight);\r\n\r\n            // Even if we were unable to truncate the element to fit this time,\r\n            // it still could have been previously truncated\r\n            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\r\n\r\n            if (!handled) {\r\n                this.hideElementDueToOverflow();\r\n            } else if (handled && !this.isVisible) {\r\n                this.showElementHiddenDueToOverflow();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Marked private to emulate internal access\r\n    private resetOverflow(): boolean {\r\n        let sizeChanged = false;\r\n\r\n        if (this._truncatedDueToOverflow) {\r\n            this.undoOverflowTruncation();\r\n            this._truncatedDueToOverflow = false;\r\n            sizeChanged = true;\r\n        }\r\n\r\n        if (this.isHiddenDueToOverflow()) {\r\n            this.showElementHiddenDueToOverflow();\r\n        }\r\n\r\n        return sizeChanged;\r\n    }\r\n\r\n    protected getDefaultSerializationContext(): BaseSerializationContext {\r\n        return new SerializationContext();\r\n    }\r\n\r\n    protected createPlaceholderElement(): HTMLElement {\r\n        const styleDefinition = this.getEffectiveStyleDefinition();\r\n        const foregroundCssColor = Utils.stringToCssColor(\r\n            styleDefinition.foregroundColors.default.subtle\r\n        );\r\n\r\n        const element = document.createElement(\"div\");\r\n        element.style.border = \"1px dashed \" + foregroundCssColor;\r\n        element.style.padding = \"4px\";\r\n        element.style.minHeight = \"32px\";\r\n        element.style.fontSize = \"10px\";\r\n\r\n        if (foregroundCssColor) {\r\n            element.style.color = foregroundCssColor;\r\n        }\r\n\r\n        element.innerText = Strings.defaults.emptyElementText(this.getJsonTypeName());\r\n\r\n        return element;\r\n    }\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        if (this.height === \"auto\") {\r\n            renderedElement.style.flex = \"0 0 auto\";\r\n        } else {\r\n            renderedElement.style.flex = \"1 1 auto\";\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Called when mouse enters or leaves the card.\r\n     * Inputs elements need to update their visual state in such events like showing or hiding borders etc.\r\n     * It calls Input.updateVisualState(eventType) for all inputs.\r\n     * This method on input (updateVisualState) is supposed to be called from card level on mouse events.\r\n     */\r\n    protected updateInputsVisualState(hover: boolean) {\r\n        const allInputs: Input[] = this.getAllInputs();\r\n        const inputEventType = !!hover ? InputEventType.MouseEnterOnCard : InputEventType.MouseLeaveOnCard;\r\n        allInputs.forEach((input) => input.updateVisualState(inputEventType));\r\n    }\r\n\r\n    protected isDisplayed(): boolean {\r\n        return (\r\n            this._renderedElement !== undefined &&\r\n            this.isVisible &&\r\n            this._renderedElement.offsetHeight > 0\r\n        );\r\n    }\r\n\r\n    protected abstract internalRender(): HTMLElement | undefined;\r\n\r\n    protected overrideInternalRender(): HTMLElement | undefined {\r\n        return this.internalRender();\r\n    }\r\n\r\n    protected applyPadding() {\r\n        if (this.separatorElement && this.separatorOrientation === Enums.Orientation.Horizontal) {\r\n            if (GlobalSettings.alwaysBleedSeparators && !this.isBleeding()) {\r\n                const padding = new PaddingDefinition();\r\n\r\n                this.getImmediateSurroundingPadding(padding);\r\n\r\n                const physicalPadding =\r\n                    this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n                this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            } else {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Called when this element overflows the bottom of the card.\r\n     * maxHeight will be the amount of space still available on the card (0 if\r\n     * the element is fully off the card).\r\n     */\r\n    protected truncateOverflow(_maxHeight: number): boolean {\r\n        // Child implementations should return true if the element handled\r\n        // the truncation request such that its content fits within maxHeight,\r\n        // false if the element should fall back to being hidden\r\n        return false;\r\n    }\r\n\r\n    /*\r\n     * This should reverse any changes performed in truncateOverflow().\r\n     */\r\n    protected undoOverflowTruncation() {\r\n        return;\r\n    }\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return new PaddingDefinition();\r\n    }\r\n\r\n    protected getHasBackground(ignoreBackgroundImages: boolean = false): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected getHasBorder(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected getPadding(): PaddingDefinition | undefined {\r\n        return this._padding;\r\n    }\r\n\r\n    protected setPadding(value: PaddingDefinition | undefined) {\r\n        this._padding = value;\r\n    }\r\n\r\n    protected shouldSerialize(context: SerializationContext): boolean {\r\n        return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    }\r\n\r\n    protected get useDefaultSizing(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get separatorOrientation(): Enums.Orientation {\r\n        return Enums.Orientation.Horizontal;\r\n    }\r\n\r\n    protected get defaultStyle(): string {\r\n        return Enums.ContainerStyle.Default;\r\n    }\r\n\r\n    customCssSelector?: string;\r\n\r\n    parse(source: any, context?: SerializationContext) {\r\n        super.parse(source, context ? context : new SerializationContext());\r\n    }\r\n\r\n    asString(): string | undefined {\r\n        return \"\";\r\n    }\r\n\r\n    isBleeding(): boolean {\r\n        return false;\r\n    }\r\n\r\n    getEffectiveStyle(): string {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveStyle();\r\n        }\r\n\r\n        return this.defaultStyle;\r\n    }\r\n\r\n    getEffectiveStyleDefinition(): ContainerStyleDefinition {\r\n        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\r\n    }\r\n\r\n    getEffectiveTextStyleDefinition(): TextStyleDefinition {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveTextStyleDefinition();\r\n        }\r\n\r\n        return this.hostConfig.textStyles.default;\r\n    }\r\n\r\n    getForbiddenActionTypes(): ActionType[] {\r\n        return [];\r\n    }\r\n\r\n    getImmediateSurroundingPadding(\r\n        result: PaddingDefinition,\r\n        processTop: boolean = true,\r\n        processRight: boolean = true,\r\n        processBottom: boolean = true,\r\n        processLeft: boolean = true\r\n    ) {\r\n        if (this.parent) {\r\n            let doProcessTop = processTop && this.parent.isTopElement(this);\r\n            let doProcessRight = processRight && this.parent.isRightMostElement(this);\r\n            let doProcessBottom = processBottom && this.parent.isBottomElement(this);\r\n            let doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\r\n\r\n            const effectivePadding = this.parent.getEffectivePadding();\r\n\r\n            if (effectivePadding) {\r\n                if (doProcessTop && effectivePadding.top !== Enums.Spacing.None) {\r\n                    result.top = effectivePadding.top;\r\n\r\n                    doProcessTop = false;\r\n                }\r\n\r\n                if (doProcessRight && effectivePadding.right !== Enums.Spacing.None) {\r\n                    result.right = effectivePadding.right;\r\n\r\n                    doProcessRight = false;\r\n                }\r\n\r\n                if (doProcessBottom && effectivePadding.bottom !== Enums.Spacing.None) {\r\n                    result.bottom = effectivePadding.bottom;\r\n\r\n                    doProcessBottom = false;\r\n                }\r\n\r\n                if (doProcessLeft && effectivePadding.left !== Enums.Spacing.None) {\r\n                    result.left = effectivePadding.left;\r\n\r\n                    doProcessLeft = false;\r\n                }\r\n            }\r\n\r\n            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\r\n                this.parent.getImmediateSurroundingPadding(\r\n                    result,\r\n                    doProcessTop,\r\n                    doProcessRight,\r\n                    doProcessBottom,\r\n                    doProcessLeft\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return 0;\r\n    }\r\n\r\n    getActionAt(index: number): Action | undefined {\r\n        throw new Error(Strings.errors.indexOutOfRange(index));\r\n    }\r\n\r\n    indexOfAction(action: Action): number {\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            if (this.getActionAt(i) === action) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    remove(): boolean {\r\n        if (this.parent && this.parent instanceof CardElementContainer) {\r\n            return this.parent.removeItem(this);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        this._renderedElement = this.overrideInternalRender();\r\n        this._separatorElement = this.internalRenderSeparator();\r\n\r\n        if (this._renderedElement) {\r\n            if (this.id) {\r\n                this._renderedElement.id = this.id;\r\n            }\r\n\r\n            if (this.customCssSelector) {\r\n                this._renderedElement.classList.add(this.customCssSelector);\r\n            }\r\n\r\n            this._renderedElement.style.boxSizing = \"border-box\";\r\n            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display\r\n                ? this._renderedElement.style.display\r\n                : undefined;\r\n\r\n            this.adjustRenderedElementSize(this._renderedElement);\r\n            this.updateLayout(false);\r\n        } else if (this.isDesignMode()) {\r\n            this._renderedElement = this.createPlaceholderElement();\r\n        }\r\n\r\n        return this._renderedElement;\r\n    }\r\n\r\n    updateLayout(_processChildren: boolean = true) {\r\n        this.updateRenderedElementVisibility();\r\n        this.applyPadding();\r\n    }\r\n\r\n    updateActionsEnabledState() {\r\n        const allActions = this.getRootElement().getAllActions();\r\n\r\n        for (let action of allActions) {\r\n            action.updateEnabledState();\r\n        }\r\n    }\r\n\r\n    indexOf(_cardElement: CardElement): number {\r\n        return -1;\r\n    }\r\n\r\n    isDesignMode(): boolean {\r\n        const rootElement = this.getRootElement();\r\n\r\n        return rootElement instanceof AdaptiveCard && rootElement.designMode;\r\n    }\r\n\r\n    isFirstElement(_element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isLastElement(_element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isAtTheVeryLeft(): boolean {\r\n        return this.parent\r\n            ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft()\r\n            : true;\r\n    }\r\n\r\n    isAtTheVeryRight(): boolean {\r\n        return this.parent\r\n            ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight()\r\n            : true;\r\n    }\r\n\r\n    isAtTheVeryTop(): boolean {\r\n        return this.parent\r\n            ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop()\r\n            : true;\r\n    }\r\n\r\n    isAtTheVeryBottom(): boolean {\r\n        return this.parent\r\n            ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom()\r\n            : true;\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        return false;\r\n    }\r\n\r\n    isLeftMostElement(_element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isRightMostElement(_element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isTopElement(element: CardElement): boolean {\r\n        return this.isFirstElement(element);\r\n    }\r\n\r\n    isBottomElement(element: CardElement): boolean {\r\n        return this.isLastElement(element);\r\n    }\r\n\r\n    isHiddenDueToOverflow(): boolean {\r\n        return (\r\n            this._renderedElement !== undefined &&\r\n            this._renderedElement.style.visibility === \"hidden\"\r\n        );\r\n    }\r\n\r\n    getRootElement(): CardElement {\r\n        return this.getRootObject() as CardElement;\r\n    }\r\n\r\n    getParentContainer(): Container | undefined {\r\n        let currentElement = this.parent;\r\n\r\n        while (currentElement) {\r\n            if (currentElement instanceof Container) {\r\n                return currentElement;\r\n            }\r\n\r\n            currentElement = currentElement.parent;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        return [];\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result: Action[] = [];\r\n\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            let action = this.getActionAt(i);\r\n\r\n            if (action) {\r\n                result.push(action);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        return [];\r\n    }\r\n\r\n    getElementById(id: string): CardElement | undefined {\r\n        return this.id === id ? this : undefined;\r\n    }\r\n\r\n    getActionById(_id: string): Action | undefined {\r\n        return undefined;\r\n    }\r\n    \r\n    getElementByIdFromAction(id: string): CardElement | undefined {\r\n        let result = undefined;\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            const action = this.getActionAt(i);\r\n\r\n            if (action instanceof ShowCardAction) {\r\n                result = action.card.getElementById(id);\r\n\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    getEffectivePadding(): PaddingDefinition {\r\n        const padding = this.getPadding();\r\n\r\n        return padding ? padding : this.getDefaultPadding();\r\n    }\r\n\r\n    getEffectiveHorizontalAlignment(): Enums.HorizontalAlignment {\r\n        if (this.horizontalAlignment !== undefined) {\r\n            return this.horizontalAlignment;\r\n        }\r\n\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveHorizontalAlignment();\r\n        }\r\n\r\n        return Enums.HorizontalAlignment.Left;\r\n    }\r\n\r\n    get hostConfig(): HostConfig {\r\n        if (this._hostConfig) {\r\n            return this._hostConfig;\r\n        } else {\r\n            if (this.parent) {\r\n                return this.parent.hostConfig;\r\n            } else {\r\n                return defaultHostConfig;\r\n            }\r\n        }\r\n    }\r\n\r\n    set hostConfig(value: HostConfig) {\r\n        this._hostConfig = value;\r\n    }\r\n\r\n    get index(): number {\r\n        if (this.parent) {\r\n            return this.parent.indexOf(this);\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    get isInteractive(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return true;\r\n    }\r\n\r\n    get isInline(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        if (this.parent && this.separatorElement) {\r\n            return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    get separatorElement(): HTMLElement | undefined {\r\n        return this._separatorElement;\r\n    }\r\n\r\n    get parent(): CardElement | undefined {\r\n        return <CardElement>this._parent;\r\n    }\r\n}\r\n\r\nexport class ActionProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: SerializationContext\r\n    ): Action | undefined {\r\n        const parent = <CardElement>sender;\r\n\r\n        return context.parseAction(\r\n            parent,\r\n            source[this.name],\r\n            this.forbiddenActionTypes,\r\n            parent.isDesignMode()\r\n        );\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: Action | undefined,\r\n        context: SerializationContext\r\n    ) {\r\n        context.serializeValue(\r\n            target,\r\n            this.name,\r\n            value ? value.toJSON(context) : undefined,\r\n            undefined,\r\n            true\r\n        );\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly forbiddenActionTypes: string[] = []\r\n    ) {\r\n        super(targetVersion, name, undefined);\r\n    }\r\n}\r\n\r\nexport abstract class BaseTextBlock extends CardElement {\r\n    //#region Schema\r\n\r\n    static readonly textProperty = new StringProperty(Versions.v1_0, \"text\", true);\r\n    static readonly sizeProperty = new EnumProperty(Versions.v1_0, \"size\", Enums.TextSize);\r\n    static readonly weightProperty = new EnumProperty(Versions.v1_0, \"weight\", Enums.TextWeight);\r\n    static readonly colorProperty = new EnumProperty(Versions.v1_0, \"color\", Enums.TextColor);\r\n    static readonly isSubtleProperty = new BoolProperty(Versions.v1_0, \"isSubtle\");\r\n    static readonly fontTypeProperty = new EnumProperty(Versions.v1_2, \"fontType\", Enums.FontType);\r\n    static readonly selectActionProperty = new ActionProperty(Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        // selectAction is declared on BaseTextBlock but is only exposed on TextRun,\r\n        // so the property is removed from the BaseTextBlock schema.\r\n        schema.remove(BaseTextBlock.selectActionProperty);\r\n    }\r\n\r\n    @property(BaseTextBlock.sizeProperty)\r\n    size?: Enums.TextSize;\r\n\r\n    @property(BaseTextBlock.weightProperty)\r\n    weight?: Enums.TextWeight;\r\n\r\n    @property(BaseTextBlock.colorProperty)\r\n    color?: Enums.TextColor;\r\n\r\n    @property(BaseTextBlock.fontTypeProperty)\r\n    fontType?: Enums.FontType;\r\n\r\n    @property(BaseTextBlock.isSubtleProperty)\r\n    isSubtle?: boolean;\r\n\r\n    @property(BaseTextBlock.textProperty)\r\n    get text(): string | undefined {\r\n        return this.getValue(BaseTextBlock.textProperty);\r\n    }\r\n\r\n    set text(value: string | undefined) {\r\n        this.setText(value);\r\n    }\r\n\r\n    @property(BaseTextBlock.selectActionProperty)\r\n    selectAction?: Action;\r\n\r\n    //#endregion\r\n\r\n    protected getFontSize(fontType: FontTypeDefinition): number {\r\n        switch (this.effectiveSize) {\r\n            case Enums.TextSize.Small:\r\n                return fontType.fontSizes.small;\r\n            case Enums.TextSize.Medium:\r\n                return fontType.fontSizes.medium;\r\n            case Enums.TextSize.Large:\r\n                return fontType.fontSizes.large;\r\n            case Enums.TextSize.ExtraLarge:\r\n                return fontType.fontSizes.extraLarge;\r\n            default:\r\n                return fontType.fontSizes.default;\r\n        }\r\n    }\r\n\r\n    protected getColorDefinition(\r\n        colorSet: ColorSetDefinition,\r\n        color: Enums.TextColor\r\n    ): TextColorDefinition {\r\n        switch (color) {\r\n            case Enums.TextColor.Accent:\r\n                return colorSet.accent;\r\n            case Enums.TextColor.Dark:\r\n                return colorSet.dark;\r\n            case Enums.TextColor.Light:\r\n                return colorSet.light;\r\n            case Enums.TextColor.Good:\r\n                return colorSet.good;\r\n            case Enums.TextColor.Warning:\r\n                return colorSet.warning;\r\n            case Enums.TextColor.Attention:\r\n                return colorSet.attention;\r\n            default:\r\n                return colorSet.default;\r\n        }\r\n    }\r\n\r\n    protected setText(value: string | undefined) {\r\n        this.setValue(BaseTextBlock.textProperty, value);\r\n    }\r\n\r\n    ariaHidden: boolean = false;\r\n\r\n    constructor(text?: string) {\r\n        super();\r\n\r\n        if (text) {\r\n            this.text = text;\r\n        }\r\n    }\r\n\r\n    init(textDefinition: BaseTextDefinition) {\r\n        this.size = textDefinition.size;\r\n        this.weight = textDefinition.weight;\r\n        this.color = textDefinition.color;\r\n        this.isSubtle = textDefinition.isSubtle;\r\n    }\r\n\r\n    asString(): string | undefined {\r\n        return this.text;\r\n    }\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        const fontType = this.hostConfig.getFontTypeDefinition(this.effectiveFontType);\r\n\r\n        if (fontType.fontFamily) {\r\n            targetElement.style.fontFamily = fontType.fontFamily;\r\n        }\r\n\r\n        let fontSize: number;\r\n\r\n        switch (this.effectiveSize) {\r\n            case Enums.TextSize.Small:\r\n                fontSize = fontType.fontSizes.small;\r\n                break;\r\n            case Enums.TextSize.Medium:\r\n                fontSize = fontType.fontSizes.medium;\r\n                break;\r\n            case Enums.TextSize.Large:\r\n                fontSize = fontType.fontSizes.large;\r\n                break;\r\n            case Enums.TextSize.ExtraLarge:\r\n                fontSize = fontType.fontSizes.extraLarge;\r\n                break;\r\n            default:\r\n                fontSize = fontType.fontSizes.default;\r\n                break;\r\n        }\r\n\r\n        targetElement.style.fontSize = fontSize + \"px\";\r\n\r\n        const colorDefinition = this.getColorDefinition(\r\n            this.getEffectiveStyleDefinition().foregroundColors,\r\n            this.effectiveColor\r\n        );\r\n\r\n        const targetColor = Utils.stringToCssColor(\r\n            this.effectiveIsSubtle ? colorDefinition.subtle : colorDefinition.default\r\n        );\r\n        if (targetColor) {\r\n            targetElement.style.color = targetColor;\r\n        }\r\n\r\n        let fontWeight: number;\r\n\r\n        switch (this.effectiveWeight) {\r\n            case Enums.TextWeight.Lighter:\r\n                fontWeight = fontType.fontWeights.lighter;\r\n                break;\r\n            case Enums.TextWeight.Bolder:\r\n                fontWeight = fontType.fontWeights.bolder;\r\n                break;\r\n            default:\r\n                fontWeight = fontType.fontWeights.default;\r\n                break;\r\n        }\r\n\r\n        targetElement.style.fontWeight = fontWeight.toString();\r\n\r\n        if (this.ariaHidden) {\r\n            targetElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        if (this.selectAction) {\r\n            result.push(this.selectAction);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get effectiveColor(): Enums.TextColor {\r\n        return this.color !== undefined ? this.color : this.getEffectiveTextStyleDefinition().color;\r\n    }\r\n\r\n    get effectiveFontType(): Enums.FontType {\r\n        return this.fontType !== undefined\r\n            ? this.fontType\r\n            : this.getEffectiveTextStyleDefinition().fontType;\r\n    }\r\n\r\n    get effectiveIsSubtle(): boolean {\r\n        return this.isSubtle !== undefined\r\n            ? this.isSubtle\r\n            : this.getEffectiveTextStyleDefinition().isSubtle;\r\n    }\r\n\r\n    get effectiveSize(): Enums.TextSize {\r\n        return this.size !== undefined ? this.size : this.getEffectiveTextStyleDefinition().size;\r\n    }\r\n\r\n    get effectiveWeight(): Enums.TextWeight {\r\n        return this.weight !== undefined\r\n            ? this.weight\r\n            : this.getEffectiveTextStyleDefinition().weight;\r\n    }\r\n}\r\n\r\nexport type TextBlockStyle = \"default\" | \"heading\" | \"columnHeader\";\r\n\r\nexport class TextBlock extends BaseTextBlock {\r\n    //#region Schema\r\n\r\n    static readonly wrapProperty = new BoolProperty(Versions.v1_0, \"wrap\", false);\r\n    static readonly maxLinesProperty = new NumProperty(Versions.v1_0, \"maxLines\");\r\n    static readonly styleProperty = new ValueSetProperty(Versions.v1_5, \"style\", [\r\n        { value: \"default\" },\r\n        { value: \"columnHeader\" },\r\n        { value: \"heading\" }\r\n    ]);\r\n\r\n    @property(TextBlock.wrapProperty)\r\n    wrap: boolean = false;\r\n\r\n    @property(TextBlock.maxLinesProperty)\r\n    maxLines?: number;\r\n\r\n    @property(TextBlock.styleProperty)\r\n    style?: TextBlockStyle;\r\n\r\n    //#endregion\r\n\r\n    private _computedLineHeight: number;\r\n    private _originalInnerHtml: string;\r\n    private _processedText?: string;\r\n    private _treatAsPlainText: boolean = true;\r\n\r\n    private restoreOriginalContent() {\r\n        if (this.renderedElement !== undefined) {\r\n            if (this.maxLines && this.maxLines > 0) {\r\n                this.renderedElement.style.maxHeight =\r\n                    this._computedLineHeight * this.maxLines + \"px\";\r\n            }\r\n\r\n            const originalHtml = TextBlock._ttRoundtripPolicy?.createHTML(this._originalInnerHtml) ?? this._originalInnerHtml;\r\n            this.renderedElement.innerHTML = originalHtml as string;\r\n        }\r\n    }\r\n\r\n    private truncateIfSupported(maxHeight: number): boolean {\r\n        if (this.renderedElement !== undefined) {\r\n            // For now, only truncate TextBlocks that contain just a single\r\n            // paragraph -- since the maxLines calculation doesn't take into\r\n            // account Markdown lists\r\n            const children = this.renderedElement.children;\r\n            const isTextOnly = !children.length;\r\n            const truncationSupported =\r\n                isTextOnly ||\r\n                (children.length === 1 && (<HTMLElement>children[0]).tagName.toLowerCase() === \"p\" && !(<HTMLElement>children[0]).children.length);\r\n\r\n            if (truncationSupported) {\r\n                const element = isTextOnly ? this.renderedElement : <HTMLElement>children[0];\r\n\r\n                Utils.truncateText(element, maxHeight, this._computedLineHeight);\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // Markdown processing is handled outside of Adaptive Cards. It's up to the host to ensure that markdown is safely\r\n    // processed.\r\n    private static readonly _ttMarkdownPolicy = (typeof window === 'undefined') ? undefined : window.trustedTypes?.createPolicy(\r\n        \"adaptivecards#markdownPassthroughPolicy\",\r\n        { createHTML: (value) => value }\r\n    );\r\n\r\n    // When \"advanced\" truncation is enabled (see GlobalSettings.useAdvancedCardBottomTruncation and\r\n    // GlobalSettings.useAdvancedTextBlockTruncation), we store the original pre-truncation content in\r\n    // _originalInnerHtml so that we can restore/recalculate truncation later if space availability has changed (see\r\n    // TextBlock.restoreOriginalContent())\r\n    private static readonly _ttRoundtripPolicy = (typeof window === 'undefined') ? undefined : window.trustedTypes?.createPolicy(\r\n        \"adaptivecards#restoreContentsPolicy\",\r\n        { createHTML: (value) => value }\r\n    );\r\n\r\n    protected setText(value: string) {\r\n        super.setText(value);\r\n\r\n        this._processedText = undefined;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._processedText = undefined;\r\n\r\n        if (this.text) {\r\n            const preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            const hostConfig = this.hostConfig;\r\n\r\n            let element: HTMLElement;\r\n\r\n            if (this.forElementId) {\r\n                const labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n\r\n                element = labelElement;\r\n            } else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\r\n            element.style.overflow = \"hidden\";\r\n\r\n            this.applyStylesTo(element);\r\n\r\n            if (this.style === \"heading\") {\r\n                element.setAttribute(\"role\", \"heading\");\r\n\r\n                const headingLevel = this.hostConfig.textBlock.headingLevel;\r\n\r\n                if (headingLevel !== undefined && headingLevel > 0) {\r\n                    element.setAttribute(\"aria-level\", headingLevel.toString());\r\n                }\r\n            }\r\n\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                element.onclick = (e) => {\r\n                    if (this.selectAction && this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this.selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                this.selectAction.setupElementForAccessibility(element);\r\n\r\n                if (this.selectAction.isEffectivelyEnabled()) {\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n\r\n            if (!this._processedText) {\r\n                this._treatAsPlainText = true;\r\n\r\n                let formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n\r\n                if (this.useMarkdown && formattedText) {\r\n                    if (GlobalSettings.allowMarkForTextHighlighting) {\r\n                        formattedText = formattedText\r\n                            .replace(/<mark>/g, \"===\")\r\n                            .replace(/<\\/mark>/g, \"/==/\");\r\n                    }\r\n\r\n                    const markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\r\n\r\n                    if (\r\n                        markdownProcessingResult.didProcess &&\r\n                        markdownProcessingResult.outputHtml\r\n                    ) {\r\n                        this._processedText = markdownProcessingResult.outputHtml;\r\n                        this._treatAsPlainText = false;\r\n\r\n                        // Only process <mark> tag if markdown processing was applied because\r\n                        // markdown processing is also responsible for sanitizing the input string\r\n                        if (GlobalSettings.allowMarkForTextHighlighting && this._processedText) {\r\n                            let markStyle: string = \"\";\r\n                            const effectiveStyle = this.getEffectiveStyleDefinition();\r\n\r\n                            if (effectiveStyle.highlightBackgroundColor) {\r\n                                markStyle +=\r\n                                    \"background-color: \" +\r\n                                    effectiveStyle.highlightBackgroundColor +\r\n                                    \";\";\r\n                            }\r\n\r\n                            if (effectiveStyle.highlightForegroundColor) {\r\n                                markStyle +=\r\n                                    \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\r\n                            }\r\n\r\n                            if (markStyle) {\r\n                                markStyle = 'style=\"' + markStyle + '\"';\r\n                            }\r\n\r\n                            this._processedText = this._processedText\r\n                                .replace(/===/g, \"<mark \" + markStyle + \">\")\r\n                                .replace(/\\/==\\//g, \"</mark>\");\r\n                        }\r\n                    } else {\r\n                        this._processedText = formattedText;\r\n                        this._treatAsPlainText = true;\r\n                    }\r\n                } else {\r\n                    this._processedText = formattedText;\r\n                    this._treatAsPlainText = true;\r\n                }\r\n            }\r\n\r\n            if (!this._processedText) {\r\n                this._processedText = \"\";\r\n            }\r\n\r\n            if (this._treatAsPlainText) {\r\n                element.innerText = this._processedText;\r\n            } else {\r\n                const processedHtml =\r\n                    TextBlock._ttMarkdownPolicy?.createHTML(this._processedText) ??\r\n                    this._processedText;\r\n                element.innerHTML = processedHtml as string;\r\n            }\r\n\r\n            if (element.firstElementChild instanceof HTMLElement) {\r\n                const firstElementChild = element.firstElementChild;\r\n                firstElementChild.style.marginTop = \"0px\";\r\n                firstElementChild.style.width = \"100%\";\r\n\r\n                if (!this.wrap) {\r\n                    firstElementChild.style.overflow = \"hidden\";\r\n                    firstElementChild.style.textOverflow = \"ellipsis\";\r\n                }\r\n            }\r\n\r\n            if (element.lastElementChild instanceof HTMLElement) {\r\n                element.lastElementChild.style.marginBottom = \"0px\";\r\n            }\r\n\r\n            const anchors = element.getElementsByTagName(\"a\");\r\n\r\n            for (const anchor of Array.from(anchors)) {\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = (e: MouseEvent) => {\r\n                    if (raiseAnchorClickedEvent(this, anchor, e)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                    }\r\n                };\r\n                anchor.oncontextmenu = (e: MouseEvent) => {\r\n                    if (raiseAnchorClickedEvent(this, anchor, e)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    return true;\r\n                };\r\n            }\r\n\r\n            if (this.wrap) {\r\n                element.style.wordWrap = \"break-word\";\r\n\r\n                if (this.maxLines && this.maxLines > 0) {\r\n                    element.style.overflow = \"hidden\";\r\n\r\n                    if (Utils.isInternetExplorer() || !GlobalSettings.useWebkitLineClamp) {\r\n                        element.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\r\n                    } else {\r\n                        // While non standard, --webkit-line-clamp works in every browser (except IE)\r\n                        // and is a great solution to support the maxLines feature with ellipsis\r\n                        // truncation. With --webkit-line-clamp there is need to use explicit line heights\r\n                        element.style.removeProperty(\"line-height\");\r\n                        element.style.display = \"-webkit-box\";\r\n                        element.style.webkitBoxOrient = \"vertical\";\r\n                        element.style.webkitLineClamp = this.maxLines.toString();\r\n                    }\r\n                }\r\n            } else {\r\n                element.style.whiteSpace = \"nowrap\";\r\n                element.style.textOverflow = \"ellipsis\";\r\n            }\r\n\r\n            if (\r\n                GlobalSettings.useAdvancedTextBlockTruncation ||\r\n                GlobalSettings.useAdvancedCardBottomTruncation\r\n            ) {\r\n                this._originalInnerHtml = element.innerHTML;\r\n            }\r\n\r\n            return element;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        if (maxHeight >= this._computedLineHeight) {\r\n            return this.truncateIfSupported(maxHeight);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        this.restoreOriginalContent();\r\n\r\n        if (GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {\r\n            const maxHeight = this._computedLineHeight * this.maxLines;\r\n\r\n            this.truncateIfSupported(maxHeight);\r\n        }\r\n    }\r\n\r\n    useMarkdown: boolean = true;\r\n    forElementId?: string;\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        super.applyStylesTo(targetElement);\r\n\r\n        switch (this.getEffectiveHorizontalAlignment()) {\r\n            case Enums.HorizontalAlignment.Center:\r\n                targetElement.style.textAlign = \"center\";\r\n                break;\r\n            case Enums.HorizontalAlignment.Right:\r\n                targetElement.style.textAlign = \"end\";\r\n                break;\r\n            default:\r\n                targetElement.style.textAlign = \"start\";\r\n                break;\r\n        }\r\n\r\n        const lineHeights = this.hostConfig.lineHeights;\r\n\r\n        if (lineHeights) {\r\n            switch (this.effectiveSize) {\r\n                case Enums.TextSize.Small:\r\n                    this._computedLineHeight = lineHeights.small;\r\n                    break;\r\n                case Enums.TextSize.Medium:\r\n                    this._computedLineHeight = lineHeights.medium;\r\n                    break;\r\n                case Enums.TextSize.Large:\r\n                    this._computedLineHeight = lineHeights.large;\r\n                    break;\r\n                case Enums.TextSize.ExtraLarge:\r\n                    this._computedLineHeight = lineHeights.extraLarge;\r\n                    break;\r\n                default:\r\n                    this._computedLineHeight = lineHeights.default;\r\n                    break;\r\n            }\r\n        } else {\r\n            // Looks like 1.33 is the magic number to compute line-height\r\n            // from font size.\r\n            this._computedLineHeight =\r\n                this.getFontSize(this.hostConfig.getFontTypeDefinition(this.effectiveFontType)) *\r\n                1.33;\r\n        }\r\n\r\n        targetElement.style.lineHeight = this._computedLineHeight + \"px\";\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TextBlock\";\r\n    }\r\n\r\n    getEffectiveTextStyleDefinition(): TextStyleDefinition {\r\n        if (this.style) {\r\n            return this.hostConfig.textStyles.getStyleByName(this.style);\r\n        }\r\n\r\n        return super.getEffectiveTextStyleDefinition();\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = false) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {\r\n            // Reset the element's innerHTML in case the available room for\r\n            // content has increased\r\n            this.restoreOriginalContent();\r\n            this.truncateIfSupported(this._computedLineHeight * this.maxLines);\r\n        }\r\n    }\r\n}\r\n\r\nexport class TextRun extends BaseTextBlock {\r\n    //#region Schema\r\n\r\n    static readonly italicProperty = new BoolProperty(Versions.v1_2, \"italic\", false);\r\n    static readonly strikethroughProperty = new BoolProperty(Versions.v1_2, \"strikethrough\", false);\r\n    static readonly highlightProperty = new BoolProperty(Versions.v1_2, \"highlight\", false);\r\n    static readonly underlineProperty = new BoolProperty(Versions.v1_3, \"underline\", false);\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        schema.add(BaseTextBlock.selectActionProperty);\r\n    }\r\n\r\n    @property(TextRun.italicProperty)\r\n    italic: boolean = false;\r\n\r\n    @property(TextRun.strikethroughProperty)\r\n    strikethrough: boolean = false;\r\n\r\n    @property(TextRun.highlightProperty)\r\n    highlight: boolean = false;\r\n\r\n    @property(TextRun.underlineProperty)\r\n    underline: boolean = false;\r\n\r\n    //#endregion\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        if (this.text) {\r\n            const preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            const hostConfig = this.hostConfig;\r\n\r\n            let formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n\r\n            if (!formattedText) {\r\n                formattedText = \"\";\r\n            }\r\n\r\n            const element = document.createElement(\"span\");\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\r\n\r\n            this.applyStylesTo(element);\r\n\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                const anchor = document.createElement(\"a\");\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n\r\n                const href = this.selectAction.getHref();\r\n\r\n                anchor.href = href ? href : \"\";\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = (e) => {\r\n                    if (this.selectAction && this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this.selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                this.selectAction.setupElementForAccessibility(anchor);\r\n\r\n                anchor.innerText = formattedText;\r\n\r\n                element.appendChild(anchor);\r\n            } else {\r\n                element.innerText = formattedText;\r\n            }\r\n\r\n            return element;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        super.applyStylesTo(targetElement);\r\n\r\n        if (this.italic) {\r\n            targetElement.style.fontStyle = \"italic\";\r\n        }\r\n\r\n        if (this.strikethrough) {\r\n            targetElement.style.textDecoration = \"line-through\";\r\n        }\r\n\r\n        if (this.highlight) {\r\n            const colorDefinition = this.getColorDefinition(\r\n                this.getEffectiveStyleDefinition().foregroundColors,\r\n                this.effectiveColor\r\n            );\r\n\r\n            const backgroundColor = Utils.stringToCssColor(\r\n                this.effectiveIsSubtle\r\n                    ? colorDefinition.highlightColors.subtle\r\n                    : colorDefinition.highlightColors.default\r\n            );\r\n            if (backgroundColor) {\r\n                targetElement.style.backgroundColor = backgroundColor;\r\n            }\r\n        }\r\n\r\n        if (this.underline) {\r\n            targetElement.style.textDecoration = \"underline\";\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TextRun\";\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get isInline(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class RichTextBlock extends CardElement {\r\n    private _inlines: CardElement[] = [];\r\n\r\n    private internalAddInline(inline: CardElement, forceAdd: boolean = false) {\r\n        if (!inline.isInline) {\r\n            throw new Error(Strings.errors.elementCannotBeUsedAsInline());\r\n        }\r\n\r\n        const doAdd: boolean = inline.parent === undefined || forceAdd;\r\n\r\n        if (!doAdd && inline.parent !== this) {\r\n            throw new Error(Strings.errors.inlineAlreadyParented());\r\n        } else {\r\n            inline.setParent(this);\r\n\r\n            this._inlines.push(inline);\r\n        }\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this._inlines = [];\r\n\r\n        if (Array.isArray(source[\"inlines\"])) {\r\n            for (const jsonInline of source[\"inlines\"]) {\r\n                let inline: CardElement | undefined;\r\n\r\n                if (typeof jsonInline === \"string\") {\r\n                    const textRun = new TextRun();\r\n                    textRun.text = jsonInline;\r\n\r\n                    inline = textRun;\r\n                } else {\r\n                    // No fallback for inlines in 1.2\r\n                    inline = context.parseElement(this, jsonInline, [], false);\r\n                }\r\n\r\n                if (inline) {\r\n                    this.internalAddInline(inline, true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        if (this._inlines.length > 0) {\r\n            const jsonInlines: any[] = [];\r\n\r\n            for (const inline of this._inlines) {\r\n                jsonInlines.push(inline.toJSON(context));\r\n            }\r\n\r\n            context.serializeValue(target, \"inlines\", jsonInlines);\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        if (this._inlines.length > 0) {\r\n            let element: HTMLElement;\r\n\r\n            if (this.forElementId) {\r\n                const labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n\r\n                element = labelElement;\r\n            } else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\r\n\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.textAlign = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.textAlign = \"end\";\r\n                    break;\r\n                default:\r\n                    element.style.textAlign = \"start\";\r\n                    break;\r\n            }\r\n\r\n            let renderedInlines: number = 0;\r\n\r\n            for (const inline of this._inlines) {\r\n                const renderedInline = inline.render();\r\n\r\n                if (renderedInline) {\r\n                    element.appendChild(renderedInline);\r\n\r\n                    renderedInlines++;\r\n                }\r\n            }\r\n\r\n            if (renderedInlines > 0) {\r\n                return element;\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    forElementId?: string;\r\n\r\n    asString(): string | undefined {\r\n        let result = \"\";\r\n\r\n        for (const inline of this._inlines) {\r\n            result += inline.asString();\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"RichTextBlock\";\r\n    }\r\n\r\n    getInlineCount(): number {\r\n        return this._inlines.length;\r\n    }\r\n\r\n    getInlineAt(index: number): CardElement {\r\n        if (index >= 0 && index < this._inlines.length) {\r\n            return this._inlines[index];\r\n        } else {\r\n            throw new Error(Strings.errors.indexOutOfRange(index));\r\n        }\r\n    }\r\n\r\n    addInline(inline: CardElement | string) {\r\n        if (typeof inline === \"string\") {\r\n            this.internalAddInline(new TextRun(inline));\r\n        } else {\r\n            this.internalAddInline(inline);\r\n        }\r\n    }\r\n\r\n    removeInline(inline: CardElement): boolean {\r\n        const index = this._inlines.indexOf(inline);\r\n\r\n        if (index >= 0) {\r\n            this._inlines[index].setParent(undefined);\r\n            this._inlines.splice(index, 1);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class Fact extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly titleProperty = new StringProperty(Versions.v1_0, \"title\");\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n\r\n    // For historic reasons, the \"title\" schema property is exposed as \"name\" in the OM.\r\n    @property(Fact.titleProperty)\r\n    name?: string;\r\n\r\n    @property(Fact.valueProperty)\r\n    value?: string;\r\n\r\n    //#endregion\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"Fact\";\r\n    }\r\n\r\n    constructor(name?: string, value?: string) {\r\n        super();\r\n\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n}\r\n\r\nexport class FactSet extends CardElement {\r\n    //#region Schema\r\n\r\n    static readonly factsProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_0,\r\n        \"facts\",\r\n        Fact\r\n    );\r\n\r\n    @property(FactSet.factsProperty)\r\n    facts: Fact[];\r\n\r\n    //#endregion\r\n\r\n    protected get useDefaultSizing(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        let element: HTMLElement | undefined = undefined;\r\n        const hostConfig = this.hostConfig;\r\n\r\n        if (this.facts.length > 0) {\r\n            element = document.createElement(\"table\");\r\n            element.style.borderWidth = \"0px\";\r\n            element.style.borderSpacing = \"0px\";\r\n            element.style.borderStyle = \"none\";\r\n            element.style.borderCollapse = \"collapse\";\r\n            element.style.display = \"block\";\r\n            element.style.overflow = \"hidden\";\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\r\n            element.setAttribute(\"role\", \"presentation\");\r\n\r\n            for (let i = 0; i < this.facts.length; i++) {\r\n                const trElement = document.createElement(\"tr\");\r\n\r\n                if (i > 0) {\r\n                    trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\r\n                }\r\n\r\n                // Title column\r\n                let tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\r\n\r\n                if (hostConfig.factSet.title.maxWidth) {\r\n                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\r\n                }\r\n\r\n                tdElement.style.verticalAlign = \"top\";\r\n\r\n                let textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text =\r\n                    !this.facts[i].name && this.isDesignMode() ? \"Title\" : this.facts[i].name;\r\n                textBlock.size = hostConfig.factSet.title.size;\r\n                textBlock.color = hostConfig.factSet.title.color;\r\n                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.title.weight;\r\n                textBlock.wrap = hostConfig.factSet.title.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n\r\n                // Spacer column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.width = \"10px\";\r\n\r\n                Utils.appendChild(trElement, tdElement);\r\n\r\n                // Value column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.style.verticalAlign = \"top\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\r\n\r\n                textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = this.facts[i].value;\r\n                textBlock.size = hostConfig.factSet.value.size;\r\n                textBlock.color = hostConfig.factSet.value.color;\r\n                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.value.weight;\r\n                textBlock.wrap = hostConfig.factSet.value.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                Utils.appendChild(element, trElement);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"FactSet\";\r\n    }\r\n}\r\n\r\nclass ImageDimensionProperty extends PropertyDefinition {\r\n    getInternalName(): string {\r\n        return this.internalName;\r\n    }\r\n\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): number | undefined {\r\n        let result: number | undefined = undefined;\r\n        const sourceValue = source[this.name];\r\n\r\n        if (sourceValue === undefined) {\r\n            return this.defaultValue;\r\n        }\r\n\r\n        let isValid = false;\r\n\r\n        if (typeof sourceValue === \"string\") {\r\n            try {\r\n                const size = SizeAndUnit.parse(sourceValue, true);\r\n\r\n                if (size.unit === Enums.SizeUnit.Pixel) {\r\n                    result = size.physicalSize;\r\n\r\n                    isValid = true;\r\n                }\r\n            } catch {\r\n                // Swallow the exception\r\n            }\r\n\r\n            // If the source value isn't valid per this property definition,\r\n            // check its validity per the fallback property, if specified\r\n            if (!isValid && this.fallbackProperty) {\r\n                isValid = this.fallbackProperty.isValidValue(sourceValue, context);\r\n            }\r\n        }\r\n\r\n        if (!isValid) {\r\n            context.logParseEvent(\r\n                sender,\r\n                Enums.ValidationEvent.InvalidPropertyValue,\r\n                Strings.errors.invalidPropertyValue(sourceValue, this.name)\r\n            );\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: number | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeValue(\r\n            target,\r\n            this.name,\r\n            typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined\r\n        );\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly internalName: string,\r\n        readonly fallbackProperty?: ValueSetProperty\r\n    ) {\r\n        super(targetVersion, name);\r\n    }\r\n}\r\n\r\nexport class Image extends CardElement {\r\n    //#region Schema\r\n\r\n    static readonly urlProperty = new StringProperty(Versions.v1_0, \"url\");\r\n    static readonly altTextProperty = new StringProperty(Versions.v1_0, \"altText\");\r\n    static readonly backgroundColorProperty = new StringProperty(Versions.v1_1, \"backgroundColor\");\r\n    static readonly styleProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"style\",\r\n        Enums.ImageStyle,\r\n        Enums.ImageStyle.Default\r\n    );\r\n    static readonly sizeProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"size\",\r\n        Enums.Size,\r\n        Enums.Size.Auto\r\n    );\r\n    static readonly pixelWidthProperty = new ImageDimensionProperty(\r\n        Versions.v1_1,\r\n        \"width\",\r\n        \"pixelWidth\"\r\n    );\r\n    static readonly pixelHeightProperty = new ImageDimensionProperty(\r\n        Versions.v1_1,\r\n        \"height\",\r\n        \"pixelHeight\",\r\n        CardElement.heightProperty\r\n    );\r\n    static readonly selectActionProperty = new ActionProperty(Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    static readonly shouldForceLoadProperty = new BoolProperty(Versions.v1_6, \"forceLoad\", false);\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        schema.remove(CardElement.heightProperty);\r\n    }\r\n\r\n    public renderedImageElement?: HTMLElement;\r\n\r\n    @property(Image.urlProperty)\r\n    url?: string;\r\n\r\n    @property(Image.altTextProperty)\r\n    altText?: string;\r\n\r\n    @property(Image.backgroundColorProperty)\r\n    backgroundColor?: string;\r\n\r\n    @property(Image.sizeProperty)\r\n    size: Enums.Size = Enums.Size.Auto;\r\n\r\n    @property(Image.styleProperty)\r\n    style: Enums.ImageStyle = Enums.ImageStyle.Default;\r\n\r\n    @property(Image.pixelWidthProperty)\r\n    pixelWidth?: number;\r\n\r\n    @property(Image.pixelHeightProperty)\r\n    pixelHeight?: number;\r\n\r\n    @property(Image.selectActionProperty)\r\n    selectAction?: Action;\r\n\r\n    @property(Image.shouldForceLoadProperty)\r\n    forceLoad: boolean;\r\n\r\n    //#endregion\r\n\r\n    private applySize(element: HTMLElement) {\r\n        if (this.pixelWidth || this.pixelHeight) {\r\n            if (this.pixelWidth) {\r\n                element.style.width = this.pixelWidth + \"px\";\r\n            }\r\n\r\n            if (this.pixelHeight) {\r\n                element.style.height = this.pixelHeight + \"px\";\r\n            }\r\n        } else {\r\n            if (this.maxHeight) {\r\n                // If the image is constrained in height, we set its height property and\r\n                // auto and stretch are ignored (default to medium). THis is necessary for\r\n                // ImageSet which uses a maximum image height as opposed to the cards width\r\n                // as a constraining dimension\r\n                switch (this.size) {\r\n                    case Enums.Size.Small:\r\n                        element.style.height = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.height = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    default:\r\n                        element.style.height = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n\r\n                element.style.maxHeight = this.maxHeight + \"px\";\r\n            } else {\r\n                switch (this.size) {\r\n                    case Enums.Size.Stretch:\r\n                        element.style.width = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Auto:\r\n                        element.style.maxWidth = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Small:\r\n                        element.style.width = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.width = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    case Enums.Size.Medium:\r\n                        element.style.width = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n\r\n                element.style.maxHeight = \"100%\";\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get useDefaultSizing() {\r\n        return false;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        let element: HTMLElement | undefined = undefined;\r\n\r\n        if (this.url) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.alignItems = \"flex-start\";\r\n\r\n            // Cache hostConfig to avoid walking the parent hierarchy multiple times\r\n            const hostConfig = this.hostConfig;\r\n\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n\r\n            const imageElement = document.createElement(\"img\");\r\n\r\n            this.renderedImageElement = imageElement;\r\n\r\n            imageElement.onload = (_e: Event) => {\r\n                raiseImageLoadedEvent(this);\r\n            };\r\n            imageElement.onerror = (_e: Event) => {\r\n                if (this.renderedElement) {\r\n                    const card = this.getRootElement() as AdaptiveCard;\r\n\r\n                    clearElement(this.renderedElement);\r\n\r\n                    if (card && card.designMode) {\r\n                        const errorElement = document.createElement(\"div\");\r\n                        errorElement.style.display = \"flex\";\r\n                        errorElement.style.alignItems = \"center\";\r\n                        errorElement.style.justifyContent = \"center\";\r\n                        errorElement.style.backgroundColor = \"#EEEEEE\";\r\n                        errorElement.style.color = \"black\";\r\n                        errorElement.innerText = \":-(\";\r\n                        errorElement.style.padding = \"10px\";\r\n\r\n                        this.applySize(errorElement);\r\n\r\n                        this.renderedElement.appendChild(errorElement);\r\n                    }\r\n                }\r\n\r\n                raiseImageLoadedEvent(this);\r\n            };\r\n            imageElement.style.minWidth = \"0\";\r\n            imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\r\n\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                imageElement.onkeypress = (e) => {\r\n                    if (\r\n                        this.selectAction &&\r\n                        this.selectAction.isEffectivelyEnabled() &&\r\n                        (e.code === \"Enter\" || e.code === \"Space\")\r\n                    ) {\r\n                        // enter or space pressed\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this.selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                imageElement.onclick = (e) => {\r\n                    if (this.selectAction && this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this.selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                this.selectAction.setupElementForAccessibility(imageElement);\r\n\r\n                if (this.selectAction.isEffectivelyEnabled()) {\r\n                    imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n\r\n            this.applySize(imageElement);\r\n\r\n            if (this.style === Enums.ImageStyle.Person) {\r\n                imageElement.style.borderRadius = \"50%\";\r\n                imageElement.style.backgroundPosition = \"50% 50%\";\r\n                imageElement.style.backgroundRepeat = \"no-repeat\";\r\n            }\r\n\r\n            const backgroundColor = Utils.stringToCssColor(this.backgroundColor);\r\n            if (backgroundColor) {\r\n                imageElement.style.backgroundColor = backgroundColor;\r\n            }\r\n\r\n            this.setImageSource(imageElement);    \r\n\r\n            const altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);\r\n            if (altTextProperty) {\r\n                imageElement.alt = <string>altTextProperty;\r\n            }\r\n\r\n            element.appendChild(imageElement);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    maxHeight?: number;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        if (this.selectAction) {\r\n            result.push(this.selectAction);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionById(id: string) {\r\n        let result = super.getActionById(id);\r\n\r\n        if (!result && this.selectAction) {\r\n            result = this.selectAction.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        return this.url ? [{ url: this.url, mimeType: \"image\" }] : [];\r\n    }\r\n\r\n    private setImageSource(imageElement: HTMLImageElement): void {\r\n        const imageForceLoader: ImageForceLoader = new ImageForceLoader(this.forceLoad, this.url);\r\n        imageForceLoader.configureImage(this);\r\n        imageElement.src = <string>this.preProcessPropertyValue(Image.urlProperty);\r\n        imageForceLoader.resetImage(this);\r\n    } \r\n}\r\n\r\n// configures Image element to fetch a new image data from url source instead of relying on cache\r\n// currently rudimentary refreshing scheme is used\r\n// by attaching unique query string to url, we bypass the cache usage\r\nclass ImageForceLoader{\r\n    private uniqueHash : string;\r\n    public readonly urlWithForceLoadOption : string;\r\n    constructor(\r\n        readonly doForceLoad: boolean,\r\n        readonly url : string | undefined,\r\n    )\r\n    {\r\n        if (url && url.length && doForceLoad) {\r\n            // we can do better by appending unique key such as uuid instead of epoch\r\n            // however the current usage is for front-end ui and networking,  \r\n            // since ui is running in single main thread, this is sufficient mechanism\r\n            // without needing to depend on external library for our small use cases.\r\n            this.uniqueHash = '?' + Date.now();\r\n            this.urlWithForceLoadOption = url + this.uniqueHash;\r\n        }\r\n    }\r\n\r\n    public configureImage(image: Image): void {\r\n        if (this.urlWithForceLoadOption && this.urlWithForceLoadOption.length) {\r\n            image.url = this.urlWithForceLoadOption;\r\n        }\r\n    }\r\n\r\n    public resetImage(image: Image): void {\r\n        image.url = this.url;\r\n    }\r\n}\r\n\r\nexport abstract class CardElementContainer extends CardElement {\r\n    //#region Schema\r\n\r\n    static readonly selectActionProperty = new ActionProperty(Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        if (!this.isSelectable) {\r\n            schema.remove(CardElementContainer.selectActionProperty);\r\n        }\r\n    }\r\n\r\n    @property(CardElementContainer.selectActionProperty)\r\n    protected _selectAction?: Action;\r\n\r\n    //#endregion\r\n\r\n    protected isElementAllowed(element: CardElement) {\r\n        return this.hostConfig.supportsInteractivity || !element.isInteractive;\r\n    }\r\n\r\n    protected applyPadding() {\r\n        super.applyPadding();\r\n\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n\r\n        let physicalPadding = new SpacingDefinition();\r\n\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(\r\n                this.getEffectivePadding()\r\n            );\r\n        }\r\n\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n\r\n        this.renderedElement.style.marginRight = \"0\";\r\n        this.renderedElement.style.marginLeft = \"0\";\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected forbiddenChildElements(): string[] {\r\n        return [];\r\n    }\r\n\r\n    abstract getItemCount(): number;\r\n    abstract getItemAt(index: number): CardElement;\r\n    abstract getFirstVisibleRenderedItem(): CardElement | undefined;\r\n    abstract getLastVisibleRenderedItem(): CardElement | undefined;\r\n    abstract removeItem(item: CardElement): boolean;\r\n\r\n    allowVerticalOverflow: boolean = false;\r\n\r\n    releaseDOMResources() {\r\n        super.releaseDOMResources();\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).releaseDOMResources();\r\n        }\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            const item = this.getItemAt(i);\r\n\r\n            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.InteractivityNotAllowed,\r\n                    Strings.errors.interactivityNotAllowed()\r\n                );\r\n            }\r\n\r\n            if (!this.isElementAllowed(item)) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.InteractivityNotAllowed,\r\n                    Strings.errors.elementTypeNotAllowed(item.getJsonTypeName())\r\n                );\r\n            }\r\n\r\n            item.internalValidateProperties(context);\r\n        }\r\n\r\n        if (this._selectAction) {\r\n            this._selectAction.internalValidateProperties(context);\r\n        }\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        const element = super.render();\r\n\r\n        if (element) {\r\n            const hostConfig = this.hostConfig;\r\n\r\n            if (this.allowVerticalOverflow) {\r\n                element.style.overflowX = \"hidden\";\r\n                element.style.overflowY = \"auto\";\r\n            }\r\n\r\n            if (\r\n                element &&\r\n                this.isSelectable &&\r\n                this._selectAction &&\r\n                hostConfig.supportsInteractivity\r\n            ) {\r\n                element.onclick = (e) => {\r\n                    if (this._selectAction && this._selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this._selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                element.onkeypress = (e) => {\r\n                    if (\r\n                        this._selectAction &&\r\n                        this._selectAction.isEffectivelyEnabled() &&\r\n                        (e.code === \"Enter\" || e.code === \"Space\")\r\n                    ) {\r\n                        // Enter or space pressed\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        this._selectAction.execute();\r\n                    }\r\n                };\r\n\r\n                this._selectAction.setupElementForAccessibility(element);\r\n\r\n                if (this._selectAction.isEffectivelyEnabled()) {\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = true) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (processChildren) {\r\n            for (let i = 0; i < this.getItemCount(); i++) {\r\n                this.getItemAt(i).updateLayout();\r\n            }\r\n        }\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        let result: Input[] = [];\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            result.push(...this.getItemAt(i).getAllInputs(processActions));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            result.push(...this.getItemAt(i).getAllActions());\r\n        }\r\n\r\n        if (this._selectAction) {\r\n            result.push(this._selectAction);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        let result: IResourceInformation[] = [];\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            result.push(...this.getItemAt(i).getResourceInformation());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getElementById(id: string): CardElement | undefined {\r\n        let result = super.getElementById(id);\r\n\r\n        if (!result) {\r\n            for (let i = 0; i < this.getItemCount(); i++) {\r\n                result = this.getItemAt(i).getElementById(id);\r\n\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    findDOMNodeOwner(node: Node): CardObject | undefined {\r\n        let target: CardObject | undefined = undefined;\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            // recur through child elements\r\n            target = this.getItemAt(i).findDOMNodeOwner(node);\r\n\r\n            if (target) {\r\n                return target;\r\n            }\r\n        }\r\n\r\n        // If not found in children, check the actions\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            target = this.getActionAt(i)?.findDOMNodeOwner(node);\r\n\r\n            if (target) {\r\n                return target;\r\n            }\r\n        }\r\n\r\n        // if not found in children or actions, defer to parent implementation\r\n        return super.findDOMNodeOwner(node);\r\n    }\r\n}\r\n\r\nexport class ImageSet extends CardElementContainer {\r\n    //#region Schema\r\n\r\n    static readonly imagesProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_0,\r\n        \"images\",\r\n        Image,\r\n        (sender: SerializableObject, item: Image) => {\r\n            item.setParent(<CardElement>sender);\r\n        }\r\n    );\r\n\r\n    static readonly imageSizeProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"imageSize\",\r\n        Enums.ImageSize,\r\n        Enums.ImageSize.Medium\r\n    );\r\n\r\n    static readonly imagePresentationStyle = new EnumProperty(\r\n        Versions.v1_6,\r\n        \"style\",\r\n        Enums.ImageSetPresentationStyle,\r\n        Enums.ImageSetPresentationStyle.Default\r\n    );\r\n\r\n    static readonly pixelOffset = new NumProperty(\r\n        Versions.v1_6,\r\n        \"offset\",\r\n        0,\r\n        undefined\r\n    );\r\n\r\n    @property(ImageSet.imagesProperty)\r\n    private _images: Image[] = [];\r\n\r\n    @property(ImageSet.imageSizeProperty)\r\n    imageSize: Enums.ImageSize = Enums.ImageSize.Medium;\r\n\r\n    @property(ImageSet.imagePresentationStyle)\r\n    presentationStyle: Enums.ImageSetPresentationStyle = Enums.ImageSetPresentationStyle.Default;\r\n\r\n    @property(ImageSet.pixelOffset)\r\n    pixelOffset: number = 0;\r\n\r\n    //#endregion\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        let element: HTMLElement | undefined = undefined;\r\n\r\n        if (this._images.length > 0) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.flexWrap = \"wrap\";\r\n\r\n            for (const image of this._images) {\r\n                switch (this.imageSize) {\r\n                    case Enums.ImageSize.Small:\r\n                        image.size = Enums.Size.Small;\r\n                        break;\r\n                    case Enums.ImageSize.Large:\r\n                        image.size = Enums.Size.Large;\r\n                        break;\r\n                    default:\r\n                        image.size = Enums.Size.Medium;\r\n                        break;\r\n                }\r\n\r\n                image.maxHeight = this.hostConfig.imageSet.maxImageHeight;\r\n\r\n                const renderedImage = image.render();\r\n\r\n                if (renderedImage) {\r\n                    renderedImage.style.display = \"inline-flex\";\r\n                    renderedImage.style.margin = \"0px\";\r\n                    if (this.presentationStyle == Enums.ImageSetPresentationStyle.Default) {\r\n                        renderedImage.style.marginRight = \"10px\";\r\n                    }\r\n\r\n                    Utils.appendChild(element, renderedImage);\r\n                }\r\n            }\r\n            if (this.presentationStyle == Enums.ImageSetPresentationStyle.Stacked) {\r\n                this.applyStackedPresentationStyle();\r\n            }\r\n        }\r\n        \r\n\r\n        return element;\r\n    }\r\n\r\n    applyStackedPresentationStyle() {\r\n        if (this._images[0].renderedImageElement) {\r\n            let dimension = StackedImageConfigurator.parseNumericPixelDimension(this._images[0].renderedImageElement.style.height);\r\n            let bgColor = this.getEffectiveBackgroundColor();\r\n            if (dimension) {\r\n                let stackedImageConfigurator = new StackedImageConfigurator(this.pixelOffset, \r\n                    dimension, bgColor);\r\n                stackedImageConfigurator.configureImagesArrayAsStackedLayout(this._images);\r\n            }\r\n        }\r\n    }\r\n\r\n    getEffectiveBackgroundColor() : string | undefined {\r\n        let parentContainer = this.getParentContainer();\r\n        let style = parentContainer?.getEffectiveStyle();\r\n\r\n        const styleDefinition = this.hostConfig.containerStyles.getStyleByName(\r\n            style,\r\n            this.hostConfig.containerStyles.getStyleByName(this.defaultStyle)\r\n        );\r\n\r\n        return Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._images.length;\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this._images[index];\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement | undefined {\r\n        return this._images && this._images.length > 0 ? this._images[0] : undefined;\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement | undefined {\r\n        return this._images && this._images.length > 0\r\n            ? this._images[this._images.length - 1]\r\n            : undefined;\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        if (item instanceof Image) {\r\n            const itemIndex = this._images.indexOf(item);\r\n\r\n            if (itemIndex >= 0) {\r\n                this._images.splice(itemIndex, 1);\r\n\r\n                item.setParent(undefined);\r\n\r\n                this.updateLayout();\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ImageSet\";\r\n    }\r\n\r\n    addImage(image: Image) {\r\n        if (!image.parent) {\r\n            this._images.push(image);\r\n\r\n            image.setParent(this);\r\n        } else {\r\n            throw new Error(\"This image already belongs to another ImageSet\");\r\n        }\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\r\n    }\r\n}\r\n\r\nclass StackedImageConfigurator {\r\n    private sign45 = 0.7071;\r\n    private maxImageCounts: number = 2;\r\n    private offset: number = 0;\r\n    private normalizationConstant: number = 0;\r\n    private border: number = 5;\r\n    private dimension: number = 0;\r\n    private style: string;\r\n\r\n    constructor(offset: number, dimension: number, style: string | undefined) {\r\n        this.dimension = dimension;\r\n        this.normalizationConstant = (dimension * this.sign45 - 0.5 * dimension) * 2;\r\n        // offset determines how far images are placed from each other\r\n        // at zero, images are separated only by the border\r\n        // there is no restriction on how far they are apart in positive values, their actual\r\n        // positioning is limited by maximum size imposed by Image renderer\r\n        // a negative value can decrease upto the diameter of the image since a value less than the diameter\r\n        // put the images past each other, and the use of such value is not reasonable request\r\n        // users should change image positions in such case.\r\n        this.offset = this.sign45 * (Math.max(offset, -dimension) - this.normalizationConstant);\r\n        this.style = style ? style : \"\";\r\n    }\r\n\r\n    private moveImageRight(element: HTMLElement) {\r\n        element.style.marginLeft = this.offset + \"px\";\r\n    }\r\n\r\n    private moveImageUp(element: HTMLElement) {\r\n        element.style.marginBottom = this.offset + this.dimension+ \"px\";\r\n    }\r\n\r\n    private moveImageDown(element: HTMLElement) {\r\n        element.style.marginTop = this.offset + this.dimension + \"px\";\r\n    }\r\n\r\n    private makeImageRound(element: HTMLElement) {\r\n        element.style.borderRadius = \"50%\";\r\n        element.style.backgroundPosition = \"50% 50%\";\r\n        element.style.backgroundRepeat = \"no-repeat\";\r\n    }\r\n\r\n    private applyBorder(element: HTMLElement) {\r\n        element.style.height = (this.dimension + this.border * 2) + \"px\";\r\n        element.style.border = this.border + \"px\" + \" solid \" + this.style;\r\n    }\r\n\r\n    private configureImageForBottomLeft(element: HTMLElement) {\r\n        this.moveImageDown(element);\r\n        this.makeImageRound(element); \r\n        this.applyBorder(element);\r\n        element.style.zIndex = \"2\";\r\n    }\r\n\r\n    private configureImageForTopRight(element: HTMLElement) {\r\n        this.moveImageUp(element);\r\n        this.moveImageRight(element);\r\n        this.makeImageRound(element); \r\n        element.style.zIndex = \"1\";\r\n    }\r\n\r\n    // stacked layout is applied when there are two images in ImageSet,\r\n    // first image in the ImageSet is put bottom left of ImageSet,\r\n    // second image is placed top right diagonally to the first image at 45 angle\r\n    // first image is placed over the second image should the overlap to occur.\r\n    public configureImagesArrayAsStackedLayout(elements: Array<Image>) {\r\n        if (elements.length == 1) {\r\n            if (elements[0].renderedImageElement) {\r\n                this.makeImageRound(elements[0].renderedImageElement); \r\n            }\r\n        }\r\n        else if (elements.length <= this.maxImageCounts) {\r\n            if (elements[0].renderedImageElement && elements[1].renderedImageElement) {\r\n                this.configureImageForBottomLeft(elements[0].renderedImageElement);\r\n                this.configureImageForTopRight(elements[1].renderedImageElement);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static parseNumericPixelDimension(dimension: string): number | undefined  {\r\n        if (dimension?.substring(dimension.length - 2) == 'px') {\r\n            return parseInt(dimension.substring(0, dimension.length - 2));\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport abstract class ContentSource extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly mimeTypeProperty = new StringProperty(Versions.v1_1, \"mimeType\");\r\n    static readonly urlProperty = new StringProperty(Versions.v1_1, \"url\");\r\n\r\n    @property(ContentSource.mimeTypeProperty)\r\n    mimeType?: string;\r\n\r\n    @property(ContentSource.urlProperty)\r\n    url?: string;\r\n\r\n    //#endregion\r\n\r\n    constructor(url?: string, mimeType?: string) {\r\n        super();\r\n\r\n        this.url = url;\r\n        this.mimeType = mimeType;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return this.mimeType && this.url ? true : false;\r\n    }\r\n}\r\n\r\nexport class CaptionSource extends ContentSource {\r\n    //#region Schema\r\n\r\n    static readonly labelProperty = new StringProperty(Versions.v1_6, \"label\");\r\n\r\n    @property(CaptionSource.labelProperty)\r\n    label?: string;\r\n\r\n    //#endregion\r\n\r\n    constructor(url?: string, mimeType?: string, label?: string) {\r\n        super(url, mimeType);\r\n\r\n        this.label = label;\r\n    }\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"CaptionSource\";\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        let result: HTMLTrackElement | undefined = undefined;\r\n\r\n        if (this.isValid()) {\r\n            result = document.createElement(\"track\");\r\n            result.src = this.url!;\r\n            result.kind = \"captions\";\r\n            result.label = this.label!;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class MediaSource extends ContentSource {\r\n    protected getSchemaKey(): string {\r\n        return \"MediaSource\";\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        let result: HTMLSourceElement | undefined = undefined;\r\n\r\n        if (this.isValid()) {\r\n            result = document.createElement(\"source\");\r\n            result.src = this.url!;\r\n            result.type = this.mimeType!;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport abstract class MediaPlayer {\r\n    private _posterUrl?: string;\r\n\r\n    abstract canPlay(): boolean;\r\n    abstract render(): HTMLElement;\r\n    abstract fetchVideoDetails(): Promise<void>;\r\n\r\n    play() {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    get posterUrl(): string | undefined {\r\n        return this._posterUrl;\r\n    }\r\n\r\n    protected set posterUrl(value: string | undefined) {\r\n        this._posterUrl = value;\r\n    }\r\n\r\n    get selectedMediaType(): string | undefined {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport class HTML5MediaPlayer extends MediaPlayer {\r\n    private _selectedMediaType?: string;\r\n    private _selectedSources: MediaSource[] = [];\r\n    private _captionSources: CaptionSource[] = [];\r\n    private _mediaElement?: HTMLMediaElement;\r\n\r\n    private processSources() {\r\n        this._selectedSources = [];\r\n        this._captionSources = [];\r\n        this._selectedMediaType = undefined;\r\n\r\n        for (const source of this.owner.sources) {\r\n            const mimeComponents = source.mimeType ? source.mimeType.split(\"/\") : [];\r\n\r\n            if (mimeComponents.length === 2) {\r\n                if (!this._selectedMediaType) {\r\n                    const index = HTML5MediaPlayer.supportedMediaTypes.indexOf(mimeComponents[0]);\r\n\r\n                    if (index >= 0) {\r\n                        this._selectedMediaType = HTML5MediaPlayer.supportedMediaTypes[index];\r\n                    }\r\n                }\r\n                if (mimeComponents[0] === this._selectedMediaType) {\r\n                    this._selectedSources.push(source);\r\n                }\r\n            }\r\n        }\r\n\r\n        this._captionSources.push(...this.owner.captionSources);\r\n    }\r\n\r\n    static readonly supportedMediaTypes = [\"audio\", \"video\"];\r\n\r\n    constructor(readonly owner: Media) {\r\n        super();\r\n\r\n        this.processSources();\r\n    }\r\n\r\n    canPlay(): boolean {\r\n        return this._selectedSources.length > 0;\r\n    }\r\n\r\n    async fetchVideoDetails() {\r\n        // Nothing to fetch for the HTML5 media player\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        if (this._selectedMediaType === \"video\") {\r\n            this._mediaElement = document.createElement(\"video\");\r\n        } else {\r\n            this._mediaElement = document.createElement(\"audio\");\r\n        }\r\n\r\n        this._mediaElement.setAttribute(\r\n            \"aria-label\",\r\n            this.owner.altText ? this.owner.altText : Strings.defaults.mediaPlayerAriaLabel()\r\n        );\r\n        this._mediaElement.setAttribute(\"webkit-playsinline\", \"\");\r\n        this._mediaElement.setAttribute(\"playsinline\", \"\");\r\n        // We enable crossorigin for cases where the caption file has a different domain than\r\n        // the video file. If the caption file lives in a different domain than the video file\r\n        // and crossorigin is not set, then the caption file will fail to load.\r\n        this._mediaElement.setAttribute(\"crossorigin\", \"\");\r\n        this._mediaElement.autoplay = true;\r\n        this._mediaElement.controls = true;\r\n\r\n        if (Utils.isMobileOS()) {\r\n            this._mediaElement.muted = true;\r\n        }\r\n\r\n        this._mediaElement.preload = \"none\";\r\n        this._mediaElement.style.width = \"100%\";\r\n\r\n        for (const source of this.owner.sources) {\r\n            const renderedSource = source.render();\r\n\r\n            Utils.appendChild(this._mediaElement, renderedSource);\r\n        }\r\n\r\n        for (const captionSource of this.owner.captionSources) {\r\n            if (captionSource.mimeType == \"vtt\") {\r\n                const renderedCaptionSource = captionSource.render();\r\n\r\n                Utils.appendChild(this._mediaElement, renderedCaptionSource);\r\n            }\r\n        }\r\n\r\n        return this._mediaElement;\r\n    }\r\n\r\n    play() {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.play();\r\n        }\r\n    }\r\n\r\n    get selectedMediaType(): string | undefined {\r\n        return this._selectedMediaType;\r\n    }\r\n}\r\n\r\nexport abstract class CustomMediaPlayer extends MediaPlayer {\r\n    constructor(matches: RegExpExecArray) {\r\n        super();\r\n    }\r\n}\r\n\r\nexport abstract class IFrameMediaMediaPlayer extends CustomMediaPlayer {\r\n    private _videoId?: string;\r\n\r\n    constructor(matches: RegExpExecArray, readonly iFrameTitle?: string) {\r\n        super(matches);\r\n\r\n        if (matches.length >= 2) {\r\n            this._videoId = matches[1];\r\n        }\r\n    }\r\n\r\n    abstract getEmbedVideoUrl(): string;\r\n\r\n    canPlay(): boolean {\r\n        return this._videoId !== undefined;\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        let container = document.createElement(\"div\");\r\n        container.style.position = \"relative\";\r\n        container.style.width = \"100%\";\r\n        container.style.height = \"0\";\r\n        container.style.paddingBottom = \"56.25%\";\r\n\r\n        let iFrame = document.createElement(\"iframe\");\r\n        iFrame.style.position = \"absolute\";\r\n        iFrame.style.top = \"0\";\r\n        iFrame.style.left = \"0\";\r\n        iFrame.style.width = \"100%\";\r\n        iFrame.style.height = \"100%\";\r\n        iFrame.src = this.getEmbedVideoUrl();\r\n        iFrame.frameBorder = \"0\";\r\n\r\n        if (this.iFrameTitle) {\r\n            iFrame.title = this.iFrameTitle;\r\n        }\r\n\r\n        iFrame.allow =\r\n            \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\";\r\n        iFrame.allowFullscreen = true;\r\n\r\n        container.appendChild(iFrame);\r\n\r\n        return container;\r\n    }\r\n\r\n    get videoId(): string | undefined {\r\n        return this._videoId;\r\n    }\r\n}\r\n\r\nexport class VimeoPlayer extends IFrameMediaMediaPlayer {\r\n    async fetchVideoDetails(): Promise<void> {\r\n        const oEmbedUrl = `https://vimeo.com/api/oembed.json?url=${this.getEmbedVideoUrl()}`;\r\n\r\n        let response = await fetch(oEmbedUrl);\r\n\r\n        if (response.ok) {\r\n            let json = await response.json();\r\n\r\n            this.posterUrl = json[\"thumbnail_url\"];\r\n        }\r\n    }\r\n\r\n    getEmbedVideoUrl(): string {\r\n        return `https://player.vimeo.com/video/${this.videoId}?autoplay=1`;\r\n    }\r\n}\r\n\r\nexport class DailymotionPlayer extends IFrameMediaMediaPlayer {\r\n    async fetchVideoDetails(): Promise<void> {\r\n        const apiUrl = `https://api.dailymotion.com/video/${this.videoId}?fields=thumbnail_720_url`;\r\n\r\n        let response = await fetch(apiUrl);\r\n\r\n        if (response.ok) {\r\n            let json = await response.json();\r\n\r\n            this.posterUrl = json[\"thumbnail_720_url\"];\r\n        }\r\n    }\r\n\r\n    getEmbedVideoUrl(): string {\r\n        return `https://www.dailymotion.com/embed/video/${this.videoId}?autoplay=1`;\r\n    }\r\n}\r\n\r\nexport class YouTubePlayer extends IFrameMediaMediaPlayer {\r\n    private _startTimeIndex?: number;\r\n\r\n    constructor(matches: RegExpExecArray, readonly iFrameTitle?: string) {\r\n        super(matches, iFrameTitle);\r\n\r\n        if (matches.length >= 3 && matches[2] !== undefined) {\r\n            this._startTimeIndex = parseInt(matches[2]);\r\n        }\r\n    }\r\n\r\n    async fetchVideoDetails(): Promise<void> {\r\n        this.posterUrl = this.videoId\r\n            ? `https://img.youtube.com/vi/${this.videoId}/maxresdefault.jpg`\r\n            : undefined;\r\n    }\r\n\r\n    getEmbedVideoUrl(): string {\r\n        let url = `https://www.youtube.com/embed/${this.videoId}?autoplay=1`;\r\n\r\n        if (this._startTimeIndex !== undefined) {\r\n            url += `&start=${this._startTimeIndex}`;\r\n        }\r\n\r\n        return url;\r\n    }\r\n}\r\n\r\nexport interface ICustomMediaPlayer {\r\n    urlPatterns: RegExp[];\r\n    createMediaPlayer: (matches: RegExpExecArray) => CustomMediaPlayer;\r\n}\r\n\r\nexport class Media extends CardElement {\r\n    static customMediaPlayers: ICustomMediaPlayer[] = [\r\n        {\r\n            urlPatterns: [\r\n                /^(?:https?:\\/\\/)?(?:www.)?youtube.com\\/watch\\?(?=.*v=([\\w\\d-_]+))(?=(?:.*t=(\\d+))?).*/gi,\r\n                /^(?:https?:\\/\\/)?youtu.be\\/([\\w\\d-_]+)(?:\\?t=(\\d+))?/gi\r\n            ],\r\n            createMediaPlayer: (matches) =>\r\n                new YouTubePlayer(matches, Strings.defaults.youTubeVideoPlayer())\r\n        },\r\n        {\r\n            urlPatterns: [/^(?:https?:\\/\\/)?vimeo.com\\/([\\w\\d-_]+).*/gi],\r\n            createMediaPlayer: (matches) =>\r\n                new VimeoPlayer(matches, Strings.defaults.vimeoVideoPlayer())\r\n        },\r\n        {\r\n            urlPatterns: [/^(?:https?:\\/\\/)?(?:www.)?dailymotion.com\\/video\\/([\\w\\d-_]+).*/gi],\r\n            createMediaPlayer: (matches) =>\r\n                new DailymotionPlayer(matches, Strings.defaults.dailymotionVideoPlayer())\r\n        }\r\n    ];\r\n\r\n    //#region Schema\r\n\r\n    static readonly sourcesProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_1,\r\n        \"sources\",\r\n        MediaSource\r\n    );\r\n    static readonly captionSourcesProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_6,\r\n        \"captionSources\",\r\n        CaptionSource\r\n    );\r\n    static readonly posterProperty = new StringProperty(Versions.v1_1, \"poster\");\r\n    static readonly altTextProperty = new StringProperty(Versions.v1_1, \"altText\");\r\n\r\n    @property(Media.sourcesProperty)\r\n    sources: MediaSource[] = [];\r\n\r\n    @property(Media.captionSourcesProperty)\r\n    captionSources: CaptionSource[] = [];\r\n\r\n    @property(Media.posterProperty)\r\n    poster?: string;\r\n\r\n    @property(Media.altTextProperty)\r\n    altText?: string;\r\n\r\n    //#endregion\r\n\r\n    private _mediaPlayer: MediaPlayer;\r\n\r\n    private createMediaPlayer(): MediaPlayer {\r\n        for (let provider of Media.customMediaPlayers) {\r\n            for (let source of this.sources) {\r\n                if (source.url) {\r\n                    for (let pattern of provider.urlPatterns) {\r\n                        let matches = pattern.exec(source.url);\r\n\r\n                        if (matches !== null) {\r\n                            return provider.createMediaPlayer(matches);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return new HTML5MediaPlayer(this);\r\n    }\r\n\r\n    private handlePlayButtonInvoke(event: UIEvent): void {\r\n        if (this.hostConfig.media.allowInlinePlayback) {\r\n            event.preventDefault();\r\n            event.cancelBubble = true;\r\n\r\n            if (this.renderedElement) {\r\n                const mediaPlayerElement = this._mediaPlayer.render();\r\n                clearElement(this.renderedElement);\r\n                this.renderedElement.appendChild(mediaPlayerElement);\r\n\r\n                this._mediaPlayer.play();\r\n\r\n                mediaPlayerElement.focus();\r\n            }\r\n        } else {\r\n            if (Media.onPlay) {\r\n                event.preventDefault();\r\n                event.cancelBubble = true;\r\n\r\n                Media.onPlay(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    private async displayPoster() {\r\n        if (this.renderedElement) {\r\n            const playButtonArrowWidth = 12;\r\n            const playButtonArrowHeight = 15;\r\n\r\n            const posterRootElement = document.createElement(\"div\");\r\n            posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\r\n            posterRootElement.setAttribute(\"role\", \"contentinfo\");\r\n            posterRootElement.setAttribute(\r\n                \"aria-label\",\r\n                this.altText ? this.altText : Strings.defaults.mediaPlayerAriaLabel()\r\n            );\r\n            posterRootElement.style.position = \"relative\";\r\n            posterRootElement.style.display = \"flex\";\r\n\r\n            let posterUrl = this.poster ? this.poster : this._mediaPlayer.posterUrl;\r\n\r\n            if (!posterUrl) {\r\n                posterUrl = this.hostConfig.media.defaultPoster;\r\n            }\r\n\r\n            if (posterUrl) {\r\n                const posterImageElement = document.createElement(\"img\");\r\n                posterImageElement.style.width = \"100%\";\r\n                posterImageElement.style.height = \"100%\";\r\n                posterImageElement.setAttribute(\"role\", \"presentation\");\r\n\r\n                posterImageElement.onerror = (_e: Event) => {\r\n                    if (posterImageElement.parentNode) {\r\n                        posterImageElement.parentNode.removeChild(posterImageElement);\r\n                    }\r\n\r\n                    posterRootElement.classList.add(\"empty\");\r\n                    posterRootElement.style.minHeight = \"150px\";\r\n                };\r\n\r\n                posterImageElement.src = posterUrl;\r\n\r\n                posterRootElement.appendChild(posterImageElement);\r\n            } else {\r\n                posterRootElement.classList.add(\"empty\");\r\n                posterRootElement.style.minHeight = \"150px\";\r\n            }\r\n\r\n            if (this.hostConfig.supportsInteractivity && this._mediaPlayer.canPlay()) {\r\n                const playButtonOuterElement = document.createElement(\"div\");\r\n                playButtonOuterElement.tabIndex = 0;\r\n                playButtonOuterElement.setAttribute(\"role\", \"button\");\r\n                playButtonOuterElement.setAttribute(\r\n                    \"aria-label\",\r\n                    Strings.defaults.mediaPlayerPlayMedia()\r\n                );\r\n                playButtonOuterElement.className =\r\n                    this.hostConfig.makeCssClassName(\"ac-media-playButton\");\r\n                playButtonOuterElement.style.display = \"flex\";\r\n                playButtonOuterElement.style.alignItems = \"center\";\r\n                playButtonOuterElement.style.justifyContent = \"center\";\r\n                playButtonOuterElement.onclick = (e) => {\r\n                    this.handlePlayButtonInvoke(e);\r\n                };\r\n\r\n                playButtonOuterElement.onkeypress = (e: KeyboardEvent) => {\r\n                    if (e.code === \"Enter\" || e.code === \"Space\") {\r\n                        // space or enter\r\n                        this.handlePlayButtonInvoke(e);\r\n                    }\r\n                };\r\n\r\n                const playButtonInnerElement = document.createElement(\"div\");\r\n                playButtonInnerElement.className = this.hostConfig.makeCssClassName(\r\n                    \"ac-media-playButton-arrow\"\r\n                );\r\n                playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\r\n                playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\r\n                playButtonInnerElement.style.borderTopWidth = playButtonArrowHeight / 2 + \"px\";\r\n                playButtonInnerElement.style.borderBottomWidth = playButtonArrowHeight / 2 + \"px\";\r\n                playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\r\n                playButtonInnerElement.style.borderRightWidth = \"0\";\r\n                playButtonInnerElement.style.borderStyle = \"solid\";\r\n                playButtonInnerElement.style.borderTopColor = \"transparent\";\r\n                playButtonInnerElement.style.borderRightColor = \"transparent\";\r\n                playButtonInnerElement.style.borderBottomColor = \"transparent\";\r\n                playButtonInnerElement.style.transform =\r\n                    \"translate(\" + playButtonArrowWidth / 10 + \"px,0px)\";\r\n\r\n                playButtonOuterElement.appendChild(playButtonInnerElement);\r\n\r\n                const playButtonContainer = document.createElement(\"div\");\r\n                playButtonContainer.style.position = \"absolute\";\r\n                playButtonContainer.style.left = \"0\";\r\n                playButtonContainer.style.top = \"0\";\r\n                playButtonContainer.style.width = \"100%\";\r\n                playButtonContainer.style.height = \"100%\";\r\n                playButtonContainer.style.display = \"flex\";\r\n                playButtonContainer.style.justifyContent = \"center\";\r\n                playButtonContainer.style.alignItems = \"center\";\r\n\r\n                playButtonContainer.appendChild(playButtonOuterElement);\r\n                posterRootElement.appendChild(playButtonContainer);\r\n            }\r\n\r\n            clearElement(this.renderedElement);\r\n            this.renderedElement.appendChild(posterRootElement);\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const element = <HTMLElement>document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-media\");\r\n\r\n        return element;\r\n    }\r\n\r\n    static onPlay?: (sender: Media) => void;\r\n\r\n    render(): HTMLElement | undefined {\r\n        let result = super.render();\r\n\r\n        if (result) {\r\n            this._mediaPlayer = this.createMediaPlayer();\r\n\r\n            this._mediaPlayer.fetchVideoDetails().then(() => this.displayPoster());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    releaseDOMResources() {\r\n        super.releaseDOMResources();\r\n\r\n        this.displayPoster();\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Media\";\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        const result: IResourceInformation[] = [];\r\n\r\n        if (this._mediaPlayer) {\r\n            const posterUrl = this.poster ? this.poster : this.hostConfig.media.defaultPoster;\r\n\r\n            if (posterUrl) {\r\n                result.push({ url: posterUrl, mimeType: \"image\" });\r\n            }\r\n        }\r\n\r\n        for (const mediaSource of this.sources) {\r\n            if (mediaSource.isValid()) {\r\n                result.push({\r\n                    /* eslint-disable @typescript-eslint/no-unnecessary-type-assertion -- `mediaSource.url` is of type `string | undefined`, but is validated by `isValid()` call */\r\n                    url: mediaSource.url!,\r\n                    mimeType: mediaSource.mimeType!\r\n                    /* eslint-enable @typescript-eslint/no-unnecessary-type-assertion */\r\n                });\r\n            }\r\n        }\r\n\r\n        for (const captionSource of this.captionSources) {\r\n            if (captionSource.isValid()) {\r\n                result.push({\r\n                    /* eslint-disable @typescript-eslint/no-unnecessary-type-assertion -- `captionSource.url` is of type `string | undefined`, but is validated by `isValid()` call */\r\n                    url: captionSource.url!,\r\n                    mimeType: captionSource.mimeType!\r\n                    /* eslint-enable @typescript-eslint/no-unnecessary-type-assertion */\r\n                });\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get selectedMediaType(): string | undefined {\r\n        return this._mediaPlayer.selectedMediaType;\r\n    }\r\n}\r\n\r\nenum InputEventType {\r\n    InitialRender,\r\n    MouseEnterOnCard,\r\n    MouseLeaveOnCard,\r\n    FocusLeave\r\n}\r\n\r\nexport abstract class Input extends CardElement implements IInput {\r\n    \r\n    //#region Schema\r\n    static readonly labelProperty = new StringProperty(Versions.v1_3, \"label\", true);\r\n    static readonly isRequiredProperty = new BoolProperty(Versions.v1_3, \"isRequired\", false);\r\n    static readonly errorMessageProperty = new StringProperty(Versions.v1_3, \"errorMessage\", true);\r\n    static readonly inputStyleProperty = new EnumProperty(\r\n        Versions.v1_6,\r\n        \"inputStyle\",\r\n        Enums.InputStyle,\r\n        Enums.InputStyle.Default,\r\n        [\r\n            { value: Enums.InputStyle.RevealOnHover },\r\n            { value: Enums.InputStyle.Default }\r\n        ]\r\n    );\r\n    static readonly labelWidthProperty = new CustomProperty<SizeAndUnit | undefined>(\r\n        Versions.v1_6,\r\n        \"labelWidth\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            let result: SizeAndUnit | undefined = prop.defaultValue;\r\n            const value = source[prop.name];\r\n            let invalidLabelWidth = false;\r\n            \r\n            if (typeof value === \"number\" && !isNaN(value)) {\r\n                result = new SizeAndUnit(value, Enums.SizeUnit.Weight);\r\n                if (result.physicalSize < 0 || result.physicalSize > 100) {\r\n                    invalidLabelWidth = true;\r\n                }\r\n            }\r\n            else if (typeof value === \"string\") {\r\n                try {\r\n                    result = SizeAndUnit.parse(value);\r\n                } catch (e) {\r\n                    invalidLabelWidth = true;\r\n                }\r\n            } else {\r\n                invalidLabelWidth = true;\r\n            }\r\n\r\n            if (invalidLabelWidth) {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidInputLabelWidth()\r\n                );\r\n                result = undefined;\r\n            }\r\n\r\n            return result;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: SizeAndUnit | undefined,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            if (value instanceof SizeAndUnit) {\r\n                if (value.unit === Enums.SizeUnit.Pixel) {\r\n                    context.serializeValue(target, \"labelWidth\", value.physicalSize + \"px\");\r\n                } else {\r\n                    context.serializeNumber(target, \"labelWidth\", value.physicalSize);\r\n                }\r\n            }\r\n        },\r\n        undefined\r\n    );\r\n\r\n    static readonly labelPositionProperty = new EnumProperty(\r\n        Versions.v1_6,\r\n        \"labelPosition\",\r\n        Enums.InputLabelPosition,\r\n        Enums.InputLabelPosition.Above,\r\n        [\r\n            { value: Enums.InputLabelPosition.Inline },\r\n            { value: Enums.InputLabelPosition.Above }\r\n        ]\r\n    );\r\n\r\n    @property(Input.labelProperty)\r\n    label?: string;\r\n\r\n    @property(Input.isRequiredProperty)\r\n    isRequired: boolean;\r\n\r\n    @property(Input.errorMessageProperty)\r\n    errorMessage?: string;\r\n\r\n    @property(Input.inputStyleProperty)\r\n    inputStyle: Enums.InputStyle = Enums.InputStyle.Default;\r\n    \r\n    @property(Input.labelWidthProperty)\r\n    labelWidth?: SizeAndUnit;\r\n\r\n    @property(Input.labelPositionProperty)\r\n    labelPosition?: Enums.InputLabelPosition;\r\n\r\n    //#endregion\r\n\r\n    private _outerContainerElement: HTMLElement;\r\n    private _inputControlContainerElement: HTMLElement;\r\n    private _renderedErrorMessageElement?: HTMLElement;\r\n    private _renderedLabelElement?: HTMLElement;\r\n    private _renderedInputControlElement?: HTMLElement;\r\n    private _oldValue: any;\r\n\r\n    protected getAllLabelIds(): string[] {\r\n        const labelIds: string[] = [];\r\n\r\n        if (this.labelledBy) {\r\n            labelIds.push(this.labelledBy);\r\n        }\r\n\r\n        if (this._renderedLabelElement) {\r\n            labelIds.push(this._renderedLabelElement.id);\r\n        }\r\n\r\n        if (this._renderedErrorMessageElement) {\r\n            labelIds.push(this._renderedErrorMessageElement.id);\r\n        }\r\n\r\n        return labelIds;\r\n    }\r\n\r\n    protected updateInputControlAriaLabelledBy() {\r\n        if (this._renderedInputControlElement) {\r\n            const labelIds: string[] = this.getAllLabelIds();\r\n\r\n            if (labelIds.length > 0) {\r\n                this._renderedInputControlElement.setAttribute(\r\n                    \"aria-labelledby\",\r\n                    labelIds.join(\" \")\r\n                );\r\n            } else {\r\n                this._renderedInputControlElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get isNullable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get renderedInputControlElement(): HTMLElement | undefined {\r\n        return this._renderedInputControlElement;\r\n    }\r\n\r\n    protected get inputControlContainerElement(): HTMLElement {\r\n        return this._inputControlContainerElement;\r\n    }\r\n\r\n    protected overrideInternalRender(): HTMLElement | undefined {\r\n        const hostConfig = this.hostConfig;\r\n\r\n        this._outerContainerElement = document.createElement(\"div\");\r\n        this._outerContainerElement.style.display = \"flex\";\r\n        if (this.labelPosition === Enums.InputLabelPosition.Inline) {\r\n            this._outerContainerElement.style.flexDirection = \"row\";\r\n        } else {\r\n            this._outerContainerElement.style.flexDirection = \"column\";\r\n        }\r\n\r\n        const renderedInputControlId = Utils.generateUniqueId();\r\n\r\n        if (this.label) {\r\n            const labelRichTextBlock = new RichTextBlock();\r\n            labelRichTextBlock.setParent(this);\r\n            labelRichTextBlock.forElementId = renderedInputControlId;\r\n\r\n            const labelInline = new TextRun(this.label);\r\n            labelRichTextBlock.addInline(labelInline);\r\n\r\n            if (this.isRequired) {\r\n                labelInline.init(hostConfig.inputs.label.requiredInputs);\r\n\r\n                const isRequiredCueInline = new TextRun(\r\n                    hostConfig.inputs.label.requiredInputs.suffix\r\n                );\r\n                isRequiredCueInline.color = hostConfig.inputs.label.requiredInputs.suffixColor;\r\n                isRequiredCueInline.ariaHidden = true;\r\n\r\n                labelRichTextBlock.addInline(isRequiredCueInline);\r\n            } else {\r\n                labelInline.init(hostConfig.inputs.label.optionalInputs);\r\n            }\r\n\r\n            this._renderedLabelElement = labelRichTextBlock.render();\r\n\r\n            if (this._renderedLabelElement) {\r\n                this._renderedLabelElement.id = Utils.generateUniqueId();\r\n                if (this.labelPosition === Enums.InputLabelPosition.Inline) {\r\n                    // For inline label position: label should be in center of the div and no extra spacing needed\r\n                    this._renderedLabelElement.style.alignSelf = \"center\";\r\n                } else {\r\n                    this._renderedLabelElement.style.marginBottom =\r\n                        hostConfig.getEffectiveSpacing(hostConfig.inputs.label.inputSpacing) + \"px\";\r\n                }\r\n                this._outerContainerElement.appendChild(this._renderedLabelElement);\r\n            }\r\n        }\r\n\r\n        this._inputControlContainerElement = document.createElement(\"div\");\r\n        this._inputControlContainerElement.className =\r\n            hostConfig.makeCssClassName(\"ac-input-container\");\r\n        this._inputControlContainerElement.style.display = \"flex\";\r\n\r\n        if (this.height === \"stretch\") {\r\n            this._inputControlContainerElement.style.alignItems = \"stretch\";\r\n            this._inputControlContainerElement.style.flex = \"1 1 auto\";\r\n        }\r\n\r\n        this._renderedInputControlElement = this.internalRender();\r\n\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.id = renderedInputControlId;\r\n            this._renderedInputControlElement.style.minWidth = \"0px\";\r\n\r\n            if (this.isNullable && this.isRequired) {\r\n                this._renderedInputControlElement.setAttribute(\"aria-required\", \"true\");\r\n                this._renderedInputControlElement.classList.add(\r\n                    hostConfig.makeCssClassName(\"ac-input-required\")\r\n                );\r\n            }\r\n\r\n            this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\r\n            this._outerContainerElement.appendChild(this._inputControlContainerElement);\r\n\r\n            if (this._renderedLabelElement && this.labelPosition === Enums.InputLabelPosition.Inline) {\r\n                if (!this.labelWidth) {\r\n                    const defaultLabelWidth = hostConfig.inputs.label.width;\r\n                    this._renderedLabelElement.style.width = defaultLabelWidth.toString() + \"%\";\r\n                    this._inputControlContainerElement.style.width = (100 - defaultLabelWidth) + \"%\";\r\n                }\r\n                else if (this.labelWidth.unit == Enums.SizeUnit.Weight) {\r\n                    const labelWidthInPercent = this.labelWidth.physicalSize;\r\n                    this._renderedLabelElement.style.width = labelWidthInPercent.toString() + \"%\";\r\n                    this._inputControlContainerElement.style.width = (100 - labelWidthInPercent).toString() + \"%\";\r\n                }\r\n                else if (this.labelWidth.unit == Enums.SizeUnit.Pixel) {\r\n                    const labelWidthInPixel = this.labelWidth.physicalSize;\r\n                    this._renderedLabelElement.style.width = labelWidthInPixel.toString() + \"px\";\r\n                }\r\n            }\r\n\r\n            this.updateVisualState(InputEventType.InitialRender);\r\n            if (this._renderedInputControlElement) {\r\n                this._renderedInputControlElement.onblur = (ev: MouseEvent) => {\r\n                    this.updateVisualState(InputEventType.FocusLeave);\r\n                };\r\n            }\r\n            this.updateInputControlAriaLabelledBy();\r\n\r\n            return this._outerContainerElement;\r\n        }\r\n\r\n        this.resetDirtyState();\r\n\r\n        return undefined;\r\n    }\r\n\r\n    protected valueChanged() {\r\n        this.getRootElement().updateActionsEnabledState();\r\n\r\n        if (this.isValid()) {\r\n            this.resetValidationFailureCue();\r\n        }\r\n\r\n        if (this.onValueChanged) {\r\n            this.onValueChanged(this);\r\n        }\r\n\r\n        raiseInputValueChangedEvent(this);\r\n    }\r\n\r\n    protected resetValidationFailureCue() {\r\n        if (this.renderedInputControlElement) {\r\n            if (this instanceof ChoiceSetInput && this.isDynamicTypeahead()) {\r\n                this.removeValidationFailureCue();\r\n            } else {\r\n                this.renderedInputControlElement.classList.remove(\r\n                    this.hostConfig.makeCssClassName(\"ac-input-validation-failed\")\r\n                );\r\n            }\r\n\r\n            this.updateInputControlAriaLabelledBy();\r\n\r\n            if (this._renderedErrorMessageElement) {\r\n                this._outerContainerElement.removeChild(this._renderedErrorMessageElement);\r\n\r\n                this._renderedErrorMessageElement = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected showValidationErrorMessage() {\r\n        if (\r\n            this.renderedElement &&\r\n            this.errorMessage &&\r\n            GlobalSettings.displayInputValidationErrors\r\n        ) {\r\n            const errorMessageTextBlock = new TextBlock();\r\n            errorMessageTextBlock.setParent(this);\r\n            errorMessageTextBlock.text = this.errorMessage;\r\n            errorMessageTextBlock.wrap = true;\r\n            errorMessageTextBlock.init(this.hostConfig.inputs.errorMessage);\r\n\r\n            this._renderedErrorMessageElement = errorMessageTextBlock.render();\r\n\r\n            if (this._renderedErrorMessageElement) {\r\n                this._renderedErrorMessageElement.id = Utils.generateUniqueId();\r\n                this._outerContainerElement.appendChild(this._renderedErrorMessageElement);\r\n\r\n                this.updateInputControlAriaLabelledBy();\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get allowRevealOnHoverStyle() {\r\n        return this.hostConfig.inputs && this.hostConfig.inputs.allowRevealOnHoverStyle;\r\n    }\r\n\r\n    protected shouldHideInputAdornersForRevealOnHover(input: HTMLElement, eventType: InputEventType) {\r\n        // show/hide input adorners (date picker, time picker, select dropdown picker) with inputStyle RevealOnHover\r\n        // 1. intial render of card: hide input adorners\r\n        // 2. mouse hover on the card: show input adorners\r\n        // 3. mouse hover outside the card: hide input adorners unless input is still in focus state\r\n        // 4. input loses focus: hide the input adorners unless mouse is still hovering on the card\r\n    \r\n        // check if input still has the focus\r\n        const isInputInFocus = input === document.activeElement;\r\n    \r\n        // check if mouse is still on the card\r\n        const inputHoverClassName = this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onhover\");\r\n        const isMouseOverCard = input.classList.contains(inputHoverClassName);\r\n    \r\n        const hideInputAdorners = (eventType === InputEventType.InitialRender) ||\r\n                                  (eventType === InputEventType.FocusLeave && !isMouseOverCard) ||\r\n                                  (eventType === InputEventType.MouseLeaveOnCard && !isInputInFocus);\r\n        return hideInputAdorners;\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n        if (!this.allowRevealOnHoverStyle || \r\n            !this._renderedInputControlElement || \r\n            this.inputStyle !== Enums.InputStyle.RevealOnHover) {\r\n            return;\r\n        }\r\n        if (eventType === InputEventType.InitialRender) {\r\n            // on initial render, we will show input fields as read only view\r\n            this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onrender\"));\r\n        }\r\n        else if (eventType === InputEventType.MouseEnterOnCard) {\r\n            // on hover on the card, we will reveal the inputs by showing borders etc\r\n            // ac-inputStyle-revealOnHover-onhover class is also used to identify if mouse is hovering on the card\r\n            this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onhover\"));\r\n        } else if (eventType === InputEventType.MouseLeaveOnCard) {\r\n            this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onhover\"));\r\n        }\r\n    }\r\n\r\n    onValueChanged: (sender: Input) => void;\r\n\r\n    labelledBy?: string;\r\n\r\n    abstract isSet(): boolean;\r\n\r\n    focus() {\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.focus();\r\n        }\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return true;\r\n    }\r\n\r\n    isDirty(): boolean {\r\n        return this.value !== this._oldValue;\r\n    }\r\n\r\n    resetDirtyState() {\r\n        this._oldValue = this.value;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (!this.id) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.inputsMustHaveUniqueId()\r\n            );\r\n        }\r\n\r\n        if (this.isRequired) {\r\n            if (!this.label) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.RequiredInputsShouldHaveLabel,\r\n                    \"Required inputs should have a label\"\r\n                );\r\n            }\r\n\r\n            if (!this.errorMessage) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.RequiredInputsShouldHaveErrorMessage,\r\n                    \"Required inputs should have an error message\"\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    validateValue(): boolean {\r\n        this.resetValidationFailureCue();\r\n\r\n        const result = this.isRequired ? this.isSet() && this.isValid() : this.isValid();\r\n\r\n        if (!result && this.renderedInputControlElement) {\r\n            if (this instanceof ChoiceSetInput && this.isDynamicTypeahead()) {\r\n                this.showValidationFailureCue();\r\n            } else {\r\n                this.renderedInputControlElement.classList.add(\r\n                    this.hostConfig.makeCssClassName(\"ac-input-validation-failed\")\r\n                );\r\n            }\r\n            this.showValidationErrorMessage();\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        return [this];\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        let result = super.render();\r\n\r\n        this.resetDirtyState();\r\n\r\n        return result;\r\n    }\r\n\r\n    abstract get value(): any;\r\n\r\n    get isInteractive(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class TextInput extends Input {\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n    static readonly maxLengthProperty = new NumProperty(Versions.v1_0, \"maxLength\");\r\n    static readonly isMultilineProperty = new BoolProperty(Versions.v1_0, \"isMultiline\", false);\r\n    static readonly placeholderProperty = new StringProperty(Versions.v1_0, \"placeholder\");\r\n    static readonly styleProperty = new EnumProperty(\r\n        Versions.v1_0,\r\n        \"style\",\r\n        Enums.InputTextStyle,\r\n        Enums.InputTextStyle.Text,\r\n        [\r\n            { value: Enums.InputTextStyle.Text },\r\n            { value: Enums.InputTextStyle.Tel },\r\n            { value: Enums.InputTextStyle.Url },\r\n            { value: Enums.InputTextStyle.Email },\r\n            { value: Enums.InputTextStyle.Password, targetVersion: Versions.v1_5 }\r\n        ]\r\n    );\r\n    static readonly inlineActionProperty = new ActionProperty(Versions.v1_0, \"inlineAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    static readonly regexProperty = new StringProperty(Versions.v1_3, \"regex\", true);\r\n\r\n    @property(TextInput.valueProperty)\r\n    defaultValue?: string;\r\n\r\n    @property(TextInput.maxLengthProperty)\r\n    maxLength?: number;\r\n\r\n    @property(TextInput.isMultilineProperty)\r\n    isMultiline: boolean = false;\r\n\r\n    @property(TextInput.placeholderProperty)\r\n    placeholder?: string;\r\n\r\n    @property(TextInput.styleProperty)\r\n    style: Enums.InputTextStyle = Enums.InputTextStyle.Text;\r\n\r\n    @property(TextInput.inlineActionProperty)\r\n    inlineAction?: Action;\r\n\r\n    @property(TextInput.regexProperty)\r\n    regex?: string;\r\n\r\n    //#endregion\r\n\r\n    private setupInput(input: HTMLInputElement | HTMLTextAreaElement) {\r\n        input.style.flex = \"1 1 auto\";\r\n\r\n        input.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        if (this.placeholder) {\r\n            input.placeholder = this.placeholder;\r\n            input.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n\r\n        if (this.defaultValue) {\r\n            input.value = this.defaultValue;\r\n        }\r\n\r\n        if (this.maxLength && this.maxLength > 0) {\r\n            input.maxLength = this.maxLength;\r\n        }\r\n\r\n        input.oninput = () => {\r\n            this.valueChanged();\r\n        };\r\n        input.onkeypress = (e: KeyboardEvent) => {\r\n            // Ctrl+Enter pressed\r\n            if (\r\n                e.ctrlKey &&\r\n                e.code === \"Enter\" &&\r\n                this.inlineAction &&\r\n                this.inlineAction.isEffectivelyEnabled()\r\n            ) {\r\n                this.inlineAction.execute();\r\n            }\r\n        };\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        let result: HTMLInputElement | HTMLTextAreaElement;\r\n\r\n        if (this.isMultiline && this.style !== Enums.InputTextStyle.Password) {\r\n            result = document.createElement(\"textarea\");\r\n            result.className = this.hostConfig.makeCssClassName(\r\n                \"ac-input\",\r\n                \"ac-textInput\",\r\n                \"ac-multiline\"\r\n            );\r\n\r\n            if (this.height === \"stretch\") {\r\n                result.style.height = \"initial\";\r\n            }\r\n        } else {\r\n            result = document.createElement(\"input\");\r\n            result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\r\n            result.type = Enums.InputTextStyle[this.style].toLowerCase();\r\n        }\r\n\r\n        this.setupInput(result);\r\n\r\n        return result;\r\n    }\r\n\r\n    protected overrideInternalRender(): HTMLElement | undefined {\r\n        const renderedInputControl = super.overrideInternalRender();\r\n\r\n        if (this.inlineAction) {\r\n            const button = document.createElement(\"button\");\r\n            button.className = this.hostConfig.makeCssClassName(\r\n                this.inlineAction.isEffectivelyEnabled()\r\n                    ? \"ac-inlineActionButton\"\r\n                    : \"ac-inlineActionButton-disabled\"\r\n            );\r\n\r\n            button.onclick = (e) => {\r\n                if (this.inlineAction && this.inlineAction.isEffectivelyEnabled()) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this.inlineAction.execute();\r\n                }\r\n            };\r\n\r\n            if (this.inlineAction.iconUrl) {\r\n                button.classList.add(\"iconOnly\");\r\n\r\n                const icon = document.createElement(\"img\");\r\n                icon.style.height = \"100%\";\r\n                icon.setAttribute(\"role\", \"presentation\");\r\n\r\n                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\r\n                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\r\n                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\r\n                // after the image has loaded and been gicven its final size. The below trick also fixes that.\r\n                icon.style.display = \"none\";\r\n                icon.onload = () => {\r\n                    icon.style.removeProperty(\"display\");\r\n                };\r\n                icon.onerror = () => {\r\n                    button.removeChild(icon);\r\n                    button.classList.remove(\"iconOnly\");\r\n                    button.classList.add(\"textOnly\");\r\n                    button.textContent =\r\n                        this.inlineAction && this.inlineAction.title\r\n                            ? this.inlineAction.title\r\n                            : Strings.defaults.inlineActionTitle();\r\n                };\r\n\r\n                icon.src = this.inlineAction.iconUrl;\r\n\r\n                button.appendChild(icon);\r\n                button.title = this.inlineAction.title\r\n                    ? this.inlineAction.title\r\n                    : Strings.defaults.inlineActionTitle();\r\n            } else {\r\n                button.classList.add(\"textOnly\");\r\n                button.textContent = this.inlineAction.title\r\n                    ? this.inlineAction.title\r\n                    : Strings.defaults.inlineActionTitle();\r\n            }\r\n\r\n            this.inlineAction.setupElementForAccessibility(button, true);\r\n\r\n            button.style.marginLeft = \"8px\";\r\n\r\n            this.inputControlContainerElement.appendChild(button);\r\n        }\r\n\r\n        return renderedInputControl;\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n        if (!this.allowRevealOnHoverStyle) {\r\n            return;\r\n        }\r\n\r\n        if (!(this.inlineAction || this.isMultiline)) {\r\n            super.updateVisualState(eventType);\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Text\";\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        if (this.inlineAction) {\r\n            result.push(this.inlineAction);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionById(id: string) {\r\n        let result = super.getActionById(id);\r\n\r\n        if (!result && this.inlineAction) {\r\n            result = this.inlineAction.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    isSet(): boolean {\r\n        return this.value ? true : false;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (!this.value) {\r\n            return true;\r\n        }\r\n\r\n        if (this.regex) {\r\n            return new RegExp(this.regex, \"g\").test(this.value);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        if (this.renderedInputControlElement) {\r\n            if (this.isMultiline) {\r\n                return (<HTMLTextAreaElement>this.renderedInputControlElement).value;\r\n            } else {\r\n                return (<HTMLInputElement>this.renderedInputControlElement).value;\r\n            }\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\n\r\nexport class ToggleInput extends Input {\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n    static readonly titleProperty = new StringProperty(Versions.v1_0, \"title\");\r\n    static readonly valueOnProperty = new StringProperty(\r\n        Versions.v1_0,\r\n        \"valueOn\",\r\n        true,\r\n        undefined,\r\n        \"true\",\r\n        (sender: SerializableObject) => {\r\n            return \"true\";\r\n        }\r\n    );\r\n    static readonly valueOffProperty = new StringProperty(\r\n        Versions.v1_0,\r\n        \"valueOff\",\r\n        true,\r\n        undefined,\r\n        \"false\",\r\n        (sender: SerializableObject) => {\r\n            return \"false\";\r\n        }\r\n    );\r\n    static readonly wrapProperty = new BoolProperty(Versions.v1_2, \"wrap\", false);\r\n\r\n    @property(ToggleInput.valueProperty)\r\n    defaultValue?: string;\r\n\r\n    @property(ToggleInput.titleProperty)\r\n    title?: string;\r\n\r\n    @property(ToggleInput.valueOnProperty)\r\n    valueOn: string = \"true\";\r\n\r\n    @property(ToggleInput.valueOffProperty)\r\n    valueOff: string = \"false\";\r\n\r\n    @property(ToggleInput.wrapProperty)\r\n    wrap: boolean = false;\r\n\r\n    //#endregion\r\n\r\n    private _checkboxInputElement: HTMLInputElement;\r\n    private _checkboxInputLabelElement: HTMLElement | undefined;\r\n    private _oldCheckboxValue: boolean;\r\n\r\n    protected updateInputControlAriaLabelledBy() {\r\n        if (this._checkboxInputElement) {\r\n            let joinedLabelIds = this.getAllLabelIds().join(\" \");\r\n\r\n            if (this._checkboxInputLabelElement && this._checkboxInputLabelElement.id) {\r\n                joinedLabelIds += \" \" + this._checkboxInputLabelElement.id;\r\n            }\r\n\r\n            if (joinedLabelIds) {\r\n                this._checkboxInputElement.setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n            } else {\r\n                this._checkboxInputElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\r\n        element.style.width = \"100%\";\r\n        element.style.display = \"flex\";\r\n        element.style.alignItems = \"center\";\r\n\r\n        this._checkboxInputElement = document.createElement(\"input\");\r\n        this._checkboxInputElement.id = Utils.generateUniqueId();\r\n        this._checkboxInputElement.type = \"checkbox\";\r\n        this._checkboxInputElement.style.display = \"inline-block\";\r\n        this._checkboxInputElement.style.verticalAlign = \"middle\";\r\n        this._checkboxInputElement.style.margin = \"0\";\r\n        this._checkboxInputElement.style.flex = \"0 0 auto\";\r\n\r\n        if (this.title) {\r\n            this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\r\n        }\r\n\r\n        if (this.isRequired) {\r\n            this._checkboxInputElement.setAttribute(\"aria-required\", \"true\");\r\n        }\r\n\r\n        this._checkboxInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        if (this.defaultValue === this.valueOn) {\r\n            this._checkboxInputElement.checked = true;\r\n        }\r\n\r\n        this._oldCheckboxValue = this._checkboxInputElement.checked;\r\n\r\n        this._checkboxInputElement.onchange = () => {\r\n            this.valueChanged();\r\n        };\r\n\r\n        Utils.appendChild(element, this._checkboxInputElement);\r\n\r\n        if (this.title || this.isDesignMode()) {\r\n            const label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = this._checkboxInputElement.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = !this.title ? this.getJsonTypeName() : this.title;\r\n            label.useMarkdown = GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n\r\n            this._checkboxInputLabelElement = label.render();\r\n\r\n            if (this._checkboxInputLabelElement) {\r\n                this._checkboxInputLabelElement.id = Utils.generateUniqueId();\r\n                this._checkboxInputLabelElement.style.display = \"inline-block\";\r\n                this._checkboxInputLabelElement.style.flex = \"1 1 auto\";\r\n                this._checkboxInputLabelElement.style.marginLeft = \"6px\";\r\n                this._checkboxInputLabelElement.style.verticalAlign = \"middle\";\r\n\r\n                const spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n\r\n                Utils.appendChild(element, spacerElement);\r\n                Utils.appendChild(element, this._checkboxInputLabelElement);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    protected get isNullable(): boolean {\r\n        return false;\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Toggle\";\r\n    }\r\n\r\n    focus() {\r\n        if (this._checkboxInputElement) {\r\n            this._checkboxInputElement.focus();\r\n        }\r\n    }\r\n\r\n    isSet(): boolean {\r\n        if (this.isRequired) {\r\n            return this.value === this.valueOn;\r\n        }\r\n\r\n        return this.value ? true : false;\r\n    }\r\n\r\n    isDirty(): boolean {\r\n        return this._checkboxInputElement\r\n            ? this._checkboxInputElement.checked !== this._oldCheckboxValue\r\n            : false;\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        if (this._checkboxInputElement) {\r\n            return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\n\r\nexport class Choice extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly titleProperty = new StringProperty(Versions.v1_0, \"title\");\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n\r\n    @property(Choice.titleProperty)\r\n    title?: string;\r\n\r\n    @property(Choice.valueProperty)\r\n    value?: string;\r\n\r\n    //#endregion\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"Choice\";\r\n    }\r\n\r\n    constructor(title?: string, value?: string) {\r\n        super();\r\n\r\n        this.title = title;\r\n        this.value = value;\r\n    }\r\n}\r\n\r\n/**\r\n * DataQuery class is declared later in the file and derives from subsequent base classes\r\n * Hence, it cannot be used in ChoiceSetInput.\r\n * Refactor is needed to separate elements and actions in separate files.\r\n */\r\nexport class ChoiceSetInputDataQuery extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly typeProperty = new StringProperty(\r\n        Versions.v1_6,\r\n        \"type\",\r\n        true,\r\n        new RegExp(\"^Data.Query$\")\r\n    );\r\n    static readonly datasetProperty = new StringProperty(Versions.v1_6, \"dataset\");\r\n    static readonly countProperty = new NumProperty(Versions.v1_6, \"count\");\r\n    static readonly skipProperty = new NumProperty(Versions.v1_6, \"skip\");\r\n\r\n    @property(ChoiceSetInputDataQuery.typeProperty)\r\n    type: string;\r\n\r\n    @property(ChoiceSetInputDataQuery.datasetProperty)\r\n    dataset: string;\r\n\r\n    @property(ChoiceSetInputDataQuery.countProperty)\r\n    count?: number;\r\n\r\n    @property(ChoiceSetInputDataQuery.skipProperty)\r\n    skip?: number;\r\n\r\n    //#endregion\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"choices.data\";\r\n    }\r\n}\r\n\r\nexport type FetchedChoice = {\r\n    title: string;\r\n    value: string;\r\n};\r\n\r\nexport class ChoiceSetInput extends Input {\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n    static readonly choicesProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_0,\r\n        \"choices\",\r\n        Choice\r\n    );\r\n    static readonly choicesDataProperty = new SerializableObjectProperty(\r\n        Versions.v1_6,\r\n        \"choices.data\",\r\n        ChoiceSetInputDataQuery\r\n    );\r\n    static readonly styleProperty = new ValueSetProperty(\r\n        Versions.v1_0,\r\n        \"style\",\r\n        [\r\n            { value: \"compact\" },\r\n            { value: \"expanded\" },\r\n            { value: \"filtered\", targetVersion: Versions.v1_5 }\r\n        ],\r\n        \"compact\"\r\n    );\r\n    static readonly isMultiSelectProperty = new BoolProperty(Versions.v1_0, \"isMultiSelect\", false);\r\n    static readonly placeholderProperty = new StringProperty(Versions.v1_0, \"placeholder\");\r\n    static readonly wrapProperty = new BoolProperty(Versions.v1_2, \"wrap\", false);\r\n\r\n    @property(ChoiceSetInput.valueProperty)\r\n    defaultValue?: string;\r\n\r\n    @property(ChoiceSetInput.styleProperty)\r\n    style?: \"compact\" | \"expanded\" | \"filtered\";\r\n\r\n    get isCompact(): boolean {\r\n        return !this.style || this.style === \"compact\";\r\n    }\r\n\r\n    set isCompact(value: boolean) {\r\n        this.style = value ? undefined : \"expanded\";\r\n    }\r\n\r\n    @property(ChoiceSetInput.isMultiSelectProperty)\r\n    isMultiSelect: boolean = false;\r\n\r\n    @property(ChoiceSetInput.placeholderProperty)\r\n    placeholder?: string;\r\n\r\n    @property(ChoiceSetInput.wrapProperty)\r\n    wrap: boolean = false;\r\n\r\n    @property(ChoiceSetInput.choicesProperty)\r\n    choices: Choice[] = [];\r\n\r\n    @property(ChoiceSetInput.choicesDataProperty)\r\n    choicesData?: ChoiceSetInputDataQuery;\r\n\r\n    //#endregion\r\n\r\n    private static _uniqueCategoryCounter = 0;\r\n\r\n    private static getUniqueCategoryName(): string {\r\n        const uniqueCategoryName = \"__ac-category\" + ChoiceSetInput._uniqueCategoryCounter;\r\n\r\n        ChoiceSetInput._uniqueCategoryCounter++;\r\n\r\n        return uniqueCategoryName;\r\n    }\r\n\r\n    private _uniqueCategoryName: string;\r\n    private _selectElement: HTMLSelectElement | undefined;\r\n    private _textInput: HTMLInputElement | undefined;\r\n    private _toggleInputs: HTMLInputElement[] | undefined;\r\n    private _labels: Array<HTMLElement | undefined>;\r\n    private _filteredChoiceSet?: FilteredChoiceSet;\r\n\r\n    isDynamicTypeahead(): boolean {\r\n        return (\r\n            this.hostConfig.inputs.allowDynamicallyFilteredChoiceSet &&\r\n            !!this.choicesData &&\r\n            !!this.choicesData.dataset &&\r\n            this.choicesData.type === \"Data.Query\"\r\n        );\r\n    }\r\n\r\n    getFilterForDynamicSearch(): string | undefined {\r\n        return this._textInput?.value;\r\n    }\r\n\r\n    getDropdownElement() {\r\n        return this._filteredChoiceSet?.dropdown;\r\n    }\r\n\r\n    renderChoices(filter: string, fetchedChoices: FetchedChoice[]) {\r\n        this._filteredChoiceSet?.processResponse(filter, fetchedChoices);\r\n    }\r\n\r\n    showLoadingIndicator() {\r\n        this._filteredChoiceSet?.showLoadingIndicator();\r\n    }\r\n\r\n    removeLoadingIndicator() {\r\n        this._filteredChoiceSet?.removeLoadingIndicator();\r\n    }\r\n\r\n    showErrorIndicator(filter: string, error: string) {\r\n        this._filteredChoiceSet?.showErrorIndicator(filter, error);\r\n    }\r\n\r\n    showValidationFailureCue() {\r\n        this._textInput?.classList.add(\r\n            this.hostConfig.makeCssClassName(\"ac-input-validation-failed\")\r\n        );\r\n    }\r\n\r\n    removeValidationFailureCue() {\r\n        this._textInput?.classList.remove(\r\n            this.hostConfig.makeCssClassName(\"ac-input-validation-failed\")\r\n        );\r\n    }\r\n\r\n    private createPlaceholderOptionWhenValueDoesNotExist(): HTMLElement | undefined {\r\n        if (!this.value) {\r\n            const placeholderOption = document.createElement(\"option\");\r\n            placeholderOption.selected = true;\r\n            placeholderOption.disabled = true;\r\n            placeholderOption.hidden = true;\r\n            placeholderOption.value = \"\";\r\n\r\n            if (this.placeholder) {\r\n                placeholderOption.text = this.placeholder;\r\n            }\r\n            return placeholderOption;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    // Make sure `aria-current` is applied to the currently-selected item\r\n    private internalApplyAriaCurrent(): void {\r\n        if (this._selectElement) {\r\n            const options = this._selectElement.options;\r\n\r\n            if (options) {\r\n                for (const option of Array.from(options)) {\r\n                    if (option.selected) {\r\n                        option.setAttribute(\"aria-current\", \"true\");\r\n                    } else {\r\n                        option.removeAttribute(\"aria-current\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderCompoundInput(\r\n        cssClassName: string,\r\n        type: \"checkbox\" | \"radio\",\r\n        defaultValues: string[] | undefined\r\n    ): HTMLElement {\r\n        const element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", cssClassName);\r\n        element.style.width = \"100%\";\r\n\r\n        element.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        this._toggleInputs = [];\r\n        this._labels = [];\r\n\r\n        for (const choice of this.choices) {\r\n            const input = document.createElement(\"input\");\r\n            input.id = Utils.generateUniqueId();\r\n            input.type = type;\r\n            input.style.margin = \"0\";\r\n            input.style.display = \"inline-block\";\r\n            input.style.verticalAlign = \"middle\";\r\n            input.style.flex = \"0 0 auto\";\r\n            input.name = this.id ? this.id : this._uniqueCategoryName;\r\n\r\n            if (this.isRequired) {\r\n                input.setAttribute(\"aria-required\", \"true\");\r\n            }\r\n\r\n            input.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n            if (choice.value) {\r\n                input.value = choice.value;\r\n            }\r\n\r\n            if (choice.title) {\r\n                input.setAttribute(\"aria-label\", choice.title);\r\n            }\r\n\r\n            if (defaultValues && choice.value) {\r\n                if (defaultValues.indexOf(choice.value) >= 0) {\r\n                    input.checked = true;\r\n                }\r\n            }\r\n\r\n            input.onchange = () => {\r\n                this.valueChanged();\r\n            };\r\n\r\n            this._toggleInputs.push(input);\r\n\r\n            const compoundInput = document.createElement(\"div\");\r\n            compoundInput.style.display = \"flex\";\r\n            compoundInput.style.alignItems = \"center\";\r\n\r\n            Utils.appendChild(compoundInput, input);\r\n\r\n            const label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = input.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = choice.title ? choice.title : \"Choice \" + this._toggleInputs.length;\r\n            label.useMarkdown = GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n\r\n            const labelElement = label.render();\r\n\r\n            this._labels.push(labelElement);\r\n\r\n            if (labelElement) {\r\n                labelElement.id = Utils.generateUniqueId();\r\n                labelElement.style.display = \"inline-block\";\r\n                labelElement.style.flex = \"1 1 auto\";\r\n                labelElement.style.marginLeft = \"6px\";\r\n                labelElement.style.verticalAlign = \"middle\";\r\n\r\n                const spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n\r\n                Utils.appendChild(compoundInput, spacerElement);\r\n                Utils.appendChild(compoundInput, labelElement);\r\n            }\r\n\r\n            Utils.appendChild(element, compoundInput);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    protected updateInputControlAriaLabelledBy() {\r\n        if (\r\n            (this.isMultiSelect || this.style === \"expanded\") &&\r\n            this._toggleInputs &&\r\n            this._labels\r\n        ) {\r\n            const labelIds: string[] = this.getAllLabelIds();\r\n\r\n            for (let i = 0; i < this._toggleInputs.length; i++) {\r\n                let joinedLabelIds = labelIds.join(\" \");\r\n                const label = this._labels[i];\r\n\r\n                if (label && label.id) {\r\n                    joinedLabelIds += \" \" + label.id;\r\n                }\r\n\r\n                if (joinedLabelIds) {\r\n                    this._toggleInputs[i].setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n                } else {\r\n                    this._toggleInputs[i].removeAttribute(\"aria-labelledby\");\r\n                }\r\n            }\r\n        } else {\r\n            super.updateInputControlAriaLabelledBy();\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\r\n        if (this.isDynamicTypeahead()) {\r\n            const filteredChoiceSet = new FilteredChoiceSet(\r\n                ChoiceSetInput._uniqueCategoryCounter,\r\n                this.choices,\r\n                this.hostConfig\r\n            );\r\n            filteredChoiceSet.render();\r\n\r\n            if (filteredChoiceSet.textInput) {\r\n                this._textInput = filteredChoiceSet.textInput;\r\n                if (this.defaultValue) {\r\n                    this._textInput.value = this.defaultValue;\r\n                }\r\n                if (this.placeholder && !this._textInput.value) {\r\n                    this._textInput.placeholder = this.placeholder;\r\n                    this._textInput.setAttribute(\"aria-label\", this.placeholder);\r\n                }\r\n                this._textInput.tabIndex = this.isDesignMode() ? -1 : 0;\r\n                const onInputChangeEventHandler = Utils.debounce(() => {\r\n                    filteredChoiceSet.processChoices();\r\n                    this.valueChanged();\r\n                    if (this._textInput) {\r\n                        // Remove aria-label when value is not empty so narration software doesn't\r\n                        // read the placeholder\r\n                        if (this.value) {\r\n                            this._textInput.removeAttribute(\"placeholder\");\r\n                            this._textInput.removeAttribute(\"aria-label\");\r\n                        } else if (this.placeholder) {\r\n                            this._textInput.placeholder = this.placeholder;\r\n                            this._textInput.setAttribute(\"aria-label\", this.placeholder);\r\n                        }\r\n                    }\r\n                }, this.hostConfig.inputs.debounceTimeInMilliSeconds);\r\n                this._textInput.onclick = onInputChangeEventHandler;\r\n                this._textInput.oninput = onInputChangeEventHandler;\r\n            }\r\n            filteredChoiceSet.parent = this;\r\n            this._filteredChoiceSet = filteredChoiceSet;\r\n            return filteredChoiceSet.renderedElement;\r\n        } else if (this.isMultiSelect) {\r\n            // Render as a list of toggle inputs\r\n            return this.renderCompoundInput(\r\n                \"ac-choiceSetInput-multiSelect\",\r\n                \"checkbox\",\r\n                this.defaultValue\r\n                    ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator)\r\n                    : undefined\r\n            );\r\n        } else {\r\n            if (this.style === \"expanded\") {\r\n                // Render as a series of radio buttons\r\n                return this.renderCompoundInput(\r\n                    \"ac-choiceSetInput-expanded\",\r\n                    \"radio\",\r\n                    this.defaultValue ? [this.defaultValue] : undefined\r\n                );\r\n            } else if (this.style === \"filtered\") {\r\n                // Render as a text input coupled with a datalist\r\n                const inputContainer = document.createElement(\"div\");\r\n                inputContainer.style.width = \"100%\";\r\n\r\n                this._textInput = document.createElement(\"input\");\r\n                this._textInput.className = this.hostConfig.makeCssClassName(\r\n                    \"ac-input\",\r\n                    \"ac-multichoiceInput\",\r\n                    \"ac-choiceSetInput-filtered\"\r\n                );\r\n                this._textInput.type = \"text\";\r\n                this._textInput.style.width = \"100%\";\r\n                this._textInput.oninput = () => {\r\n                    this.valueChanged();\r\n\r\n                    if (this._textInput) {\r\n                        // Remove aria-label when value is not empty so narration software doesn't\r\n                        // read the placeholder\r\n                        if (this.value) {\r\n                            this._textInput.removeAttribute(\"placeholder\");\r\n                            this._textInput.removeAttribute(\"aria-label\");\r\n                        } else if (this.placeholder) {\r\n                            this._textInput.placeholder = this.placeholder;\r\n                            this._textInput.setAttribute(\"aria-label\", this.placeholder);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                if (this.defaultValue) {\r\n                    this._textInput.value = this.defaultValue;\r\n                }\r\n\r\n                if (this.placeholder && !this._textInput.value) {\r\n                    this._textInput.placeholder = this.placeholder;\r\n                    this._textInput.setAttribute(\"aria-label\", this.placeholder);\r\n                }\r\n\r\n                this._textInput.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n                const dataList = document.createElement(\"datalist\");\r\n                dataList.id = Utils.generateUniqueId();\r\n\r\n                for (const choice of this.choices) {\r\n                    const option = document.createElement(\"option\");\r\n                    // To fix https://stackoverflow.com/questions/29882361/show-datalist-labels-but-submit-the-actual-value\r\n                    // value is mapped to choice.title other than choice.value\r\n                    if (choice.title) {\r\n                        option.value = choice.title;\r\n                        option.setAttribute(\"aria-label\", choice.title);\r\n                    }\r\n\r\n                    option.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n                    dataList.appendChild(option);\r\n                }\r\n\r\n                this._textInput.setAttribute(\"list\", dataList.id);\r\n\r\n                inputContainer.append(this._textInput, dataList);\r\n\r\n                return inputContainer;\r\n            } else {\r\n                // Render as a combo box\r\n                this._selectElement = document.createElement(\"select\");\r\n                this._selectElement.className = this.hostConfig.makeCssClassName(\r\n                    \"ac-input\",\r\n                    \"ac-multichoiceInput\",\r\n                    \"ac-choiceSetInput-compact\"\r\n                );\r\n                this._selectElement.style.width = \"100%\";\r\n\r\n                this._selectElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n                const placeholderOption = this.createPlaceholderOptionWhenValueDoesNotExist();\r\n\r\n                Utils.appendChild(this._selectElement, placeholderOption);\r\n\r\n                for (const choice of this.choices) {\r\n                    const option = document.createElement(\"option\");\r\n                    option.value = choice.value!;\r\n\r\n                    if (choice.title) {\r\n                        option.text = choice.title;\r\n                        option.setAttribute(\"aria-label\", choice.title);\r\n                    }\r\n\r\n                    option.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n                    if (choice.value === this.defaultValue) {\r\n                        option.selected = true;\r\n                    }\r\n\r\n                    Utils.appendChild(this._selectElement, option);\r\n                }\r\n\r\n                this._selectElement.onchange = () => {\r\n                    this.internalApplyAriaCurrent();\r\n                    this.valueChanged();\r\n                };\r\n\r\n                this.internalApplyAriaCurrent();\r\n\r\n                return this._selectElement;\r\n            }\r\n        }\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n        if (!this.allowRevealOnHoverStyle) {\r\n            return;\r\n        }\r\n\r\n        if (!this.isMultiSelect && this.isCompact) {\r\n            super.updateVisualState(eventType);\r\n\r\n            if (this._selectElement && this.inputStyle === Enums.InputStyle.RevealOnHover) {\r\n                const hideDropDownPicker = this.shouldHideInputAdornersForRevealOnHover(this._selectElement, eventType);\r\n                \r\n                if (hideDropDownPicker) {\r\n                    this._selectElement.style.appearance = \"none\";\r\n                    this._selectElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n                } else {\r\n                    this._selectElement.style.appearance = \"auto\";\r\n                    this._selectElement.classList.add(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n                }\t\t\t\r\n            }\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.ChoiceSet\";\r\n    }\r\n\r\n    focus() {\r\n        if (this._toggleInputs && (this.isMultiSelect || this.style === \"expanded\")) {\r\n            if (this._toggleInputs.length > 0) {\r\n                this._toggleInputs[0].focus();\r\n            }\r\n        } else if (this._textInput) {\r\n            this._textInput.focus();\r\n        } else {\r\n            super.focus();\r\n        }\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this.choices.length === 0) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.CollectionCantBeEmpty,\r\n                Strings.errors.choiceSetMustHaveAtLeastOneChoice()\r\n            );\r\n        }\r\n\r\n        for (const choice of this.choices) {\r\n            if (!choice.title || !choice.value) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.PropertyCantBeNull,\r\n                    Strings.errors.choiceSetChoicesMustHaveTitleAndValue()\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    isSet(): boolean {\r\n        return this.value ? true : false;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (this._textInput) {\r\n            if (this.value === \"\" || this.value === this.placeholder) {\r\n                return true;\r\n            }\r\n            for (const choice of this.choices) {\r\n                if (this.value === choice.value) {\r\n                    return true;\r\n                }\r\n            }\r\n            if (this.dynamicChoices) {\r\n                for (const choice of this.dynamicChoices) {\r\n                    if (this.value === choice) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return super.isValid();\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        if (!this.isMultiSelect) {\r\n            if (this._selectElement) {\r\n                return this._selectElement.selectedIndex > 0\r\n                    ? this._selectElement.value\r\n                    : undefined;\r\n            } else if (this._textInput) {\r\n                for (const choice of this.choices) {\r\n                    if (choice.title && this._textInput.value === choice.title) {\r\n                        return choice.value;\r\n                    }\r\n                }\r\n                return this._textInput.value;\r\n            } else if (this._toggleInputs && this._toggleInputs.length > 0) {\r\n                for (const toggleInput of this._toggleInputs) {\r\n                    if (toggleInput.checked) {\r\n                        return toggleInput.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return undefined;\r\n        } else {\r\n            if (!this._toggleInputs || this._toggleInputs.length === 0) {\r\n                return undefined;\r\n            }\r\n\r\n            let result: string = \"\";\r\n\r\n            for (const toggleInput of this._toggleInputs) {\r\n                if (toggleInput.checked) {\r\n                    if (result !== \"\") {\r\n                        result += this.hostConfig.choiceSetInputValueSeparator;\r\n                    }\r\n\r\n                    result += toggleInput.value;\r\n                }\r\n            }\r\n\r\n            return result ? result : undefined;\r\n        }\r\n    }\r\n\r\n    get dynamicChoices() {\r\n        return this._filteredChoiceSet?.dynamicChoices;\r\n    }\r\n}\r\n\r\nexport class FilteredChoiceSet {\r\n    private _parent?: CardObject;\r\n    private _choiceSetId: number;\r\n    private _choices: Choice[];\r\n    private _dynamicChoices: FetchedChoice[];\r\n    private _visibleChoiceCount: number;\r\n    private _highlightedChoiceId: number;\r\n    private _textInput?: HTMLInputElement;\r\n    private _dropdown?: HTMLDivElement;\r\n    private _loadingIndicator?: HTMLDivElement;\r\n    private _errorIndicator?: HTMLDivElement;\r\n    private _renderedElement?: HTMLElement;\r\n    private _hostConfig?: HostConfig;\r\n\r\n    constructor(choiceSetId: number, choices: Choice[], hostConfig?: HostConfig) {\r\n        this._choiceSetId = choiceSetId;\r\n        this._choices = choices;\r\n        this._dynamicChoices = [];\r\n        this._visibleChoiceCount = 0;\r\n        this._highlightedChoiceId = -1;\r\n        this._hostConfig = hostConfig;\r\n    }\r\n\r\n    render() {\r\n        const choiceSetContainer = document.createElement(\"div\");\r\n        choiceSetContainer.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-choiceSetInput-filtered-container\"\r\n        );\r\n\r\n        this._textInput = document.createElement(\"input\");\r\n        this._textInput.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-choiceSetInput-filtered-textbox\"\r\n        );\r\n        this._textInput.type = \"text\";\r\n\r\n        this._textInput.onkeydown = (event) => {\r\n            if (event.key === \"ArrowDown\") {\r\n                event.preventDefault();\r\n                this.highlightChoice(this._highlightedChoiceId + 1);\r\n            } else if (event.key === \"ArrowUp\") {\r\n                event.preventDefault();\r\n                this.highlightChoice(this._highlightedChoiceId - 1);\r\n            } else if (event.key === \"Enter\") {\r\n                const choice = document.getElementById(\r\n                    `ac-choiceSetInput-${this._choiceSetId}-choice-${this._highlightedChoiceId}`\r\n                );\r\n                choice?.click();\r\n            }\r\n        };\r\n\r\n        this._dropdown = document.createElement(\"div\");\r\n        this._dropdown.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-choiceSetInput-filtered-dropdown\"\r\n        );\r\n\r\n        choiceSetContainer.append(this._textInput, this._dropdown);\r\n\r\n        this._renderedElement = choiceSetContainer;\r\n    }\r\n\r\n    private createChoice(value: string, filter: string, id: number): HTMLSpanElement {\r\n        const choice = document.createElement(\"span\");\r\n        choice.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-choice\");\r\n        choice.id = `ac-choiceSetInput-${this._choiceSetId}-choice-${id}`;\r\n        choice.innerHTML = value.replace(filter, `<b>${filter}</b>`);\r\n        choice.tabIndex = -1;\r\n\r\n        choice.onclick = () => {\r\n            choice.classList.remove(\r\n                this.hostConfig.makeCssClassName(\"ac-choiceSetInput-choice-highlighted\")\r\n            );\r\n            this._highlightedChoiceId = -1;\r\n            if (this._textInput) {\r\n                this._textInput.value = choice.innerText;\r\n                this._textInput.focus();\r\n            }\r\n            if (this._dropdown) {\r\n                this._dropdown.classList.remove(\r\n                    this.hostConfig.makeCssClassName(\"ac-choiceSetInput-filtered-dropdown-open\")\r\n                );\r\n            }\r\n        };\r\n        choice.onmousemove = () => {\r\n            if (this._highlightedChoiceId !== id) {\r\n                this.highlightChoice(id, false);\r\n            }\r\n        };\r\n\r\n        return choice;\r\n    }\r\n\r\n    private highlightChoice(id: number, scrollIntoView: boolean = true) {\r\n        if (this._visibleChoiceCount > 0) {\r\n            const currentHighlightedChoice = document.getElementById(\r\n                `ac-choiceSetInput-${this._choiceSetId}-choice-${this._highlightedChoiceId}`\r\n            );\r\n            const nextHighlightedChoice = document.getElementById(\r\n                `ac-choiceSetInput-${this._choiceSetId}-choice-${id}`\r\n            );\r\n            if (nextHighlightedChoice) {\r\n                currentHighlightedChoice?.classList.remove(\r\n                    this.hostConfig.makeCssClassName(\"ac-choiceSetInput-choice-highlighted\")\r\n                );\r\n                nextHighlightedChoice.classList.add(\r\n                    this.hostConfig.makeCssClassName(\"ac-choiceSetInput-choice-highlighted\")\r\n                );\r\n                if (scrollIntoView) {\r\n                    nextHighlightedChoice.scrollIntoView();\r\n                }\r\n                this._highlightedChoiceId = id;\r\n            } else if (currentHighlightedChoice && this._highlightedChoiceId !== 0) {\r\n                this.highlightChoice(0);\r\n            } else {\r\n                this.highlightChoice(this._visibleChoiceCount - 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private filterChoices() {\r\n        const filter = this._textInput?.value.toLowerCase().trim() || \"\";\r\n        const choices = [...this._choices, ...this._dynamicChoices];\r\n        for (const choice of choices) {\r\n            if (choice.title) {\r\n                const matchIndex = choice.title.toLowerCase().indexOf(filter);\r\n                if (matchIndex !== -1) {\r\n                    const matchedText = choice.title.substring(\r\n                        matchIndex,\r\n                        matchIndex + filter.length\r\n                    );\r\n                    const choiceContainer = this.createChoice(\r\n                        choice.title,\r\n                        matchedText,\r\n                        this._visibleChoiceCount++\r\n                    );\r\n                    this._dropdown?.appendChild(choiceContainer);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getStatusIndicator(error?: string): HTMLDivElement {\r\n        if (error) {\r\n            if (!this._errorIndicator) {\r\n                const errorIndicator = document.createElement(\"div\");\r\n                errorIndicator.className = this.hostConfig.makeCssClassName(\r\n                    \"ac-input\",\r\n                    \"ac-choiceSetInput-statusIndicator\",\r\n                    \"ac-choiceSetInput-errorIndicator\"\r\n                );\r\n                this._errorIndicator = errorIndicator;\r\n            }\r\n            this._errorIndicator.innerText = error;\r\n            return this._errorIndicator;\r\n        } else {\r\n            if (!this._loadingIndicator) {\r\n                const loadingIndicator = document.createElement(\"div\");\r\n                loadingIndicator.className = this.hostConfig.makeCssClassName(\r\n                    \"ac-input\",\r\n                    \"ac-choiceSetInput-statusIndicator\"\r\n                );\r\n                this._loadingIndicator = loadingIndicator;\r\n            }\r\n            this._loadingIndicator.innerText =\r\n                this._visibleChoiceCount === 0 ? \"Loading...\" : \"Loading more...\";\r\n            return this._loadingIndicator;\r\n        }\r\n    }\r\n\r\n    private resetDropdown() {\r\n        if (this._dropdown) {\r\n            Utils.clearElementChildren(this._dropdown);\r\n            this._visibleChoiceCount = 0;\r\n            this._highlightedChoiceId = -1;\r\n        }\r\n    }\r\n\r\n    private showDropdown() {\r\n        if (this._dropdown?.hasChildNodes()) {\r\n            this._dropdown.classList.add(\r\n                this.hostConfig.makeCssClassName(\"ac-choiceSetInput-filtered-dropdown-open\")\r\n            );\r\n        }\r\n    }\r\n\r\n    processChoices() {\r\n        this.resetDropdown();\r\n        this.filterChoices();\r\n        this.showDropdown();\r\n    }\r\n\r\n    processResponse(filter: string, fetchedChoices: FetchedChoice[]) {\r\n        if (filter === this._textInput?.value) {\r\n            this.resetDropdown();\r\n            this._dynamicChoices = fetchedChoices;\r\n            this.filterChoices();\r\n            if (this._visibleChoiceCount === 0) {\r\n                this.showErrorIndicator(filter, \"No results found\");\r\n            }\r\n        }\r\n    }\r\n\r\n    showLoadingIndicator() {\r\n        const loadingIndicator = this.getStatusIndicator();\r\n        this._dropdown?.appendChild(loadingIndicator);\r\n        this.showDropdown();\r\n    }\r\n\r\n    removeLoadingIndicator() {\r\n        if (this._loadingIndicator && this._dropdown?.contains(this._loadingIndicator)) {\r\n            this._dropdown?.removeChild(this._loadingIndicator);\r\n        }\r\n    }\r\n\r\n    showErrorIndicator(filter: string, error: string) {\r\n        if (filter === this._textInput?.value) {\r\n            this.processChoices();\r\n            const errorIndicator = this.getStatusIndicator(error);\r\n            this._dropdown?.appendChild(errorIndicator);\r\n            errorIndicator.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    get dynamicChoices() {\r\n        return this._dynamicChoices?.map((choice) => choice.title);\r\n    }\r\n\r\n    get hostConfig(): HostConfig {\r\n        if (this._hostConfig) {\r\n            return this._hostConfig;\r\n        } else {\r\n            if (this.parent) {\r\n                return this.parent.hostConfig;\r\n            } else {\r\n                return defaultHostConfig;\r\n            }\r\n        }\r\n    }\r\n\r\n    set parent(value: CardObject | undefined) {\r\n        this._parent = value;\r\n    }\r\n\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n\r\n    get renderedElement() {\r\n        return this._renderedElement;\r\n    }\r\n\r\n    get textInput() {\r\n        return this._textInput;\r\n    }\r\n\r\n    get dropdown() {\r\n        return this._dropdown;\r\n    }\r\n}\r\n\r\nexport class NumberInput extends Input {\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new NumProperty(Versions.v1_0, \"value\");\r\n    static readonly placeholderProperty = new StringProperty(Versions.v1_0, \"placeholder\");\r\n    static readonly minProperty = new NumProperty(Versions.v1_0, \"min\");\r\n    static readonly maxProperty = new NumProperty(Versions.v1_0, \"max\");\r\n\r\n    @property(NumberInput.valueProperty)\r\n    defaultValue?: number;\r\n\r\n    @property(NumberInput.minProperty)\r\n    min?: number;\r\n\r\n    @property(NumberInput.maxProperty)\r\n    max?: number;\r\n\r\n    @property(NumberInput.placeholderProperty)\r\n    placeholder?: string;\r\n\r\n    //#endregion\r\n\r\n    private _numberInputElement: HTMLInputElement;\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._numberInputElement = document.createElement(\"input\");\r\n        this._numberInputElement.setAttribute(\"type\", \"number\");\r\n\r\n        if (this.min !== undefined) {\r\n            this._numberInputElement.setAttribute(\"min\", this.min.toString());\r\n        }\r\n\r\n        if (this.max !== undefined) {\r\n            this._numberInputElement.setAttribute(\"max\", this.max.toString());\r\n        }\r\n\r\n        this._numberInputElement.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-numberInput\"\r\n        );\r\n        this._numberInputElement.style.width = \"100%\";\r\n\r\n        this._numberInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        if (this.defaultValue !== undefined) {\r\n            this._numberInputElement.valueAsNumber = this.defaultValue;\r\n        }\r\n\r\n        if (this.placeholder) {\r\n            this._numberInputElement.placeholder = this.placeholder;\r\n            this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n\r\n        this._numberInputElement.oninput = () => {\r\n            this.valueChanged();\r\n        };\r\n\r\n        return this._numberInputElement;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Number\";\r\n    }\r\n\r\n    isSet(): boolean {\r\n        return this.value !== undefined && !isNaN(this.value);\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (this.value === undefined) {\r\n            return !this.isRequired;\r\n        }\r\n\r\n        let result = true;\r\n\r\n        if (this.min !== undefined) {\r\n            result = result && this.value >= this.min;\r\n        }\r\n\r\n        if (this.max !== undefined) {\r\n            result = result && this.value <= this.max;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get value(): number | undefined {\r\n        return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\r\n    }\r\n\r\n    set value(value: number | undefined) {\r\n        if (value && this._numberInputElement) {\r\n            this._numberInputElement.value = value.toString();\r\n        }\r\n    }\r\n}\r\n\r\nexport class DateInput extends Input {\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new StringProperty(Versions.v1_0, \"value\");\r\n    static readonly placeholderProperty = new StringProperty(Versions.v1_0, \"placeholder\");\r\n    static readonly minProperty = new StringProperty(Versions.v1_0, \"min\");\r\n    static readonly maxProperty = new StringProperty(Versions.v1_0, \"max\");\r\n\r\n    @property(DateInput.valueProperty)\r\n    defaultValue?: string;\r\n\r\n    @property(DateInput.minProperty)\r\n    min?: string;\r\n\r\n    @property(DateInput.maxProperty)\r\n    max?: string;\r\n\r\n    @property(DateInput.placeholderProperty)\r\n    placeholder?: string;\r\n\r\n    //#endregion\r\n\r\n    private _dateInputElement: HTMLInputElement;\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._dateInputElement = document.createElement(\"input\");\r\n        this._dateInputElement.setAttribute(\"type\", \"date\");\r\n\r\n        if (this.min) {\r\n            this._dateInputElement.setAttribute(\"min\", this.min);\r\n        }\r\n\r\n        if (this.max) {\r\n            this._dateInputElement.setAttribute(\"max\", this.max);\r\n        }\r\n\r\n        if (this.placeholder) {\r\n            this._dateInputElement.placeholder = this.placeholder;\r\n            this._dateInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n\r\n        this._dateInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        this._dateInputElement.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-dateInput\"\r\n        );\r\n        this._dateInputElement.style.width = \"100%\";\r\n\r\n        this._dateInputElement.oninput = () => {\r\n            this.valueChanged();\r\n        };\r\n\r\n        if (this.defaultValue) {\r\n            this._dateInputElement.value = this.defaultValue;\r\n        }\r\n\r\n        return this._dateInputElement;\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n        if (!this.allowRevealOnHoverStyle) {\r\n            return;\r\n        }\r\n\r\n        super.updateVisualState(eventType);\r\n\r\n        if (this._dateInputElement && this.inputStyle === Enums.InputStyle.RevealOnHover) {\r\n            const hideDatePicker = this.shouldHideInputAdornersForRevealOnHover(this._dateInputElement, eventType);\r\n\r\n            if (hideDatePicker) {\r\n                this._dateInputElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n            } else {\r\n                this._dateInputElement.classList.add(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n            }\r\n\r\n            updateInputAdornersVisibility(this._dateInputElement, hideDatePicker  /*hide*/);\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Date\";\r\n    }\r\n\r\n    isSet(): boolean {\r\n        return this.value ? true : false;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n\r\n        const valueAsDate = new Date(this.value);\r\n\r\n        let result = true;\r\n\r\n        if (this.min) {\r\n            const minDate = new Date(this.min);\r\n\r\n            result = result && valueAsDate >= minDate;\r\n        }\r\n\r\n        if (this.max) {\r\n            const maxDate = new Date(this.max);\r\n\r\n            result = result && valueAsDate <= maxDate;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        return this._dateInputElement ? this._dateInputElement.value : undefined;\r\n    }\r\n}\r\n\r\nexport class TimeProperty extends CustomProperty<string | undefined> {\r\n    constructor(readonly targetVersion: Version, readonly name: string) {\r\n        super(\r\n            targetVersion,\r\n            name,\r\n            (\r\n                sender: SerializableObject,\r\n                prop: PropertyDefinition,\r\n                source: PropertyBag,\r\n                context: BaseSerializationContext\r\n            ) => {\r\n                const value = source[prop.name];\r\n\r\n                if (typeof value === \"string\" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {\r\n                    return value;\r\n                }\r\n\r\n                return undefined;\r\n            },\r\n            (\r\n                sender: SerializableObject,\r\n                prop: PropertyDefinition,\r\n                target: PropertyBag,\r\n                value: string | undefined,\r\n                context: BaseSerializationContext\r\n            ) => {\r\n                context.serializeValue(target, prop.name, value);\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport class TimeInput extends Input {\r\n    private static convertTimeStringToDate(timeString: string): Date {\r\n        return new Date(\"1973-09-04T\" + timeString + \":00Z\");\r\n    }\r\n\r\n    //#region Schema\r\n\r\n    static readonly valueProperty = new TimeProperty(Versions.v1_0, \"value\");\r\n    static readonly placeholderProperty = new StringProperty(Versions.v1_0, \"placeholder\");\r\n    static readonly minProperty = new TimeProperty(Versions.v1_0, \"min\");\r\n    static readonly maxProperty = new TimeProperty(Versions.v1_0, \"max\");\r\n\r\n    @property(TimeInput.valueProperty)\r\n    defaultValue?: string;\r\n\r\n    @property(TimeInput.minProperty)\r\n    min?: string;\r\n\r\n    @property(TimeInput.maxProperty)\r\n    max?: string;\r\n\r\n    @property(TimeInput.placeholderProperty)\r\n    placeholder?: string;\r\n\r\n    //#endregion\r\n\r\n    private _timeInputElement: HTMLInputElement;\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._timeInputElement = document.createElement(\"input\");\r\n        this._timeInputElement.setAttribute(\"type\", \"time\");\r\n\r\n        if (this.min) {\r\n            this._timeInputElement.setAttribute(\"min\", this.min);\r\n        }\r\n\r\n        if (this.max) {\r\n            this._timeInputElement.setAttribute(\"max\", this.max);\r\n        }\r\n\r\n        this._timeInputElement.className = this.hostConfig.makeCssClassName(\r\n            \"ac-input\",\r\n            \"ac-timeInput\"\r\n        );\r\n        this._timeInputElement.style.width = \"100%\";\r\n        this._timeInputElement.oninput = () => {\r\n            this.valueChanged();\r\n        };\r\n\r\n        if (this.placeholder) {\r\n            this._timeInputElement.placeholder = this.placeholder;\r\n            this._timeInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n\r\n        this._timeInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        if (this.defaultValue) {\r\n            this._timeInputElement.value = this.defaultValue;\r\n        }\r\n\r\n        return this._timeInputElement;\r\n    }\r\n\r\n    updateVisualState(eventType: InputEventType): void {\r\n        if (!this.allowRevealOnHoverStyle) {\r\n            return;\r\n        }\r\n        \r\n        super.updateVisualState(eventType);\r\n\r\n        if (this._timeInputElement && this.inputStyle === Enums.InputStyle.RevealOnHover) {\r\n            const hideTimePicker = this.shouldHideInputAdornersForRevealOnHover(this._timeInputElement, eventType);\r\n\r\n            if (hideTimePicker) {\r\n                this._timeInputElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n            } else {\r\n                this._timeInputElement.classList.add(this.hostConfig.makeCssClassName(\"ac-inputStyle-revealOnHover-onfocus\"));\r\n            }\r\n\r\n            updateInputAdornersVisibility(this._timeInputElement, hideTimePicker /*hide*/);\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Time\";\r\n    }\r\n\r\n    isSet(): boolean {\r\n        return this.value ? true : false;\r\n    }\r\n\r\n    isValid(): boolean {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n\r\n        const valueAsDate = TimeInput.convertTimeStringToDate(this.value);\r\n\r\n        let result = true;\r\n\r\n        if (this.min) {\r\n            const minDate = TimeInput.convertTimeStringToDate(this.min);\r\n\r\n            result = result && valueAsDate >= minDate;\r\n        }\r\n\r\n        if (this.max) {\r\n            const maxDate = TimeInput.convertTimeStringToDate(this.max);\r\n\r\n            result = result && valueAsDate <= maxDate;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        return this._timeInputElement ? this._timeInputElement.value : undefined;\r\n    }\r\n}\r\n\r\nexport const enum ActionButtonState {\r\n    Normal,\r\n    Expanded,\r\n    Subdued\r\n}\r\n\r\nexport type ActionType = { new (): Action };\r\n\r\nexport abstract class Action extends CardObject {\r\n    //#region Schema\r\n\r\n    static readonly titleProperty = new StringProperty(Versions.v1_0, \"title\");\r\n    static readonly iconUrlProperty = new StringProperty(Versions.v1_1, \"iconUrl\");\r\n    static readonly styleProperty = new ValueSetProperty(\r\n        Versions.v1_2,\r\n        \"style\",\r\n        [\r\n            { value: Enums.ActionStyle.Default },\r\n            { value: Enums.ActionStyle.Positive },\r\n            { value: Enums.ActionStyle.Destructive }\r\n        ],\r\n        Enums.ActionStyle.Default\r\n    );\r\n    static readonly modeProperty = new ValueSetProperty(\r\n        Versions.v1_5,\r\n        \"mode\",\r\n        [{ value: Enums.ActionMode.Primary }, { value: Enums.ActionMode.Secondary }],\r\n        Enums.ActionMode.Primary\r\n    );\r\n    static readonly tooltipProperty = new StringProperty(Versions.v1_5, \"tooltip\");\r\n    static readonly isEnabledProperty = new BoolProperty(Versions.v1_5, \"isEnabled\", true);\r\n    static readonly roleProperty = new EnumProperty(Versions.v1_6, \"role\", Enums.ActionRole);\r\n\r\n    @property(Action.titleProperty)\r\n    title?: string;\r\n\r\n    @property(Action.iconUrlProperty)\r\n    iconUrl?: string;\r\n\r\n    @property(Action.styleProperty)\r\n    style: string = Enums.ActionStyle.Default;\r\n\r\n    @property(Action.modeProperty)\r\n    mode: string = Enums.ActionMode.Primary;\r\n\r\n    @property(Action.tooltipProperty)\r\n    tooltip?: string;\r\n\r\n    @property(Action.isEnabledProperty)\r\n    isEnabled: boolean;\r\n    \r\n    @property(Action.roleProperty)\r\n    role?: Enums.ActionRole;\r\n\r\n    //#endregion\r\n\r\n    private renderButtonContent() {\r\n        if (this.renderedElement) {\r\n            // Cache hostConfig for perf\r\n            const hostConfig = this.hostConfig;\r\n\r\n            const titleElement = document.createElement(\"div\");\r\n            titleElement.style.overflow = \"hidden\";\r\n            titleElement.style.textOverflow = \"ellipsis\";\r\n\r\n            if (\r\n                !(\r\n                    hostConfig.actions.iconPlacement === Enums.ActionIconPlacement.AboveTitle ||\r\n                    hostConfig.actions.allowTitleToWrap\r\n                )\r\n            ) {\r\n                titleElement.style.whiteSpace = \"nowrap\";\r\n            }\r\n\r\n            if (this.title) {\r\n                titleElement.innerText = this.title;\r\n            }\r\n\r\n            if (!this.iconUrl) {\r\n                this.renderedElement.classList.add(\"noIcon\");\r\n                this.renderedElement.appendChild(titleElement);\r\n            } else {\r\n                const iconElement = document.createElement(\"img\");\r\n                iconElement.src = this.iconUrl;\r\n                iconElement.style.width = hostConfig.actions.iconSize + \"px\";\r\n                iconElement.style.height = hostConfig.actions.iconSize + \"px\";\r\n                iconElement.style.flex = \"0 0 auto\";\r\n\r\n                if (hostConfig.actions.iconPlacement === Enums.ActionIconPlacement.AboveTitle) {\r\n                    this.renderedElement.classList.add(\"iconAbove\");\r\n                    this.renderedElement.style.flexDirection = \"column\";\r\n\r\n                    if (this.title) {\r\n                        iconElement.style.marginBottom = \"6px\";\r\n                    }\r\n                } else {\r\n                    this.renderedElement.classList.add(\"iconLeft\");\r\n\r\n                    iconElement.style.maxHeight = \"100%\";\r\n\r\n                    if (this.title) {\r\n                        iconElement.style.marginRight = \"6px\";\r\n                    }\r\n                }\r\n\r\n                this.renderedElement.appendChild(iconElement);\r\n                this.renderedElement.appendChild(titleElement);\r\n            }\r\n        }\r\n    }\r\n\r\n    private getParentContainer(): Container | undefined {\r\n        if (this.parent instanceof Container) {\r\n            return this.parent;\r\n        }\r\n\r\n        return this.parent ? this.parent.getParentContainer() : undefined;\r\n    }\r\n\r\n    private _state: ActionButtonState = ActionButtonState.Normal;\r\n    private _actionCollection?: ActionCollection; // hold the reference to its action collection\r\n    private _isFocusable: boolean = true;\r\n\r\n    isDesignMode(): boolean {\r\n        const rootElement = this.getRootObject();\r\n\r\n        return rootElement instanceof CardElement && rootElement.isDesignMode();\r\n    }\r\n\r\n    protected updateCssClasses() {\r\n        if (this.parent && this.renderedElement) {\r\n            const hostConfig = this.parent.hostConfig;\r\n\r\n            this.renderedElement.className = hostConfig.makeCssClassName(\r\n                this.isEffectivelyEnabled() ? \"ac-pushButton\" : \"ac-pushButton-disabled\"\r\n            );\r\n\r\n            const parentContainer = this.getParentContainer();\r\n\r\n            if (parentContainer) {\r\n                const parentContainerStyle = parentContainer.getEffectiveStyle();\r\n\r\n                if (parentContainerStyle) {\r\n                    this.renderedElement.classList.add(\"style-\" + parentContainerStyle);\r\n                }\r\n            }\r\n\r\n            this.renderedElement.tabIndex = !this.isDesignMode() && this.isFocusable ? 0 : -1;\r\n\r\n            switch (this._state) {\r\n                case ActionButtonState.Normal:\r\n                    // No additional classes needed\r\n                    break;\r\n\r\n                case ActionButtonState.Expanded:\r\n                    this.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\r\n                    break;\r\n                case ActionButtonState.Subdued:\r\n                    this.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\r\n                    break;\r\n            }\r\n\r\n            if (this.style && this.isEffectivelyEnabled()) {\r\n                if (this.style === Enums.ActionStyle.Positive) {\r\n                    this.renderedElement.classList.add(\r\n                        ...hostConfig.makeCssClassNames(\"primary\", \"style-positive\")\r\n                    );\r\n                } else {\r\n                    this.renderedElement.classList.add(\r\n                        ...hostConfig.makeCssClassNames(\"style-\" + this.style.toLowerCase())\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getDefaultSerializationContext(): BaseSerializationContext {\r\n        return new SerializationContext();\r\n    }\r\n\r\n    protected internalGetReferencedInputs(): Dictionary<Input> {\r\n        return {};\r\n    }\r\n\r\n    protected internalPrepareForExecution(_inputs: Dictionary<Input> | undefined) {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    protected internalValidateInputs(referencedInputs: Dictionary<Input> | undefined): Input[] {\r\n        const result: Input[] = [];\r\n\r\n        if (referencedInputs) {\r\n            for (const key of Object.keys(referencedInputs)) {\r\n                const input = referencedInputs[key];\r\n\r\n                if (!input.validateValue()) {\r\n                    result.push(input);\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected shouldSerialize(context: SerializationContext): boolean {\r\n        return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    }\r\n\r\n    protected raiseExecuteActionEvent() {\r\n        if (this.onExecute) {\r\n            this.onExecute(this);\r\n        }\r\n\r\n        raiseExecuteActionEvent(this);\r\n    }\r\n\r\n    protected internalAfterExecute() {\r\n        let rootObject = this.getRootObject();\r\n\r\n        if (rootObject instanceof CardElement) {\r\n            rootObject.updateActionsEnabledState();\r\n        }\r\n    }\r\n\r\n    onExecute: (sender: Action) => void;\r\n\r\n    getHref(): string | undefined {\r\n        return \"\";\r\n    }\r\n\r\n    getAriaRole(): string {\r\n        let ariaRole = this.getAriaRoleFromEnum();\r\n        return ariaRole ?? \"button\";\r\n    }\r\n    \r\n    getAriaRoleFromEnum(): string | undefined {\r\n        switch (this.role) {\r\n            case Enums.ActionRole.Button:\r\n                return \"button\";\r\n            case Enums.ActionRole.Link:\r\n                return \"link\";\r\n            case Enums.ActionRole.Menu:\r\n                return \"menu\";\r\n            case Enums.ActionRole.MenuItem:\r\n                return \"menuitem\";\r\n            case Enums.ActionRole.Tab:\r\n                return \"tab\";\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n\r\n    setupElementForAccessibility(element: HTMLElement, promoteTooltipToLabel: boolean = false) {\r\n        element.tabIndex = this.isEffectivelyEnabled() && !this.isDesignMode() ? 0 : -1;\r\n\r\n        element.setAttribute(\"role\", this.getAriaRole());\r\n\r\n        if (element instanceof HTMLButtonElement) {\r\n            element.disabled = !this.isEffectivelyEnabled();\r\n        }\r\n\r\n        if (!this.isEffectivelyEnabled()) {\r\n            element.setAttribute(\"aria-disabled\", \"true\");\r\n        } else {\r\n            element.removeAttribute(\"aria-disabled\");\r\n            element.classList.add(this.hostConfig.makeCssClassName(\"ac-selectable\"));\r\n        }\r\n\r\n        if (this.title) {\r\n            element.setAttribute(\"aria-label\", this.title);\r\n            element.title = this.title;\r\n        } else {\r\n            element.removeAttribute(\"aria-label\");\r\n            element.removeAttribute(\"title\");\r\n        }\r\n\r\n        if (this.tooltip) {\t\t\t\r\n            if (promoteTooltipToLabel && !this.title) {\r\n                element.setAttribute(\"aria-label\", this.tooltip);\r\n            }\r\n            element.title = this.tooltip;\r\n        }\r\n    }\r\n\r\n    parse(source: any, context?: SerializationContext) {\r\n        return super.parse(source, context ? context : new SerializationContext());\r\n    }\r\n\r\n    render() {\r\n        const buttonElement = document.createElement(\"button\");\r\n        buttonElement.type = \"button\";\r\n        buttonElement.style.display = \"flex\";\r\n        buttonElement.style.alignItems = \"center\";\r\n        buttonElement.style.justifyContent = \"center\";\r\n        buttonElement.onclick = (e) => {\r\n            if (this.isEffectivelyEnabled()) {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n\r\n                this.execute();\r\n            }\r\n        };\r\n\r\n        this._renderedElement = buttonElement;\r\n\r\n        this.renderButtonContent();\r\n        this.updateCssClasses();\r\n        this.setupElementForAccessibility(buttonElement);\r\n    }\r\n\r\n    execute() {\r\n        if (this._actionCollection) {\r\n            this._actionCollection.actionExecuted(this);\r\n        }\r\n\r\n        this.raiseExecuteActionEvent();\r\n        this.internalAfterExecute();\r\n    }\r\n\r\n    prepareForExecution(): boolean {\r\n        const referencedInputs = this.getReferencedInputs();\r\n        const invalidInputs = this.internalValidateInputs(referencedInputs);\r\n\r\n        if (invalidInputs.length > 0) {\r\n            invalidInputs[0].focus();\r\n\r\n            return false;\r\n        }\r\n\r\n        this.internalPrepareForExecution(referencedInputs);\r\n\r\n        return true;\r\n    }\r\n\r\n    remove(): boolean {\r\n        if (this._actionCollection) {\r\n            return this._actionCollection.removeAction(this);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        return [];\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        return [this];\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        return this.iconUrl ? [{ url: this.iconUrl, mimeType: \"image\" }] : [];\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        return this.id === id ? this : undefined;\r\n    }\r\n\r\n    getReferencedInputs(): Dictionary<Input> | undefined {\r\n        return this.internalGetReferencedInputs();\r\n    }\r\n\r\n    /**\r\n     * Validates the inputs associated with this action.\r\n     *\r\n     * @returns A list of inputs that failed validation, or an empty array if no input failed validation.\r\n     */\r\n    validateInputs(): Input[] {\r\n        return this.internalValidateInputs(this.getReferencedInputs());\r\n    }\r\n\r\n    updateEnabledState() {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    isEffectivelyEnabled(): boolean {\r\n        return this.isEnabled;\r\n    }\r\n\r\n    get isPrimary(): boolean {\r\n        return this.style === Enums.ActionStyle.Positive;\r\n    }\r\n\r\n    set isPrimary(value: boolean) {\r\n        if (value) {\r\n            this.style = Enums.ActionStyle.Positive;\r\n        } else {\r\n            if (this.style === Enums.ActionStyle.Positive) {\r\n                this.style = Enums.ActionStyle.Default;\r\n            }\r\n        }\r\n    }\r\n\r\n    get hostConfig(): HostConfig {\r\n        return this.parent ? this.parent.hostConfig : defaultHostConfig;\r\n    }\r\n\r\n    get parent(): CardElement | undefined {\r\n        return <CardElement>this._parent;\r\n    }\r\n\r\n    get state(): ActionButtonState {\r\n        return this._state;\r\n    }\r\n\r\n    set state(value: ActionButtonState) {\r\n        if (this._state !== value) {\r\n            this._state = value;\r\n\r\n            this.updateCssClasses();\r\n        }\r\n    }\r\n\r\n    get isFocusable(): boolean {\r\n        return this._isFocusable;\r\n    }\r\n\r\n    set isFocusable(value: boolean) {\r\n        if (this._isFocusable !== value) {\r\n            this._isFocusable = value;\r\n\r\n            this.updateCssClasses();\r\n        }\r\n    }\r\n}\r\n\r\nexport abstract class SubmitActionBase extends Action {\r\n    //#region Schema\r\n\r\n    static readonly dataProperty = new PropertyDefinition(Versions.v1_0, \"data\");\r\n    static readonly associatedInputsProperty = new CustomProperty(\r\n        Versions.v1_3,\r\n        \"associatedInputs\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            const value = source[prop.name];\r\n\r\n            if (value !== undefined && typeof value === \"string\") {\r\n                return value.toLowerCase() === \"none\" ? \"none\" : \"auto\";\r\n            }\r\n\r\n            return undefined;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: string | undefined,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            context.serializeValue(target, prop.name, value);\r\n        }\r\n    );\r\n    static readonly disabledUnlessAssociatedInputsChangeProperty = new BoolProperty(\r\n        Versions.v1_6,\r\n        \"disabledUnlessAssociatedInputsChange\",\r\n        false\r\n    );\r\n\r\n    @property(SubmitActionBase.dataProperty)\r\n    private _originalData?: PropertyBag;\r\n\r\n    @property(SubmitActionBase.associatedInputsProperty)\r\n    associatedInputs?: \"auto\" | \"none\";\r\n\r\n    @property(SubmitActionBase.disabledUnlessAssociatedInputsChangeProperty)\r\n    disabledUnlessAssociatedInputsChange: boolean = false;\r\n\r\n    //#endregion\r\n\r\n    private _isPrepared: boolean = false;\r\n    private _processedData?: PropertyBag;\r\n    private _areReferencedInputsDirty: boolean = false;\r\n\r\n    protected internalGetReferencedInputs(): Dictionary<Input> {\r\n        const result: Dictionary<Input> = {};\r\n\r\n        if (this.associatedInputs !== \"none\") {\r\n            let current: CardElement | undefined = this.parent;\r\n            let inputs: Input[] = [];\r\n\r\n            while (current) {\r\n                inputs.push(...current.getAllInputs(false));\r\n\r\n                current = current.parent;\r\n            }\r\n\r\n            for (const input of inputs) {\r\n                if (input.id) {\r\n                    result[input.id] = input;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected internalPrepareForExecution(inputs: Dictionary<Input> | undefined) {\r\n        if (this._originalData) {\r\n            this._processedData = JSON.parse(JSON.stringify(this._originalData));\r\n        } else {\r\n            this._processedData = {};\r\n        }\r\n\r\n        if (this._processedData && inputs) {\r\n            for (const key of Object.keys(inputs)) {\r\n                const input = inputs[key];\r\n\r\n                if (input.id && input.isSet()) {\r\n                    this._processedData[input.id] =\r\n                        typeof input.value === \"string\" ? input.value : input.value.toString();\r\n                }\r\n            }\r\n        }\r\n\r\n        this._isPrepared = true;\r\n    }\r\n\r\n    protected internalAfterExecute() {\r\n        if (GlobalSettings.resetInputsDirtyStateAfterActionExecution) {\r\n            this.resetReferencedInputsDirtyState();\r\n        }\r\n    }\r\n\r\n    resetReferencedInputsDirtyState() {\r\n        let referencedInputs = this.getReferencedInputs();\r\n\r\n        this._areReferencedInputsDirty = false;\r\n\r\n        if (referencedInputs) {\r\n            for (const key of Object.keys(referencedInputs)) {\r\n                const input = referencedInputs[key];\r\n\r\n                input.resetDirtyState();\r\n            }\r\n        }\r\n    }\r\n\r\n    updateEnabledState() {\r\n        this._areReferencedInputsDirty = false;\r\n\r\n        let referencedInputs = this.getReferencedInputs();\r\n\r\n        if (referencedInputs) {\r\n            for (const key of Object.keys(referencedInputs)) {\r\n                const input = referencedInputs[key];\r\n\r\n                if (input.isDirty()) {\r\n                    this._areReferencedInputsDirty = true;\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.updateCssClasses();\r\n\r\n        if (this._renderedElement) {\r\n            this.setupElementForAccessibility(this._renderedElement);\r\n        }\r\n    }\r\n\r\n    isEffectivelyEnabled(): boolean {\r\n        let result = super.isEffectivelyEnabled();\r\n\r\n        return this.disabledUnlessAssociatedInputsChange\r\n            ? result && this._areReferencedInputsDirty\r\n            : result;\r\n    }\r\n\r\n    get data(): object | undefined {\r\n        return this._isPrepared ? this._processedData : this._originalData;\r\n    }\r\n\r\n    set data(value: object | undefined) {\r\n        this._originalData = value;\r\n        this._isPrepared = false;\r\n    }\r\n}\r\n\r\nexport class SubmitAction extends SubmitActionBase {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.Submit\" = \"Action.Submit\";\r\n\r\n    getJsonTypeName(): string {\r\n        return SubmitAction.JsonTypeName;\r\n    }\r\n}\r\n\r\nexport abstract class UniversalAction extends SubmitActionBase {\r\n    // This is the base class for all actions that can be executed via the\r\n    // adaptiveCards/action activity\r\n}\r\n\r\nexport class ExecuteAction extends UniversalAction {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.Execute\" = \"Action.Execute\";\r\n\r\n    //#region Schema\r\n\r\n    static readonly verbProperty = new StringProperty(Versions.v1_4, \"verb\");\r\n\r\n    @property(ExecuteAction.verbProperty)\r\n    verb: string;\r\n\r\n    //#endregion\r\n\r\n    getJsonTypeName(): string {\r\n        return ExecuteAction.JsonTypeName;\r\n    }\r\n}\r\n\r\nexport class DataQuery extends UniversalAction {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Data.Query\" = \"Data.Query\";\r\n\r\n    //#region Schema\r\n\r\n    static readonly datasetProperty = new StringProperty(Versions.v1_6, \"dataset\");\r\n    static readonly filterProperty = new StringProperty(Versions.v1_6, \"filter\");\r\n    static readonly countProperty = new NumProperty(Versions.v1_6, \"count\");\r\n    static readonly skipProperty = new NumProperty(Versions.v1_6, \"skip\");\r\n\r\n    @property(DataQuery.datasetProperty)\r\n    dataset: string;\r\n\r\n    @property(DataQuery.filterProperty)\r\n    filter: string;\r\n\r\n    @property(DataQuery.countProperty)\r\n    count?: number;\r\n\r\n    @property(DataQuery.skipProperty)\r\n    skip?: number;\r\n\r\n    //#endregion\r\n\r\n    getJsonTypeName(): string {\r\n        return DataQuery.JsonTypeName;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class OpenUrlAction extends Action {\r\n    //#region Schema\r\n\r\n    static readonly urlProperty = new StringProperty(Versions.v1_0, \"url\");\r\n\r\n    @property(OpenUrlAction.urlProperty)\r\n    url?: string;\r\n\r\n    //#endregion\r\n\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.OpenUrl\" = \"Action.OpenUrl\";\r\n\r\n    getJsonTypeName(): string {\r\n        return OpenUrlAction.JsonTypeName;\r\n    }\r\n\r\n    getAriaRole(): string {\r\n        let ariaRole = this.getAriaRoleFromEnum();\r\n        return ariaRole ?? \"link\";\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (!this.url) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.propertyMustBeSet(\"url\")\r\n            );\r\n        }\r\n    }\r\n\r\n    getHref(): string | undefined {\r\n        return this.url;\r\n    }\r\n}\r\n\r\nexport class ToggleVisibilityAction extends Action {\r\n    //#region Schema\r\n\r\n    static readonly targetElementsProperty = new CustomProperty<PropertyBag>(\r\n        Versions.v1_2,\r\n        \"targetElements\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            const result: PropertyBag = {};\r\n\r\n            if (Array.isArray(source[prop.name])) {\r\n                for (const item of source[prop.name]) {\r\n                    if (typeof item === \"string\") {\r\n                        result[item] = undefined;\r\n                    } else if (typeof item === \"object\") {\r\n                        const elementId = item[\"elementId\"];\r\n\r\n                        if (typeof elementId === \"string\") {\r\n                            result[elementId] = Utils.parseBool(item[\"isVisible\"]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            const targetElements: any[] = [];\r\n\r\n            for (const id of Object.keys(value)) {\r\n                if (typeof value[id] === \"boolean\") {\r\n                    targetElements.push({\r\n                        elementId: id,\r\n                        isVisible: value[id]\r\n                    });\r\n                } else {\r\n                    targetElements.push(id);\r\n                }\r\n            }\r\n\r\n            context.serializeArray(target, prop.name, targetElements);\r\n        },\r\n        {},\r\n        (sender: SerializableObject) => {\r\n            return {};\r\n        }\r\n    );\r\n\r\n    @property(ToggleVisibilityAction.targetElementsProperty)\r\n    targetElements: { [key: string]: any } = {};\r\n\r\n    //#endregion\r\n\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.ToggleVisibility\" = \"Action.ToggleVisibility\";\r\n\r\n    private updateAriaControlsAttribute() {\r\n        // apply aria labels to make it clear which elements this action will toggle\r\n        if (this.targetElements) {\r\n            const elementIds = Object.keys(this.targetElements);\r\n\r\n            if (this._renderedElement) {\r\n                if (elementIds.length > 0) {\r\n                    this._renderedElement.setAttribute(\"aria-controls\", elementIds.join(\" \"));\r\n                } else {\r\n                    this._renderedElement.removeAttribute(\"aria-controls\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (!this.targetElements) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.propertyMustBeSet(\"targetElements\")\r\n            );\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return ToggleVisibilityAction.JsonTypeName;\r\n    }\r\n\r\n    render() {\r\n        super.render();\r\n\r\n        this.updateAriaControlsAttribute();\r\n    }\r\n\r\n    execute() {\r\n        super.execute();\r\n        if (this.parent) {\r\n            for (const elementId of Object.keys(this.targetElements)) {\r\n                const targetElement = this.parent.getRootElement().getElementById(elementId);\r\n\r\n                if (targetElement) {\r\n                    if (typeof this.targetElements[elementId] === \"boolean\") {\r\n                        targetElement.isVisible = this.targetElements[elementId];\r\n                    } else {\r\n                        targetElement.isVisible = !targetElement.isVisible;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    addTargetElement(elementId: string, isVisible: boolean | undefined = undefined) {\r\n        this.targetElements[elementId] = isVisible;\r\n        this.updateAriaControlsAttribute();\r\n    }\r\n\r\n    removeTargetElement(elementId: string) {\r\n        delete this.targetElements[elementId];\r\n        this.updateAriaControlsAttribute();\r\n    }\r\n}\r\n\r\nclass StringWithSubstitutionProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): StringWithSubstitutions {\r\n        const result = new StringWithSubstitutions();\r\n        result.set(Utils.parseString(source[this.name]));\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: StringWithSubstitutions,\r\n        context: BaseSerializationContext\r\n    ): void {\r\n        context.serializeValue(target, this.name, value.getOriginal());\r\n    }\r\n\r\n    constructor(readonly targetVersion: Version, readonly name: string) {\r\n        super(targetVersion, name, undefined, () => {\r\n            return new StringWithSubstitutions();\r\n        });\r\n    }\r\n}\r\n\r\nexport class HttpHeader extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly nameProperty = new StringProperty(Versions.v1_0, \"name\");\r\n    static readonly valueProperty = new StringWithSubstitutionProperty(Versions.v1_0, \"value\");\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"HttpHeader\";\r\n    }\r\n\r\n    @property(HttpHeader.nameProperty)\r\n    name: string;\r\n\r\n    @property(HttpHeader.valueProperty)\r\n    private _value: StringWithSubstitutions;\r\n\r\n    //#endregion\r\n\r\n    constructor(name: string = \"\", value: string = \"\") {\r\n        super();\r\n\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    getReferencedInputs(inputs: Input[], referencedInputs: Dictionary<Input>) {\r\n        this._value.getReferencedInputs(inputs, referencedInputs);\r\n    }\r\n\r\n    prepareForExecution(inputs: Dictionary<Input>) {\r\n        this._value.substituteInputValues(inputs, ContentTypes.applicationXWwwFormUrlencoded);\r\n    }\r\n\r\n    get value(): string | undefined {\r\n        return this._value.get();\r\n    }\r\n\r\n    set value(newValue: string | undefined) {\r\n        this._value.set(newValue);\r\n    }\r\n}\r\n\r\nexport class HttpAction extends Action {\r\n    //#region Schema\r\n\r\n    static readonly urlProperty = new StringWithSubstitutionProperty(Versions.v1_0, \"url\");\r\n    static readonly bodyProperty = new StringWithSubstitutionProperty(Versions.v1_0, \"body\");\r\n    static readonly methodProperty = new StringProperty(Versions.v1_0, \"method\");\r\n    static readonly headersProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_0,\r\n        \"headers\",\r\n        HttpHeader\r\n    );\r\n    static readonly ignoreInputValidationProperty = new BoolProperty(\r\n        Versions.v1_3,\r\n        \"ignoreInputValidation\",\r\n        false\r\n    );\r\n\r\n    @property(HttpAction.urlProperty)\r\n    private _url: StringWithSubstitutions;\r\n\r\n    @property(HttpAction.bodyProperty)\r\n    private _body: StringWithSubstitutions;\r\n\r\n    @property(HttpAction.methodProperty)\r\n    method?: string;\r\n\r\n    @property(HttpAction.headersProperty)\r\n    headers: HttpHeader[];\r\n\r\n    @property(HttpAction.ignoreInputValidationProperty)\r\n    private _ignoreInputValidation: boolean = false;\r\n\r\n    //#endregion\r\n\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.Http\" = \"Action.Http\";\r\n\r\n    protected internalGetReferencedInputs(): Dictionary<Input> {\r\n        const allInputs = this.parent ? this.parent.getRootElement().getAllInputs() : [];\r\n        const result: Dictionary<Input> = {};\r\n\r\n        this._url.getReferencedInputs(allInputs, result);\r\n\r\n        for (const header of this.headers) {\r\n            header.getReferencedInputs(allInputs, result);\r\n        }\r\n\r\n        this._body.getReferencedInputs(allInputs, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    protected internalPrepareForExecution(inputs: Dictionary<Input> | undefined) {\r\n        if (inputs) {\r\n            this._url.substituteInputValues(inputs, ContentTypes.applicationXWwwFormUrlencoded);\r\n\r\n            let contentType = ContentTypes.applicationJson;\r\n\r\n            for (const header of this.headers) {\r\n                header.prepareForExecution(inputs);\r\n\r\n                if (header.name && header.name.toLowerCase() === \"content-type\") {\r\n                    contentType = header.value!;\r\n                }\r\n            }\r\n\r\n            this._body.substituteInputValues(inputs, contentType);\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return HttpAction.JsonTypeName;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (!this.url) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.propertyMustBeSet(\"url\")\r\n            );\r\n        }\r\n\r\n        if (this.headers.length > 0) {\r\n            for (const header of this.headers) {\r\n                if (!header.name) {\r\n                    context.addFailure(\r\n                        this,\r\n                        Enums.ValidationEvent.PropertyCantBeNull,\r\n                        Strings.errors.actionHttpHeadersMustHaveNameAndValue()\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get ignoreInputValidation(): boolean {\r\n        return this._ignoreInputValidation;\r\n    }\r\n\r\n    set ignoreInputValidation(value: boolean) {\r\n        this._ignoreInputValidation = value;\r\n    }\r\n\r\n    get url(): string | undefined {\r\n        return this._url.get();\r\n    }\r\n\r\n    set url(value: string | undefined) {\r\n        this._url.set(value);\r\n    }\r\n\r\n    get body(): string | undefined {\r\n        return this._body.get();\r\n    }\r\n\r\n    set body(value: string | undefined) {\r\n        this._body.set(value);\r\n    }\r\n}\r\n\r\nexport class ShowCardAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.ShowCard\" = \"Action.ShowCard\";\r\n\r\n    protected updateCssClasses() {\r\n        super.updateCssClasses();\r\n\r\n        if (this.renderedElement) {\r\n            const effectiveHostConfig = this.parent ? this.parent.hostConfig : defaultHostConfig;\r\n\r\n            this.renderedElement.classList.add(effectiveHostConfig.makeCssClassName(\"expandable\"));\r\n            this.renderedElement.setAttribute(\r\n                \"aria-expanded\",\r\n                (this.state === ActionButtonState.Expanded).toString()\r\n            );\r\n        }\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        const jsonCard = source[\"card\"];\r\n\r\n        if (jsonCard) {\r\n            this.card.parse(jsonCard, context);\r\n        } else {\r\n            context.logParseEvent(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.showCardMustHaveCard()\r\n            );\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        if (this.card) {\r\n            context.serializeValue(target, \"card\", this.card.toJSON(context));\r\n        }\r\n    }\r\n\r\n    protected raiseExecuteActionEvent() {\r\n        if (this.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\r\n            // Only raise the event in Popup mode.\r\n            super.raiseExecuteActionEvent();\r\n        }\r\n    }\r\n\r\n    readonly card: AdaptiveCard = new InlineAdaptiveCard();\r\n\r\n    releaseDOMResources() {\r\n        super.releaseDOMResources();\r\n\r\n        this.card.releaseDOMResources();\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return ShowCardAction.JsonTypeName;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        this.card.internalValidateProperties(context);\r\n    }\r\n\r\n    setParent(value: CardElement) {\r\n        super.setParent(value);\r\n\r\n        this.card.setParent(value);\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        return this.card.getAllInputs(processActions);\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        result.push(...this.card.getAllActions());\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        let result = super.getResourceInformation();\r\n\r\n        result.push(...this.card.getResourceInformation());\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        let result = super.getActionById(id);\r\n\r\n        if (!result) {\r\n            result = this.card.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nclass OverflowAction extends Action {\r\n    static readonly JsonTypeName: \"Action.Overflow\" = \"Action.Overflow\";\r\n    private _actions: Action[];\r\n\r\n    constructor(actions: Action[]) {\r\n        super();\r\n        this._actions = actions;\r\n\r\n        this.title = Strings.defaults.overflowButtonText();\r\n        this.tooltip = Strings.defaults.overflowButtonTooltip();\r\n    }\r\n\r\n    getActions(): readonly Action[] {\r\n        return this._actions;\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        result.push(...this._actions);\r\n\r\n        return result;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return ShowCardAction.JsonTypeName;\r\n    }\r\n\r\n    execute() {\r\n        const shouldDisplayPopupMenu = !raiseDisplayOverflowActionMenuEvent(\r\n            this,\r\n            this.renderedElement\r\n        );\r\n\r\n        if (shouldDisplayPopupMenu && this.renderedElement) {\r\n            const contextMenu = new PopupMenu();\r\n            contextMenu.hostConfig = this.hostConfig;\r\n\r\n            for (let i = 0; i < this._actions.length; i++) {\r\n                const menuItem = new MenuItem(i.toString(), this._actions[i].title ?? \"\");\r\n                menuItem.isEnabled = this._actions[i].isEnabled;\r\n                menuItem.onClick = () => {\r\n                    const actionToExecute = this._actions[i];\r\n\r\n                    contextMenu.closePopup(false);\r\n\r\n                    if (actionToExecute.isEnabled) {\r\n                        actionToExecute.execute();\r\n                    }\r\n                };\r\n\r\n                contextMenu.items.add(menuItem);\r\n            }\r\n\r\n            contextMenu.onClose = () => {\r\n                this.renderedElement?.focus();\r\n                this.renderedElement?.setAttribute(\"aria-expanded\", \"false\");\r\n            }\r\n\r\n            this.renderedElement.setAttribute(\"aria-expanded\", \"true\");\r\n            contextMenu.popup(this.renderedElement);\r\n            contextMenu.selectedIndex = 0;\r\n        }\r\n    }\r\n    \r\n    setupElementForAccessibility(element: HTMLElement, promoteTooltipToLabel: boolean = false) {\r\n        super.setupElementForAccessibility(element, promoteTooltipToLabel);\r\n\r\n        element.setAttribute(\"aria-label\", Strings.defaults.overflowButtonTooltip());\r\n        element.setAttribute(\"aria-expanded\", \"false\");\r\n    }\r\n}\r\n\r\nclass ActionCollection {\r\n    private _owner: CardElement;\r\n    private _actionCardContainer: HTMLDivElement;\r\n    private _expandedAction?: ShowCardAction;\r\n    private _actionCard?: HTMLElement;\r\n\r\n    private isActionAllowed(action: Action): boolean {\r\n        const forbiddenTypes = this._owner.getForbiddenActionTypes();\r\n\r\n        if (forbiddenTypes) {\r\n            for (const forbiddenType of forbiddenTypes) {\r\n                if (action.constructor === forbiddenType) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private refreshContainer() {\r\n        clearElement(this._actionCardContainer);\r\n\r\n        if (!this._actionCard) {\r\n            this._actionCardContainer.style.marginTop = \"0px\";\r\n\r\n            return;\r\n        }\r\n\r\n        this._actionCardContainer.style.marginTop =\r\n            this.renderedActionCount > 0\r\n                ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\"\r\n                : \"0px\";\r\n\r\n        const padding = this._owner.getEffectivePadding();\r\n\r\n        this._owner.getImmediateSurroundingPadding(padding);\r\n\r\n        const physicalPadding =\r\n            this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n        if (this._actionCard) {\r\n            this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\r\n            this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\r\n\r\n            this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n            this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n\r\n            if (physicalPadding.bottom !== 0 && !this._owner.isDesignMode()) {\r\n                this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n                this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\r\n            }\r\n\r\n            Utils.appendChild(this._actionCardContainer, this._actionCard);\r\n        }\r\n    }\r\n\r\n    private layoutChanged() {\r\n        this._owner.getRootElement().updateLayout();\r\n    }\r\n\r\n    private showActionCard(\r\n        action: ShowCardAction,\r\n        suppressStyle: boolean = false,\r\n        raiseEvent: boolean = true\r\n    ) {\r\n        (<InlineAdaptiveCard>action.card).suppressStyle = suppressStyle;\r\n\r\n        // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise\r\n        const renderedCard =\r\n            action.card.renderedElement && !this._owner.isDesignMode()\r\n                ? action.card.renderedElement\r\n                : action.card.render();\r\n\r\n        this._actionCard = renderedCard;\r\n        this._expandedAction = action;\r\n\r\n        this.refreshContainer();\r\n\r\n        if (raiseEvent) {\r\n            this.layoutChanged();\r\n\r\n            raiseInlineCardExpandedEvent(action, true);\r\n        }\r\n    }\r\n\r\n    private collapseExpandedAction() {\r\n        for (const action of this._renderedActions) {\r\n            action.state = ActionButtonState.Normal;\r\n        }\r\n\r\n        const previouslyExpandedAction = this._expandedAction;\r\n\r\n        this._expandedAction = undefined;\r\n        this._actionCard = undefined;\r\n\r\n        this.refreshContainer();\r\n\r\n        if (previouslyExpandedAction) {\r\n            this.layoutChanged();\r\n\r\n            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\r\n        }\r\n    }\r\n\r\n    private expandShowCardAction(action: ShowCardAction, raiseEvent: boolean) {\r\n        let afterSelectedAction = false;\r\n\r\n        for (const renderedAction of this._renderedActions) {\r\n            // Remove actions after selected action from tabOrder if the actions are oriented horizontally, to skip focus directly to expanded card\r\n            if (\r\n                this._owner.hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal &&\r\n                afterSelectedAction\r\n            ) {\r\n                renderedAction.isFocusable = false;\r\n            }\r\n\r\n            if (renderedAction !== action) {\r\n                renderedAction.state = ActionButtonState.Subdued;\r\n            } else {\r\n                renderedAction.state = ActionButtonState.Expanded;\r\n\r\n                afterSelectedAction = true;\r\n\r\n                if (renderedAction.renderedElement) {\r\n                    renderedAction.renderedElement.onblur = (_e) => {\r\n                        for (const ra of this._renderedActions) {\r\n                            ra.isFocusable = true;\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        this.showActionCard(\r\n            action,\r\n            !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()),\r\n            raiseEvent\r\n        );\r\n    }\r\n\r\n    private _items: Action[] = [];\r\n    private _overflowAction?: OverflowAction;\r\n    private _renderedActions: Action[] = [];\r\n\r\n    constructor(owner: CardElement) {\r\n        this._owner = owner;\r\n    }\r\n\r\n    releaseDOMResources() {\r\n        for (let action of this._renderedActions) {\r\n            action.releaseDOMResources();\r\n        }\r\n    }\r\n\r\n    actionExecuted(action: Action) {\r\n        if (!(action instanceof ShowCardAction)) {\r\n            this.collapseExpandedAction();\r\n        } else {\r\n            if (action === this._expandedAction) {\r\n                this.collapseExpandedAction();\r\n            } else if (\r\n                this._owner.hostConfig.actions.showCard.actionMode ===\r\n                Enums.ShowCardActionMode.Inline\r\n            ) {\r\n                this.expandShowCardAction(action, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(source: any, context: SerializationContext) {\r\n        this.clear();\r\n\r\n        if (Array.isArray(source)) {\r\n            for (const jsonAction of source) {\r\n                let forbiddenActions: string[] = [];\r\n\r\n                // If the action owner is a ContainerWithActions, we should check for forbidden actions\r\n                if (this._owner instanceof ContainerWithActions) {\r\n                    forbiddenActions = this._owner.getForbiddenActionNames();\r\n                }\r\n\r\n                const action = context.parseAction(\r\n                    this._owner,\r\n                    jsonAction,\r\n                    forbiddenActions,\r\n                    !this._owner.isDesignMode()\r\n                );\r\n\r\n                if (action) {\r\n                    this.addAction(action);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON(target: PropertyBag, propertyName: string, context: SerializationContext): any {\r\n        context.serializeArray(target, propertyName, this._items);\r\n    }\r\n\r\n    getActionAt(id: number): Action | undefined {\r\n        return this._items[id];\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return this._items.length;\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        let result: Action | undefined = undefined;\r\n\r\n        for (const item of this._items) {\r\n            result = item.getActionById(id);\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    validateProperties(context: ValidationResults) {\r\n        if (\r\n            this._owner.hostConfig.actions.maxActions &&\r\n            this._items.length > this._owner.hostConfig.actions.maxActions\r\n        ) {\r\n            context.addFailure(\r\n                this._owner,\r\n                Enums.ValidationEvent.TooManyActions,\r\n                Strings.errors.tooManyActions(this._owner.hostConfig.actions.maxActions)\r\n            );\r\n        }\r\n\r\n        if (this._items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\r\n            context.addFailure(\r\n                this._owner,\r\n                Enums.ValidationEvent.InteractivityNotAllowed,\r\n                Strings.errors.interactivityNotAllowed()\r\n            );\r\n        }\r\n\r\n        for (const item of this._items) {\r\n            if (!this.isActionAllowed(item)) {\r\n                context.addFailure(\r\n                    this._owner,\r\n                    Enums.ValidationEvent.ActionTypeNotAllowed,\r\n                    Strings.errors.actionTypeNotAllowed(item.getJsonTypeName())\r\n                );\r\n            }\r\n\r\n            item.internalValidateProperties(context);\r\n        }\r\n    }\r\n\r\n    render(orientation: Enums.Orientation): HTMLElement | undefined {\r\n        // Cache hostConfig for better perf\r\n        const hostConfig = this._owner.hostConfig;\r\n\r\n        if (!hostConfig.supportsInteractivity) {\r\n            return undefined;\r\n        }\r\n\r\n        const element = document.createElement(\"div\");\r\n        const maxActions = hostConfig.actions.maxActions\r\n            ? Math.min(hostConfig.actions.maxActions, this._items.length)\r\n            : this._items.length;\r\n\r\n        this._actionCardContainer = document.createElement(\"div\");\r\n        this._renderedActions = [];\r\n\r\n        if (\r\n            hostConfig.actions.preExpandSingleShowCardAction &&\r\n            maxActions === 1 &&\r\n            this._items[0] instanceof ShowCardAction &&\r\n            this.isActionAllowed(this._items[0])\r\n        ) {\r\n            this.showActionCard(this._items[0], true);\r\n            this._renderedActions.push(this._items[0]);\r\n        } else {\r\n            const buttonStrip = document.createElement(\"div\");\r\n            buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\r\n            buttonStrip.style.display = \"flex\";\r\n\r\n            if (orientation === Enums.Orientation.Horizontal) {\r\n                buttonStrip.style.flexDirection = \"row\";\r\n\r\n                if (\r\n                    this._owner.horizontalAlignment &&\r\n                    hostConfig.actions.actionAlignment !== Enums.ActionAlignment.Stretch\r\n                ) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                } else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            } else {\r\n                buttonStrip.style.flexDirection = \"column\";\r\n\r\n                if (\r\n                    this._owner.horizontalAlignment &&\r\n                    hostConfig.actions.actionAlignment !== Enums.ActionAlignment.Stretch\r\n                ) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                } else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Stretch:\r\n                            buttonStrip.style.alignItems = \"stretch\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            const allowedActions = this._items.filter(this.isActionAllowed.bind(this));\r\n\r\n            let primaryActions: Action[] = [];\r\n            const secondaryActions: Action[] = [];\r\n\r\n            if (!this._owner.isDesignMode()) {\r\n                allowedActions.forEach((action) =>\r\n                    action.mode === Enums.ActionMode.Secondary\r\n                        ? secondaryActions.push(action)\r\n                        : primaryActions.push(action)\r\n                );\r\n\r\n                // If primaryActions.length > maxActions, extra actions are moved to overflow\r\n                const overflowPrimaryActions = primaryActions.splice(hostConfig.actions.maxActions);\r\n\r\n                if (GlobalSettings.allowMoreThanMaxActionsInOverflowMenu) {\r\n                    secondaryActions.push(...overflowPrimaryActions);\r\n                }\r\n\r\n                let shouldRenderOverflowActionButton = true;\r\n\r\n                if (secondaryActions.length > 0) {\r\n                    if (!this._overflowAction) {\r\n                        this._overflowAction = new OverflowAction(secondaryActions);\r\n                        this._overflowAction.setParent(this._owner);\r\n                        this._overflowAction[\"_actionCollection\"] = this;\r\n                    }\r\n\r\n                    const isRootAction = this._owner instanceof AdaptiveCard && !this._owner.parent;\r\n                    shouldRenderOverflowActionButton = !raiseRenderOverflowActionsEvent(\r\n                        this._overflowAction,\r\n                        isRootAction\r\n                    );\r\n                }\r\n\r\n                if (this._overflowAction && shouldRenderOverflowActionButton) {\r\n                    primaryActions.push(this._overflowAction);\r\n                }\r\n            } else {\r\n                primaryActions = allowedActions;\r\n            }\r\n\r\n            for (let i = 0; i < primaryActions.length; i++) {\r\n                const action = primaryActions[i];\r\n                action.render();\r\n\r\n                if (action.renderedElement) {\r\n                    if (\r\n                        hostConfig.actions.actionsOrientation === Enums.Orientation.Horizontal &&\r\n                        hostConfig.actions.actionAlignment === Enums.ActionAlignment.Stretch\r\n                    ) {\r\n                        action.renderedElement.style.flex = \"0 1 100%\";\r\n                    } else {\r\n                        action.renderedElement.style.flex = \"0 1 auto\";\r\n                    }\r\n\r\n                    buttonStrip.appendChild(action.renderedElement);\r\n\r\n                    this._renderedActions.push(action);\r\n\r\n                    if (i < primaryActions.length - 1 && hostConfig.actions.buttonSpacing > 0) {\r\n                        const spacer = document.createElement(\"div\");\r\n\r\n                        if (orientation === Enums.Orientation.Horizontal) {\r\n                            spacer.style.flex = \"0 0 auto\";\r\n                            spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\r\n                        } else {\r\n                            spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n\r\n                        Utils.appendChild(buttonStrip, spacer);\r\n                    }\r\n                }\r\n            }\r\n\r\n            const buttonStripContainer = document.createElement(\"div\");\r\n            buttonStripContainer.style.overflow = \"hidden\";\r\n            buttonStripContainer.appendChild(buttonStrip);\r\n\r\n            Utils.appendChild(element, buttonStripContainer);\r\n        }\r\n\r\n        Utils.appendChild(element, this._actionCardContainer);\r\n\r\n        for (const renderedAction of this._renderedActions) {\r\n            if (renderedAction.state === ActionButtonState.Expanded) {\r\n                this.expandShowCardAction(<ShowCardAction>renderedAction, false);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        return this._renderedActions.length > 0 ? element : undefined;\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        if (!action) {\r\n            throw new Error(\"The action parameter cannot be null.\");\r\n        }\r\n\r\n        if ((!action.parent || action.parent === this._owner) && this._items.indexOf(action) < 0) {\r\n            this._items.push(action);\r\n\r\n            if (!action.parent) {\r\n                action.setParent(this._owner);\r\n            }\r\n\r\n            action[\"_actionCollection\"] = this;\r\n        } else {\r\n            throw new Error(Strings.errors.actionAlreadyParented());\r\n        }\r\n    }\r\n\r\n    removeAction(action: Action): boolean {\r\n        if (this.expandedAction && this._expandedAction === action) {\r\n            this.collapseExpandedAction();\r\n        }\r\n\r\n        const actionIndex = this._items.indexOf(action);\r\n\r\n        if (actionIndex >= 0) {\r\n            this._items.splice(actionIndex, 1);\r\n\r\n            action.setParent(undefined);\r\n\r\n            action[\"_actionCollection\"] = undefined;\r\n\r\n            for (let i = 0; i < this._renderedActions.length; i++) {\r\n                if (this._renderedActions[i] === action) {\r\n                    this._renderedActions.splice(i, 1);\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this._items = [];\r\n        this._renderedActions = [];\r\n        this._expandedAction = undefined;\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        let result: Input[] = [];\r\n\r\n        if (processActions) {\r\n            for (const action of this._items) {\r\n                result.push(...action.getAllInputs());\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        let result: IResourceInformation[] = [];\r\n\r\n        for (const action of this._items) {\r\n            result.push(...action.getResourceInformation());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get renderedActionCount(): number {\r\n        return this._renderedActions.length;\r\n    }\r\n\r\n    get expandedAction(): ShowCardAction | undefined {\r\n        return this._expandedAction;\r\n    }\r\n}\r\n\r\nexport class ActionSet extends CardElement {\r\n    //#region Schema\r\n\r\n    static readonly orientationProperty = new EnumProperty(\r\n        Versions.v1_1,\r\n        \"orientation\",\r\n        Enums.Orientation\r\n    );\r\n\r\n    @property(ActionSet.orientationProperty)\r\n    orientation?: Enums.Orientation;\r\n\r\n    //#endregion\r\n\r\n    private _actionCollection: ActionCollection;\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        return this._actionCollection.render(\r\n            this.orientation !== undefined\r\n                ? this.orientation\r\n                : this.hostConfig.actions.actionsOrientation\r\n        );\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._actionCollection = new ActionCollection(this);\r\n    }\r\n\r\n    releaseDOMResources() {\r\n        super.releaseDOMResources();\r\n\r\n        this._actionCollection.releaseDOMResources();\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this._actionCollection.renderedActionCount === 0) {\r\n            return super.isBleedingAtBottom();\r\n        } else {\r\n            if (this._actionCollection.getActionCount() === 1) {\r\n                return (\r\n                    this._actionCollection.expandedAction !== undefined &&\r\n                    !this.hostConfig.actions.preExpandSingleShowCardAction\r\n                );\r\n            } else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ActionSet\";\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return this._actionCollection.getActionCount();\r\n    }\r\n\r\n    getActionAt(index: number): Action | undefined {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.getActionAt(index);\r\n        } else {\r\n            return super.getActionAt(index);\r\n        }\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        const result: Action | undefined = this._actionCollection.getActionById(id);\r\n\r\n        return result ? result : super.getActionById(id);\r\n    }\r\n\r\n    getAllActions(): Action[] {\r\n        const result = super.getAllActions();\r\n\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            let action = this.getActionAt(i);\r\n\r\n            if (action) {\r\n                result.push(action);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        this._actionCollection.validateProperties(context);\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        this._actionCollection.addAction(action);\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        return processActions ? this._actionCollection.getAllInputs() : [];\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        return this._actionCollection.getResourceInformation();\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    findDOMNodeOwner(node: Node): CardObject | undefined {\r\n        let target: CardObject | undefined = undefined;\r\n\r\n        for (let i = 0; i < this.getActionCount(); i++) {\r\n            const action = this.getActionAt(i);\r\n\r\n            if (action) {\r\n                // recur through each Action\r\n                target = action.findDOMNodeOwner(node);\r\n\r\n                if (target) {\r\n                    return target;\r\n                }\r\n            }\r\n        }\r\n\r\n        // if not found in any Action, defer to parent implementation\r\n        return super.findDOMNodeOwner(node);\r\n    }\r\n\r\n    getElementById(id: string): CardElement | undefined {\r\n        let result = super.getElementById(id);\r\n\r\n        if (!result) {\r\n            result = this.getElementByIdFromAction(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get isInteractive(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class ContainerStyleProperty extends ValueSetProperty {\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly defaultValue?: string,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => string\r\n    ) {\r\n        super(\r\n            targetVersion,\r\n            name,\r\n            [\r\n                { value: Enums.ContainerStyle.Default },\r\n                { value: Enums.ContainerStyle.Emphasis },\r\n                { targetVersion: Versions.v1_2, value: Enums.ContainerStyle.Accent },\r\n                { targetVersion: Versions.v1_2, value: Enums.ContainerStyle.Good },\r\n                { targetVersion: Versions.v1_2, value: Enums.ContainerStyle.Attention },\r\n                { targetVersion: Versions.v1_2, value: Enums.ContainerStyle.Warning }\r\n            ],\r\n            defaultValue,\r\n            onGetInitialValue\r\n        );\r\n    }\r\n}\r\n\r\nexport abstract class StylableCardElementContainer extends CardElementContainer {\r\n    //#region Schema\r\n\r\n    static readonly styleProperty = new ContainerStyleProperty(Versions.v1_0, \"style\");\r\n\r\n    @property(StylableCardElementContainer.styleProperty)\r\n    get style(): string | undefined {\r\n        if (this.allowCustomStyle) {\r\n            const style = this.getValue(StylableCardElementContainer.styleProperty);\r\n\r\n            if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\r\n                return style;\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    set style(value: string | undefined) {\r\n        this.setValue(StylableCardElementContainer.styleProperty, value);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    protected get allowCustomStyle(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get hasExplicitStyle(): boolean {\r\n        return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;\r\n    }\r\n\r\n    protected applyBorder() {\r\n        // No border in base implementation\r\n    }\r\n\r\n    protected applyBackground() {\r\n        if (this.renderedElement) {\r\n            const styleDefinition = this.hostConfig.containerStyles.getStyleByName(\r\n                this.style,\r\n                this.hostConfig.containerStyles.getStyleByName(this.defaultStyle)\r\n            );\r\n\r\n            if (styleDefinition.backgroundColor) {\r\n                const bgColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n                if (bgColor) {\r\n                    this.renderedElement.style.backgroundColor = bgColor;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected applyPadding() {\r\n        super.applyPadding();\r\n\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n\r\n        let physicalPadding = new SpacingDefinition();\r\n\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(\r\n                this.getEffectivePadding()\r\n            );\r\n        }\r\n\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n\r\n        if (this.isBleeding()) {\r\n            // Bleed into the first parent that does have padding\r\n            const padding = new PaddingDefinition();\r\n\r\n            this.getImmediateSurroundingPadding(padding);\r\n\r\n            const surroundingPadding =\r\n                this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n            this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n\r\n            if (!this.isDesignMode()) {\r\n                this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\r\n                this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\r\n            }\r\n\r\n            if (\r\n                this.separatorElement &&\r\n                this.separatorOrientation === Enums.Orientation.Horizontal\r\n            ) {\r\n                this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            }\r\n        } else {\r\n            this.renderedElement.style.marginRight = \"0\";\r\n            this.renderedElement.style.marginLeft = \"0\";\r\n            this.renderedElement.style.marginTop = \"0\";\r\n            this.renderedElement.style.marginBottom = \"0\";\r\n\r\n            if (\r\n                this.separatorElement &&\r\n                this.separatorOrientation === Enums.Orientation.Horizontal\r\n            ) {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getHasBackground(ignoreBackgroundImages: boolean = false): boolean {\r\n        let currentElement: CardElement | undefined = this.parent;\r\n\r\n        while (currentElement) {\r\n            let currentElementHasBackgroundImage: boolean = false;\r\n\r\n            if (ignoreBackgroundImages) {\r\n                currentElementHasBackgroundImage = false;\r\n            } else {\r\n                currentElementHasBackgroundImage =\r\n                    currentElement instanceof Container\r\n                        ? currentElement.backgroundImage.isValid()\r\n                        : false;\r\n            }\r\n\r\n            if (currentElement instanceof StylableCardElementContainer) {\r\n                if (\r\n                    this.hasExplicitStyle &&\r\n                    (currentElement.getEffectiveStyle() !== this.getEffectiveStyle() ||\r\n                        currentElementHasBackgroundImage)\r\n                ) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            currentElement = currentElement.parent;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return this.getHasBackground() || this.getHasBorder()\r\n            ? new PaddingDefinition(\r\n                  Enums.Spacing.Padding,\r\n                  Enums.Spacing.Padding,\r\n                  Enums.Spacing.Padding,\r\n                  Enums.Spacing.Padding\r\n              )\r\n            : super.getDefaultPadding();\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        const explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);\r\n\r\n        if (explicitStyle !== undefined) {\r\n            const styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);\r\n\r\n            if (!styleDefinition) {\r\n                context.addFailure(\r\n                    this,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidPropertyValue(explicitStyle, \"style\")\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    render(): HTMLElement | undefined {\r\n        const renderedElement = super.render();\r\n\r\n        if (renderedElement && this.getHasBackground()) {\r\n            this.applyBackground();\r\n        }\r\n\r\n        this.applyBorder();\r\n\r\n        return renderedElement;\r\n    }\r\n\r\n    getEffectiveStyle(): string {\r\n        const effectiveStyle = this.style;\r\n\r\n        return effectiveStyle ? effectiveStyle : super.getEffectiveStyle();\r\n    }\r\n}\r\n\r\nexport abstract class ContainerBase extends StylableCardElementContainer {\r\n    //#region Schema\r\n\r\n    static readonly bleedProperty = new BoolProperty(Versions.v1_2, \"bleed\", false);\r\n    static readonly minHeightProperty = new PixelSizeProperty(Versions.v1_2, \"minHeight\");\r\n\r\n    @property(ContainerBase.bleedProperty)\r\n    private _bleed: boolean = false;\r\n\r\n    @property(ContainerBase.minHeightProperty)\r\n    minPixelHeight?: number;\r\n\r\n    //#endregion\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        super.adjustRenderedElementSize(renderedElement);\r\n\r\n        if (this.minPixelHeight) {\r\n            renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n        }\r\n    }\r\n\r\n    protected getHasExpandedAction(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected getBleed(): boolean {\r\n        return this._bleed;\r\n    }\r\n\r\n    protected setBleed(value: boolean) {\r\n        this._bleed = value;\r\n    }\r\n\r\n    protected get renderedActionCount(): number {\r\n        return 0;\r\n    }\r\n\r\n    isBleeding(): boolean {\r\n        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\r\n    }\r\n}\r\n\r\nexport class BackgroundImage extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly urlProperty = new StringProperty(Versions.v1_0, \"url\");\r\n    static readonly fillModeProperty = new EnumProperty(\r\n        Versions.v1_2,\r\n        \"fillMode\",\r\n        Enums.FillMode,\r\n        Enums.FillMode.Cover\r\n    );\r\n    static readonly horizontalAlignmentProperty = new EnumProperty(\r\n        Versions.v1_2,\r\n        \"horizontalAlignment\",\r\n        Enums.HorizontalAlignment,\r\n        Enums.HorizontalAlignment.Left\r\n    );\r\n    static readonly verticalAlignmentProperty = new EnumProperty(\r\n        Versions.v1_2,\r\n        \"verticalAlignment\",\r\n        Enums.VerticalAlignment,\r\n        Enums.VerticalAlignment.Top\r\n    );\r\n\r\n    @property(BackgroundImage.urlProperty)\r\n    url?: string;\r\n\r\n    @property(BackgroundImage.fillModeProperty)\r\n    fillMode: Enums.FillMode;\r\n\r\n    @property(BackgroundImage.horizontalAlignmentProperty)\r\n    horizontalAlignment: Enums.HorizontalAlignment;\r\n\r\n    @property(BackgroundImage.verticalAlignmentProperty)\r\n    verticalAlignment: Enums.VerticalAlignment;\r\n\r\n    //#endregion\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"BackgroundImage\";\r\n    }\r\n\r\n    protected internalParse(source: any, context: BaseSerializationContext) {\r\n        if (typeof source === \"string\") {\r\n            this.resetDefaultValues();\r\n            this.url = source;\r\n        } else {\r\n            return super.internalParse(source, context);\r\n        }\r\n    }\r\n\r\n    apply(element: CardElement) {\r\n        if (this.url && element.renderedElement) {\r\n            element.renderedElement.style.backgroundImage =\r\n                \"url('\" +\r\n                element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) +\r\n                \"')\";\r\n\r\n            switch (this.fillMode) {\r\n                case Enums.FillMode.Repeat:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat\";\r\n                    break;\r\n                case Enums.FillMode.RepeatHorizontally:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-x\";\r\n                    break;\r\n                case Enums.FillMode.RepeatVertically:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-y\";\r\n                    break;\r\n                case Enums.FillMode.Cover:\r\n                default:\r\n                    element.renderedElement.style.backgroundRepeat = \"no-repeat\";\r\n                    element.renderedElement.style.backgroundSize = \"cover\";\r\n                    break;\r\n            }\r\n\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Left:\r\n                    break;\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionX = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.renderedElement.style.backgroundPositionX = \"right\";\r\n                    break;\r\n            }\r\n\r\n            switch (this.verticalAlignment) {\r\n                case Enums.VerticalAlignment.Top:\r\n                    break;\r\n                case Enums.VerticalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionY = \"center\";\r\n                    break;\r\n                case Enums.VerticalAlignment.Bottom:\r\n                    element.renderedElement.style.backgroundPositionY = \"bottom\";\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return this.url ? true : false;\r\n    }\r\n}\r\n\r\nexport class Container extends ContainerBase {\r\n    //#region Schema\r\n    static readonly backgroundImageProperty = new SerializableObjectProperty(\r\n        Versions.v1_0,\r\n        \"backgroundImage\",\r\n        BackgroundImage\r\n    );\r\n    static readonly verticalContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_1,\r\n        \"verticalContentAlignment\",\r\n        Enums.VerticalAlignment\r\n    );\r\n    static readonly rtlProperty = new BoolProperty(Versions.v1_0, \"rtl\");\r\n\r\n    @property(Container.backgroundImageProperty)\r\n    get backgroundImage(): BackgroundImage {\r\n        return this.getValue(Container.backgroundImageProperty);\r\n    }\r\n\r\n    @property(Container.verticalContentAlignmentProperty)\r\n    verticalContentAlignment?: Enums.VerticalAlignment;\r\n\r\n    @property(Container.rtlProperty)\r\n    rtl?: boolean;\r\n\r\n    //#endregion\r\n\r\n    private _items: CardElement[] = [];\r\n    private _renderedItems: CardElement[] = [];\r\n\r\n    protected insertItemAt(item: CardElement, index: number, forceInsert: boolean) {\r\n        if (!item.parent || forceInsert) {\r\n            if (item.isStandalone) {\r\n                if (index < 0 || index >= this._items.length) {\r\n                    this._items.push(item);\r\n                } else {\r\n                    this._items.splice(index, 0, item);\r\n                }\r\n\r\n                item.setParent(this);\r\n            } else {\r\n                throw new Error(Strings.errors.elementTypeNotStandalone(item.getJsonTypeName()));\r\n            }\r\n        } else {\r\n            throw new Error(Strings.errors.elementAlreadyParented());\r\n        }\r\n    }\r\n\r\n    protected getItemsCollectionPropertyName(): string {\r\n        return \"items\";\r\n    }\r\n\r\n    protected applyBackground() {\r\n        if (this.backgroundImage.isValid() && this.renderedElement) {\r\n            this.backgroundImage.apply(this);\r\n        }\r\n\r\n        super.applyBackground();\r\n    }\r\n\r\n    protected applyRTL(element: HTMLElement) {\r\n        if (this.rtl !== undefined) {\r\n            element.dir = this.rtl ? \"rtl\" : \"ltr\";\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._renderedItems = [];\r\n\r\n        // Cache hostConfig to avoid walking the parent hierarchy several times\r\n        const hostConfig = this.hostConfig;\r\n\r\n        const element = document.createElement(\"div\");\r\n\r\n        this.applyRTL(element);\r\n\r\n        element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\r\n        element.style.display = \"flex\";\r\n        element.style.flexDirection = \"column\";\r\n\r\n        if (GlobalSettings.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            element.style.minHeight = \"-webkit-min-content\";\r\n        }\r\n\r\n        switch (this.getEffectiveVerticalContentAlignment()) {\r\n            case Enums.VerticalAlignment.Center:\r\n                element.style.justifyContent = \"center\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                element.style.justifyContent = \"flex-end\";\r\n                break;\r\n            default:\r\n                element.style.justifyContent = \"flex-start\";\r\n                break;\r\n        }\r\n\r\n        if (this._items.length > 0) {\r\n            for (const item of this._items) {\r\n                const renderedItem = this.isElementAllowed(item) ? item.render() : undefined;\r\n\r\n                if (renderedItem) {\r\n                    if (this._renderedItems.length > 0 && item.separatorElement) {\r\n                        item.separatorElement.style.flex = \"0 0 auto\";\r\n\r\n                        Utils.appendChild(element, item.separatorElement);\r\n                    }\r\n\r\n                    Utils.appendChild(element, renderedItem);\r\n\r\n                    this._renderedItems.push(item);\r\n                }\r\n            }\r\n        } else {\r\n            if (this.isDesignMode()) {\r\n                const placeholderElement = this.createPlaceholderElement();\r\n                placeholderElement.style.width = \"100%\";\r\n                placeholderElement.style.height = \"100%\";\r\n\r\n                element.appendChild(placeholderElement);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        if (this.renderedElement) {\r\n            // Add 1 to account for rounding differences between browsers\r\n            const boundary = this.renderedElement.offsetTop + maxHeight + 1;\r\n\r\n            const handleElement = (cardElement: CardElement) => {\r\n                const elt = cardElement.renderedElement;\r\n\r\n                if (elt) {\r\n                    switch (Utils.getFitStatus(elt, boundary)) {\r\n                        case Enums.ContainerFitStatus.FullyInContainer:\r\n                            const sizeChanged = cardElement[\"resetOverflow\"]();\r\n                            // If the element's size changed after resetting content,\r\n                            // we have to check if it still fits fully in the card\r\n                            if (sizeChanged) {\r\n                                handleElement(cardElement);\r\n                            }\r\n                            break;\r\n                        case Enums.ContainerFitStatus.Overflowing:\r\n                            const containerMaxHeight = boundary - elt.offsetTop;\r\n                            cardElement[\"handleOverflow\"](containerMaxHeight);\r\n                            break;\r\n                        case Enums.ContainerFitStatus.FullyOutOfContainer:\r\n                            cardElement[\"handleOverflow\"](0);\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n\r\n            for (const item of this._items) {\r\n                handleElement(item);\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        for (const item of this._items) {\r\n            item[\"resetOverflow\"]();\r\n        }\r\n    }\r\n\r\n    protected getHasBackground(ignoreBackgroundImages: boolean = false): boolean {\r\n        let result = ignoreBackgroundImages ? false : this.backgroundImage.isValid();\r\n\r\n        return result || super.getHasBackground(ignoreBackgroundImages);\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this.clear();\r\n        this.setShouldFallback(false);\r\n\r\n        let jsonItems = source[this.getItemsCollectionPropertyName()];\r\n\r\n        if (Array.isArray(jsonItems)) {\r\n            for (const item of jsonItems) {\r\n                const element = context.parseElement(\r\n                    this,\r\n                    item,\r\n                    this.forbiddenChildElements(),\r\n                    !this.isDesignMode()\r\n                );\r\n\r\n                if (element) {\r\n                    this.insertItemAt(element, -1, true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        const collectionPropertyName = this.getItemsCollectionPropertyName();\r\n\r\n        context.serializeArray(target, collectionPropertyName, this._items);\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    getEffectivePadding(): PaddingDefinition {\r\n        if (\r\n            GlobalSettings.removePaddingFromContainersWithBackgroundImage &&\r\n            !this.getHasBackground(true)\r\n        ) {\r\n            return new PaddingDefinition();\r\n        }\r\n\r\n        return super.getEffectivePadding();\r\n    }\r\n\r\n    getEffectiveVerticalContentAlignment(): Enums.VerticalAlignment {\r\n        if (this.verticalContentAlignment !== undefined) {\r\n            return this.verticalContentAlignment;\r\n        }\r\n\r\n        const parentContainer = this.getParentContainer();\r\n\r\n        return parentContainer\r\n            ? parentContainer.getEffectiveVerticalContentAlignment()\r\n            : Enums.VerticalAlignment.Top;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._items.length;\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this._items[index];\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (const item of this._renderedItems) {\r\n                if (item.isVisible) {\r\n                    return item;\r\n                }\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (let i = this._renderedItems.length - 1; i >= 0; i--) {\r\n                if (this._renderedItems[i].isVisible) {\r\n                    return this._renderedItems[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    isFirstElement(element: CardElement): boolean {\r\n        const designMode = this.isDesignMode();\r\n\r\n        for (const item of this._items) {\r\n            if (item.isVisible || designMode) {\r\n                return item === element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isLastElement(element: CardElement): boolean {\r\n        const designMode = this.isDesignMode();\r\n\r\n        for (let i = this._items.length - 1; i >= 0; i--) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] === element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isRtl(): boolean {\r\n        if (this.rtl !== undefined) {\r\n            return this.rtl;\r\n        } else {\r\n            const parentContainer = this.getParentContainer();\r\n\r\n            return parentContainer ? parentContainer.isRtl() : false;\r\n        }\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        const firstRenderedItem = this.getFirstVisibleRenderedItem();\r\n\r\n        return (\r\n            this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false)\r\n        );\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        const lastRenderedItem = this.getLastVisibleRenderedItem();\r\n\r\n        return (\r\n            this.isBleeding() ||\r\n            (lastRenderedItem\r\n                ? lastRenderedItem.isBleedingAtBottom() &&\r\n                  lastRenderedItem.getEffectiveStyle() === this.getEffectiveStyle()\r\n                : false)\r\n        );\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return this._items.indexOf(cardElement);\r\n    }\r\n\r\n    addItem(item: CardElement) {\r\n        this.insertItemAt(item, -1, false);\r\n    }\r\n\r\n    insertItemBefore(item: CardElement, insertBefore: CardElement) {\r\n        this.insertItemAt(item, this._items.indexOf(insertBefore), false);\r\n    }\r\n\r\n    insertItemAfter(item: CardElement, insertAfter: CardElement) {\r\n        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        const itemIndex = this._items.indexOf(item);\r\n\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n\r\n            item.setParent(undefined);\r\n\r\n            this.updateLayout();\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this._items = [];\r\n        this._renderedItems = [];\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        const result = super.getResourceInformation();\r\n\r\n        if (this.backgroundImage.isValid()) {\r\n            result.push({\r\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion -- validated by `isValid()`\r\n                url: this.backgroundImage.url!,\r\n                mimeType: \"image\"\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        let result: Action | undefined = super.getActionById(id);\r\n\r\n        if (!result) {\r\n            if (this.selectAction) {\r\n                result = this.selectAction.getActionById(id);\r\n            }\r\n\r\n            if (!result) {\r\n                for (const item of this._items) {\r\n                    result = item.getActionById(id);\r\n\r\n                    if (result) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get padding(): PaddingDefinition | undefined {\r\n        return this.getPadding();\r\n    }\r\n\r\n    set padding(value: PaddingDefinition | undefined) {\r\n        this.setPadding(value);\r\n    }\r\n\r\n    get selectAction(): Action | undefined {\r\n        return this._selectAction;\r\n    }\r\n\r\n    set selectAction(value: Action | undefined) {\r\n        this._selectAction = value;\r\n    }\r\n\r\n    get bleed(): boolean {\r\n        return this.getBleed();\r\n    }\r\n\r\n    set bleed(value: boolean) {\r\n        this.setBleed(value);\r\n    }\r\n}\r\n\r\nexport type ColumnWidth = SizeAndUnit | \"auto\" | \"stretch\";\r\n\r\nexport class Column extends Container {\r\n    //#region Schema\r\n\r\n    static readonly widthProperty = new CustomProperty<ColumnWidth>(\r\n        Versions.v1_0,\r\n        \"width\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            let result: ColumnWidth = prop.defaultValue;\r\n            const value = source[prop.name];\r\n            let invalidWidth = false;\r\n\r\n            if (typeof value === \"number\" && !isNaN(value)) {\r\n                result = new SizeAndUnit(value, Enums.SizeUnit.Weight);\r\n            } else if (value === \"auto\" || value === \"stretch\") {\r\n                result = value;\r\n            } else if (typeof value === \"string\") {\r\n                try {\r\n                    result = SizeAndUnit.parse(value);\r\n\r\n                    if (\r\n                        result.unit === Enums.SizeUnit.Pixel &&\r\n                        prop.targetVersion.compareTo(context.targetVersion) > 0\r\n                    ) {\r\n                        invalidWidth = true;\r\n                    }\r\n                } catch (e) {\r\n                    invalidWidth = true;\r\n                }\r\n            } else {\r\n                invalidWidth = true;\r\n            }\r\n\r\n            if (invalidWidth) {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidColumnWidth(value)\r\n                );\r\n\r\n                result = \"auto\";\r\n            }\r\n\r\n            return result;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: ColumnWidth,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            if (value instanceof SizeAndUnit) {\r\n                if (value.unit === Enums.SizeUnit.Pixel) {\r\n                    context.serializeValue(target, \"width\", value.physicalSize + \"px\");\r\n                } else {\r\n                    context.serializeNumber(target, \"width\", value.physicalSize);\r\n                }\r\n            } else {\r\n                context.serializeValue(target, \"width\", value);\r\n            }\r\n        },\r\n        \"stretch\"\r\n    );\r\n\r\n    @property(Column.widthProperty)\r\n    width: ColumnWidth = \"stretch\";\r\n\r\n    //#endregion\r\n\r\n    private _computedWeight: number = 0;\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        const minDesignTimeColumnHeight = 20;\r\n\r\n        if (this.isDesignMode()) {\r\n            renderedElement.style.minWidth = \"20px\";\r\n            renderedElement.style.minHeight =\r\n                (!this.minPixelHeight\r\n                    ? minDesignTimeColumnHeight\r\n                    : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\r\n        } else {\r\n            renderedElement.style.minWidth = \"0\";\r\n\r\n            if (this.minPixelHeight) {\r\n                renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n            }\r\n        }\r\n\r\n        if (this.width === \"auto\") {\r\n            renderedElement.style.flex = \"0 1 auto\";\r\n        } else if (this.width === \"stretch\") {\r\n            renderedElement.style.flex = \"1 1 50px\";\r\n        } else if (this.width instanceof SizeAndUnit) {\r\n            if (this.width.unit === Enums.SizeUnit.Pixel) {\r\n                renderedElement.style.flex = \"0 0 auto\";\r\n                renderedElement.style.width = this.width.physicalSize + \"px\";\r\n            } else {\r\n                renderedElement.style.flex =\r\n                    \"1 1 \" +\r\n                    (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) +\r\n                    \"%\";\r\n            }\r\n        }\r\n    }\r\n\r\n    protected shouldSerialize(_context: SerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get separatorOrientation(): Enums.Orientation {\r\n        return Enums.Orientation.Vertical;\r\n    }\r\n\r\n    constructor(width: ColumnWidth = \"stretch\") {\r\n        super();\r\n\r\n        this.width = width;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Column\";\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        if (this.parent && this.parent instanceof ColumnSet) {\r\n            return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class ColumnSet extends ContainerBase {\r\n    private _columns: Column[] = [];\r\n    private _renderedColumns: Column[];\r\n\r\n    private createColumnInstance(source: any, context: SerializationContext): Column | undefined {\r\n        return context.parseCardObject<Column>(\r\n            this,\r\n            source,\r\n            [],\r\n            !this.isDesignMode(),\r\n            (typeName: string) => {\r\n                return !typeName || typeName === \"Column\" ? new Column() : undefined;\r\n            },\r\n            (typeName: string, _errorType: Enums.TypeErrorType) => {\r\n                context.logParseEvent(\r\n                    undefined,\r\n                    Enums.ValidationEvent.ElementTypeNotAllowed,\r\n                    Strings.errors.elementTypeNotAllowed(typeName)\r\n                );\r\n            }\r\n        );\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._renderedColumns = [];\r\n\r\n        if (this._columns.length > 0) {\r\n            // Cache hostConfig to avoid walking the parent hierarchy several times\r\n            const hostConfig = this.hostConfig;\r\n\r\n            const element = document.createElement(\"div\");\r\n            element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\r\n            element.style.display = \"flex\";\r\n\r\n            if (GlobalSettings.useAdvancedCardBottomTruncation) {\r\n                // See comment in Container.internalRender()\r\n                element.style.minHeight = \"-webkit-min-content\";\r\n            }\r\n\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n\r\n            let totalWeight: number = 0;\r\n\r\n            for (const column of this._columns) {\r\n                if (\r\n                    column.width instanceof SizeAndUnit &&\r\n                    column.width.unit === Enums.SizeUnit.Weight\r\n                ) {\r\n                    totalWeight += column.width.physicalSize;\r\n                }\r\n            }\r\n\r\n            for (const column of this._columns) {\r\n                if (\r\n                    column.width instanceof SizeAndUnit &&\r\n                    column.width.unit === Enums.SizeUnit.Weight &&\r\n                    totalWeight > 0\r\n                ) {\r\n                    const computedWeight = (100 / totalWeight) * column.width.physicalSize;\r\n\r\n                    // Best way to emulate \"internal\" access I know of\r\n                    column[\"_computedWeight\"] = computedWeight;\r\n                }\r\n\r\n                const renderedColumn = column.render();\r\n\r\n                if (renderedColumn) {\r\n                    if (this._renderedColumns.length > 0 && column.separatorElement) {\r\n                        column.separatorElement.style.flex = \"0 0 auto\";\r\n\r\n                        Utils.appendChild(element, column.separatorElement);\r\n                    }\r\n\r\n                    Utils.appendChild(element, renderedColumn);\r\n\r\n                    this._renderedColumns.push(column);\r\n                }\r\n            }\r\n\r\n            return this._renderedColumns.length > 0 ? element : undefined;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        for (const column of this._columns) {\r\n            column[\"handleOverflow\"](maxHeight);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        for (const column of this._columns) {\r\n            column[\"resetOverflow\"]();\r\n        }\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this._columns = [];\r\n        this._renderedColumns = [];\r\n\r\n        const jsonColumns = source[\"columns\"];\r\n\r\n        if (Array.isArray(jsonColumns)) {\r\n            for (const item of jsonColumns) {\r\n                const column = this.createColumnInstance(item, context);\r\n\r\n                if (column) {\r\n                    this._columns.push(column);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        context.serializeArray(target, \"columns\", this._columns);\r\n    }\r\n\r\n    isFirstElement(element: CardElement): boolean {\r\n        for (const column of this._columns) {\r\n            if (column.isVisible) {\r\n                return column === element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (const column of this._columns) {\r\n                if (column.isBleedingAtTop()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (const column of this._columns) {\r\n                if (column.isBleedingAtBottom()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._columns.length;\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[0];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[this._renderedColumns.length - 1];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    getColumnAt(index: number): Column {\r\n        return this._columns[index];\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this.getColumnAt(index);\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ColumnSet\";\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        let weightedColumns: number = 0;\r\n        let stretchedColumns: number = 0;\r\n\r\n        for (const column of this._columns) {\r\n            if (typeof column.width === \"number\") {\r\n                weightedColumns++;\r\n            } else if (column.width === \"stretch\") {\r\n                stretchedColumns++;\r\n            }\r\n        }\r\n\r\n        if (weightedColumns > 0 && stretchedColumns > 0) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.Hint,\r\n                Strings.hints.dontUseWeightedAndStrecthedColumnsInSameSet()\r\n            );\r\n        }\r\n    }\r\n\r\n    addColumn(column: Column) {\r\n        if (!column.parent) {\r\n            this._columns.push(column);\r\n\r\n            column.setParent(this);\r\n        } else {\r\n            throw new Error(Strings.errors.columnAlreadyBelongsToAnotherSet());\r\n        }\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        if (item instanceof Column) {\r\n            const itemIndex = this._columns.indexOf(item);\r\n\r\n            if (itemIndex >= 0) {\r\n                this._columns.splice(itemIndex, 1);\r\n\r\n                item.setParent(undefined);\r\n\r\n                this.updateLayout();\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\r\n    }\r\n\r\n    isLeftMostElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) === 0;\r\n    }\r\n\r\n    isRightMostElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) === this._columns.length - 1;\r\n    }\r\n\r\n    isTopElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) >= 0;\r\n    }\r\n\r\n    isBottomElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) >= 0;\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        let result: Action | undefined = undefined;\r\n\r\n        for (const column of this._columns) {\r\n            result = column.getActionById(id);\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get bleed(): boolean {\r\n        return this.getBleed();\r\n    }\r\n\r\n    set bleed(value: boolean) {\r\n        this.setBleed(value);\r\n    }\r\n\r\n    get padding(): PaddingDefinition | undefined {\r\n        return this.getPadding();\r\n    }\r\n\r\n    set padding(value: PaddingDefinition | undefined) {\r\n        this.setPadding(value);\r\n    }\r\n\r\n    get selectAction(): Action | undefined {\r\n        return this._selectAction;\r\n    }\r\n\r\n    set selectAction(value: Action | undefined) {\r\n        this._selectAction = value;\r\n    }\r\n}\r\n\r\nfunction raiseImageLoadedEvent(image: Image) {\r\n    const card = image.getRootElement() as AdaptiveCard;\r\n    const onImageLoadedHandler =\r\n        card && card.onImageLoaded ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\r\n\r\n    if (onImageLoadedHandler) {\r\n        onImageLoadedHandler(image);\r\n    }\r\n}\r\n\r\nfunction raiseAnchorClickedEvent(\r\n    element: CardElement,\r\n    anchor: HTMLAnchorElement,\r\n    ev?: MouseEvent\r\n): boolean {\r\n    const card = element.getRootElement() as AdaptiveCard;\r\n    const onAnchorClickedHandler =\r\n        card && card.onAnchorClicked ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\r\n\r\n    return onAnchorClickedHandler !== undefined\r\n        ? onAnchorClickedHandler(element, anchor, ev)\r\n        : false;\r\n}\r\n\r\nfunction raiseExecuteActionEvent(action: Action) {\r\n    const card = action.parent ? (action.parent.getRootElement() as AdaptiveCard) : undefined;\r\n    const onExecuteActionHandler =\r\n        card && card.onExecuteAction ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\r\n\r\n    if (action.prepareForExecution() && onExecuteActionHandler) {\r\n        onExecuteActionHandler(action);\r\n    }\r\n}\r\n\r\nfunction raiseInlineCardExpandedEvent(action: ShowCardAction, isExpanded: boolean) {\r\n    const card = action.parent ? (action.parent.getRootElement() as AdaptiveCard) : undefined;\r\n    const onInlineCardExpandedHandler =\r\n        card && card.onInlineCardExpanded\r\n            ? card.onInlineCardExpanded\r\n            : AdaptiveCard.onInlineCardExpanded;\r\n\r\n    if (onInlineCardExpandedHandler) {\r\n        onInlineCardExpandedHandler(action, isExpanded);\r\n    }\r\n}\r\n\r\nfunction raiseInputValueChangedEvent(input: Input) {\r\n    const card = input.getRootElement() as AdaptiveCard;\r\n    const onInputValueChangedHandler =\r\n        card && card.onInputValueChanged\r\n            ? card.onInputValueChanged\r\n            : AdaptiveCard.onInputValueChanged;\r\n\r\n    if (onInputValueChangedHandler) {\r\n        onInputValueChangedHandler(input);\r\n    }\r\n}\r\n\r\nfunction raiseElementVisibilityChangedEvent(\r\n    element: CardElement,\r\n    shouldUpdateLayout: boolean = true\r\n) {\r\n    const rootElement = element.getRootElement();\r\n\r\n    if (shouldUpdateLayout) {\r\n        rootElement.updateLayout();\r\n    }\r\n\r\n    const card = rootElement as AdaptiveCard;\r\n    const onElementVisibilityChangedHandler =\r\n        card && card.onElementVisibilityChanged\r\n            ? card.onElementVisibilityChanged\r\n            : AdaptiveCard.onElementVisibilityChanged;\r\n\r\n    if (onElementVisibilityChangedHandler !== undefined) {\r\n        onElementVisibilityChangedHandler(element);\r\n    }\r\n}\r\n\r\nfunction updateInputAdornersVisibility(input: HTMLInputElement, hide: boolean) {\r\n    if (!!hide) {\r\n        // hides the time/date picker icon\r\n        input.readOnly = true;\r\n        // hides the cross button icon\r\n        input.required = true;\r\n    } else {\r\n         // shows the time/date picker icon\r\n         input.readOnly = false;\r\n         // shows the cross button icon\r\n         input.required = false;\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @returns return false to continue with default context menu; return true to skip SDK default context menu\r\n */\r\nfunction raiseDisplayOverflowActionMenuEvent(\r\n    action: OverflowAction,\r\n    target?: HTMLElement\r\n): boolean {\r\n    const card = action.parent ? (action.parent.getRootElement() as AdaptiveCard) : undefined;\r\n    const onDisplayOverflowActionMenuHandler =\r\n        card && card.onDisplayOverflowActionMenu\r\n            ? card.onDisplayOverflowActionMenu\r\n            : AdaptiveCard.onDisplayOverflowActionMenu;\r\n\r\n    return onDisplayOverflowActionMenuHandler !== undefined\r\n        ? onDisplayOverflowActionMenuHandler(action.getActions(), target)\r\n        : false;\r\n}\r\n\r\n/**\r\n * @returns return false to continue with default action button; return true to skip SDK default action button\r\n */\r\nfunction raiseRenderOverflowActionsEvent(\r\n    action: OverflowAction,\r\n    isAtRootLevelActions: boolean\r\n): boolean {\r\n    const card = action.parent ? (action.parent.getRootElement() as AdaptiveCard) : undefined;\r\n    const onRenderOverflowActionsHandler =\r\n        card && card.onRenderOverflowActions\r\n            ? card.onRenderOverflowActions\r\n            : AdaptiveCard.onRenderOverflowActions;\r\n\r\n    return onRenderOverflowActionsHandler !== undefined\r\n        ? onRenderOverflowActionsHandler(action.getActions(), isAtRootLevelActions)\r\n        : false;\r\n}\r\n\r\nexport abstract class ContainerWithActions extends Container {\r\n    private _actionCollection: ActionCollection;\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this.parseActions(source, context);\r\n    }\r\n\r\n    protected parseActions(source: any, context: SerializationContext) {\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const element = super.internalRender();\r\n\r\n        if (element) {\r\n            const renderedActions = this._actionCollection.render(\r\n                this.hostConfig.actions.actionsOrientation\r\n            );\r\n\r\n            if (renderedActions) {\r\n                Utils.appendChild(\r\n                    element,\r\n                    renderSeparation(\r\n                        this.hostConfig,\r\n                        {\r\n                            spacing: this.hostConfig.getEffectiveSpacing(\r\n                                this.hostConfig.actions.spacing\r\n                            )\r\n                        },\r\n                        Enums.Orientation.Horizontal\r\n                    )\r\n                );\r\n                Utils.appendChild(element, renderedActions);\r\n            }\r\n\r\n            if (this.renderIfEmpty) {\r\n                return element;\r\n            } else {\r\n                return element.children.length > 0 ? element : undefined;\r\n            }\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    protected getHasExpandedAction(): boolean {\r\n        if (this.renderedActionCount === 0) {\r\n            return false;\r\n        } else if (this.renderedActionCount === 1) {\r\n            return (\r\n                this._actionCollection.expandedAction !== undefined &&\r\n                !this.hostConfig.actions.preExpandSingleShowCardAction\r\n            );\r\n        } else {\r\n            return this._actionCollection.expandedAction !== undefined;\r\n        }\r\n    }\r\n\r\n    protected get renderedActionCount(): number {\r\n        return this._actionCollection.renderedActionCount;\r\n    }\r\n\r\n    protected get renderIfEmpty(): boolean {\r\n        return false;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._actionCollection = new ActionCollection(this);\r\n    }\r\n\r\n    releaseDOMResources() {\r\n        super.releaseDOMResources();\r\n\r\n        this._actionCollection.releaseDOMResources();\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return this._actionCollection.getActionCount();\r\n    }\r\n\r\n    getActionAt(index: number): Action | undefined {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.getActionAt(index);\r\n        } else {\r\n            return super.getActionAt(index);\r\n        }\r\n    }\r\n\r\n    getActionById(id: string): Action | undefined {\r\n        const result: Action | undefined = this._actionCollection.getActionById(id);\r\n\r\n        return result ? result : super.getActionById(id);\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this._actionCollection) {\r\n            this._actionCollection.validateProperties(context);\r\n        }\r\n    }\r\n\r\n    isLastElement(element: CardElement): boolean {\r\n        return super.isLastElement(element) && this._actionCollection.getActionCount() === 0;\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        this._actionCollection.addAction(action);\r\n    }\r\n\r\n    clear() {\r\n        super.clear();\r\n\r\n        this._actionCollection.clear();\r\n    }\r\n\r\n    getAllInputs(processActions: boolean = true): Input[] {\r\n        let result = super.getAllInputs(processActions);\r\n\r\n        if (processActions) {\r\n            result.push(...this._actionCollection.getAllInputs(processActions));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): IResourceInformation[] {\r\n        let result = super.getResourceInformation();\r\n\r\n        result.push(...this._actionCollection.getResourceInformation());\r\n\r\n        return result;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this._actionCollection.renderedActionCount === 0) {\r\n            return super.isBleedingAtBottom();\r\n        } else {\r\n            if (this._actionCollection.getActionCount() === 1) {\r\n                return (\r\n                    this._actionCollection.expandedAction !== undefined &&\r\n                    !this.hostConfig.actions.preExpandSingleShowCardAction\r\n                );\r\n            } else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    getForbiddenActionNames(): string[] {\r\n        return [];\r\n    }\r\n    \r\n    getElementById(id: string): CardElement | undefined {\r\n        let result = super.getElementById(id);\r\n\r\n        if (!result) {\r\n            result = this.getElementByIdFromAction(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport interface IMarkdownProcessingResult {\r\n    didProcess: boolean;\r\n    outputHtml?: any;\r\n}\r\n\r\nexport class RefreshActionProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: RefreshDefinition,\r\n        source: PropertyBag,\r\n        context: SerializationContext\r\n    ): ExecuteAction | undefined {\r\n        const action = context.parseAction(sender.parent, source[this.name], [], false);\r\n\r\n        if (action !== undefined) {\r\n            if (action instanceof ExecuteAction) {\r\n                return action;\r\n            }\r\n\r\n            context.logParseEvent(\r\n                sender,\r\n                Enums.ValidationEvent.ActionTypeNotAllowed,\r\n                Strings.errors.actionTypeNotAllowed(action.getJsonTypeName())\r\n            );\r\n        }\r\n\r\n        context.logParseEvent(\r\n            sender,\r\n            Enums.ValidationEvent.PropertyCantBeNull,\r\n            Strings.errors.propertyMustBeSet(\"action\")\r\n        );\r\n\r\n        return undefined;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: ExecuteAction | undefined,\r\n        context: SerializationContext\r\n    ) {\r\n        context.serializeValue(\r\n            target,\r\n            this.name,\r\n            value ? value.toJSON(context) : undefined,\r\n            undefined,\r\n            true\r\n        );\r\n    }\r\n\r\n    constructor(readonly targetVersion: Version, readonly name: string) {\r\n        super(targetVersion, name, undefined);\r\n    }\r\n}\r\n\r\nexport class RefreshDefinition extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly actionProperty = new RefreshActionProperty(Versions.v1_4, \"action\");\r\n    static readonly userIdsProperty = new StringArrayProperty(Versions.v1_4, \"userIds\");\r\n\r\n    @property(RefreshDefinition.actionProperty)\r\n    get action(): ExecuteAction {\r\n        return this.getValue(RefreshDefinition.actionProperty);\r\n    }\r\n\r\n    set action(value: ExecuteAction) {\r\n        this.setValue(RefreshDefinition.actionProperty, value);\r\n\r\n        if (value) {\r\n            value.setParent(this.parent);\r\n        }\r\n    }\r\n\r\n    @property(RefreshDefinition.userIdsProperty)\r\n    userIds?: string[];\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"RefreshDefinition\";\r\n    }\r\n\r\n    //#endregion\r\n\r\n    parent: CardElement;\r\n}\r\n\r\nexport class AuthCardButton extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly typeProperty = new StringProperty(Versions.v1_4, \"type\");\r\n    static readonly titleProperty = new StringProperty(Versions.v1_4, \"title\");\r\n    static readonly imageProperty = new StringProperty(Versions.v1_4, \"image\");\r\n    static readonly valueProperty = new StringProperty(Versions.v1_4, \"value\");\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"AuthCardButton\";\r\n    }\r\n\r\n    //#endregion\r\n\r\n    @property(AuthCardButton.typeProperty)\r\n    type: string;\r\n\r\n    @property(AuthCardButton.titleProperty)\r\n    title?: string;\r\n\r\n    @property(AuthCardButton.imageProperty)\r\n    image?: string;\r\n\r\n    @property(AuthCardButton.valueProperty)\r\n    value: string;\r\n}\r\n\r\nexport class TokenExchangeResource extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly idProperty = new StringProperty(Versions.v1_4, \"id\");\r\n    static readonly uriProperty = new StringProperty(Versions.v1_4, \"uri\");\r\n    static readonly providerIdProperty = new StringProperty(Versions.v1_4, \"providerId\");\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"TokenExchangeResource\";\r\n    }\r\n\r\n    //#endregion\r\n\r\n    @property(TokenExchangeResource.idProperty)\r\n    id?: string;\r\n\r\n    @property(TokenExchangeResource.uriProperty)\r\n    uri?: string;\r\n\r\n    @property(TokenExchangeResource.providerIdProperty)\r\n    providerId?: string;\r\n}\r\n\r\nexport class Authentication extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly textProperty = new StringProperty(Versions.v1_4, \"text\");\r\n    static readonly connectionNameProperty = new StringProperty(Versions.v1_4, \"connectionName\");\r\n    static readonly buttonsProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_4,\r\n        \"buttons\",\r\n        AuthCardButton\r\n    );\r\n    static readonly tokenExchangeResourceProperty = new SerializableObjectProperty(\r\n        Versions.v1_4,\r\n        \"tokenExchangeResource\",\r\n        TokenExchangeResource,\r\n        true\r\n    );\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"Authentication\";\r\n    }\r\n\r\n    //#endregion\r\n\r\n    @property(Authentication.textProperty)\r\n    text?: string;\r\n\r\n    @property(Authentication.connectionNameProperty)\r\n    connectionName?: string;\r\n\r\n    @property(Authentication.buttonsProperty)\r\n    buttons: AuthCardButton[];\r\n\r\n    @property(Authentication.tokenExchangeResourceProperty)\r\n    tokenExchangeResource?: TokenExchangeResource;\r\n}\r\n\r\n// @dynamic\r\nexport class AdaptiveCard extends ContainerWithActions {\r\n    static readonly schemaUrl = \"http://adaptivecards.io/schemas/adaptive-card.json\";\r\n\r\n    //#region Schema\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    protected static readonly $schemaProperty = new CustomProperty<string>(\r\n        Versions.v1_0,\r\n        \"$schema\",\r\n        (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            return AdaptiveCard.schemaUrl;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: Versions | undefined,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            context.serializeValue(target, prop.name, AdaptiveCard.schemaUrl);\r\n        }\r\n    );\r\n\r\n    static readonly versionProperty = new CustomProperty<Version | undefined>(\r\n        Versions.v1_0,\r\n        \"version\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            let version = Version.parse(source[prop.name], context);\r\n\r\n            if (version === undefined) {\r\n                version = Versions.latest;\r\n\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidCardVersion(version.toString())\r\n                );\r\n            }\r\n\r\n            return version;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: Version | undefined,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            if (value !== undefined) {\r\n                context.serializeValue(target, prop.name, value.toString());\r\n            }\r\n        },\r\n        Versions.v1_0\r\n    );\r\n\r\n    static readonly fallbackTextProperty = new StringProperty(Versions.v1_0, \"fallbackText\");\r\n    static readonly speakProperty = new StringProperty(Versions.v1_0, \"speak\");\r\n    static readonly refreshProperty = new SerializableObjectProperty(\r\n        Versions.v1_4,\r\n        \"refresh\",\r\n        RefreshDefinition,\r\n        true\r\n    );\r\n    static readonly authenticationProperty = new SerializableObjectProperty(\r\n        Versions.v1_4,\r\n        \"authentication\",\r\n        Authentication,\r\n        true\r\n    );\r\n\r\n    @property(AdaptiveCard.versionProperty)\r\n    version: Version;\r\n\r\n    @property(AdaptiveCard.fallbackTextProperty)\r\n    fallbackText?: string;\r\n\r\n    @property(AdaptiveCard.speakProperty)\r\n    speak?: string;\r\n\r\n    @property(AdaptiveCard.refreshProperty)\r\n    get refresh(): RefreshDefinition | undefined {\r\n        return this.getValue(AdaptiveCard.refreshProperty);\r\n    }\r\n\r\n    set refresh(value: RefreshDefinition | undefined) {\r\n        this.setValue(AdaptiveCard.refreshProperty, value);\r\n\r\n        if (value) {\r\n            value.parent = this;\r\n        }\r\n    }\r\n\r\n    @property(AdaptiveCard.authenticationProperty)\r\n    authentication?: Authentication;\r\n\r\n    //#endregion\r\n\r\n    private static _haveWarnedAboutNoMarkdownProcessing = false;\r\n\r\n    static onAnchorClicked?: (\r\n        element: CardElement,\r\n        anchor: HTMLAnchorElement,\r\n        ev?: MouseEvent\r\n    ) => boolean;\r\n    static onExecuteAction?: (action: Action) => void;\r\n    static onElementVisibilityChanged?: (element: CardElement) => void;\r\n    static onImageLoaded?: (image: Image) => void;\r\n    static onInlineCardExpanded?: (action: ShowCardAction, isExpanded: boolean) => void;\r\n    static onInputValueChanged?: (input: Input) => void;\r\n    static onCarouselEvent?: (carouselEvent: CarouselEvent) => void;\r\n    static onProcessMarkdown?: (text: string, result: IMarkdownProcessingResult) => void;\r\n    static onDisplayOverflowActionMenu?: (\r\n        actions: readonly Action[],\r\n        target?: HTMLElement\r\n    ) => boolean;\r\n    static onRenderOverflowActions?: (\r\n        actions: readonly Action[],\r\n        isRootLevelActions: boolean\r\n    ) => boolean;\r\n\r\n    static get processMarkdown(): (text: string) => string {\r\n        throw new Error(Strings.errors.processMarkdownEventRemoved());\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    static set processMarkdown(_value: (text: string) => string) {\r\n        throw new Error(Strings.errors.processMarkdownEventRemoved());\r\n    }\r\n\r\n    static applyMarkdown(text: string): IMarkdownProcessingResult {\r\n        const result: IMarkdownProcessingResult = {\r\n            didProcess: false\r\n        };\r\n\r\n        if (AdaptiveCard.onProcessMarkdown) {\r\n            AdaptiveCard.onProcessMarkdown(text, result);\r\n        } else if ((<any>window).markdownit) {\r\n            // Check for markdownit\r\n            const markdownIt: any = (<any>window).markdownit;\r\n            result.outputHtml = markdownIt().render(text);\r\n            result.didProcess = true;\r\n        } else if (!AdaptiveCard._haveWarnedAboutNoMarkdownProcessing) {\r\n            // eslint-disable-next-line no-console\r\n            console.warn(Strings.errors.markdownProcessingNotEnabled);\r\n            AdaptiveCard._haveWarnedAboutNoMarkdownProcessing = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _fallbackCard?: AdaptiveCard;\r\n\r\n    private isVersionSupported(): boolean {\r\n        if (this.bypassVersionCheck) {\r\n            return true;\r\n        } else {\r\n            const unsupportedVersion: boolean =\r\n                !this.version ||\r\n                !this.version.isValid ||\r\n                this.maxVersion.major < this.version.major ||\r\n                (this.maxVersion.major === this.version.major &&\r\n                    this.maxVersion.minor < this.version.minor);\r\n\r\n            return !unsupportedVersion;\r\n        }\r\n    }\r\n\r\n    protected getDefaultSerializationContext(): BaseSerializationContext {\r\n        return new SerializationContext(this.version);\r\n    }\r\n\r\n    protected getItemsCollectionPropertyName(): string {\r\n        return \"body\";\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        this._fallbackCard = undefined;\r\n\r\n        const fallbackElement = context.parseElement(\r\n            undefined,\r\n            source[\"fallback\"],\r\n            this.forbiddenChildElements(),\r\n            !this.isDesignMode()\r\n        );\r\n\r\n        if (fallbackElement) {\r\n            this._fallbackCard = new AdaptiveCard();\r\n            this._fallbackCard.addItem(fallbackElement);\r\n        }\r\n\r\n        super.internalParse(source, context);\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        this.setValue(AdaptiveCard.versionProperty, context.targetVersion);\r\n\r\n        super.internalToJSON(target, context);\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const renderedElement = super.internalRender();\r\n\r\n        if (GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {\r\n            // Unlike containers, the root card element should be allowed to\r\n            // be shorter than its content (otherwise the overflow truncation\r\n            // logic would never get triggered)\r\n            renderedElement.style.removeProperty(\"minHeight\");\r\n        }\r\n\r\n        return renderedElement;\r\n    }\r\n\r\n    protected getHasBackground(ignoreBackgroundImages: boolean = false): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return new PaddingDefinition(\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding\r\n        );\r\n    }\r\n\r\n    protected shouldSerialize(_context: SerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get renderIfEmpty(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get bypassVersionCheck(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected get allowCustomStyle() {\r\n        return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\r\n    }\r\n\r\n    protected get hasBackground(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onAnchorClicked?: (element: CardElement, anchor: HTMLAnchorElement, ev?: MouseEvent) => boolean;\r\n    onExecuteAction?: (action: Action) => void;\r\n    onElementVisibilityChanged?: (element: CardElement) => void;\r\n    onImageLoaded?: (image: Image) => void;\r\n    onInlineCardExpanded?: (action: ShowCardAction, isExpanded: boolean) => void;\r\n    onInputValueChanged?: (input: Input) => void;\r\n    onCarouselEvent?: (carouselEvent: CarouselEvent) => void;\r\n    onDisplayOverflowActionMenu?: (actions: readonly Action[], target?: HTMLElement) => boolean;\r\n    onRenderOverflowActions?: (actions: readonly Action[], isRootLevelActions: boolean) => boolean;\r\n\r\n    designMode: boolean = false;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"AdaptiveCard\";\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this.getValue(CardElement.typeNameProperty) !== \"AdaptiveCard\") {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.MissingCardType,\r\n                Strings.errors.invalidCardType()\r\n            );\r\n        }\r\n\r\n        if (!this.bypassVersionCheck && !this.version) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.PropertyCantBeNull,\r\n                Strings.errors.propertyMustBeSet(\"version\")\r\n            );\r\n        } else if (!this.isVersionSupported()) {\r\n            context.addFailure(\r\n                this,\r\n                Enums.ValidationEvent.UnsupportedCardVersion,\r\n                Strings.errors.unsupportedCardVersion(\r\n                    this.version.toString(),\r\n                    this.maxVersion.toString()\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    render(target?: HTMLElement): HTMLElement | undefined {\r\n        let renderedCard: HTMLElement | undefined;\r\n\r\n        if (this.shouldFallback() && this._fallbackCard) {\r\n            this._fallbackCard.hostConfig = this.hostConfig;\r\n\r\n            renderedCard = this._fallbackCard.render();\r\n        } else {\r\n            renderedCard = super.render();\r\n\r\n            if (renderedCard) {\r\n                renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\r\n\r\n                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\r\n                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\r\n                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\r\n                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\r\n                // by default.\r\n                if (GlobalSettings.setTabIndexAtCardRoot) {\r\n                    renderedCard.tabIndex = 0;\r\n                }\r\n\r\n                if (this.speak) {\r\n                    renderedCard.setAttribute(\"aria-label\", this.speak);\r\n                }\r\n\r\n                renderedCard.onmouseenter = (ev: MouseEvent) => {\r\n                    this.updateInputsVisualState(true /* hover */);\r\n                };\r\n\r\n                renderedCard.onmouseleave = (ev: MouseEvent) => {\r\n                    this.updateInputsVisualState(false /* hover */);\r\n                };\r\n\r\n                this.getRootElement().updateActionsEnabledState();\r\n            }\r\n        }\r\n\r\n        if (target) {\r\n            Utils.appendChild(target, renderedCard);\r\n\r\n            this.updateLayout();\r\n        }\r\n\r\n        const inputElements = this.getAllInputs();\r\n        document.onclick = (event) => {\r\n            inputElements.forEach((input) => {\r\n                if (\r\n                    input instanceof ChoiceSetInput &&\r\n                    !input.renderedElement?.contains(event.target as Node)\r\n                ) {\r\n                    input\r\n                        .getDropdownElement()\r\n                        ?.classList.remove(\r\n                            this.hostConfig.makeCssClassName(\r\n                                \"ac-choiceSetInput-filtered-dropdown-open\"\r\n                            )\r\n                        );\r\n                }\r\n            });\r\n        };\r\n\r\n        return renderedCard;\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = true) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {\r\n            const padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\r\n\r\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\n            this[\"handleOverflow\"](this.renderedElement!.offsetHeight - padding);\r\n        }\r\n    }\r\n\r\n    shouldFallback(): boolean {\r\n        return super.shouldFallback() || !this.isVersionSupported();\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nclass InlineAdaptiveCard extends AdaptiveCard {\r\n    //#region Schema\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"InlineAdaptiveCard\";\r\n    }\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return new PaddingDefinition(\r\n            this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding\r\n        );\r\n    }\r\n\r\n    protected get bypassVersionCheck(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get defaultStyle(): string {\r\n        if (this.suppressStyle) {\r\n            return Enums.ContainerStyle.Default;\r\n        } else {\r\n            return this.hostConfig.actions.showCard.style\r\n                ? this.hostConfig.actions.showCard.style\r\n                : Enums.ContainerStyle.Emphasis;\r\n        }\r\n    }\r\n\r\n    suppressStyle: boolean = false;\r\n\r\n    render(target?: HTMLElement): HTMLElement | undefined {\r\n        const renderedCard = super.render(target);\r\n\r\n        if (renderedCard) {\r\n            renderedCard.setAttribute(\"aria-live\", \"polite\");\r\n            renderedCard.removeAttribute(\"tabindex\");\r\n        }\r\n\r\n        return renderedCard;\r\n    }\r\n}\r\n\r\nexport class SerializationContext extends BaseSerializationContext {\r\n    private _elementRegistry?: CardObjectRegistry<CardElement>;\r\n    private _actionRegistry?: CardObjectRegistry<Action>;\r\n\r\n    private _forbiddenTypes: Set<string> = new Set<string>();\r\n    private internalParseCardObject<T extends CardObject>(\r\n        parent: CardElement | undefined,\r\n        source: any,\r\n        forbiddenTypes: Set<string>,\r\n        allowFallback: boolean,\r\n        createInstanceCallback: (typeName: string | undefined) => T | undefined,\r\n        logParseEvent: (typeName: string | undefined, errorType: Enums.TypeErrorType) => void\r\n    ): T | undefined {\r\n        let result: T | undefined = undefined;\r\n\r\n        if (source && typeof source === \"object\") {\r\n            const oldForbiddenTypes = new Set<string>();\r\n            this._forbiddenTypes.forEach((type) => {\r\n                oldForbiddenTypes.add(type);\r\n            });\r\n            forbiddenTypes.forEach((type) => {\r\n                this._forbiddenTypes.add(type);\r\n            });\r\n\r\n            const typeName = Utils.parseString(source[\"type\"]);\r\n\r\n            if (typeName && this._forbiddenTypes.has(typeName)) {\r\n                logParseEvent(typeName, Enums.TypeErrorType.ForbiddenType);\r\n            } else {\r\n                let tryToFallback = false;\r\n\r\n                result = createInstanceCallback(typeName);\r\n\r\n                if (!result) {\r\n                    tryToFallback = GlobalSettings.enableFallback && allowFallback;\r\n\r\n                    logParseEvent(typeName, Enums.TypeErrorType.UnknownType);\r\n                } else {\r\n                    result.setParent(parent);\r\n                    result.parse(source, this);\r\n\r\n                    tryToFallback =\r\n                        GlobalSettings.enableFallback && allowFallback && result.shouldFallback();\r\n                }\r\n\r\n                if (tryToFallback) {\r\n                    const fallback = source[\"fallback\"];\r\n\r\n                    if (!fallback && parent) {\r\n                        parent.setShouldFallback(true);\r\n                    }\r\n                    if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\r\n                        result = undefined;\r\n                    } else if (typeof fallback === \"object\") {\r\n                        result = this.internalParseCardObject<T>(\r\n                            parent,\r\n                            fallback,\r\n                            forbiddenTypes,\r\n                            true,\r\n                            createInstanceCallback,\r\n                            logParseEvent\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n\r\n            this._forbiddenTypes = oldForbiddenTypes;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected cardObjectParsed(o: SerializableObject, source: any) {\r\n        if (o instanceof Action && this.onParseAction) {\r\n            this.onParseAction(o, source, this);\r\n        } else if (o instanceof CardElement && this.onParseElement) {\r\n            this.onParseElement(o, source, this);\r\n        }\r\n    }\r\n\r\n    onParseAction?: (action: Action, source: any, context: SerializationContext) => void;\r\n    onParseElement?: (element: CardElement, source: any, context: SerializationContext) => void;\r\n\r\n    shouldSerialize(o: SerializableObject): boolean {\r\n        if (o instanceof Action) {\r\n            return this.actionRegistry.findByName(o.getJsonTypeName()) !== undefined;\r\n        } else if (o instanceof CardElement) {\r\n            return this.elementRegistry.findByName(o.getJsonTypeName()) !== undefined;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    parseCardObject<T extends CardObject>(\r\n        parent: CardElement | undefined,\r\n        source: any,\r\n        forbiddenTypeNames: string[],\r\n        allowFallback: boolean,\r\n        createInstanceCallback: (typeName: string) => T | undefined,\r\n        logParseEvent: (typeName: string, errorType: Enums.TypeErrorType) => void\r\n    ): T | undefined {\r\n        const forbiddenTypes = new Set<string>(forbiddenTypeNames);\r\n        const result = this.internalParseCardObject(\r\n            parent,\r\n            source,\r\n            forbiddenTypes,\r\n            allowFallback,\r\n            createInstanceCallback,\r\n            logParseEvent\r\n        );\r\n\r\n        if (result !== undefined) {\r\n            this.cardObjectParsed(result, source);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parseElement(\r\n        parent: CardElement | undefined,\r\n        source: any,\r\n        forbiddenTypes: string[],\r\n        allowFallback: boolean\r\n    ): CardElement | undefined {\r\n        return this.parseCardObject<CardElement>(\r\n            parent,\r\n            source,\r\n            forbiddenTypes,\r\n            allowFallback,\r\n            (typeName: string) => {\r\n                return this.elementRegistry.createInstance(typeName, this.targetVersion);\r\n            },\r\n            (typeName: string, errorType: Enums.TypeErrorType) => {\r\n                if (errorType === Enums.TypeErrorType.UnknownType) {\r\n                    this.logParseEvent(\r\n                        undefined,\r\n                        Enums.ValidationEvent.UnknownElementType,\r\n                        Strings.errors.unknownElementType(typeName)\r\n                    );\r\n                } else {\r\n                    this.logParseEvent(\r\n                        undefined,\r\n                        Enums.ValidationEvent.ElementTypeNotAllowed,\r\n                        Strings.errors.elementTypeNotAllowed(typeName)\r\n                    );\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    parseAction(\r\n        parent: CardElement,\r\n        source: any,\r\n        forbiddenActionTypes: string[],\r\n        allowFallback: boolean\r\n    ): Action | undefined {\r\n        return this.parseCardObject<Action>(\r\n            parent,\r\n            source,\r\n            forbiddenActionTypes,\r\n            allowFallback,\r\n            (typeName: string) => {\r\n                return this.actionRegistry.createInstance(typeName, this.targetVersion);\r\n            },\r\n            (typeName: string, errorType: Enums.TypeErrorType) => {\r\n                if (errorType === Enums.TypeErrorType.UnknownType) {\r\n                    this.logParseEvent(\r\n                        undefined,\r\n                        Enums.ValidationEvent.UnknownActionType,\r\n                        Strings.errors.unknownActionType(typeName)\r\n                    );\r\n                } else {\r\n                    this.logParseEvent(\r\n                        undefined,\r\n                        Enums.ValidationEvent.ActionTypeNotAllowed,\r\n                        Strings.errors.actionTypeNotAllowed(typeName)\r\n                    );\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    get elementRegistry(): CardObjectRegistry<CardElement> {\r\n        return this._elementRegistry ?? GlobalRegistry.elements;\r\n    }\r\n\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    setElementRegistry(value: CardObjectRegistry<CardElement> | undefined) {\r\n        this._elementRegistry = value;\r\n    }\r\n\r\n    get actionRegistry(): CardObjectRegistry<Action> {\r\n        return this._actionRegistry ?? GlobalRegistry.actions;\r\n    }\r\n\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    setActionRegistry(value: CardObjectRegistry<Action> | undefined) {\r\n        this._actionRegistry = value;\r\n    }\r\n}\r\n\r\nGlobalRegistry.defaultElements.register(\"Container\", Container);\r\nGlobalRegistry.defaultElements.register(\"TextBlock\", TextBlock);\r\nGlobalRegistry.defaultElements.register(\"RichTextBlock\", RichTextBlock, Versions.v1_2);\r\nGlobalRegistry.defaultElements.register(\"TextRun\", TextRun, Versions.v1_2);\r\nGlobalRegistry.defaultElements.register(\"Image\", Image);\r\nGlobalRegistry.defaultElements.register(\"ImageSet\", ImageSet);\r\nGlobalRegistry.defaultElements.register(\"Media\", Media, Versions.v1_1);\r\nGlobalRegistry.defaultElements.register(\"FactSet\", FactSet);\r\nGlobalRegistry.defaultElements.register(\"ColumnSet\", ColumnSet);\r\nGlobalRegistry.defaultElements.register(\"ActionSet\", ActionSet, Versions.v1_2);\r\nGlobalRegistry.defaultElements.register(\"Input.Text\", TextInput);\r\nGlobalRegistry.defaultElements.register(\"Input.Date\", DateInput);\r\nGlobalRegistry.defaultElements.register(\"Input.Time\", TimeInput);\r\nGlobalRegistry.defaultElements.register(\"Input.Number\", NumberInput);\r\nGlobalRegistry.defaultElements.register(\"Input.ChoiceSet\", ChoiceSetInput);\r\nGlobalRegistry.defaultElements.register(\"Input.Toggle\", ToggleInput);\r\n\r\nGlobalRegistry.defaultActions.register(OpenUrlAction.JsonTypeName, OpenUrlAction);\r\nGlobalRegistry.defaultActions.register(SubmitAction.JsonTypeName, SubmitAction);\r\nGlobalRegistry.defaultActions.register(ShowCardAction.JsonTypeName, ShowCardAction);\r\nGlobalRegistry.defaultActions.register(\r\n    ToggleVisibilityAction.JsonTypeName,\r\n    ToggleVisibilityAction,\r\n    Versions.v1_2\r\n);\r\nGlobalRegistry.defaultActions.register(ExecuteAction.JsonTypeName, ExecuteAction, Versions.v1_4);\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport { Strings } from \"./strings\";\r\nimport { Dictionary, GlobalSettings } from \"./shared\";\r\nimport { HostConfig } from \"./host-config\";\r\nimport { HostCapabilities } from \"./host-capabilities\";\r\nimport {\r\n    Versions,\r\n    property,\r\n    SerializableObject,\r\n    StringProperty,\r\n    SerializableObjectProperty,\r\n    IValidationEvent,\r\n    PropertyDefinition\r\n} from \"./serialization\";\r\n\r\nexport class ValidationResults {\r\n    readonly allIds: Dictionary<number> = {};\r\n    readonly validationEvents: IValidationEvent[] = [];\r\n\r\n    addFailure(cardObject: CardObject, event: Enums.ValidationEvent, message: string) {\r\n        this.validationEvents.push({\r\n            phase: Enums.ValidationPhase.Validation,\r\n            source: cardObject,\r\n            event: event,\r\n            message: message\r\n        });\r\n    }\r\n}\r\n\r\nexport type CardObjectType = { new (): CardObject };\r\n\r\nexport abstract class CardObject extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly typeNameProperty = new StringProperty(\r\n        Versions.v1_0,\r\n        \"type\",\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        (sender: object) => {\r\n            return (<CardObject>sender).getJsonTypeName();\r\n        }\r\n    );\r\n    static readonly idProperty = new StringProperty(Versions.v1_0, \"id\");\r\n    static readonly requiresProperty = new SerializableObjectProperty(\r\n        Versions.v1_2,\r\n        \"requires\",\r\n        HostCapabilities,\r\n        false,\r\n        new HostCapabilities()\r\n    );\r\n\r\n    protected getSchemaKey(): string {\r\n        return this.getJsonTypeName();\r\n    }\r\n\r\n    @property(CardObject.idProperty)\r\n    id?: string;\r\n\r\n    @property(CardObject.requiresProperty)\r\n    get requires(): HostCapabilities {\r\n        return this.getValue(CardObject.requiresProperty);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private _shouldFallback: boolean = false;\r\n\r\n    protected _parent?: CardObject;\r\n    protected _renderedElement?: HTMLElement;\r\n\r\n    /**\r\n     * Checks if this CardObject contains the given DOM Node.\r\n     * @param node The DOM Node to look for.\r\n     * @returns `true` if the DOM Node was found, `false` otherwise.\r\n     */\r\n    protected contains(node: Node): boolean {\r\n        if (this._renderedElement) {\r\n            return this._renderedElement.contains(node);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onPreProcessPropertyValue?: (\r\n        sender: CardObject,\r\n        property: PropertyDefinition,\r\n        value: any\r\n    ) => any;\r\n\r\n    abstract getJsonTypeName(): string;\r\n\r\n    abstract get hostConfig(): HostConfig;\r\n\r\n    preProcessPropertyValue(prop: PropertyDefinition, propertyValue?: any): any {\r\n        const value = propertyValue === undefined ? this.getValue(prop) : propertyValue;\r\n\r\n        if (GlobalSettings.allowPreProcessingPropertyValues) {\r\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n            let currentObject: CardObject | undefined = this;\r\n\r\n            while (currentObject && !currentObject.onPreProcessPropertyValue) {\r\n                currentObject = currentObject.parent;\r\n            }\r\n\r\n            if (currentObject && currentObject.onPreProcessPropertyValue) {\r\n                return currentObject.onPreProcessPropertyValue(this, prop, value);\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    setParent(value: CardObject | undefined) {\r\n        this._parent = value;\r\n    }\r\n\r\n    setShouldFallback(value: boolean) {\r\n        this._shouldFallback = value;\r\n    }\r\n\r\n    shouldFallback(): boolean {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\r\n    }\r\n\r\n    getRootObject(): CardObject {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        let currentObject: CardObject = this;\r\n\r\n        while (currentObject.parent) {\r\n            currentObject = currentObject.parent;\r\n        }\r\n\r\n        return currentObject;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        if (this.id) {\r\n            if (context.allIds.hasOwnProperty(this.id)) {\r\n                if (context.allIds[this.id] === 1) {\r\n                    context.addFailure(\r\n                        this,\r\n                        Enums.ValidationEvent.DuplicateId,\r\n                        Strings.errors.duplicateId(this.id)\r\n                    );\r\n                }\r\n\r\n                context.allIds[this.id] += 1;\r\n            } else {\r\n                context.allIds[this.id] = 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    validateProperties(): ValidationResults {\r\n        const result = new ValidationResults();\r\n\r\n        this.internalValidateProperties(result);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Recursively searches this CardObject and any children to find the\r\n     * innermost CardObject that owns the given DOM Node.\r\n     *\r\n     * @param node The DOM Node to look for.\r\n     *\r\n     * @returns The owner of the given DOM Node, or `undefined` if no owner was found.\r\n     */\r\n    findDOMNodeOwner(node: Node): CardObject | undefined {\r\n        // default implementation for CardObjects with no associated children\r\n        return this.contains(node) ? this : undefined;\r\n    }\r\n\r\n    releaseDOMResources() {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    get parent(): CardObject | undefined {\r\n        return this._parent;\r\n    }\r\n\r\n    get renderedElement(): HTMLElement | undefined {\r\n        return this._renderedElement;\r\n    }\r\n}\r\n","// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport {\r\n    AdaptiveCard,\r\n    ActionType,\r\n    CardElement,\r\n    Container,\r\n    SerializationContext,\r\n    ShowCardAction,\r\n    ToggleVisibilityAction\r\n} from \"./card-elements\";\r\nimport * as Enums from \"./enums\";\r\nimport {\r\n    BoolProperty,\r\n    NumProperty,\r\n    EnumProperty,\r\n    property,\r\n    PropertyBag,\r\n    SerializableObjectSchema,\r\n    Versions,\r\n    PixelSizeProperty\r\n} from \"./serialization\";\r\nimport { GlobalRegistry } from \"./registry\";\r\nimport { TypeErrorType, ValidationEvent } from \"./enums\";\r\nimport { Strings } from \"./strings\";\r\nimport {\r\n    Swiper,\r\n    A11y,\r\n    Autoplay,\r\n    History,\r\n    Keyboard,\r\n    Navigation,\r\n    Pagination,\r\n    Scrollbar,\r\n    SwiperOptions\r\n} from \"swiper\";\r\nimport * as Utils from \"./utils\";\r\nimport { GlobalSettings } from \"./shared\";\r\n\r\n// Note: to function correctly, consumers need to have CSS from swiper/css, swiper/css/pagination, and\r\n// swiper/css/navigation\r\n\r\nexport class CarouselPage extends Container {\r\n    //#region Schema\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        // `style`, `bleed`, `isVisible` are not supported in CarouselPage\r\n        schema.remove(Container.styleProperty);\r\n        schema.remove(Container.bleedProperty);\r\n        schema.remove(Container.isVisibleProperty);\r\n    }\r\n    //#endregion\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const carouselSlide: HTMLElement = document.createElement(\"div\");\r\n        carouselSlide.className = this.hostConfig.makeCssClassName(\"swiper-slide\");\r\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\r\n        this.rtl = this.isRtl();\r\n        const renderedElement = super.internalRender();\r\n        Utils.appendChild(carouselSlide, renderedElement);\r\n        return carouselSlide;\r\n    }\r\n\r\n    getForbiddenActionTypes(): ActionType[] {\r\n        return [ShowCardAction, ToggleVisibilityAction];\r\n    }\r\n\r\n    getForbiddenChildElements(): string[] {\r\n        return this.forbiddenChildElements();\r\n    }\r\n\r\n    protected forbiddenChildElements(): string[] {\r\n        return [\r\n            ToggleVisibilityAction.JsonTypeName,\r\n            ShowCardAction.JsonTypeName,\r\n            \"Media\",\r\n            \"ActionSet\",\r\n            \"Input.Text\",\r\n            \"Input.Date\",\r\n            \"Input.Time\",\r\n            \"Input.Number\",\r\n            \"Input.ChoiceSet\",\r\n            \"Input.Toggle\",\r\n            \"Carousel\",\r\n            ...super.forbiddenChildElements()\r\n        ];\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this.setShouldFallback(false);\r\n    }\r\n\r\n    protected shouldSerialize(_context: SerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"CarouselPage\";\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class Carousel extends Container {\r\n    //#region Schema\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        super.populateSchema(schema);\r\n\r\n        // `style`, `bleed`, `isVisible` are not supported in Carousel\r\n        schema.remove(Container.styleProperty);\r\n        schema.remove(Container.bleedProperty);\r\n        schema.remove(Container.isVisibleProperty);\r\n    }\r\n\r\n    static readonly timerProperty = new NumProperty(Versions.v1_6, \"timer\", undefined);\r\n    @property(Carousel.timerProperty)\r\n    get timer(): number | undefined {\r\n        let timer = this.getValue(Carousel.timerProperty);\r\n\r\n        if (timer && timer < this.hostConfig.carousel.minAutoplayDelay) {\r\n            console.warn(Strings.errors.tooLittleTimeDelay);\r\n            timer = this.hostConfig.carousel.minAutoplayDelay;\r\n        }\r\n\r\n        return timer;\r\n    }\r\n\r\n    set timer(value: number | undefined) {\r\n        if (value && value < this.hostConfig.carousel.minAutoplayDelay) {\r\n            console.warn(Strings.errors.tooLittleTimeDelay);\r\n            this.setValue(Carousel.timerProperty, this.hostConfig.carousel.minAutoplayDelay);\r\n        } else {\r\n            this.setValue(Carousel.timerProperty, value);\r\n        }\r\n    }\r\n\r\n    static readonly initialPageProperty = new NumProperty(Versions.v1_6, \"initialPage\", 0);\r\n    @property(Carousel.initialPageProperty)\r\n    get initialPageIndex(): number {\r\n        return this.getValue(Carousel.initialPageProperty); \r\n    }\r\n\r\n    set initialPageIndex(value: number) { \r\n        if (this.isValidParsedPageIndex(value)) { \r\n            this.setValue(Carousel.initialPageProperty, value);\r\n        } else { \r\n            console.warn(Strings.errors.invalidInitialPageIndex(value));\r\n            this.setValue(Carousel.initialPageProperty, 0); \r\n        }\r\n    }\r\n\r\n    static readonly loopProperty = new BoolProperty(Versions.v1_6, \"loop\", true);\r\n    @property(Carousel.loopProperty)\r\n    carouselLoop: boolean = true;\r\n    \r\n    static readonly orientationProperty = new EnumProperty(\r\n        Versions.v1_6,\r\n        \"orientation\",\r\n        Enums.Orientation,\r\n        Enums.Orientation.Horizontal\r\n    );\r\n    @property(Carousel.orientationProperty)\r\n    carouselOrientation: Enums.Orientation = Enums.Orientation.Horizontal; \r\n\r\n    static readonly carouselHeightProperty = new PixelSizeProperty(\r\n        Versions.v1_6,\r\n        \"heightInPixels\"\r\n    );\r\n    @property(Carousel.carouselHeightProperty)\r\n    carouselHeight?: number;\r\n    \r\n    private isValidParsedPageIndex(index: number) : boolean {\r\n        return this._pages ? this.isValidPageIndex(index, this._pages.length) : false;\r\n    }\r\n\r\n    private isValidRenderedPageIndex(index: number) : boolean {\r\n        return this._renderedPages ? this.isValidPageIndex(index, this._renderedPages.length) : false;\r\n    }\r\n\r\n    private isValidPageIndex(index: number, collectionSize: number) {\r\n        return (collectionSize > 0 && 0 <= index && index < collectionSize);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    get previousEventType(): Enums.CarouselInteractionEvent {\r\n        return this._previousEventType;\r\n    }\r\n\r\n    set previousEventType(eventType: Enums.CarouselInteractionEvent) {\r\n        this._previousEventType = eventType;\r\n    }\r\n\r\n    private _pages: CarouselPage[] = [];\r\n    private _renderedPages: CarouselPage[];\r\n    private _carouselPageContainer: HTMLElement;\r\n    private _containerForAdorners: HTMLElement;\r\n    private _currentIndex: number = 0;\r\n    private _previousEventType: Enums.CarouselInteractionEvent = Enums.CarouselInteractionEvent.Pagination;\r\n    private _observer: ResizeObserver | null;\r\n    private _carousel: Swiper | null;\r\n\r\n    // Question: Why do we place this on the Carousel instead of the CarouselPage?\r\n    protected forbiddenChildElements(): string[] {\r\n        return [\r\n            ToggleVisibilityAction.JsonTypeName,\r\n            ShowCardAction.JsonTypeName,\r\n            \"Media\",\r\n            \"ActionSet\",\r\n            \"Input.Text\",\r\n            \"Input.Date\",\r\n            \"Input.Time\",\r\n            \"Input.Number\",\r\n            \"Input.ChoiceSet\",\r\n            \"Input.Toggle\",\r\n            ...super.forbiddenChildElements()\r\n        ];\r\n    }\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        super.adjustRenderedElementSize(renderedElement);\r\n        if (this.height == \"stretch\" && this._containerForAdorners !== undefined) { \r\n            this._containerForAdorners.style.height = \"100%\";\r\n        }\r\n\r\n        // Assign the explicit height to carouselPageContainer if given\r\n        if (this.carouselHeight) {\r\n            this._carouselPageContainer.style.height = this.carouselHeight + \"px\";\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Carousel\";\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._pages.length;\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this._pages[index];\r\n    }\r\n\r\n    addPage(page: CarouselPage) {\r\n        this._pages.push(page);\r\n        page.setParent(this);\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        if (item instanceof CarouselPage) {\r\n            const itemIndex = this._pages.indexOf(item);\r\n\r\n            if (itemIndex >= 0) {\r\n                this._pages.splice(itemIndex, 1);\r\n\r\n                item.setParent(undefined);\r\n\r\n                this.updateLayout();\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedPages?.length > 0) {\r\n            return this._renderedPages[0];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement | undefined {\r\n        if (this.renderedElement && this._renderedPages?.length > 0) {\r\n            return this._renderedPages[this._renderedPages.length - 1];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    get currentPageId(): string | undefined {\r\n        if (this._carousel?.slides?.length) {\r\n            const activeSlide = this._carousel.slides[this._carousel.activeIndex] as HTMLElement;\r\n            return activeSlide.id;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    get currentPageIndex(): number | undefined {\r\n        return this._carousel?.realIndex;\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this._pages = [];\r\n\r\n        const jsonPages = source[\"pages\"];\r\n        if (Array.isArray(jsonPages)) {\r\n            for (const item of jsonPages) {\r\n                const page = this.createCarouselPageInstance(item, context);\r\n                if (page) {\r\n                    this._pages.push(page);\r\n                }\r\n            }\r\n        }\r\n\r\n        // everything is parsed do validate on initial page index\r\n        this.validateParsing(context);\r\n    }\r\n\r\n    private validateParsing(context: SerializationContext) {\r\n        if (!this.isValidParsedPageIndex(this.initialPageIndex)) {\r\n            context.logParseEvent(\r\n                this,\r\n                Enums.ValidationEvent.InvalidPropertyValue,\r\n                Strings.errors.invalidInitialPageIndex(this.initialPageIndex)\r\n            );\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        context.serializeArray(target, \"pages\", this._pages);\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        this._renderedPages = [];\r\n\r\n        if (this._pages.length <= 0) {\r\n            return undefined;\r\n        }\r\n\r\n        this.validateOrientationProperties();\r\n\r\n        const cardLevelContainer: HTMLElement = document.createElement(\"div\");\r\n        cardLevelContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-card-level-container\");\r\n\r\n        const carouselContainer: HTMLElement = document.createElement(\"div\");\r\n        carouselContainer.className = this.hostConfig.makeCssClassName(\"swiper\", \"ac-carousel\");\r\n        this._carouselPageContainer = carouselContainer;\r\n\r\n        const containerForAdorners: HTMLElement = document.createElement(\"div\");\r\n        containerForAdorners.className = this.hostConfig.makeCssClassName(\"ac-carousel-container\");\r\n        this._containerForAdorners = containerForAdorners;\r\n\r\n        cardLevelContainer.appendChild(containerForAdorners);\r\n\r\n        const carouselWrapper: HTMLElement = document.createElement(\"div\");\r\n        carouselWrapper.className = this.hostConfig.makeCssClassName(\r\n            \"swiper-wrapper\",\r\n            \"ac-carousel-card-container\"\r\n        );\r\n        carouselWrapper.style.display = \"flex\";\r\n\r\n        switch (this.getEffectiveVerticalContentAlignment()) {\r\n            case Enums.VerticalAlignment.Top:\r\n                carouselWrapper.style.alignItems = \"flex-start\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                carouselWrapper.style.alignItems = \"flex-end\";\r\n                break;\r\n            default:\r\n                carouselWrapper.style.alignItems = \"center\";\r\n                break;\r\n        }\r\n\r\n        if (GlobalSettings.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            carouselWrapper.style.minHeight = \"-webkit-min-content\";\r\n        }\r\n\r\n        const navigationContainer: HTMLElement = document.createElement(\"div\");\r\n        navigationContainer.className = this.hostConfig.makeCssClassName(\"ac-carousel-navigation\");\r\n\r\n        const prevElementDiv: HTMLElement = document.createElement(\"div\");\r\n        prevElementDiv.className = this.hostConfig.makeCssClassName(\r\n            \"swiper-button-prev\"\r\n        );\r\n\r\n        const nextElementDiv: HTMLElement = document.createElement(\"div\");\r\n        nextElementDiv.className = this.hostConfig.makeCssClassName(\r\n            \"swiper-button-next\"\r\n        );\r\n\r\n        if (this.carouselOrientation === Enums.Orientation.Horizontal) {\r\n            this.updateCssForHorizontalCarousel(prevElementDiv, nextElementDiv);\r\n        } else {\r\n            this.updateCssForVerticalCarousel(navigationContainer, prevElementDiv, nextElementDiv);\r\n        }\r\n\r\n        const pagination: HTMLElement = document.createElement(\"div\");\r\n        pagination.className = this.hostConfig.makeCssClassName(\r\n            \"swiper-pagination\",\r\n            \"ac-carousel-pagination\"\r\n        );\r\n\r\n        navigationContainer.appendChild(prevElementDiv);\r\n        Utils.addCancelSelectActionEventHandler(prevElementDiv);\r\n\r\n        navigationContainer.appendChild(pagination);\r\n        Utils.addCancelSelectActionEventHandler(pagination);\r\n\r\n        navigationContainer.appendChild(nextElementDiv);\r\n        Utils.addCancelSelectActionEventHandler(nextElementDiv);\r\n\r\n        if (this.isDesignMode()) {\r\n            // If we are in design mode, we need to ensure these elements are in front of the peers\r\n            prevElementDiv.style.zIndex = \"20\";\r\n            nextElementDiv.style.zIndex = \"20\";\r\n            pagination.style.zIndex = \"20\";\r\n        }\r\n\r\n        const requestedNumberOfPages: number = Math.min(\r\n            this._pages.length,\r\n            this.hostConfig.carousel.maxCarouselPages\r\n        );\r\n        if (this._pages.length > this.hostConfig.carousel.maxCarouselPages) {\r\n            console.warn(Strings.errors.tooManyCarouselPages);\r\n        }\r\n\r\n        if (this._pages.length > 0) {\r\n            for (let i = 0; i < requestedNumberOfPages; i++) {\r\n                const page = this._pages[i];\r\n                const renderedItem = this.isElementAllowed(page) ? page.render() : undefined;\r\n                renderedItem?.classList.add(\"ac-carousel-page\");\r\n                renderedItem?.children[0]?.classList.add(\"ac-carousel-page-container\");\r\n\r\n                if (renderedItem) {\r\n                    Utils.appendChild(carouselWrapper, renderedItem);\r\n                    this._renderedPages.push(page);\r\n                }\r\n            }\r\n        }\r\n\r\n        carouselContainer.appendChild(carouselWrapper);\r\n\r\n        carouselContainer.tabIndex = this.isDesignMode() ? -1 : 0;\r\n\r\n        containerForAdorners.appendChild(carouselContainer);\r\n        containerForAdorners.appendChild(navigationContainer);\r\n\r\n        // `isRtl()` will set the correct value of rtl by reading the value from the parents\r\n        this.rtl = this.isRtl();\r\n        this.applyRTL(pagination);\r\n\r\n        if (!this.isDesignMode()) {\r\n            if (this.isValidRenderedPageIndex(this.initialPageIndex)) {\r\n                this._currentIndex = this.initialPageIndex;\r\n            } else {\r\n                console.warn(Strings.errors.invalidInitialPageIndex(this.initialPageIndex));\r\n                this._currentIndex = 0\r\n            }\r\n        }\r\n\r\n        this.initializeCarouselControl(\r\n            carouselContainer,\r\n            nextElementDiv,\r\n            prevElementDiv,\r\n            pagination,\r\n            this.rtl\r\n        );\r\n\r\n        return this._renderedPages.length > 0 ? cardLevelContainer : undefined;\r\n    }\r\n\r\n    applyRTL(pagination: HTMLElement) {\r\n        super.applyRTL(this._carouselPageContainer);\r\n        if (this.rtl) {\r\n            pagination.classList.add(this.hostConfig.makeCssClassName(\r\n                \"ac-carousel-pagination-rtl\"\r\n            ));\r\n        }\r\n    }\r\n\r\n    validateOrientationProperties() {\r\n        if (!this.carouselHeight) {\r\n            this.carouselOrientation = Enums.Orientation.Horizontal;\r\n        }\r\n    }\r\n\r\n    updateCssForHorizontalCarousel(\r\n        prevElementDiv: HTMLElement,\r\n        nextElementDiv: HTMLElement\r\n    ) {\r\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-left\"\r\n        ));\r\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-right\"\r\n        ));\r\n    }\r\n\r\n    updateCssForVerticalCarousel(\r\n        navigationContainer: HTMLElement,\r\n        prevElementDiv: HTMLElement,\r\n        nextElementDiv: HTMLElement\r\n    ) {\r\n        this._containerForAdorners.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-container-vertical\"\r\n        ));\r\n        navigationContainer.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-navigation-vertical\"\r\n        ))\r\n\r\n        prevElementDiv.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-up\"\r\n        ));\r\n        nextElementDiv.classList.add(this.hostConfig.makeCssClassName(\r\n            \"ac-carousel-down\"\r\n        ));\r\n    }\r\n\r\n    private initializeCarouselControl(\r\n        carouselContainer: HTMLElement,\r\n        nextElement: HTMLElement,\r\n        prevElement: HTMLElement,\r\n        paginationElement: HTMLElement,\r\n        rtl: boolean | undefined\r\n    ): void {\r\n\r\n        const nextElementAdjustedForRtl = (rtl === undefined || !rtl ? nextElement : prevElement);\r\n        const prevElementAdjustedForRtl = (rtl === undefined || !rtl ? prevElement : nextElement);\r\n\r\n        const prevElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? prevElementAdjustedForRtl : prevElement;\r\n        const nextElementAdjustedForOrientation = (Enums.Orientation.Horizontal === this.carouselOrientation) ? nextElementAdjustedForRtl : nextElement;\r\n\r\n        const swiperOptions: SwiperOptions = {\r\n            loop: !this.isDesignMode() && this.carouselLoop,\r\n            modules: [Navigation, Pagination, Scrollbar, A11y, History, Keyboard],\r\n            pagination: {\r\n                el: paginationElement,\r\n                clickable: true\r\n            },\r\n            navigation: {\r\n                prevEl: prevElementAdjustedForOrientation,\r\n                nextEl: nextElementAdjustedForOrientation\r\n            },\r\n            a11y: {\r\n                enabled: true\r\n            },\r\n            keyboard: {\r\n                enabled: false,\r\n                onlyInViewport: true\r\n            },\r\n            direction: this.carouselOrientation === Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\",\r\n            resizeObserver: false,\r\n            initialSlide: this._currentIndex\r\n        };\r\n\r\n        if (this.timer && !this.isDesignMode()) {\r\n            swiperOptions.modules?.push(Autoplay);\r\n            swiperOptions.autoplay = { delay: this.timer, pauseOnMouseEnter: true };\r\n        }\r\n\r\n        const carousel: Swiper = new Swiper(carouselContainer, swiperOptions);\r\n\r\n        // While the 'pauseOnMouseEnter' option should resume autoplay on\r\n        // mouse exit it doesn't do it, so adding custom events to handle it\r\n\r\n        carouselContainer.addEventListener(\"mouseenter\", function (_event) {\r\n            carousel.autoplay?.stop();\r\n        });\r\n\r\n        carouselContainer.addEventListener(\"mouseleave\", function (_event) {\r\n            carousel.autoplay?.start();\r\n        });\r\n\r\n        carousel.on('navigationNext',  (swiper: Swiper) => {\r\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationNext);\r\n        });\r\n\r\n        carousel.on('navigationPrev',  (swiper: Swiper) => {\r\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.NavigationPrevious);\r\n        });\r\n\r\n        carousel.on('slideChangeTransitionEnd',  (swiper: Swiper) => {\r\n            this.currentIndex = swiper.realIndex;\r\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Pagination); \r\n        });\r\n\r\n        carousel.on('autoplay',  () => {\r\n            this.raiseCarouselEvent(Enums.CarouselInteractionEvent.Autoplay);\r\n        });\r\n\r\n        carousel.on('paginationRender', (swiper, paginationEl) => {\r\n            swiper.pagination.bullets.forEach((bullet, index) => {\r\n                bullet.addEventListener(\"keypress\", function(event : KeyboardEvent) {\r\n                    if (event.key == \"Enter\") {\r\n                        event.preventDefault();\r\n                        swiper.slideTo(index + 1);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        carousel.on('destroy', () => {\r\n            this.destroyResizeObserver();\r\n        });\r\n\r\n        prevElement.title = prevElement.ariaLabel ?? Strings.defaults.carouselNavigationPreviousTooltip();\r\n\r\n        nextElement.title = nextElement.ariaLabel ?? Strings.defaults.carouselNavigationNextTooltip();\r\n\r\n        this._carousel = carousel;\r\n\r\n        this.createResizeObserver();\r\n    }\r\n\r\n    private createCarouselPageInstance(\r\n        source: any,\r\n        context: SerializationContext\r\n    ): CarouselPage | undefined {\r\n        return context.parseCardObject<CarouselPage>(\r\n            this,\r\n            source,\r\n            this.forbiddenChildElements(),\r\n            !this.isDesignMode(),\r\n            (typeName: string) => {\r\n                return !typeName || typeName === \"CarouselPage\" ? new CarouselPage() : undefined;\r\n            },\r\n            (typeName: string, _errorType: TypeErrorType) => {\r\n                context.logParseEvent(\r\n                    undefined,\r\n                    ValidationEvent.ElementTypeNotAllowed,\r\n                    Strings.errors.elementTypeNotAllowed(typeName)\r\n                );\r\n            }\r\n        );\r\n    }\r\n\r\n    slideTo(index: number) {\r\n        this._carousel?.slideTo(index);\r\n    }\r\n\r\n    get carouselPageContainer() {\r\n        return this._carouselPageContainer;\r\n    }\r\n\r\n    get currentIndex(): number {\r\n        return this._currentIndex;\r\n    }\r\n\r\n    set currentIndex(currentIndex: number) {\r\n        this._currentIndex = currentIndex;\r\n    }\r\n\r\n    private createCarouselEvent (type : Enums.CarouselInteractionEvent): CarouselEvent\r\n    {\r\n        let currentPageId : string | undefined;\r\n        if (this.currentPageIndex != undefined) {\r\n            currentPageId = this.getItemAt(this.currentPageIndex).id;\r\n        }\r\n        return new CarouselEvent(type, this.id, currentPageId, this.currentPageIndex);   \r\n    }\r\n\r\n    private raiseCarouselEvent(eventType : Enums.CarouselInteractionEvent) {\r\n        const card = this.parent ? (this.parent.getRootElement() as AdaptiveCard) : undefined;\r\n        const onCarouselEventHandler = \r\n            card && card.onCarouselEvent\r\n                ? card.onCarouselEvent\r\n                : AdaptiveCard.onCarouselEvent;\r\n        // pagination event is triggered on slide transition end event \r\n        if (onCarouselEventHandler && eventType == Enums.CarouselInteractionEvent.Pagination) {\r\n        // returns the event type that causes slide transition\r\n            onCarouselEventHandler(this.createCarouselEvent(this.previousEventType));\r\n        }\r\n        this.previousEventType = eventType;\r\n    }\r\n\r\n    /// Swiper version 8 added requestAnimationFrame() call in its resize observer code\r\n    /// The new call causes flickering issue,\r\n    /// We've copied resize observer code from Swiper version 7 with some modifications\r\n    private createResizeObserver() : void {\r\n\r\n        if (!this.checkIfCarouselInValidStateForResizeEvent()) {\r\n            return;\r\n        }\r\n\r\n        this._observer = new ResizeObserver((entries) => {\r\n            const width = this._carousel?.width;\r\n            const height = this._carousel?.height;\r\n            let newWidth = width;\r\n            let newHeight = height;\r\n            entries.forEach(({ contentBoxSize, contentRect, target }) => {\r\n            if (target && target !== this._carousel?.el) {\r\n                return;\r\n            }\r\n\r\n            newWidth = contentRect\r\n                ? contentRect.width\r\n                : (contentBoxSize[0] || contentBoxSize).inlineSize;\r\n\r\n            newHeight = contentRect\r\n                ? contentRect.height\r\n                : (contentBoxSize[0] || contentBoxSize).blockSize;\r\n            });\r\n\r\n            if (newWidth !== width || newHeight !== height) {\r\n                if (this.checkIfCarouselInValidStateForResizeEvent()) {\r\n                    this._carousel?.emit('beforeResize');\r\n                    this._carousel?.emit('resize');\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        this._observer.observe(this._carousel?.el!);\r\n    }\r\n\r\n    private destroyResizeObserver(): void {\r\n        if (this._observer && this._observer.unobserve && this._carousel?.el) {\r\n            this._observer.unobserve(this._carousel.el);\r\n            this._observer = null;\r\n        }\r\n    };\r\n\r\n    private checkIfCarouselInValidStateForResizeEvent()\r\n    {\r\n        return this._carousel && !this._carousel.destroyed;\r\n    }\r\n}\r\n\r\nexport class CarouselEvent {\r\n    constructor(public type : Enums.CarouselInteractionEvent,\r\n        public carouselId : string | undefined,\r\n        public activeCarouselPageId : string | undefined,\r\n        public activeCarouselPageIndex : number | undefined) {}\r\n}\r\n\r\nGlobalRegistry.defaultElements.register(\r\n    \"Carousel\",\r\n    Carousel,\r\n    Versions.v1_6\r\n);\r\n\r\n","// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ActivityResponse, IActivityRequest } from \"./activity-request\";\r\n\r\nexport abstract class ChannelAdapter {\r\n    abstract sendRequestAsync(request: IActivityRequest): Promise<ActivityResponse>;\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport class Collection<TItem> {\r\n    private _items: Array<TItem> = [];\r\n\r\n    onItemAdded: (item: TItem) => void;\r\n    onItemRemoved: (item: TItem) => void;\r\n\r\n    get(index: number): TItem {\r\n        return this._items[index];\r\n    }\r\n\r\n    add(item: TItem) {\r\n        this._items.push(item);\r\n\r\n        if (this.onItemAdded) {\r\n            this.onItemAdded(item);\r\n        }\r\n    }\r\n\r\n    remove(item: TItem) {\r\n        const i = this._items.indexOf(item);\r\n\r\n        if (i >= 0) {\r\n            this._items = this._items.splice(i, 1);\r\n\r\n            if (this.onItemRemoved) {\r\n                this.onItemRemoved(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    indexOf(item: TItem): number {\r\n        return this._items.indexOf(item);\r\n    }\r\n\r\n    get length(): number {\r\n        return this._items.length;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nexport class Constants {\r\n    static readonly keys = {\r\n        tab: \"Tab\",\r\n        enter: \"Enter\",\r\n        escape: \"Escape\",\r\n        space: \" \",\r\n        up: \"ArrowUp\",\r\n        down: \"ArrowDown\",\r\n        delete: \"Delete\"\r\n    } as const;\r\n}\r\n","// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport * from \"./menu-item\";\r\nexport * from \"./popup-menu\";\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { defaultHostConfig, HostConfig } from \"../host-config\";\r\nimport { Constants } from \"./constants\";\r\n\r\nexport class MenuItem {\r\n    private _hostConfig?: HostConfig;\r\n    private _element: HTMLElement;\r\n    private _value: string;\r\n    private _isEnabled: boolean = true;\r\n\r\n    private click() {\r\n        if (this.isEnabled && this.onClick) {\r\n            this.onClick(this);\r\n        }\r\n    }\r\n\r\n    private updateCssClasses() {\r\n        if (this._element) {\r\n            const effectiveHostConfig = this._hostConfig ? this._hostConfig : defaultHostConfig;\r\n\r\n            this._element.className = effectiveHostConfig.makeCssClassName(\"ac-ctrl\");\r\n            this._element.classList.add(\r\n                effectiveHostConfig.makeCssClassName(\r\n                    this.isEnabled ? \"ac-ctrl-dropdown-item\" : \"ac-ctrl-dropdown-item-disabled\"\r\n                )\r\n            );\r\n\r\n            if (!this.isEnabled) {\r\n                this._element.classList.add(effectiveHostConfig.makeCssClassName(\"ac-disabled\"));\r\n            }\r\n        }\r\n    }\r\n\r\n    readonly key: string;\r\n\r\n    onClick?: (item: MenuItem) => void;\r\n\r\n    constructor(key: string, value: string) {\r\n        this.key = key;\r\n        this._value = value;\r\n    }\r\n\r\n    toString(): string {\r\n        return this.value;\r\n    }\r\n\r\n    render(hostConfig?: HostConfig): HTMLElement {\r\n        this._hostConfig = hostConfig;\r\n\r\n        if (!this._element) {\r\n            this._element = document.createElement(\"span\");\r\n            this._element.innerText = this.value;\r\n            this._element.setAttribute(\"role\", \"menuitem\");\r\n\r\n            if (!this.isEnabled) {\r\n                this._element.setAttribute(\"aria-disabled\", \"true\");\r\n            }\r\n\r\n            this._element.setAttribute(\"aria-current\", \"false\");\r\n            this._element.onmouseup = (_e) => {\r\n                this.click();\r\n            };\r\n            this._element.onkeydown = (e) => {\r\n                if (e.key === Constants.keys.enter) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    this.click();\r\n                }\r\n            };\r\n\r\n            this.updateCssClasses();\r\n        }\r\n\r\n        return this._element;\r\n    }\r\n\r\n    get value(): string {\r\n        return this._value;\r\n    }\r\n\r\n    set value(newValue: string) {\r\n        this._value = newValue;\r\n\r\n        if (this._element) {\r\n            this._element.innerText = newValue;\r\n        }\r\n    }\r\n\r\n    get isEnabled(): boolean {\r\n        return this._isEnabled;\r\n    }\r\n\r\n    set isEnabled(value: boolean) {\r\n        if (this._isEnabled !== value) {\r\n            this._isEnabled = value;\r\n\r\n            this.updateCssClasses();\r\n        }\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { Constants } from \"./constants\";\r\nimport * as Utils from \"../utils\";\r\nimport { defaultHostConfig, HostConfig } from \"../host-config\";\r\n\r\nexport abstract class PopupControl {\r\n    private _isOpen: boolean = false;\r\n    private _overlayElement: HTMLElement;\r\n    private _popupElement: HTMLElement;\r\n    private _hostConfig?: HostConfig;\r\n\r\n    protected abstract renderContent(): HTMLElement;\r\n\r\n    onClose: (popupControl: PopupControl, wasCancelled: boolean) => void;\r\n\r\n    keyDown(e: KeyboardEvent) {\r\n        switch (e.key) {\r\n            case Constants.keys.escape:\r\n                this.closePopup(true);\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n    render(_rootElementBounds: ClientRect): HTMLElement {\r\n        const element = document.createElement(\"div\");\r\n        element.tabIndex = 0;\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-ctrl\", \"ac-ctrl-popup-container\");\r\n        element.setAttribute(\"role\", \"dialog\");\r\n        element.setAttribute(\"aria-modal\", \"true\");\r\n        element.onkeydown = (e) => {\r\n            this.keyDown(e);\r\n\r\n            return !e.cancelBubble;\r\n        };\r\n\r\n        element.appendChild(this.renderContent());\r\n\r\n        return element;\r\n    }\r\n\r\n    focus() {\r\n        if (this._popupElement) {\r\n            (<HTMLElement>this._popupElement.firstElementChild).focus();\r\n        }\r\n    }\r\n\r\n    popup(rootElement: HTMLElement) {\r\n        if (!this._isOpen) {\r\n            this._overlayElement = document.createElement(\"div\");\r\n            this._overlayElement.className = this.hostConfig.makeCssClassName(\"ac-ctrl-overlay\");\r\n            this._overlayElement.tabIndex = 0;\r\n            this._overlayElement.style.width = document.documentElement.scrollWidth + \"px\";\r\n            this._overlayElement.style.height = document.documentElement.scrollHeight + \"px\";\r\n            this._overlayElement.onfocus = (_e) => {\r\n                this.closePopup(true);\r\n            };\r\n\r\n            document.body.appendChild(this._overlayElement);\r\n\r\n            const rootElementBounds = rootElement.getBoundingClientRect();\r\n\r\n            this._popupElement = this.render(rootElementBounds);\r\n            this._popupElement.classList.remove(\r\n                ...this.hostConfig.makeCssClassNames(\r\n                    \"ac-ctrl-slide\",\r\n                    \"ac-ctrl-slideLeftToRight\",\r\n                    \"ac-ctrl-slideRightToLeft\",\r\n                    \"ac-ctrl-slideTopToBottom\",\r\n                    \"ac-ctrl-slideRightToLeft\"\r\n                )\r\n            );\r\n\r\n            window.addEventListener(\"resize\", (_e) => {\r\n                this.closePopup(true);\r\n            });\r\n\r\n            const rootElementLabel = rootElement.getAttribute(\"aria-label\");\r\n            if (rootElementLabel) {\r\n                this._popupElement.setAttribute(\"aria-label\", rootElementLabel);\r\n            }\r\n\r\n            this._overlayElement.appendChild(this._popupElement);\r\n\r\n            const popupElementBounds = this._popupElement.getBoundingClientRect();\r\n\r\n            const availableSpaceBelow = window.innerHeight - rootElementBounds.bottom;\r\n            const availableSpaceAbove = rootElementBounds.top;\r\n            const availableSpaceRight = window.innerWidth - rootElementBounds.right;\r\n            const availableSpaceLeft = rootElementBounds.left;\r\n\r\n            let left = rootElementBounds.left + Utils.getScrollX();\r\n            let top;\r\n\r\n            if (\r\n                availableSpaceAbove < popupElementBounds.height &&\r\n                availableSpaceBelow < popupElementBounds.height\r\n            ) {\r\n                // Not enough space above or below root element\r\n                const actualPopupHeight = Math.min(popupElementBounds.height, window.innerHeight);\r\n\r\n                this._popupElement.style.maxHeight = actualPopupHeight + \"px\";\r\n\r\n                if (actualPopupHeight < popupElementBounds.height) {\r\n                    top = Utils.getScrollY();\r\n                } else {\r\n                    top =\r\n                        Utils.getScrollY() +\r\n                        rootElementBounds.top +\r\n                        (rootElementBounds.height - actualPopupHeight) / 2;\r\n                }\r\n\r\n                if (\r\n                    availableSpaceLeft < popupElementBounds.width &&\r\n                    availableSpaceRight < popupElementBounds.width\r\n                ) {\r\n                    // Not enough space left or right of root element\r\n                    const actualPopupWidth = Math.min(popupElementBounds.width, window.innerWidth);\r\n\r\n                    this._popupElement.style.maxWidth = actualPopupWidth + \"px\";\r\n\r\n                    if (actualPopupWidth < popupElementBounds.width) {\r\n                        left = Utils.getScrollX();\r\n                    } else {\r\n                        left =\r\n                            Utils.getScrollX() +\r\n                            rootElementBounds.left +\r\n                            (rootElementBounds.width - actualPopupWidth) / 2;\r\n                    }\r\n                } else {\r\n                    // Enough space on the left or right of the root element\r\n                    if (availableSpaceRight >= popupElementBounds.width) {\r\n                        left = Utils.getScrollX() + rootElementBounds.right;\r\n\r\n                        this._popupElement.classList.add(\r\n                            ...this.hostConfig.makeCssClassNames(\r\n                                \"ac-ctrl-slide\",\r\n                                \"ac-ctrl-slideLeftToRight\"\r\n                            )\r\n                        );\r\n                    } else {\r\n                        left =\r\n                            Utils.getScrollX() + rootElementBounds.left - popupElementBounds.width;\r\n\r\n                        this._popupElement.classList.add(\r\n                            ...this.hostConfig.makeCssClassNames(\r\n                                \"ac-ctrl-slide\",\r\n                                \"ac-ctrl-slideRightToLeft\"\r\n                            )\r\n                        );\r\n                    }\r\n                }\r\n            } else {\r\n                // Enough space above or below root element\r\n                if (availableSpaceBelow >= popupElementBounds.height) {\r\n                    top = Utils.getScrollY() + rootElementBounds.bottom;\r\n\r\n                    this._popupElement.classList.add(\r\n                        ...this.hostConfig.makeCssClassNames(\r\n                            \"ac-ctrl-slide\",\r\n                            \"ac-ctrl-slideTopToBottom\"\r\n                        )\r\n                    );\r\n                } else {\r\n                    top = Utils.getScrollY() + rootElementBounds.top - popupElementBounds.height;\r\n\r\n                    this._popupElement.classList.add(\r\n                        ...this.hostConfig.makeCssClassNames(\r\n                            \"ac-ctrl-slide\",\r\n                            \"ac-ctrl-slideBottomToTop\"\r\n                        )\r\n                    );\r\n                }\r\n\r\n                if (availableSpaceRight < popupElementBounds.width) {\r\n                    left = Utils.getScrollX() + rootElementBounds.right - popupElementBounds.width;\r\n                }\r\n            }\r\n\r\n            this._popupElement.style.left = left + \"px\";\r\n            this._popupElement.style.top = top + \"px\";\r\n\r\n            this._popupElement.focus();\r\n\r\n            this._isOpen = true;\r\n        }\r\n    }\r\n\r\n    closePopup(wasCancelled: boolean) {\r\n        if (this._isOpen) {\r\n            document.body.removeChild(this._overlayElement);\r\n\r\n            this._isOpen = false;\r\n\r\n            if (this.onClose) {\r\n                this.onClose(this, wasCancelled);\r\n            }\r\n        }\r\n    }\r\n\r\n    get hostConfig(): HostConfig {\r\n        return this._hostConfig ? this._hostConfig : defaultHostConfig;\r\n    }\r\n\r\n    set hostConfig(value: HostConfig) {\r\n        this._hostConfig = value;\r\n    }\r\n\r\n    get isOpen(): boolean {\r\n        return this._isOpen;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { Constants } from \"./constants\";\r\nimport { Collection } from \"./collection\";\r\nimport { PopupControl } from \"./popup-control\";\r\nimport { MenuItem } from \"./menu-item\";\r\n\r\nexport class PopupMenu extends PopupControl {\r\n    private _items: Collection<MenuItem> = new Collection<MenuItem>();\r\n    private _renderedItems: Array<HTMLElement> = [];\r\n    private _selectedIndex: number = -1;\r\n\r\n    protected renderContent(): HTMLElement {\r\n        const element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-ctrl ac-popup\");\r\n        element.setAttribute(\"role\", \"listbox\");\r\n\r\n        for (let i = 0; i < this._items.length; i++) {\r\n            const renderedItem = this._items.get(i).render(this.hostConfig);\r\n            renderedItem.tabIndex = 0;\r\n\r\n            element.appendChild(renderedItem);\r\n\r\n            if (i == 0)\r\n            {\r\n                renderedItem.setAttribute(\"aria-expanded\", \"true\");\r\n            }\r\n\r\n            if (i === this.selectedIndex) {\r\n                renderedItem.focus();\r\n            }\r\n\r\n            this._renderedItems.push(renderedItem);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    keyDown(e: KeyboardEvent) {\r\n        super.keyDown(e);\r\n\r\n        let selectedItemIndex = this._selectedIndex;\r\n\r\n        switch (e.key) {\r\n            case Constants.keys.tab:\r\n                this.closePopup(true);\r\n\r\n                break;\r\n            /*\r\n            case Constants.keys.enter:\r\n                if (this.selectedIndex >= 0) {\r\n                    this.selectedIndex = this.selectedIndex;\r\n\r\n                    this.close();\r\n                }\r\n\r\n                break;\r\n            */\r\n            case Constants.keys.up:\r\n                if (selectedItemIndex <= 0) {\r\n                    selectedItemIndex = this._renderedItems.length - 1;\r\n                } else {\r\n                    selectedItemIndex--;\r\n\r\n                    if (selectedItemIndex < 0) {\r\n                        selectedItemIndex = this._renderedItems.length - 1;\r\n                    }\r\n                }\r\n\r\n                this.selectedIndex = selectedItemIndex;\r\n                this.removeAriaExpanded(selectedItemIndex);\r\n\r\n                e.cancelBubble = true;\r\n\r\n                break;\r\n            case Constants.keys.down:\r\n                if (selectedItemIndex < 0) {\r\n                    selectedItemIndex = 0;\r\n                } else {\r\n                    selectedItemIndex++;\r\n\r\n                    if (selectedItemIndex >= this._renderedItems.length) {\r\n                        selectedItemIndex = 0;\r\n                    }\r\n                    this.removeAriaExpanded(selectedItemIndex);\r\n                }\r\n\r\n                this.selectedIndex = selectedItemIndex;\r\n\r\n                e.cancelBubble = true;\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n    get items(): Collection<MenuItem> {\r\n        return this._items;\r\n    }\r\n\r\n    get selectedIndex(): number {\r\n        return this._selectedIndex;\r\n    }\r\n\r\n    set selectedIndex(index: number) {\r\n        if (index >= 0 && index < this._renderedItems.length) {\r\n            this._renderedItems[index].focus();\r\n\r\n            this._selectedIndex = index;\r\n        }\r\n    }\r\n\r\n    // remove aria-expanded attribute from menu item\r\n    private removeAriaExpanded(index: number) {\r\n        if (this._renderedItems[index].getAttribute(\"aria-expanded\") === \"true\") {\r\n            this._renderedItems[index].removeAttribute(\"aria-expanded\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\n/*\r\n    This should really be a string enum, e.g.\r\n\r\n        export enum ContainerStyle {\r\n            Default = \"default\",\r\n            Emphasis = \"emphasis\"\r\n        }\r\n\r\n    However, some hosts do not use a version of TypeScript\r\n    recent enough to understand string enums. This is\r\n    a compatible construct that does not require using\r\n    a more recent version of TypeScript.\r\n\r\n    Also note the \"weird\" way these readonly fields are declared is to work around\r\n    a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    and adopt this syntax for all other static readonly fields.\r\n*/\r\n/* eslint-disable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention */\r\nexport class ContainerStyle {\r\n    static readonly Default: \"default\" = \"default\";\r\n    static readonly Emphasis: \"emphasis\" = \"emphasis\";\r\n    static readonly Accent: \"accent\" = \"accent\";\r\n    static readonly Good: \"good\" = \"good\";\r\n    static readonly Attention: \"attention\" = \"attention\";\r\n    static readonly Warning: \"warning\" = \"warning\";\r\n}\r\n\r\nexport class ActionStyle {\r\n    static readonly Default: \"default\" = \"default\";\r\n    static readonly Positive: \"positive\" = \"positive\";\r\n    static readonly Destructive: \"destructive\" = \"destructive\";\r\n}\r\n\r\nexport class ActionMode {\r\n    static readonly Primary: \"primary\" = \"primary\";\r\n    static readonly Secondary: \"secondary\" = \"secondary\";\r\n}\r\n/* eslint-enable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention */\r\n\r\nexport enum Size {\r\n    Auto,\r\n    Stretch,\r\n    Small,\r\n    Medium,\r\n    Large\r\n}\r\n\r\nexport enum ImageSize {\r\n    Small,\r\n    Medium,\r\n    Large\r\n}\r\n\r\nexport enum ImageSetPresentationStyle {\r\n    Default,\r\n    Stacked\r\n}\r\n\r\nexport enum SizeUnit {\r\n    Weight,\r\n    Pixel\r\n}\r\n\r\nexport enum TextSize {\r\n    Small,\r\n    Default,\r\n    Medium,\r\n    Large,\r\n    ExtraLarge\r\n}\r\n\r\nexport enum InputStyle {\r\n    RevealOnHover,\r\n    Default\r\n}\r\n\r\nexport enum TextWeight {\r\n    Lighter,\r\n    Default,\r\n    Bolder\r\n}\r\n\r\nexport enum FontType {\r\n    Default,\r\n    Monospace\r\n}\r\n\r\nexport enum Spacing {\r\n    None,\r\n    Small,\r\n    Default,\r\n    Medium,\r\n    Large,\r\n    ExtraLarge,\r\n    Padding\r\n}\r\n\r\nexport enum TextColor {\r\n    Default,\r\n    Dark,\r\n    Light,\r\n    Accent,\r\n    Good,\r\n    Warning,\r\n    Attention\r\n}\r\n\r\nexport enum HorizontalAlignment {\r\n    Left,\r\n    Center,\r\n    Right\r\n}\r\n\r\nexport enum VerticalAlignment {\r\n    Top,\r\n    Center,\r\n    Bottom\r\n}\r\n\r\nexport enum ActionAlignment {\r\n    Left,\r\n    Center,\r\n    Right,\r\n    Stretch\r\n}\r\n\r\nexport enum ImageStyle {\r\n    Default,\r\n    Person\r\n}\r\n\r\nexport enum ShowCardActionMode {\r\n    Inline,\r\n    Popup\r\n}\r\n\r\nexport enum Orientation {\r\n    Horizontal,\r\n    Vertical\r\n}\r\n\r\nexport enum FillMode {\r\n    Cover,\r\n    RepeatHorizontally,\r\n    RepeatVertically,\r\n    Repeat\r\n}\r\n\r\nexport enum ActionIconPlacement {\r\n    LeftOfTitle,\r\n    AboveTitle\r\n}\r\n\r\nexport enum InputTextStyle {\r\n    Text,\r\n    Tel,\r\n    Url,\r\n    Email,\r\n    Password\r\n}\r\n\r\nexport enum InputLabelPosition {\r\n    Inline,\r\n    Above\r\n}\r\n\r\nexport enum ValidationPhase {\r\n    Parse,\r\n    ToJSON,\r\n    Validation\r\n}\r\n\r\nexport enum ValidationEvent {\r\n    Hint,\r\n    ActionTypeNotAllowed,\r\n    CollectionCantBeEmpty,\r\n    Deprecated,\r\n    ElementTypeNotAllowed,\r\n    InteractivityNotAllowed,\r\n    InvalidPropertyValue,\r\n    MissingCardType,\r\n    PropertyCantBeNull,\r\n    TooManyActions,\r\n    UnknownActionType,\r\n    UnknownElementType,\r\n    UnsupportedCardVersion,\r\n    DuplicateId,\r\n    UnsupportedProperty,\r\n    RequiredInputsShouldHaveLabel,\r\n    RequiredInputsShouldHaveErrorMessage,\r\n    Other\r\n}\r\n\r\nexport enum ContainerFitStatus {\r\n    FullyInContainer,\r\n    Overflowing,\r\n    FullyOutOfContainer\r\n}\r\n\r\nexport enum TypeErrorType {\r\n    UnknownType,\r\n    ForbiddenType\r\n}\r\n\r\nexport enum RefreshMode {\r\n    Disabled,\r\n    Manual,\r\n    Automatic\r\n}\r\n\r\nexport enum LogLevel {\r\n    Info,\r\n    Warning,\r\n    Error\r\n}\r\n\r\nexport enum CarouselInteractionEvent {\r\n    NavigationNext,\r\n    NavigationPrevious,\r\n    Pagination,\r\n    Autoplay\r\n}\r\n\r\nexport enum ActionRole {\r\n    Button,\r\n    Link,\r\n    Tab,\r\n    Menu,\r\n    MenuItem\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport {\r\n    TargetVersion,\r\n    Version,\r\n    SerializableObject,\r\n    BaseSerializationContext,\r\n    PropertyBag\r\n} from \"./serialization\";\r\n\r\nexport class HostCapabilities extends SerializableObject {\r\n    private _capabilities: { [key: string]: TargetVersion } = {};\r\n\r\n    protected getSchemaKey(): string {\r\n        return \"HostCapabilities\";\r\n    }\r\n\r\n    protected internalParse(source: any, context: BaseSerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        if (source) {\r\n            // eslint-disable-next-line guard-for-in\r\n            for (const name in source) {\r\n                const jsonVersion = source[name];\r\n\r\n                if (typeof jsonVersion === \"string\") {\r\n                    if (jsonVersion === \"*\") {\r\n                        this.addCapability(name, \"*\");\r\n                    } else {\r\n                        const version = Version.parse(jsonVersion, context);\r\n\r\n                        if (version?.isValid) {\r\n                            this.addCapability(name, version);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: BaseSerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        // eslint-disable-next-line guard-for-in\r\n        for (const key in this._capabilities) {\r\n            target[key] = this._capabilities[key];\r\n        }\r\n    }\r\n\r\n    addCapability(name: string, version: TargetVersion) {\r\n        this._capabilities[name] = version;\r\n    }\r\n\r\n    removeCapability(name: string) {\r\n        delete this._capabilities[name];\r\n    }\r\n\r\n    clear() {\r\n        this._capabilities = {};\r\n    }\r\n\r\n    hasCapability(name: string, version: TargetVersion): boolean {\r\n        if (this._capabilities.hasOwnProperty(name)) {\r\n            if (version === \"*\" || this._capabilities[name] === \"*\") {\r\n                return true;\r\n            }\r\n\r\n            return version.compareTo(<Version>this._capabilities[name]) <= 0;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    areAllMet(hostCapabilities: HostCapabilities): boolean {\r\n        for (const capabilityName in this._capabilities) {\r\n            if (\r\n                !hostCapabilities.hasCapability(capabilityName, this._capabilities[capabilityName])\r\n            ) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport * as Utils from \"./utils\";\r\nimport * as Shared from \"./shared\";\r\nimport { HostCapabilities } from \"./host-capabilities\";\r\n\r\nfunction parseHostConfigEnum(\r\n    targetEnum: { [s: number]: string },\r\n    value: string | number,\r\n    defaultValue: number\r\n): number {\r\n    if (typeof value === \"string\") {\r\n        const parsedValue = Utils.parseEnum(targetEnum, value, defaultValue);\r\n\r\n        return parsedValue !== undefined ? parsedValue : defaultValue;\r\n    } else if (typeof value === \"number\") {\r\n        return value;\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport class ColorDefinition {\r\n    default: string = \"#000000\";\r\n    subtle: string = \"#666666\";\r\n\r\n    constructor(defaultColor?: string, subtleColor?: string) {\r\n        if (defaultColor) {\r\n            this.default = defaultColor;\r\n        }\r\n\r\n        if (subtleColor) {\r\n            this.subtle = subtleColor;\r\n        }\r\n    }\r\n\r\n    parse(obj?: any) {\r\n        if (obj) {\r\n            this.default = obj[\"default\"] || this.default;\r\n            this.subtle = obj[\"subtle\"] || this.subtle;\r\n        }\r\n    }\r\n}\r\n\r\nexport class TextColorDefinition extends ColorDefinition {\r\n    readonly highlightColors = new ColorDefinition(\"#22000000\", \"#11000000\");\r\n\r\n    parse(obj?: any) {\r\n        super.parse(obj);\r\n\r\n        if (obj) {\r\n            this.highlightColors.parse(obj[\"highlightColors\"]);\r\n        }\r\n    }\r\n}\r\n\r\nexport class AdaptiveCardConfig {\r\n    allowCustomStyle: boolean = false;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.allowCustomStyle = obj[\"allowCustomStyle\"] || this.allowCustomStyle;\r\n        }\r\n    }\r\n}\r\n\r\nexport class ImageSetConfig {\r\n    imageSize: Enums.Size = Enums.Size.Medium;\r\n    maxImageHeight: number = 100;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.imageSize = obj[\"imageSize\"] != null ? obj[\"imageSize\"] : this.imageSize;\r\n            this.maxImageHeight = Utils.parseNumber(obj[\"maxImageHeight\"], 100)!;\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            imageSize: Enums.Size[this.imageSize],\r\n            maxImageHeight: this.maxImageHeight\r\n        };\r\n    }\r\n}\r\n\r\nexport class MediaConfig {\r\n    defaultPoster?: string;\r\n    allowInlinePlayback: boolean = true;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.defaultPoster = obj[\"defaultPoster\"];\r\n            this.allowInlinePlayback = obj[\"allowInlinePlayback\"] || this.allowInlinePlayback;\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            defaultPoster: this.defaultPoster,\r\n            allowInlinePlayback: this.allowInlinePlayback\r\n        };\r\n    }\r\n}\r\n\r\nexport class TableConfig {\r\n    cellSpacing: number = 8;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.cellSpacing =\r\n                obj.cellSpacing && typeof obj.cellSpacing === \"number\"\r\n                    ? obj.cellSpacing\r\n                    : this.cellSpacing;\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            cellSpacing: this.cellSpacing\r\n        };\r\n    }\r\n}\r\n\r\nexport class BaseTextDefinition {\r\n    size: Enums.TextSize = Enums.TextSize.Default;\r\n    color: Enums.TextColor = Enums.TextColor.Default;\r\n    isSubtle: boolean = false;\r\n    weight: Enums.TextWeight = Enums.TextWeight.Default;\r\n\r\n    constructor(obj?: any) {\r\n        this.parse(obj);\r\n    }\r\n\r\n    parse(obj: any) {\r\n        if (obj) {\r\n            this.size = parseHostConfigEnum(Enums.TextSize, obj[\"size\"], this.size);\r\n            this.color = parseHostConfigEnum(Enums.TextColor, obj[\"color\"], this.color);\r\n            this.isSubtle =\r\n                obj.isSubtle !== undefined && typeof obj.isSubtle === \"boolean\"\r\n                    ? obj.isSubtle\r\n                    : this.isSubtle;\r\n            this.weight = parseHostConfigEnum(\r\n                Enums.TextWeight,\r\n                obj[\"weight\"],\r\n                this.getDefaultWeight()\r\n            );\r\n        }\r\n    }\r\n\r\n    getDefaultWeight(): Enums.TextWeight {\r\n        return Enums.TextWeight.Default;\r\n    }\r\n\r\n    toJSON(): any {\r\n        return {\r\n            size: Enums.TextSize[this.size],\r\n            color: Enums.TextColor[this.color],\r\n            isSubtle: this.isSubtle,\r\n            weight: Enums.TextWeight[this.weight]\r\n        };\r\n    }\r\n}\r\n\r\nexport class TextStyleDefinition extends BaseTextDefinition {\r\n    fontType: Enums.FontType = Enums.FontType.Default;\r\n\r\n    parse(obj: any) {\r\n        super.parse(obj);\r\n\r\n        if (obj) {\r\n            this.fontType = parseHostConfigEnum(Enums.FontType, obj.fontType, this.fontType);\r\n        }\r\n    }\r\n}\r\n\r\nexport class TextStyleSet {\r\n    readonly default: TextStyleDefinition = new TextStyleDefinition();\r\n    readonly heading: TextStyleDefinition = new TextStyleDefinition({\r\n        size: \"Large\",\r\n        weight: \"Bolder\"\r\n    });\r\n    readonly columnHeader: TextStyleDefinition = new TextStyleDefinition({\r\n        weight: \"Bolder\"\r\n    });\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.heading.parse(obj.heading);\r\n            this.columnHeader.parse(obj.columnHeader);\r\n        }\r\n    }\r\n\r\n    getStyleByName(name: string): TextStyleDefinition {\r\n        switch (name.toLowerCase()) {\r\n            case \"heading\":\r\n                return this.heading;\r\n            case \"columnHeader\":\r\n                return this.columnHeader;\r\n            default:\r\n                return this.default;\r\n        }\r\n    }\r\n}\r\n\r\nexport class TextBlockConfig {\r\n    headingLevel?: number;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.headingLevel = Utils.parseNumber(obj.headingLevel);\r\n        }\r\n    }\r\n}\r\n\r\nexport class RequiredInputLabelTextDefinition extends BaseTextDefinition {\r\n    suffix?: string = \" *\";\r\n    suffixColor: Enums.TextColor = Enums.TextColor.Attention;\r\n\r\n    parse(obj?: any) {\r\n        super.parse(obj);\r\n\r\n        if (obj) {\r\n            this.suffix = obj[\"suffix\"] || this.suffix;\r\n            this.suffixColor = parseHostConfigEnum(\r\n                Enums.TextColor,\r\n                obj[\"suffixColor\"],\r\n                this.suffixColor\r\n            );\r\n        }\r\n    }\r\n\r\n    toJSON(): any {\r\n        const result = super.toJSON();\r\n        result[\"suffix\"] = this.suffix;\r\n        result[\"suffixColor\"] = Enums.TextColor[this.suffixColor];\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class InputLabelConfig {\r\n    inputSpacing: Enums.Spacing = Enums.Spacing.Small;\r\n    width: number = 30;\r\n    readonly requiredInputs: RequiredInputLabelTextDefinition =\r\n        new RequiredInputLabelTextDefinition();\r\n    readonly optionalInputs: BaseTextDefinition = new BaseTextDefinition();\r\n    \r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.inputSpacing = parseHostConfigEnum(\r\n                Enums.Spacing,\r\n                obj[\"inputSpacing\"],\r\n                this.inputSpacing\r\n            );\r\n            this.requiredInputs = new RequiredInputLabelTextDefinition(obj[\"requiredInputs\"]);\r\n            this.optionalInputs = new BaseTextDefinition(obj[\"optionalInputs\"]);\r\n            this.width =\r\n                obj[\"width\"] != null ? obj[\"width\"] : this.width;\r\n        }\r\n    }\r\n}\r\n\r\nexport class InputConfig {\r\n    readonly label: InputLabelConfig = new InputLabelConfig();\r\n    readonly errorMessage: BaseTextDefinition = new BaseTextDefinition({\r\n        color: Enums.TextColor.Attention\r\n    });\r\n    readonly debounceTimeInMilliSeconds: number = 0;\r\n    readonly allowDynamicallyFilteredChoiceSet: boolean = true;\r\n    readonly allowRevealOnHoverStyle: boolean = false;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.label = new InputLabelConfig(obj[\"label\"]);\r\n            this.errorMessage = new BaseTextDefinition(obj[\"errorMessage\"]);\r\n            this.allowRevealOnHoverStyle =\r\n                obj[\"allowRevealOnHoverStyle\"] || this.allowRevealOnHoverStyle;\r\n            this.allowDynamicallyFilteredChoiceSet =\r\n                obj[\"allowDynamicallyFilteredChoiceSet\"] || this.allowDynamicallyFilteredChoiceSet;\r\n            this.debounceTimeInMilliSeconds =\r\n                obj[\"debounceTimeInMilliSeconds\"] || this.debounceTimeInMilliSeconds;\r\n        }\r\n    }\r\n}\r\n\r\nexport class FactTextDefinition extends BaseTextDefinition {\r\n    wrap: boolean = true;\r\n\r\n    parse(obj?: any) {\r\n        super.parse(obj);\r\n\r\n        if (obj) {\r\n            this.wrap = obj[\"wrap\"] != null ? obj[\"wrap\"] : this.wrap;\r\n        }\r\n    }\r\n\r\n    toJSON(): any {\r\n        const result = super.toJSON();\r\n        result[\"wrap\"] = this.wrap;\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class FactTitleDefinition extends FactTextDefinition {\r\n    maxWidth?: number = 150;\r\n    weight: Enums.TextWeight = Enums.TextWeight.Bolder;\r\n\r\n    constructor(obj?: any) {\r\n        super(obj);\r\n\r\n        if (obj) {\r\n            this.maxWidth = obj[\"maxWidth\"] != null ? obj[\"maxWidth\"] : this.maxWidth;\r\n            this.weight = parseHostConfigEnum(\r\n                Enums.TextWeight,\r\n                obj[\"weight\"],\r\n                Enums.TextWeight.Bolder\r\n            );\r\n        }\r\n    }\r\n\r\n    getDefaultWeight() {\r\n        return Enums.TextWeight.Bolder;\r\n    }\r\n}\r\n\r\nexport class FactSetConfig {\r\n    readonly title: FactTitleDefinition = new FactTitleDefinition();\r\n    readonly value: FactTextDefinition = new FactTextDefinition();\r\n    spacing: number = 10;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.title = new FactTitleDefinition(obj[\"title\"]);\r\n            this.value = new FactTextDefinition(obj[\"value\"]);\r\n            this.spacing =\r\n                obj.spacing && obj.spacing != null ? obj.spacing && obj.spacing : this.spacing;\r\n        }\r\n    }\r\n}\r\n\r\nexport class ShowCardActionConfig {\r\n    actionMode: Enums.ShowCardActionMode = Enums.ShowCardActionMode.Inline;\r\n    inlineTopMargin: number = 16;\r\n    style?: string = Enums.ContainerStyle.Emphasis;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.actionMode = parseHostConfigEnum(\r\n                Enums.ShowCardActionMode,\r\n                obj[\"actionMode\"],\r\n                Enums.ShowCardActionMode.Inline\r\n            );\r\n            this.inlineTopMargin =\r\n                obj[\"inlineTopMargin\"] != null ? obj[\"inlineTopMargin\"] : this.inlineTopMargin;\r\n            this.style =\r\n                obj[\"style\"] && typeof obj[\"style\"] === \"string\"\r\n                    ? obj[\"style\"]\r\n                    : Enums.ContainerStyle.Emphasis;\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            actionMode: Enums.ShowCardActionMode[this.actionMode],\r\n            inlineTopMargin: this.inlineTopMargin,\r\n            style: this.style\r\n        };\r\n    }\r\n}\r\n\r\nexport class ActionsConfig {\r\n    maxActions: number = 5;\r\n    spacing: Enums.Spacing = Enums.Spacing.Default;\r\n    buttonSpacing: number = 20;\r\n    readonly showCard: ShowCardActionConfig = new ShowCardActionConfig();\r\n    preExpandSingleShowCardAction?: boolean = false;\r\n    actionsOrientation: Enums.Orientation = Enums.Orientation.Horizontal;\r\n    actionAlignment: Enums.ActionAlignment = Enums.ActionAlignment.Left;\r\n    iconPlacement: Enums.ActionIconPlacement = Enums.ActionIconPlacement.LeftOfTitle;\r\n    allowTitleToWrap: boolean = false;\r\n    iconSize: number = 16;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.maxActions = obj[\"maxActions\"] != null ? obj[\"maxActions\"] : this.maxActions;\r\n            this.spacing = parseHostConfigEnum(\r\n                Enums.Spacing,\r\n                obj.spacing && obj.spacing,\r\n                Enums.Spacing.Default\r\n            );\r\n            this.buttonSpacing =\r\n                obj[\"buttonSpacing\"] != null ? obj[\"buttonSpacing\"] : this.buttonSpacing;\r\n            this.showCard = new ShowCardActionConfig(obj[\"showCard\"]);\r\n            this.preExpandSingleShowCardAction = Utils.parseBool(\r\n                obj[\"preExpandSingleShowCardAction\"],\r\n                false\r\n            );\r\n            this.actionsOrientation = parseHostConfigEnum(\r\n                Enums.Orientation,\r\n                obj[\"actionsOrientation\"],\r\n                Enums.Orientation.Horizontal\r\n            );\r\n            this.actionAlignment = parseHostConfigEnum(\r\n                Enums.ActionAlignment,\r\n                obj[\"actionAlignment\"],\r\n                Enums.ActionAlignment.Left\r\n            );\r\n            this.iconPlacement = parseHostConfigEnum(\r\n                Enums.ActionIconPlacement,\r\n                obj[\"iconPlacement\"],\r\n                Enums.ActionIconPlacement.LeftOfTitle\r\n            );\r\n            this.allowTitleToWrap =\r\n                obj[\"allowTitleToWrap\"] != null ? obj[\"allowTitleToWrap\"] : this.allowTitleToWrap;\r\n\r\n            try {\r\n                const sizeAndUnit = Shared.SizeAndUnit.parse(obj[\"iconSize\"]);\r\n\r\n                if (sizeAndUnit.unit === Enums.SizeUnit.Pixel) {\r\n                    this.iconSize = sizeAndUnit.physicalSize;\r\n                }\r\n            } catch (e) {\r\n                // Swallow this, keep default icon size\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            maxActions: this.maxActions,\r\n            spacing: Enums.Spacing[this.spacing],\r\n            buttonSpacing: this.buttonSpacing,\r\n            showCard: this.showCard,\r\n            preExpandSingleShowCardAction: this.preExpandSingleShowCardAction,\r\n            actionsOrientation: Enums.Orientation[this.actionsOrientation],\r\n            actionAlignment: Enums.ActionAlignment[this.actionAlignment]\r\n        };\r\n    }\r\n}\r\n\r\nexport class ColorSetDefinition {\r\n    private parseSingleColor(obj: any, propertyName: string) {\r\n        if (obj) {\r\n            ((<any>this)[propertyName] as TextColorDefinition).parse(obj[propertyName]);\r\n        }\r\n    }\r\n\r\n    default: TextColorDefinition = new TextColorDefinition();\r\n    dark: TextColorDefinition = new TextColorDefinition();\r\n    light: TextColorDefinition = new TextColorDefinition();\r\n    accent: TextColorDefinition = new TextColorDefinition();\r\n    good: TextColorDefinition = new TextColorDefinition();\r\n    warning: TextColorDefinition = new TextColorDefinition();\r\n    attention: TextColorDefinition = new TextColorDefinition();\r\n\r\n    constructor(obj?: any) {\r\n        this.parse(obj);\r\n    }\r\n\r\n    parse(obj: any) {\r\n        if (obj) {\r\n            this.parseSingleColor(obj, \"default\");\r\n            this.parseSingleColor(obj, \"dark\");\r\n            this.parseSingleColor(obj, \"light\");\r\n            this.parseSingleColor(obj, \"accent\");\r\n            this.parseSingleColor(obj, \"good\");\r\n            this.parseSingleColor(obj, \"warning\");\r\n            this.parseSingleColor(obj, \"attention\");\r\n        }\r\n    }\r\n}\r\n\r\nexport class ContainerStyleDefinition {\r\n    backgroundColor?: string;\r\n\r\n    readonly foregroundColors: ColorSetDefinition = new ColorSetDefinition({\r\n        \"default\": { default: \"#333333\", subtle: \"#EE333333\" },\r\n        \"dark\": { default: \"#000000\", subtle: \"#66000000\" },\r\n        \"light\": { default: \"#FFFFFF\", subtle: \"#33000000\" },\r\n        \"accent\": { default: \"#2E89FC\", subtle: \"#882E89FC\" },\r\n        \"good\": { default: \"#028A02\", subtle: \"#DD027502\" },\r\n        \"warning\": { default: \"#E69500\", subtle: \"#DDE69500\" },\r\n        \"attention\": { default: \"#CC3300\", subtle: \"#DDCC3300\" }\r\n    });\r\n\r\n    highlightBackgroundColor?: string;\r\n    highlightForegroundColor?: string;\r\n    borderColor?: string;\r\n\r\n    parse(obj: any) {\r\n        if (obj) {\r\n            this.backgroundColor = obj[\"backgroundColor\"];\r\n\r\n            this.foregroundColors.parse(obj[\"foregroundColors\"]);\r\n\r\n            this.highlightBackgroundColor = obj[\"highlightBackgroundColor\"];\r\n            this.highlightForegroundColor = obj[\"highlightForegroundColor\"];\r\n\r\n            this.borderColor = obj[\"borderColor\"];\r\n        }\r\n    }\r\n\r\n    constructor(obj?: any) {\r\n        this.parse(obj);\r\n    }\r\n\r\n    get isBuiltIn(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nclass BuiltInContainerStyleDefinition extends ContainerStyleDefinition {\r\n    get isBuiltIn(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport interface ILineHeightDefinitions {\r\n    small: number;\r\n    medium: number;\r\n    default: number;\r\n    large: number;\r\n    extraLarge: number;\r\n}\r\n\r\nexport class ContainerStyleSet {\r\n    private _allStyles: { [key: string]: ContainerStyleDefinition } = {};\r\n\r\n    constructor(obj?: any) {\r\n        this._allStyles[Enums.ContainerStyle.Default] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Emphasis] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Accent] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Good] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Attention] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Warning] = new BuiltInContainerStyleDefinition();\r\n\r\n        if (obj) {\r\n            this._allStyles[Enums.ContainerStyle.Default].parse(obj[Enums.ContainerStyle.Default]);\r\n            this._allStyles[Enums.ContainerStyle.Emphasis].parse(\r\n                obj[Enums.ContainerStyle.Emphasis]\r\n            );\r\n            this._allStyles[Enums.ContainerStyle.Accent].parse(obj[Enums.ContainerStyle.Accent]);\r\n            this._allStyles[Enums.ContainerStyle.Good].parse(obj[Enums.ContainerStyle.Good]);\r\n            this._allStyles[Enums.ContainerStyle.Attention].parse(\r\n                obj[Enums.ContainerStyle.Attention]\r\n            );\r\n            this._allStyles[Enums.ContainerStyle.Warning].parse(obj[Enums.ContainerStyle.Warning]);\r\n\r\n            const customStyleArray = obj[\"customStyles\"];\r\n\r\n            if (customStyleArray && Array.isArray(customStyleArray)) {\r\n                for (const customStyle of customStyleArray) {\r\n                    if (customStyle) {\r\n                        const styleName = customStyle[\"name\"];\r\n\r\n                        if (styleName && typeof styleName === \"string\") {\r\n                            if (this._allStyles.hasOwnProperty(styleName)) {\r\n                                this._allStyles[styleName].parse(customStyle[\"style\"]);\r\n                            } else {\r\n                                this._allStyles[styleName] = new ContainerStyleDefinition(\r\n                                    customStyle[\"style\"]\r\n                                );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        const customStyleArray: any[] = [];\r\n\r\n        Object.keys(this._allStyles).forEach((key) => {\r\n            if (!this._allStyles[key].isBuiltIn) {\r\n                customStyleArray.push({\r\n                    name: key,\r\n                    style: this._allStyles[key]\r\n                });\r\n            }\r\n        });\r\n\r\n        const result: any = {\r\n            default: this.default,\r\n            emphasis: this.emphasis\r\n        };\r\n\r\n        if (customStyleArray.length > 0) {\r\n            result.customStyles = customStyleArray;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getStyleByName(\r\n        name: string | undefined,\r\n        defaultValue?: ContainerStyleDefinition\r\n    ): ContainerStyleDefinition {\r\n        if (name && this._allStyles.hasOwnProperty(name)) {\r\n            return this._allStyles[name];\r\n        } else {\r\n            return defaultValue ? defaultValue : this._allStyles[Enums.ContainerStyle.Default];\r\n        }\r\n    }\r\n\r\n    get default(): ContainerStyleDefinition {\r\n        return this._allStyles[Enums.ContainerStyle.Default];\r\n    }\r\n\r\n    get emphasis(): ContainerStyleDefinition {\r\n        return this._allStyles[Enums.ContainerStyle.Emphasis];\r\n    }\r\n}\r\n\r\nexport interface IFontSizeDefinitions {\r\n    small: number;\r\n    default: number;\r\n    medium: number;\r\n    large: number;\r\n    extraLarge: number;\r\n}\r\n\r\nexport interface IFontWeightDefinitions {\r\n    lighter: number;\r\n    default: number;\r\n    bolder: number;\r\n}\r\n\r\nexport class FontTypeDefinition {\r\n    static readonly monospace = new FontTypeDefinition(\"'Courier New', Courier, monospace\");\r\n\r\n    fontFamily?: string = \"Segoe UI,Segoe,Segoe WP,Helvetica Neue,Helvetica,sans-serif\";\r\n\r\n    fontSizes: IFontSizeDefinitions = {\r\n        small: 12,\r\n        default: 14,\r\n        medium: 17,\r\n        large: 21,\r\n        extraLarge: 26\r\n    };\r\n\r\n    fontWeights: IFontWeightDefinitions = {\r\n        lighter: 200,\r\n        default: 400,\r\n        bolder: 600\r\n    };\r\n\r\n    constructor(fontFamily?: string) {\r\n        if (fontFamily) {\r\n            this.fontFamily = fontFamily;\r\n        }\r\n    }\r\n\r\n    parse(obj?: any) {\r\n        this.fontFamily = obj[\"fontFamily\"] || this.fontFamily;\r\n        this.fontSizes = {\r\n            small: (obj.fontSizes && obj.fontSizes[\"small\"]) || this.fontSizes.small,\r\n            default: (obj.fontSizes && obj.fontSizes[\"default\"]) || this.fontSizes.default,\r\n            medium: (obj.fontSizes && obj.fontSizes[\"medium\"]) || this.fontSizes.medium,\r\n            large: (obj.fontSizes && obj.fontSizes[\"large\"]) || this.fontSizes.large,\r\n            extraLarge: (obj.fontSizes && obj.fontSizes[\"extraLarge\"]) || this.fontSizes.extraLarge\r\n        };\r\n        this.fontWeights = {\r\n            lighter: (obj.fontWeights && obj.fontWeights[\"lighter\"]) || this.fontWeights.lighter,\r\n            default: (obj.fontWeights && obj.fontWeights[\"default\"]) || this.fontWeights.default,\r\n            bolder: (obj.fontWeights && obj.fontWeights[\"bolder\"]) || this.fontWeights.bolder\r\n        };\r\n    }\r\n}\r\n\r\nexport class FontTypeSet {\r\n    default: FontTypeDefinition;\r\n    monospace: FontTypeDefinition;\r\n\r\n    constructor(obj?: any) {\r\n        this.default = new FontTypeDefinition();\r\n        this.monospace = new FontTypeDefinition(\"'Courier New', Courier, monospace\");\r\n\r\n        if (obj) {\r\n            this.default.parse(obj[\"default\"]);\r\n            this.monospace.parse(obj[\"monospace\"]);\r\n        }\r\n    }\r\n\r\n    getStyleDefinition(style: Enums.FontType | undefined): FontTypeDefinition {\r\n        switch (style) {\r\n            case Enums.FontType.Monospace:\r\n                return this.monospace;\r\n            case Enums.FontType.Default:\r\n            default:\r\n                return this.default;\r\n        }\r\n    }\r\n}\r\n\r\nexport class CarouselConfig {\r\n    maxCarouselPages: number = 10;\r\n    minAutoplayDelay: number = 5000.0;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            this.maxCarouselPages =\r\n                obj[\"maxCarouselPages\"] != null ? obj[\"maxCarouselPages\"] : this.maxCarouselPages;\r\n            this.minAutoplayDelay =\r\n                obj[\"minAutoplayDelay\"] != null ? obj[\"minAutoplayDelay\"] : this.minAutoplayDelay;\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            maxCarouselPages: this.maxCarouselPages,\r\n            minAutoplayDelay: this.minAutoplayDelay\r\n        };\r\n    }\r\n}\r\n\r\nexport class HostConfig {\r\n    readonly hostCapabilities = new HostCapabilities();\r\n\r\n    private _legacyFontType: FontTypeDefinition;\r\n\r\n    choiceSetInputValueSeparator: string = \",\";\r\n    supportsInteractivity: boolean = true;\r\n    lineHeights?: ILineHeightDefinitions;\r\n    fontTypes?: FontTypeSet;\r\n\r\n    readonly spacing = {\r\n        small: 3,\r\n        default: 8,\r\n        medium: 20,\r\n        large: 30,\r\n        extraLarge: 40,\r\n        padding: 15\r\n    };\r\n\r\n    readonly separator = {\r\n        lineThickness: 1,\r\n        lineColor: \"#EEEEEE\"\r\n    };\r\n\r\n    readonly imageSizes = {\r\n        small: 40,\r\n        medium: 80,\r\n        large: 160\r\n    };\r\n\r\n    readonly containerStyles: ContainerStyleSet = new ContainerStyleSet();\r\n    readonly inputs: InputConfig = new InputConfig();\r\n    readonly actions: ActionsConfig = new ActionsConfig();\r\n    readonly adaptiveCard: AdaptiveCardConfig = new AdaptiveCardConfig();\r\n    readonly imageSet: ImageSetConfig = new ImageSetConfig();\r\n    readonly media: MediaConfig = new MediaConfig();\r\n    readonly factSet: FactSetConfig = new FactSetConfig();\r\n    readonly table: TableConfig = new TableConfig();\r\n    readonly textStyles: TextStyleSet = new TextStyleSet();\r\n    readonly textBlock: TextBlockConfig = new TextBlockConfig();\r\n    readonly carousel: CarouselConfig = new CarouselConfig();\r\n\r\n    cssClassNamePrefix?: string;\r\n    alwaysAllowBleed: boolean = false;\r\n\r\n    constructor(obj?: any) {\r\n        if (obj) {\r\n            if (typeof obj === \"string\" || obj instanceof String) {\r\n                obj = JSON.parse(obj as string);\r\n            }\r\n\r\n            this.choiceSetInputValueSeparator =\r\n                obj && typeof obj[\"choiceSetInputValueSeparator\"] === \"string\"\r\n                    ? obj[\"choiceSetInputValueSeparator\"]\r\n                    : this.choiceSetInputValueSeparator;\r\n            this.supportsInteractivity =\r\n                obj && typeof obj[\"supportsInteractivity\"] === \"boolean\"\r\n                    ? obj[\"supportsInteractivity\"]\r\n                    : this.supportsInteractivity;\r\n\r\n            this._legacyFontType = new FontTypeDefinition();\r\n            this._legacyFontType.parse(obj);\r\n\r\n            if (obj.fontTypes) {\r\n                this.fontTypes = new FontTypeSet(obj.fontTypes);\r\n            }\r\n\r\n            if (obj.lineHeights) {\r\n                this.lineHeights = {\r\n                    small: obj.lineHeights[\"small\"],\r\n                    default: obj.lineHeights[\"default\"],\r\n                    medium: obj.lineHeights[\"medium\"],\r\n                    large: obj.lineHeights[\"large\"],\r\n                    extraLarge: obj.lineHeights[\"extraLarge\"]\r\n                };\r\n            }\r\n\r\n            this.imageSizes = {\r\n                small: (obj.imageSizes && obj.imageSizes[\"small\"]) || this.imageSizes.small,\r\n                medium: (obj.imageSizes && obj.imageSizes[\"medium\"]) || this.imageSizes.medium,\r\n                large: (obj.imageSizes && obj.imageSizes[\"large\"]) || this.imageSizes.large\r\n            };\r\n\r\n            this.containerStyles = new ContainerStyleSet(obj[\"containerStyles\"]);\r\n            this.spacing = {\r\n                small: (obj.spacing && obj.spacing[\"small\"]) || this.spacing.small,\r\n                default: (obj.spacing && obj.spacing[\"default\"]) || this.spacing.default,\r\n                medium: (obj.spacing && obj.spacing[\"medium\"]) || this.spacing.medium,\r\n                large: (obj.spacing && obj.spacing[\"large\"]) || this.spacing.large,\r\n                extraLarge: (obj.spacing && obj.spacing[\"extraLarge\"]) || this.spacing.extraLarge,\r\n                padding: (obj.spacing && obj.spacing[\"padding\"]) || this.spacing.padding\r\n            };\r\n\r\n            this.separator = {\r\n                lineThickness:\r\n                    (obj.separator && obj.separator[\"lineThickness\"]) ||\r\n                    this.separator.lineThickness,\r\n                lineColor: (obj.separator && obj.separator[\"lineColor\"]) || this.separator.lineColor\r\n            };\r\n\r\n            this.inputs = new InputConfig(obj.inputs || this.inputs);\r\n            this.actions = new ActionsConfig(obj.actions || this.actions);\r\n            this.adaptiveCard = new AdaptiveCardConfig(obj.adaptiveCard || this.adaptiveCard);\r\n            this.imageSet = new ImageSetConfig(obj[\"imageSet\"]);\r\n            this.factSet = new FactSetConfig(obj[\"factSet\"]);\r\n            this.textStyles = new TextStyleSet(obj[\"textStyles\"]);\r\n            this.textBlock = new TextBlockConfig(obj[\"textBlock\"]);\r\n            this.carousel = new CarouselConfig(obj[\"carousel\"]);\r\n        }\r\n    }\r\n\r\n    getFontTypeDefinition(style?: Enums.FontType): FontTypeDefinition {\r\n        if (this.fontTypes) {\r\n            return this.fontTypes.getStyleDefinition(style);\r\n        } else {\r\n            return style === Enums.FontType.Monospace\r\n                ? FontTypeDefinition.monospace\r\n                : this._legacyFontType;\r\n        }\r\n    }\r\n\r\n    getEffectiveSpacing(spacing: Enums.Spacing): number {\r\n        switch (spacing) {\r\n            case Enums.Spacing.Small:\r\n                return this.spacing.small;\r\n            case Enums.Spacing.Default:\r\n                return this.spacing.default;\r\n            case Enums.Spacing.Medium:\r\n                return this.spacing.medium;\r\n            case Enums.Spacing.Large:\r\n                return this.spacing.large;\r\n            case Enums.Spacing.ExtraLarge:\r\n                return this.spacing.extraLarge;\r\n            case Enums.Spacing.Padding:\r\n                return this.spacing.padding;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    paddingDefinitionToSpacingDefinition(\r\n        paddingDefinition: Shared.PaddingDefinition\r\n    ): Shared.SpacingDefinition {\r\n        return new Shared.SpacingDefinition(\r\n            this.getEffectiveSpacing(paddingDefinition.top),\r\n            this.getEffectiveSpacing(paddingDefinition.right),\r\n            this.getEffectiveSpacing(paddingDefinition.bottom),\r\n            this.getEffectiveSpacing(paddingDefinition.left)\r\n        );\r\n    }\r\n\r\n    makeCssClassNames(...classNames: string[]): string[] {\r\n        const result: string[] = [];\r\n\r\n        for (const className of classNames) {\r\n            result.push((this.cssClassNamePrefix ? this.cssClassNamePrefix + \"-\" : \"\") + className);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    makeCssClassName(...classNames: string[]): string {\r\n        const result = this.makeCssClassNames(...classNames).join(\" \");\r\n\r\n        return result ? result : \"\";\r\n    }\r\n\r\n    get fontFamily(): string | undefined {\r\n        return this._legacyFontType.fontFamily;\r\n    }\r\n\r\n    set fontFamily(value: string | undefined) {\r\n        this._legacyFontType.fontFamily = value;\r\n    }\r\n\r\n    get fontSizes(): IFontSizeDefinitions {\r\n        return this._legacyFontType.fontSizes;\r\n    }\r\n\r\n    get fontWeights(): IFontWeightDefinitions {\r\n        return this._legacyFontType.fontWeights;\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport const defaultHostConfig: HostConfig = new HostConfig({\r\n    supportsInteractivity: true,\r\n    spacing: {\r\n        small: 10,\r\n        default: 20,\r\n        medium: 30,\r\n        large: 40,\r\n        extraLarge: 50,\r\n        padding: 20\r\n    },\r\n    separator: {\r\n        lineThickness: 1,\r\n        lineColor: \"#EEEEEE\"\r\n    },\r\n    fontTypes: {\r\n        default: {\r\n            fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        },\r\n        monospace: {\r\n            fontFamily: \"'Courier New', Courier, monospace\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        }\r\n    },\r\n    imageSizes: {\r\n        small: 40,\r\n        medium: 80,\r\n        large: 160\r\n    },\r\n    containerStyles: {\r\n        default: {\r\n            backgroundColor: \"#FFFFFF\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        emphasis: {\r\n            backgroundColor: \"#08000000\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        accent: {\r\n            backgroundColor: \"#C7DEF9\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        good: {\r\n            backgroundColor: \"#CCFFCC\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        attention: {\r\n            backgroundColor: \"#FFC5B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        warning: {\r\n            backgroundColor: \"#FFE2B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        }\r\n    },\r\n    inputs: {\r\n        label: {\r\n            requiredInputs: {\r\n                weight: Enums.TextWeight.Bolder,\r\n                suffix: \" *\",\r\n                suffixColor: Enums.TextColor.Attention\r\n            },\r\n            optionalInputs: {\r\n                weight: Enums.TextWeight.Bolder\r\n            }\r\n        },\r\n        errorMessage: {\r\n            color: Enums.TextColor.Attention,\r\n            weight: Enums.TextWeight.Bolder\r\n        },\r\n        debounceTimeInMilliSeconds: 250\r\n    },\r\n    actions: {\r\n        maxActions: 5,\r\n        spacing: Enums.Spacing.Default,\r\n        buttonSpacing: 10,\r\n        showCard: {\r\n            actionMode: Enums.ShowCardActionMode.Inline,\r\n            inlineTopMargin: 16\r\n        },\r\n        actionsOrientation: Enums.Orientation.Horizontal,\r\n        actionAlignment: Enums.ActionAlignment.Left\r\n    },\r\n    adaptiveCard: {\r\n        allowCustomStyle: false\r\n    },\r\n    imageSet: {\r\n        imageSize: Enums.Size.Medium,\r\n        maxImageHeight: 100\r\n    },\r\n    factSet: {\r\n        title: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Bolder,\r\n            wrap: true,\r\n            maxWidth: 150\r\n        },\r\n        value: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Default,\r\n            wrap: true\r\n        },\r\n        spacing: 10\r\n    },\r\n    carousel: {\r\n        maxCarouselPages: 10,\r\n        minAutoplayDuration: 5000\r\n    },\r\n    textBlock: {\r\n        headingLevel: 2\r\n    }\r\n});\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { CardElement, Action } from \"./card-elements\";\r\nimport { SerializableObject, Version, Versions } from \"./serialization\";\r\n\r\nexport interface ITypeRegistration<T extends SerializableObject> {\r\n    typeName: string;\r\n    objectType: { new (): T };\r\n    schemaVersion: Version;\r\n}\r\n\r\nexport class CardObjectRegistry<T extends SerializableObject> {\r\n    private _items: { [typeName: string]: ITypeRegistration<T> } = {};\r\n\r\n    findByName(typeName: string): ITypeRegistration<T> | undefined {\r\n        return this._items.hasOwnProperty(typeName) ? this._items[typeName] : undefined;\r\n    }\r\n\r\n    clear() {\r\n        this._items = {};\r\n    }\r\n\r\n    copyTo(target: CardObjectRegistry<T>) {\r\n        const keys = Object.keys(this._items);\r\n\r\n        for (const key of keys) {\r\n            const typeRegistration = this._items[key];\r\n\r\n            target.register(\r\n                typeRegistration.typeName,\r\n                typeRegistration.objectType,\r\n                typeRegistration.schemaVersion\r\n            );\r\n        }\r\n    }\r\n\r\n    register(\r\n        typeName: string,\r\n        objectType: { new (): T },\r\n        schemaVersion: Version = Versions.v1_0\r\n    ) {\r\n        let registrationInfo = this.findByName(typeName);\r\n\r\n        if (registrationInfo !== undefined) {\r\n            registrationInfo.objectType = objectType;\r\n        } else {\r\n            registrationInfo = {\r\n                typeName: typeName,\r\n                objectType: objectType,\r\n                schemaVersion: schemaVersion\r\n            };\r\n        }\r\n\r\n        this._items[typeName] = registrationInfo;\r\n    }\r\n\r\n    unregister(typeName: string) {\r\n        delete this._items[typeName];\r\n    }\r\n\r\n    createInstance(typeName: string, targetVersion: Version): T | undefined {\r\n        const registrationInfo = this.findByName(typeName);\r\n\r\n        return registrationInfo && registrationInfo.schemaVersion.compareTo(targetVersion) <= 0\r\n            ? new registrationInfo.objectType()\r\n            : undefined;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return Object.keys(this._items).length;\r\n    }\r\n\r\n    getItemAt(index: number): ITypeRegistration<T> {\r\n        return Object.keys(this._items).map((e) => this._items[e])[index];\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nexport class GlobalRegistry {\r\n    private static _elements?: CardObjectRegistry<CardElement>;\r\n    private static _actions?: CardObjectRegistry<Action>;\r\n\r\n    static populateWithDefaultElements(registry: CardObjectRegistry<CardElement>) {\r\n        registry.clear();\r\n\r\n        GlobalRegistry.defaultElements.copyTo(registry);\r\n    }\r\n\r\n    static populateWithDefaultActions(registry: CardObjectRegistry<Action>) {\r\n        registry.clear();\r\n\r\n        GlobalRegistry.defaultActions.copyTo(registry);\r\n    }\r\n\r\n    static readonly defaultElements = new CardObjectRegistry<CardElement>();\r\n    static readonly defaultActions = new CardObjectRegistry<Action>();\r\n    static get elements(): CardObjectRegistry<CardElement> {\r\n        if (!GlobalRegistry._elements) {\r\n            GlobalRegistry._elements = new CardObjectRegistry<CardElement>();\r\n            GlobalRegistry.populateWithDefaultElements(GlobalRegistry._elements);\r\n        }\r\n\r\n        return GlobalRegistry._elements;\r\n    }\r\n\r\n    static get actions(): CardObjectRegistry<Action> {\r\n        if (!GlobalRegistry._actions) {\r\n            GlobalRegistry._actions = new CardObjectRegistry<Action>();\r\n            GlobalRegistry.populateWithDefaultActions(GlobalRegistry._actions);\r\n        }\r\n\r\n        return GlobalRegistry._actions;\r\n    }\r\n\r\n    static reset() {\r\n        GlobalRegistry._elements = undefined;\r\n        GlobalRegistry._actions = undefined;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { GlobalSettings, SizeAndUnit } from \"./shared\";\r\nimport * as Utils from \"./utils\";\r\nimport * as Enums from \"./enums\";\r\nimport { Strings } from \"./strings\";\r\n\r\nexport interface IValidationEvent {\r\n    source?: SerializableObject;\r\n    phase: Enums.ValidationPhase;\r\n    event: Enums.ValidationEvent;\r\n    message: string;\r\n}\r\n\r\nexport class Version {\r\n    private _versionString: string;\r\n    private _major: number;\r\n    private _minor: number;\r\n    private _isValid: boolean = true;\r\n    private _label?: string;\r\n\r\n    constructor(major: number = 1, minor: number = 1, label?: string) {\r\n        this._major = major;\r\n        this._minor = minor;\r\n        this._label = label;\r\n    }\r\n\r\n    static parse(versionString: string, context: BaseSerializationContext): Version | undefined {\r\n        if (!versionString) {\r\n            return undefined;\r\n        }\r\n\r\n        const result = new Version();\r\n        result._versionString = versionString;\r\n\r\n        const regEx = /(\\d+).(\\d+)/gi;\r\n        const matches = regEx.exec(versionString);\r\n\r\n        if (matches != null && matches.length === 3) {\r\n            result._major = parseInt(matches[1]);\r\n            result._minor = parseInt(matches[2]);\r\n        } else {\r\n            result._isValid = false;\r\n        }\r\n\r\n        if (!result._isValid) {\r\n            context.logParseEvent(\r\n                undefined,\r\n                Enums.ValidationEvent.InvalidPropertyValue,\r\n                Strings.errors.invalidVersionString(result._versionString)\r\n            );\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    toString(): string {\r\n        return !this._isValid ? this._versionString : this._major + \".\" + this._minor;\r\n    }\r\n\r\n    toJSON(): any {\r\n        return this.toString();\r\n    }\r\n\r\n    compareTo(otherVersion: Version): number {\r\n        if (!this.isValid || !otherVersion.isValid) {\r\n            throw new Error(\"Cannot compare invalid version.\");\r\n        }\r\n\r\n        if (this.major > otherVersion.major) {\r\n            return 1;\r\n        } else if (this.major < otherVersion.major) {\r\n            return -1;\r\n        } else if (this.minor > otherVersion.minor) {\r\n            return 1;\r\n        } else if (this.minor < otherVersion.minor) {\r\n            return -1;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    get label(): string {\r\n        return this._label ? this._label : this.toString();\r\n    }\r\n\r\n    get major(): number {\r\n        return this._major;\r\n    }\r\n\r\n    get minor(): number {\r\n        return this._minor;\r\n    }\r\n\r\n    get isValid(): boolean {\r\n        return this._isValid;\r\n    }\r\n}\r\n\r\nexport type TargetVersion = Version | \"*\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nexport class Versions {\r\n    /* eslint-disable @typescript-eslint/naming-convention */\r\n    static readonly v1_0 = new Version(1, 0);\r\n    static readonly v1_1 = new Version(1, 1);\r\n    static readonly v1_2 = new Version(1, 2);\r\n    static readonly v1_3 = new Version(1, 3);\r\n    static readonly v1_4 = new Version(1, 4);\r\n    static readonly v1_5 = new Version(1, 5);\r\n    static readonly v1_6 = new Version(1, 6);\r\n    static readonly latest = Versions.v1_6;\r\n    // If preview tag is added/removed from any version,\r\n    // don't forget to update .ac-schema-version-1-?::after too in adaptivecards-site\\themes\\adaptivecards\\source\\css\\style.css\r\n    /* eslint-enable @typescript-eslint/naming-convention */\r\n\r\n    static getAllDeclaredVersions(): Version[] {\r\n        const ctor = <any>Versions;\r\n        const properties: Version[] = [];\r\n\r\n        for (const propertyName in ctor) {\r\n            if (propertyName.match(/^v[0-9_]*$/)) {\r\n                // filter latest\r\n                try {\r\n                    const propertyValue = ctor[propertyName];\r\n\r\n                    if (propertyValue instanceof Version) {\r\n                        properties.push(propertyValue);\r\n                    }\r\n                } catch {\r\n                    // If a property happens to have a getter function and\r\n                    // it throws an exception, we need to catch it here\r\n                }\r\n            }\r\n        }\r\n        return properties.sort((v1: Version, v2: Version) => v1.compareTo(v2));\r\n    }\r\n}\r\n\r\nexport function isVersionLessOrEqual(\r\n    version: TargetVersion,\r\n    targetVersion: TargetVersion\r\n): boolean {\r\n    if (version instanceof Version) {\r\n        if (targetVersion instanceof Version) {\r\n            return targetVersion.compareTo(version) >= 0;\r\n        } else {\r\n            // Target version is *\r\n            return true;\r\n        }\r\n    } else {\r\n        // Version is *\r\n        return true;\r\n    }\r\n}\r\n\r\nexport abstract class BaseSerializationContext {\r\n    private _validationEvents: IValidationEvent[] = [];\r\n\r\n    toJSONOriginalParam: any;\r\n    targetVersion: Version;\r\n\r\n    constructor(targetVersion: Version = Versions.latest) {\r\n        this.targetVersion = targetVersion;\r\n    }\r\n    \r\n    private isTemplateString(value: any) {\r\n        if (typeof value === \"string\") {\r\n            return value.startsWith(\"${\");\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private tryDeleteValue(target: { [key: string]: any }, propertyName: string) {\r\n        if (!GlobalSettings.enableFullJsonRoundTrip) {\r\n            delete target[propertyName];\r\n        }\r\n    }\r\n\r\n    private tryDeleteDefaultValue(target: { [key: string]: any }, propertyName: string) {\r\n        if (!GlobalSettings.enableFullJsonRoundTrip || !this.isTemplateString(target[propertyName])) {\r\n            delete target[propertyName];\r\n        }\r\n    }\r\n\r\n    serializeValue(\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue: any,\r\n        defaultValue: any = undefined,\r\n        forceDeleteIfNullOrDefault: boolean = false\r\n    ) {\r\n        if (\r\n            propertyValue === null ||\r\n            propertyValue === undefined\r\n        ) {\r\n            if (!GlobalSettings.enableFullJsonRoundTrip || forceDeleteIfNullOrDefault) {\r\n                delete target[propertyName];\r\n            }\r\n        } else if (propertyValue === defaultValue) {\r\n            if (!GlobalSettings.enableFullJsonRoundTrip || forceDeleteIfNullOrDefault || !this.isTemplateString(target[propertyName])) {\r\n                delete target[propertyName];\r\n            }\r\n        } else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    }\r\n\r\n    serializeString(\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue?: string,\r\n        defaultValue?: string\r\n    ) {\r\n        if (\r\n            propertyValue === null ||\r\n            propertyValue === undefined\r\n        ) {\r\n            this.tryDeleteValue(target, propertyName);\r\n        } else if (propertyValue === defaultValue) {\r\n            this.tryDeleteDefaultValue(target, propertyName);\r\n        } else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    }\r\n\r\n    serializeBool(\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue?: boolean,\r\n        defaultValue?: boolean\r\n    ) {\r\n        if (\r\n            propertyValue === null ||\r\n            propertyValue === undefined\r\n        ) {\r\n            this.tryDeleteValue(target, propertyName);\r\n        } else if (propertyValue === defaultValue) {\r\n            this.tryDeleteDefaultValue(target, propertyName);\r\n        } else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    }\r\n\r\n    serializeNumber(\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue?: number,\r\n        defaultValue?: number\r\n    ) {\r\n        if (\r\n            propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            isNaN(propertyValue)\r\n        ) {\r\n            this.tryDeleteValue(target, propertyName);\r\n        } else if (propertyValue === defaultValue) {\r\n            this.tryDeleteDefaultValue(target, propertyName);\r\n        } else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    }\r\n\r\n    serializeEnum(\r\n        enumType: { [s: number]: string },\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue: number | undefined,\r\n        defaultValue: number | undefined = undefined\r\n    ) {\r\n        if (\r\n            propertyValue === null ||\r\n            propertyValue === undefined\r\n        ) {\r\n            this.tryDeleteValue(target, propertyName);\r\n        } else if (propertyValue === defaultValue) {\r\n            this.tryDeleteDefaultValue(target, propertyName);\r\n        } else {\r\n            target[propertyName] = enumType[propertyValue];\r\n        }\r\n    }\r\n\r\n    serializeArray(\r\n        target: { [key: string]: any },\r\n        propertyName: string,\r\n        propertyValue: any[] | undefined\r\n    ) {\r\n        const items = [];\r\n\r\n        if (propertyValue) {\r\n            for (const item of propertyValue) {\r\n                let serializedItem: any = undefined;\r\n\r\n                if (item instanceof SerializableObject) {\r\n                    serializedItem = item.toJSON(this);\r\n                } else if (item.toJSON) {\r\n                    serializedItem = item.toJSON();\r\n                } else {\r\n                    serializedItem = item;\r\n                }\r\n\r\n                if (serializedItem !== undefined) {\r\n                    items.push(serializedItem);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (items.length === 0) {\r\n            if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {\r\n                delete target[propertyName];\r\n            }\r\n        } else {\r\n            this.serializeValue(target, propertyName, items);\r\n        }\r\n    }\r\n\r\n    clearEvents() {\r\n        this._validationEvents = [];\r\n    }\r\n\r\n    logEvent(\r\n        source: SerializableObject | undefined,\r\n        phase: Enums.ValidationPhase,\r\n        event: Enums.ValidationEvent,\r\n        message: string\r\n    ) {\r\n        this._validationEvents.push({\r\n            source: source,\r\n            phase: phase,\r\n            event: event,\r\n            message: message\r\n        });\r\n    }\r\n\r\n    logParseEvent(\r\n        source: SerializableObject | undefined,\r\n        event: Enums.ValidationEvent,\r\n        message: string\r\n    ) {\r\n        this.logEvent(source, Enums.ValidationPhase.Parse, event, message);\r\n    }\r\n\r\n    getEventAt(index: number): IValidationEvent {\r\n        return this._validationEvents[index];\r\n    }\r\n\r\n    get eventCount(): number {\r\n        return this._validationEvents.length;\r\n    }\r\n}\r\n\r\nclass SimpleSerializationContext extends BaseSerializationContext {}\r\n\r\nexport class PropertyDefinition {\r\n    private static _sequentialNumber: number = 0;\r\n\r\n    getInternalName(): string {\r\n        return this.name;\r\n    }\r\n\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): any {\r\n        return source[this.name];\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: any,\r\n        context: BaseSerializationContext\r\n    ): void {\r\n        context.serializeValue(target, this.name, value, this.defaultValue);\r\n    }\r\n\r\n    readonly sequentialNumber: number;\r\n\r\n    isSerializationEnabled: boolean = true;\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly defaultValue?: any,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => any\r\n    ) {\r\n        this.sequentialNumber = PropertyDefinition._sequentialNumber;\r\n\r\n        PropertyDefinition._sequentialNumber++;\r\n    }\r\n}\r\n\r\nexport class StringProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): string | undefined {\r\n        const parsedValue = Utils.parseString(source[this.name], this.defaultValue);\r\n        const isUndefined =\r\n            parsedValue === undefined || (parsedValue === \"\" && this.treatEmptyAsUndefined);\r\n\r\n        if (!isUndefined && this.regEx !== undefined) {\r\n            const matches = this.regEx.exec(parsedValue);\r\n\r\n            if (!matches) {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidPropertyValue(parsedValue, this.name)\r\n                );\r\n\r\n                return undefined;\r\n            }\r\n        }\r\n\r\n        return parsedValue;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: string | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeString(\r\n            target,\r\n            this.name,\r\n            value === \"\" && this.treatEmptyAsUndefined ? undefined : value,\r\n            this.defaultValue\r\n        );\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly treatEmptyAsUndefined: boolean = true,\r\n        readonly regEx?: RegExp,\r\n        readonly defaultValue?: string,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => string\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n    }\r\n}\r\n\r\nexport class BoolProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): boolean | undefined {\r\n        return Utils.parseBool(source[this.name], this.defaultValue);\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: object,\r\n        value: boolean | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeBool(target, this.name, value, this.defaultValue);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly defaultValue?: boolean,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => any\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n    }\r\n}\r\n\r\nexport class NumProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): number | undefined {\r\n        return Utils.parseNumber(source[this.name], this.defaultValue);\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: number | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeNumber(target, this.name, value, this.defaultValue);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly defaultValue?: number,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => any\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n    }\r\n}\r\n\r\nexport class PixelSizeProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): number | undefined {\r\n        let result: number | undefined = undefined;\r\n        const value = source[this.name];\r\n\r\n        if (typeof value === \"string\") {\r\n            let isValid = false;\r\n\r\n            try {\r\n                const size = SizeAndUnit.parse(value, true);\r\n\r\n                if (size.unit === Enums.SizeUnit.Pixel) {\r\n                    result = size.physicalSize;\r\n\r\n                    isValid = true;\r\n                }\r\n            } catch {\r\n                // Do nothing. A parse error is emitted below\r\n            }\r\n\r\n            if (!isValid) {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidPropertyValue(source[this.name], this.name)\r\n                );\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: number | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeValue(\r\n            target,\r\n            this.name,\r\n            typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined\r\n        );\r\n    }\r\n}\r\n\r\nexport interface IVersionedValue<TValue> {\r\n    value: TValue;\r\n    targetVersion?: Version;\r\n}\r\n\r\nexport class StringArrayProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): string[] | undefined {\r\n        const sourceValue = source[this.name];\r\n\r\n        if (sourceValue === undefined || !Array.isArray(sourceValue)) {\r\n            return this.defaultValue;\r\n        }\r\n\r\n        const result: string[] = [];\r\n\r\n        for (const value of sourceValue) {\r\n            if (typeof value === \"string\") {\r\n                result.push(value);\r\n            } else {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    Enums.ValidationEvent.InvalidPropertyValue,\r\n                    `Invalid array value \"${JSON.stringify(\r\n                        value\r\n                    )}\" of type \"${typeof value}\" ignored for \"${this.name}\".`\r\n                );\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: string[] | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeArray(target, this.name, value);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly defaultValue?: string[],\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => string[] | undefined\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n    }\r\n}\r\n\r\nexport class ValueSetProperty extends PropertyDefinition {\r\n    isValidValue(value: string, context: BaseSerializationContext): boolean {\r\n        for (const versionedValue of this.values) {\r\n            if (value.toLowerCase() === versionedValue.value.toLowerCase()) {\r\n                const targetVersion = versionedValue.targetVersion\r\n                    ? versionedValue.targetVersion\r\n                    : this.targetVersion;\r\n\r\n                return targetVersion.compareTo(context.targetVersion) <= 0;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): string | undefined {\r\n        const sourceValue = source[this.name];\r\n\r\n        if (sourceValue === undefined) {\r\n            return this.defaultValue;\r\n        }\r\n\r\n        if (typeof sourceValue === \"string\") {\r\n            for (const versionedValue of this.values) {\r\n                if (sourceValue.toLowerCase() === versionedValue.value.toLowerCase()) {\r\n                    const targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        return versionedValue.value;\r\n                    } else {\r\n                        context.logParseEvent(\r\n                            sender,\r\n                            Enums.ValidationEvent.InvalidPropertyValue,\r\n                            Strings.errors.propertyValueNotSupported(\r\n                                sourceValue,\r\n                                this.name,\r\n                                targetVersion.toString(),\r\n                                context.targetVersion.toString()\r\n                            )\r\n                        );\r\n\r\n                        return this.defaultValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        context.logParseEvent(\r\n            sender,\r\n            Enums.ValidationEvent.InvalidPropertyValue,\r\n            Strings.errors.invalidPropertyValue(sourceValue, this.name)\r\n        );\r\n\r\n        return this.defaultValue;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: string | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        let invalidValue = false;\r\n\r\n        if (value !== undefined) {\r\n            invalidValue = true;\r\n\r\n            for (const versionedValue of this.values) {\r\n                if (versionedValue.value === value) {\r\n                    const targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        invalidValue = false;\r\n\r\n                        break;\r\n                    } else {\r\n                        context.logEvent(\r\n                            sender,\r\n                            Enums.ValidationPhase.ToJSON,\r\n                            Enums.ValidationEvent.InvalidPropertyValue,\r\n                            Strings.errors.propertyValueNotSupported(\r\n                                value,\r\n                                this.name,\r\n                                targetVersion.toString(),\r\n                                context.targetVersion.toString()\r\n                            )\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!invalidValue) {\r\n            context.serializeValue(target, this.name, value, this.defaultValue, true);\r\n        }\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly values: IVersionedValue<string>[],\r\n        readonly defaultValue?: string,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => string\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n    }\r\n}\r\n\r\nexport class EnumProperty<TEnum extends { [s: number]: string }> extends PropertyDefinition {\r\n    private _values: IVersionedValue<number>[] = [];\r\n\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): number | undefined {\r\n        const sourceValue = source[this.name];\r\n\r\n        if (typeof sourceValue !== \"string\") {\r\n            return this.defaultValue;\r\n        }\r\n\r\n        const enumValue = Utils.getEnumValueByName(this.enumType, sourceValue);\r\n\r\n        if (enumValue !== undefined) {\r\n            for (const versionedValue of this.values) {\r\n                if (versionedValue.value === enumValue) {\r\n                    const targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        return enumValue;\r\n                    } else {\r\n                        context.logParseEvent(\r\n                            sender,\r\n                            Enums.ValidationEvent.InvalidPropertyValue,\r\n                            Strings.errors.propertyValueNotSupported(\r\n                                sourceValue,\r\n                                this.name,\r\n                                targetVersion.toString(),\r\n                                context.targetVersion.toString()\r\n                            )\r\n                        );\r\n\r\n                        return this.defaultValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        context.logParseEvent(\r\n            sender,\r\n            Enums.ValidationEvent.InvalidPropertyValue,\r\n            Strings.errors.invalidPropertyValue(sourceValue, this.name)\r\n        );\r\n\r\n        return this.defaultValue;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: number | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        let invalidValue = false;\r\n\r\n        if (value !== undefined) {\r\n            invalidValue = true;\r\n\r\n            for (const versionedValue of this.values) {\r\n                if (versionedValue.value === value) {\r\n                    const targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        invalidValue = false;\r\n\r\n                        break;\r\n                    } else {\r\n                        context.logEvent(\r\n                            sender,\r\n                            Enums.ValidationPhase.ToJSON,\r\n                            Enums.ValidationEvent.InvalidPropertyValue,\r\n                            Strings.errors.invalidPropertyValue(value, this.name)\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!invalidValue) {\r\n            context.serializeEnum(this.enumType, target, this.name, value, this.defaultValue);\r\n        }\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly enumType: TEnum,\r\n        readonly defaultValue?: number,\r\n        values?: IVersionedValue<number>[],\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => number\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n\r\n        if (!values) {\r\n            // eslint-disable-next-line guard-for-in\r\n            for (const key in enumType) {\r\n                const keyAsNumber = parseInt(key, 10);\r\n\r\n                if (keyAsNumber >= 0) {\r\n                    this._values.push({ value: keyAsNumber });\r\n                }\r\n            }\r\n        } else {\r\n            this._values = values;\r\n        }\r\n    }\r\n\r\n    get values(): IVersionedValue<number>[] {\r\n        return this._values;\r\n    }\r\n}\r\n\r\nexport type SerializableObjectType = { new (): SerializableObject };\r\n\r\nexport class SerializableObjectProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): SerializableObject | undefined {\r\n        const sourceValue = source[this.name];\r\n\r\n        if (sourceValue === undefined) {\r\n            return this.onGetInitialValue ? this.onGetInitialValue(sender) : this.defaultValue;\r\n        }\r\n\r\n        const result = new this.objectType();\r\n        result.parse(sourceValue, context);\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: SerializableObject | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        let serializedValue: object | undefined = undefined;\r\n\r\n        if (value !== undefined && !value.hasAllDefaultValues()) {\r\n            serializedValue = value.toJSON(context);\r\n        }\r\n\r\n        if (typeof serializedValue === \"object\" && Object.keys(serializedValue).length === 0) {\r\n            serializedValue = undefined;\r\n        }\r\n\r\n        context.serializeValue(target, this.name, serializedValue, this.defaultValue, true);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly objectType: SerializableObjectType,\r\n        readonly nullable: boolean = false,\r\n        defaultValue?: SerializableObject\r\n    ) {\r\n        super(targetVersion, name, defaultValue, (sender: SerializableObject) => {\r\n            return this.nullable ? undefined : new this.objectType();\r\n        });\r\n    }\r\n}\r\n\r\nexport class SerializableObjectCollectionProperty extends PropertyDefinition {\r\n    parse(\r\n        sender: SerializableObject,\r\n        source: PropertyBag,\r\n        context: BaseSerializationContext\r\n    ): SerializableObject[] | undefined {\r\n        const result: SerializableObject[] | undefined = [];\r\n\r\n        const sourceCollection = source[this.name];\r\n\r\n        if (Array.isArray(sourceCollection)) {\r\n            for (const sourceItem of sourceCollection) {\r\n                const item = new this.objectType();\r\n                item.parse(sourceItem, context);\r\n\r\n                result.push(item);\r\n\r\n                if (this.onItemAdded) {\r\n                    this.onItemAdded(sender, item);\r\n                }\r\n            }\r\n        }\r\n\r\n        return result.length > 0\r\n            ? result\r\n            : this.onGetInitialValue\r\n            ? this.onGetInitialValue(sender)\r\n            : undefined;\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: SerializableObject[] | undefined,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        context.serializeArray(target, this.name, value);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly objectType: SerializableObjectType,\r\n        readonly onItemAdded?: (sender: SerializableObject, item: SerializableObject) => void\r\n    ) {\r\n        super(targetVersion, name, undefined, (sender: SerializableObject) => {\r\n            return [];\r\n        });\r\n    }\r\n}\r\n\r\nexport class CustomProperty<T> extends PropertyDefinition {\r\n    parse(sender: SerializableObject, source: PropertyBag, context: BaseSerializationContext): T {\r\n        return this.onParse(sender, this, source, context);\r\n    }\r\n\r\n    toJSON(\r\n        sender: SerializableObject,\r\n        target: PropertyBag,\r\n        value: T,\r\n        context: BaseSerializationContext\r\n    ) {\r\n        this.onToJSON(sender, this, target, value, context);\r\n    }\r\n\r\n    constructor(\r\n        readonly targetVersion: Version,\r\n        readonly name: string,\r\n        readonly onParse: (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => T,\r\n        readonly onToJSON: (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: T,\r\n            context: BaseSerializationContext\r\n        ) => void,\r\n        readonly defaultValue?: T,\r\n        readonly onGetInitialValue?: (sender: SerializableObject) => T\r\n    ) {\r\n        super(targetVersion, name, defaultValue, onGetInitialValue);\r\n\r\n        if (!this.onParse) {\r\n            throw new Error(\"CustomPropertyDefinition instances must have an onParse handler.\");\r\n        }\r\n\r\n        if (!this.onToJSON) {\r\n            throw new Error(\"CustomPropertyDefinition instances must have an onToJSON handler.\");\r\n        }\r\n    }\r\n}\r\n\r\nexport class SerializableObjectSchema {\r\n    private _properties: PropertyDefinition[] = [];\r\n\r\n    indexOf(prop: PropertyDefinition): number {\r\n        for (let i = 0; i < this._properties.length; i++) {\r\n            if (this._properties[i] === prop) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    add(...properties: PropertyDefinition[]) {\r\n        for (const prop of properties) {\r\n            if (this.indexOf(prop) === -1) {\r\n                this._properties.push(prop);\r\n            }\r\n        }\r\n    }\r\n\r\n    remove(...properties: PropertyDefinition[]) {\r\n        for (const prop of properties) {\r\n            while (true) {\r\n                const index = this.indexOf(prop);\r\n\r\n                if (index >= 0) {\r\n                    this._properties.splice(index, 1);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getItemAt(index: number): PropertyDefinition {\r\n        return this._properties[index];\r\n    }\r\n\r\n    getCount(): number {\r\n        return this._properties.length;\r\n    }\r\n}\r\n\r\n// This is a decorator function, used to map SerializableObject descendant class members to\r\n// schema properties\r\nexport function property(prop: PropertyDefinition) {\r\n    return function (target: any, propertyKey: string) {\r\n        const descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\r\n\r\n        if (!descriptor.get && !descriptor.set) {\r\n            descriptor.get = function (this: SerializableObject) {\r\n                return this.getValue(prop);\r\n            };\r\n            descriptor.set = function (this: SerializableObject, value: any) {\r\n                this.setValue(prop, value);\r\n            };\r\n\r\n            Object.defineProperty(target, propertyKey, descriptor);\r\n        }\r\n    };\r\n}\r\n\r\nexport type PropertyBag = { [propertyName: string]: any };\r\n\r\nexport abstract class SerializableObject {\r\n    static onRegisterCustomProperties?: (\r\n        sender: SerializableObject,\r\n        schema: SerializableObjectSchema\r\n    ) => void;\r\n    static defaultMaxVersion: Version = Versions.latest;\r\n\r\n    private static readonly _schemaCache: { [typeName: string]: SerializableObjectSchema } = {};\r\n\r\n    private _propertyBag: PropertyBag = {};\r\n    private _rawProperties: PropertyBag = {};\r\n\r\n    protected abstract getSchemaKey(): string;\r\n\r\n    protected getDefaultSerializationContext(): BaseSerializationContext {\r\n        return new SimpleSerializationContext();\r\n    }\r\n\r\n    protected populateSchema(schema: SerializableObjectSchema) {\r\n        const ctor = <any>this.constructor;\r\n        const properties: PropertyDefinition[] = [];\r\n\r\n        // eslint-disable-next-line guard-for-in\r\n        for (const propertyName in ctor) {\r\n            try {\r\n                const propertyValue = ctor[propertyName];\r\n\r\n                if (propertyValue instanceof PropertyDefinition) {\r\n                    properties.push(propertyValue);\r\n                }\r\n            } catch {\r\n                // If a property happens to have a getter function and\r\n                // it throws an exception, we need to catch it here\r\n            }\r\n        }\r\n\r\n        if (properties.length > 0) {\r\n            const sortedProperties = properties.sort(\r\n                (p1: PropertyDefinition, p2: PropertyDefinition) => {\r\n                    if (p1.sequentialNumber > p2.sequentialNumber) {\r\n                        return 1;\r\n                    } else if (p1.sequentialNumber < p2.sequentialNumber) {\r\n                        return -1;\r\n                    }\r\n\r\n                    return 0;\r\n                }\r\n            );\r\n\r\n            schema.add(...sortedProperties);\r\n        }\r\n\r\n        if (SerializableObject.onRegisterCustomProperties) {\r\n            SerializableObject.onRegisterCustomProperties(this, schema);\r\n        }\r\n    }\r\n\r\n    protected getValue(prop: PropertyDefinition): any {\r\n        return this._propertyBag.hasOwnProperty(prop.getInternalName())\r\n            ? this._propertyBag[prop.getInternalName()]\r\n            : prop.defaultValue;\r\n    }\r\n\r\n    protected setValue(prop: PropertyDefinition, value: any) {\r\n        if (value === undefined || value === null) {\r\n            delete this._propertyBag[prop.getInternalName()];\r\n        } else {\r\n            this._propertyBag[prop.getInternalName()] = value;\r\n        }\r\n    }\r\n\r\n    protected internalParse(source: PropertyBag, context: BaseSerializationContext) {\r\n        this._propertyBag = {};\r\n        this._rawProperties = GlobalSettings.enableFullJsonRoundTrip ? (source ? source : {}) : {};\r\n\r\n        if (source) {\r\n            const s = this.getSchema();\r\n\r\n            for (let i = 0; i < s.getCount(); i++) {\r\n                const prop = s.getItemAt(i);\r\n\r\n                if (prop.isSerializationEnabled) {\r\n                    let propertyValue = prop.onGetInitialValue\r\n                        ? prop.onGetInitialValue(this)\r\n                        : undefined;\r\n\r\n                    if (source.hasOwnProperty(prop.name)) {\r\n                        if (prop.targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                            propertyValue = prop.parse(this, source, context);\r\n                        } else {\r\n                            context.logParseEvent(\r\n                                this,\r\n                                Enums.ValidationEvent.UnsupportedProperty,\r\n                                Strings.errors.propertyNotSupported(\r\n                                    prop.name,\r\n                                    prop.targetVersion.toString(),\r\n                                    context.targetVersion.toString()\r\n                                )\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    this.setValue(prop, propertyValue);\r\n                }\r\n            }\r\n        } else {\r\n            this.resetDefaultValues();\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: BaseSerializationContext) {\r\n        const s = this.getSchema();\r\n        const serializedProperties: string[] = [];\r\n\r\n        for (let i = 0; i < s.getCount(); i++) {\r\n            const prop = s.getItemAt(i);\r\n\r\n            // Avoid serializing the same property multiple times. This is necessary\r\n            // because some property definitions map to the same underlying schema\r\n            // property\r\n            if (\r\n                prop.isSerializationEnabled &&\r\n                prop.targetVersion.compareTo(context.targetVersion) <= 0 &&\r\n                serializedProperties.indexOf(prop.name) === -1\r\n            ) {\r\n                prop.toJSON(this, target, this.getValue(prop), context);\r\n\r\n                serializedProperties.push(prop.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected shouldSerialize(_context: BaseSerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    maxVersion: Version = SerializableObject.defaultMaxVersion;\r\n\r\n    constructor() {\r\n        const s = this.getSchema();\r\n\r\n        for (let i = 0; i < s.getCount(); i++) {\r\n            const prop = s.getItemAt(i);\r\n\r\n            if (prop.onGetInitialValue) {\r\n                this.setValue(prop, prop.onGetInitialValue(this));\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(source: PropertyBag, context?: BaseSerializationContext) {\r\n        this.internalParse(source, context ? context : new SimpleSerializationContext());\r\n    }\r\n\r\n    toJSON(context?: BaseSerializationContext): PropertyBag | undefined {\r\n        let effectiveContext: BaseSerializationContext;\r\n\r\n        if (context && context instanceof BaseSerializationContext) {\r\n            effectiveContext = context;\r\n        } else {\r\n            effectiveContext = this.getDefaultSerializationContext();\r\n            effectiveContext.toJSONOriginalParam = context;\r\n        }\r\n\r\n        if (this.shouldSerialize(effectiveContext)) {\r\n            let result: PropertyBag;\r\n\r\n            if (\r\n                GlobalSettings.enableFullJsonRoundTrip &&\r\n                this._rawProperties &&\r\n                typeof this._rawProperties === \"object\"\r\n            ) {\r\n                result = this._rawProperties;\r\n            } else {\r\n                result = {};\r\n            }\r\n\r\n            this.internalToJSON(result, effectiveContext);\r\n\r\n            return result;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    hasDefaultValue(prop: PropertyDefinition): boolean {\r\n        return this.getValue(prop) === prop.defaultValue;\r\n    }\r\n\r\n    hasAllDefaultValues(): boolean {\r\n        const s = this.getSchema();\r\n\r\n        for (let i = 0; i < s.getCount(); i++) {\r\n            const prop = s.getItemAt(i);\r\n\r\n            if (!this.hasDefaultValue(prop)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    resetDefaultValues() {\r\n        const s = this.getSchema();\r\n\r\n        for (let i = 0; i < s.getCount(); i++) {\r\n            const prop = s.getItemAt(i);\r\n\r\n            this.setValue(prop, prop.defaultValue);\r\n        }\r\n    }\r\n\r\n    setCustomProperty(name: string, value: any) {\r\n        const shouldDeleteProperty =\r\n            (typeof value === \"string\" && !value) || value === undefined || value === null;\r\n\r\n        if (shouldDeleteProperty) {\r\n            delete this._rawProperties[name];\r\n        } else {\r\n            this._rawProperties[name] = value;\r\n        }\r\n    }\r\n\r\n    getCustomProperty(name: string): any {\r\n        return this._rawProperties[name];\r\n    }\r\n\r\n    getSchema(): SerializableObjectSchema {\r\n        let schema: SerializableObjectSchema = SerializableObject._schemaCache[this.getSchemaKey()];\r\n\r\n        if (!schema) {\r\n            schema = new SerializableObjectSchema();\r\n\r\n            this.populateSchema(schema);\r\n\r\n            SerializableObject._schemaCache[this.getSchemaKey()] = schema;\r\n        }\r\n\r\n        return schema;\r\n    }\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\n\r\nexport type Refresh = {\r\n    mode: Enums.RefreshMode;\r\n    timeBetweenAutomaticRefreshes: number;\r\n    maximumConsecutiveAutomaticRefreshes: number;\r\n    allowManualRefreshesAfterAutomaticRefreshes: boolean;\r\n};\r\n\r\nexport type AppletsSettings = {\r\n    logEnabled: boolean;\r\n    logLevel: Enums.LogLevel;\r\n    maximumRetryAttempts: number;\r\n    defaultTimeBetweenRetryAttempts: number;\r\n    authPromptWidth: number;\r\n    authPromptHeight: number;\r\n    readonly refresh: Refresh;\r\n    onLogEvent?: (level: Enums.LogLevel, message?: any, ...optionalParams: any[]) => void;\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nexport class GlobalSettings {\r\n    static useAdvancedTextBlockTruncation: boolean = true;\r\n    static useAdvancedCardBottomTruncation: boolean = false;\r\n    static useMarkdownInRadioButtonAndCheckbox: boolean = true;\r\n    static allowMarkForTextHighlighting: boolean = false;\r\n    static alwaysBleedSeparators: boolean = false;\r\n    static enableFullJsonRoundTrip: boolean = false;\r\n    static displayInputValidationErrors: boolean = true;\r\n    static allowPreProcessingPropertyValues: boolean = false;\r\n    static setTabIndexAtCardRoot: boolean = true;\r\n    static enableFallback: boolean = true;\r\n    static useWebkitLineClamp: boolean = true;\r\n    static allowMoreThanMaxActionsInOverflowMenu: boolean = false;\r\n    static removePaddingFromContainersWithBackgroundImage: boolean = false;\r\n    static resetInputsDirtyStateAfterActionExecution: boolean = true;\r\n\r\n    static readonly applets: AppletsSettings = {\r\n        logEnabled: true,\r\n        logLevel: Enums.LogLevel.Error,\r\n        maximumRetryAttempts: 3,\r\n        defaultTimeBetweenRetryAttempts: 3000, // 3 seconds\r\n        authPromptWidth: 400,\r\n        authPromptHeight: 600,\r\n        refresh: {\r\n            mode: Enums.RefreshMode.Manual,\r\n            timeBetweenAutomaticRefreshes: 3000, // 3 seconds\r\n            maximumConsecutiveAutomaticRefreshes: 3,\r\n            allowManualRefreshesAfterAutomaticRefreshes: true\r\n        }\r\n    };\r\n}\r\n\r\nexport const ContentTypes = {\r\n    applicationJson: \"application/json\",\r\n    applicationXWwwFormUrlencoded: \"application/x-www-form-urlencoded\"\r\n};\r\n\r\nexport interface ISeparationDefinition {\r\n    spacing: number;\r\n    lineThickness?: number;\r\n    lineColor?: string;\r\n}\r\n\r\nexport interface IInput {\r\n    id?: string;\r\n    value?: string;\r\n    validateValue(): boolean;\r\n}\r\n\r\nexport type Dictionary<T> = { [key: string]: T };\r\n\r\nexport class StringWithSubstitutions {\r\n    private _isProcessed: boolean = false;\r\n    private _original?: string;\r\n    private _processed?: string;\r\n\r\n    getReferencedInputs(inputs: IInput[], referencedInputs: Dictionary<IInput>) {\r\n        if (!referencedInputs) {\r\n            throw new Error(\"The referencedInputs parameter cannot be null.\");\r\n        }\r\n\r\n        if (this._original) {\r\n            for (const input of inputs) {\r\n                const matches = new RegExp(\"\\\\{{2}(\" + input.id + \").value\\\\}{2}\", \"gi\").exec(\r\n                    this._original\r\n                );\r\n\r\n                if (matches != null && input.id) {\r\n                    referencedInputs[input.id] = input;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    substituteInputValues(inputs: Dictionary<IInput>, contentType: string) {\r\n        this._processed = this._original;\r\n\r\n        if (this._original) {\r\n            const regEx = /\\{{2}([a-z0-9_$@]+).value\\}{2}/gi;\r\n            let matches;\r\n\r\n            while ((matches = regEx.exec(this._original)) !== null && this._processed) {\r\n                for (const key of Object.keys(inputs)) {\r\n                    if (key.toLowerCase() === matches[1].toLowerCase()) {\r\n                        const matchedInput = inputs[key];\r\n\r\n                        let valueForReplace = \"\";\r\n\r\n                        if (matchedInput.value) {\r\n                            valueForReplace = matchedInput.value;\r\n                        }\r\n\r\n                        if (contentType === ContentTypes.applicationJson) {\r\n                            valueForReplace = JSON.stringify(valueForReplace);\r\n                            valueForReplace = valueForReplace.slice(1, -1);\r\n                        } else if (contentType === ContentTypes.applicationXWwwFormUrlencoded) {\r\n                            valueForReplace = encodeURIComponent(valueForReplace);\r\n                        }\r\n\r\n                        this._processed = this._processed.replace(matches[0], valueForReplace);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this._isProcessed = true;\r\n    }\r\n\r\n    getOriginal(): string | undefined {\r\n        return this._original;\r\n    }\r\n\r\n    get(): string | undefined {\r\n        if (!this._isProcessed) {\r\n            return this._original;\r\n        } else {\r\n            return this._processed;\r\n        }\r\n    }\r\n\r\n    set(value: string | undefined) {\r\n        this._original = value;\r\n        this._isProcessed = false;\r\n    }\r\n}\r\n\r\nexport class SpacingDefinition {\r\n    left: number = 0;\r\n    top: number = 0;\r\n    right: number = 0;\r\n    bottom: number = 0;\r\n\r\n    constructor(top: number = 0, right: number = 0, bottom: number = 0, left: number = 0) {\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n        this.left = left;\r\n    }\r\n}\r\n\r\nexport class PaddingDefinition {\r\n    top: Enums.Spacing = Enums.Spacing.None;\r\n    right: Enums.Spacing = Enums.Spacing.None;\r\n    bottom: Enums.Spacing = Enums.Spacing.None;\r\n    left: Enums.Spacing = Enums.Spacing.None;\r\n\r\n    constructor(\r\n        top: Enums.Spacing = Enums.Spacing.None,\r\n        right: Enums.Spacing = Enums.Spacing.None,\r\n        bottom: Enums.Spacing = Enums.Spacing.None,\r\n        left: Enums.Spacing = Enums.Spacing.None\r\n    ) {\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n        this.left = left;\r\n    }\r\n}\r\n\r\nexport class SizeAndUnit {\r\n    physicalSize: number;\r\n    unit: Enums.SizeUnit;\r\n\r\n    static parse(input: string, requireUnitSpecifier: boolean = false): SizeAndUnit {\r\n        const result = new SizeAndUnit(0, Enums.SizeUnit.Weight);\r\n\r\n        if (typeof input === \"number\") {\r\n            result.physicalSize = input;\r\n\r\n            return result;\r\n        } else if (typeof input === \"string\") {\r\n            const regExp = /^([0-9]+)(px|\\*)?$/g;\r\n            const matches = regExp.exec(input);\r\n            const expectedMatchCount = requireUnitSpecifier ? 3 : 2;\r\n\r\n            if (matches && matches.length >= expectedMatchCount) {\r\n                result.physicalSize = parseInt(matches[1]);\r\n\r\n                if (matches.length === 3) {\r\n                    if (matches[2] === \"px\") {\r\n                        result.unit = Enums.SizeUnit.Pixel;\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        throw new Error(\"Invalid size: \" + input);\r\n    }\r\n\r\n    constructor(physicalSize: number, unit: Enums.SizeUnit) {\r\n        this.physicalSize = physicalSize;\r\n        this.unit = unit;\r\n    }\r\n}\r\n\r\nexport interface IResourceInformation {\r\n    url: string;\r\n    mimeType: string;\r\n}\r\n\r\n/**\r\n * Fast UUID generator, RFC4122 version 4 compliant.\r\n * @author Jeff Ward (jcward.com).\r\n * @license MIT license\r\n * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n **/\r\n/* eslint-disable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention, no-bitwise */\r\nexport class UUID {\r\n    private static lut: string[] = [];\r\n\r\n    static generate(): string {\r\n        const d0 = (Math.random() * 0xffffffff) | 0;\r\n        const d1 = (Math.random() * 0xffffffff) | 0;\r\n        const d2 = (Math.random() * 0xffffffff) | 0;\r\n        const d3 = (Math.random() * 0xffffffff) | 0;\r\n\r\n        return (\r\n            UUID.lut[d0 & 0xff] +\r\n            UUID.lut[(d0 >> 8) & 0xff] +\r\n            UUID.lut[(d0 >> 16) & 0xff] +\r\n            UUID.lut[(d0 >> 24) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[d1 & 0xff] +\r\n            UUID.lut[(d1 >> 8) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[((d1 >> 16) & 0x0f) | 0x40] +\r\n            UUID.lut[(d1 >> 24) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[(d2 & 0x3f) | 0x80] +\r\n            UUID.lut[(d2 >> 8) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[(d2 >> 16) & 0xff] +\r\n            UUID.lut[(d2 >> 24) & 0xff] +\r\n            UUID.lut[d3 & 0xff] +\r\n            UUID.lut[(d3 >> 8) & 0xff] +\r\n            UUID.lut[(d3 >> 16) & 0xff] +\r\n            UUID.lut[(d3 >> 24) & 0xff]\r\n        );\r\n    }\r\n\r\n    static initialize() {\r\n        for (let i = 0; i < 256; i++) {\r\n            UUID.lut[i] = (i < 16 ? \"0\" : \"\") + i.toString(16);\r\n        }\r\n    }\r\n}\r\n\r\nUUID.initialize();\r\n/* eslint-enable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention, no-bitwise */\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nexport class Strings {\r\n    static readonly errors = {\r\n        unknownElementType: (typeName: string) =>\r\n            `Unknown element type \"${typeName}\". Fallback will be used if present.`,\r\n        unknownActionType: (typeName: string) =>\r\n            `Unknown action type \"${typeName}\". Fallback will be used if present.`,\r\n        elementTypeNotAllowed: (typeName: string) =>\r\n            `Element type \"${typeName}\" is not allowed in this context.`,\r\n        actionTypeNotAllowed: (typeName: string) =>\r\n            `Action type \"${typeName}\" is not allowed in this context.`,\r\n        invalidPropertyValue: (value: any, propertyName: string) =>\r\n            `Invalid value \"${value}\" for property \"${propertyName}\".`,\r\n        showCardMustHaveCard: () =>\r\n            `\"An Action.ShowCard must have its \"card\" property set to a valid AdaptiveCard object.`,\r\n        invalidColumnWidth: (invalidWidth: string) =>\r\n            `Invalid column width \"${invalidWidth}\" - defaulting to \"auto\".`,\r\n        invalidCardVersion: (defaultingToVersion: string) =>\r\n            `Invalid card version. Defaulting to \"${defaultingToVersion}\".`,\r\n        invalidVersionString: (versionString: string) =>\r\n            `Invalid version string \"${versionString}\".`,\r\n        propertyValueNotSupported: (\r\n            value: any,\r\n            propertyName: string,\r\n            supportedInVersion: string,\r\n            versionUsed: string\r\n        ) =>\r\n            `Value \"${value}\" for property \"${propertyName}\" is supported in version ${supportedInVersion}, but you are using version ${versionUsed}.`,\r\n        propertyNotSupported: (\r\n            propertyName: string,\r\n            supportedInVersion: string,\r\n            versionUsed: string\r\n        ) =>\r\n            `Property \"${propertyName}\" is supported in version ${supportedInVersion}, but you are using version ${versionUsed}.`,\r\n        indexOutOfRange: (index: number) => `Index out of range (${index}).`,\r\n        elementCannotBeUsedAsInline: () =>\r\n            \"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\",\r\n        inlineAlreadyParented: () =>\r\n            \"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\",\r\n        interactivityNotAllowed: () => \"Interactivity is not allowed.\",\r\n        inputsMustHaveUniqueId: () => \"All inputs must have a unique Id.\",\r\n        choiceSetMustHaveAtLeastOneChoice: () =>\r\n            \"An Input.ChoiceSet must have at least one choice defined.\",\r\n        choiceSetChoicesMustHaveTitleAndValue: () =>\r\n            \"All choices in an Input.ChoiceSet must have their title and value properties set.\",\r\n        propertyMustBeSet: (propertyName: string) => `Property \"${propertyName}\" must be set.`,\r\n        actionHttpHeadersMustHaveNameAndValue: () =>\r\n            \"All headers of an Action.Http must have their name and value properties set.\",\r\n        tooManyActions: (maximumActions: number) =>\r\n            `Maximum number of actions exceeded (${maximumActions}).`,\r\n        tooLittleTimeDelay: (minAutoplayDelay: number) =>\r\n            `Autoplay Delay is too short (${minAutoplayDelay}).`,\r\n        tooManyCarouselPages: (maxCarouselPages: number) =>\r\n            `Maximum number of Carousel pages exceeded (${maxCarouselPages}).`,\r\n        invalidInitialPageIndex: (initialPageIndex: number) =>\r\n            `InitialPage for carousel is invalid (${initialPageIndex}).`,\r\n        columnAlreadyBelongsToAnotherSet: () => \"This column already belongs to another ColumnSet.\",\r\n        invalidCardType: () =>\r\n            `Invalid or missing card type. Make sure the card's type property is set to \"AdaptiveCard\".`,\r\n        unsupportedCardVersion: (version: string, maxSupportedVersion: string) =>\r\n            `The specified card version (${version}) is not supported or still in preview. The latest released card version is ${maxSupportedVersion}.`,\r\n        duplicateId: (id: string) => `Duplicate Id \"${id}\".`,\r\n        markdownProcessingNotEnabled: () =>\r\n            \"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\",\r\n        processMarkdownEventRemoved: () =>\r\n            \"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\",\r\n        elementAlreadyParented: () => \"The element already belongs to another container.\",\r\n        actionAlreadyParented: () => \"The action already belongs to another element.\",\r\n        elementTypeNotStandalone: (typeName: string) =>\r\n            `Elements of type ${typeName} cannot be used as standalone elements.`,\r\n        invalidInputLabelWidth: () =>\r\n            `Invalid input label width. Defaulting to label width from host config.`,\r\n    };\r\n    static readonly magicCodeInputCard = {\r\n        tryAgain: () => \"That didn't work... let's try again.\",\r\n        pleaseLogin: () =>\r\n            'Please login in the popup. You will obtain a magic code. Paste that code below and select \"Submit\"',\r\n        enterMagicCode: () => \"Enter magic code\",\r\n        pleaseEnterMagicCodeYouReceived: () => \"Please enter the magic code you received.\",\r\n        submit: () => \"Submit\",\r\n        cancel: () => \"Cancel\",\r\n        somethingWentWrong: () => \"Something went wrong. This action can't be handled.\",\r\n        authenticationFailed: () => \"Authentication failed.\"\r\n    };\r\n    static readonly runtime = {\r\n        automaticRefreshPaused: () => \"Automatic refresh paused.\",\r\n        clckToRestartAutomaticRefresh: () => \"Click to restart.\",\r\n        refreshThisCard: () => \"Refresh this card\"\r\n    };\r\n    static readonly hints = {\r\n        dontUseWeightedAndStrecthedColumnsInSameSet: () =>\r\n            \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\"\r\n    };\r\n    static readonly defaults = {\r\n        inlineActionTitle: () => \"Inline Action\",\r\n        overflowButtonText: () => \"...\",\r\n        overflowButtonTooltip: () => \"More options\",\r\n        emptyElementText: (elementType: string) => `Empty ${elementType}`,\r\n        mediaPlayerAriaLabel: () => \"Media content\",\r\n        mediaPlayerPlayMedia: () => \"Play media\",\r\n        youTubeVideoPlayer: () => \"YouTube video player\",\r\n        vimeoVideoPlayer: () => \"Vimeo video player\",\r\n        dailymotionVideoPlayer: () => \"Dailymotion video player\",\r\n        carouselNavigationPreviousTooltip: () => \"Previous carousel page\",\r\n        carouselNavigationNextTooltip: () => \"Next carousel page\"\r\n    };\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport {\r\n    CardElement,\r\n    StylableCardElementContainer,\r\n    SerializationContext,\r\n    Container,\r\n    ContainerStyleProperty\r\n} from \"./card-elements\";\r\nimport {\r\n    HorizontalAlignment,\r\n    VerticalAlignment,\r\n    SizeUnit,\r\n    ValidationEvent,\r\n    TypeErrorType,\r\n    Spacing\r\n} from \"./enums\";\r\nimport { TextStyleDefinition } from \"./host-config\";\r\nimport { GlobalRegistry } from \"./registry\";\r\nimport {\r\n    BaseSerializationContext,\r\n    BoolProperty,\r\n    CustomProperty,\r\n    EnumProperty,\r\n    property,\r\n    PropertyBag,\r\n    PropertyDefinition,\r\n    SerializableObject,\r\n    SerializableObjectCollectionProperty,\r\n    Versions\r\n} from \"./serialization\";\r\nimport { SizeAndUnit, PaddingDefinition } from \"./shared\";\r\nimport { Strings } from \"./strings\";\r\nimport { stringToCssColor } from \"./utils\";\r\n\r\nexport class TableColumnDefinition extends SerializableObject {\r\n    //#region Schema\r\n\r\n    static readonly horizontalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"horizontalCellContentAlignment\",\r\n        HorizontalAlignment\r\n    );\r\n    static readonly verticalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"verticalCellContentAlignment\",\r\n        VerticalAlignment\r\n    );\r\n\r\n    static readonly widthProperty = new CustomProperty<SizeAndUnit>(\r\n        Versions.v1_5,\r\n        \"width\",\r\n        (\r\n            sender: SerializableObject,\r\n            prop: PropertyDefinition,\r\n            source: PropertyBag,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            let result: SizeAndUnit = prop.defaultValue;\r\n            const value = source[prop.name];\r\n            let invalidWidth = false;\r\n\r\n            if (typeof value === \"number\" && !isNaN(value)) {\r\n                result = new SizeAndUnit(value, SizeUnit.Weight);\r\n            } else if (typeof value === \"string\") {\r\n                try {\r\n                    result = SizeAndUnit.parse(value);\r\n                } catch (e) {\r\n                    invalidWidth = true;\r\n                }\r\n            } else {\r\n                invalidWidth = true;\r\n            }\r\n\r\n            if (invalidWidth) {\r\n                context.logParseEvent(\r\n                    sender,\r\n                    ValidationEvent.InvalidPropertyValue,\r\n                    Strings.errors.invalidColumnWidth(value)\r\n                );\r\n            }\r\n\r\n            return result;\r\n        },\r\n        (\r\n            sender: SerializableObject,\r\n            property: PropertyDefinition,\r\n            target: PropertyBag,\r\n            value: SizeAndUnit,\r\n            context: BaseSerializationContext\r\n        ) => {\r\n            if (value.unit === SizeUnit.Pixel) {\r\n                context.serializeValue(target, \"width\", value.physicalSize + \"px\");\r\n            } else {\r\n                context.serializeNumber(target, \"width\", value.physicalSize);\r\n            }\r\n        },\r\n        new SizeAndUnit(1, SizeUnit.Weight)\r\n    );\r\n\r\n    @property(TableColumnDefinition.horizontalCellContentAlignmentProperty)\r\n    horizontalCellContentAlignment?: HorizontalAlignment;\r\n\r\n    @property(TableColumnDefinition.verticalCellContentAlignmentProperty)\r\n    verticalCellContentAlignment?: VerticalAlignment;\r\n\r\n    @property(TableColumnDefinition.widthProperty)\r\n    width: SizeAndUnit = new SizeAndUnit(1, SizeUnit.Weight);\r\n\r\n    getSchemaKey(): string {\r\n        return \"ColumnDefinition\";\r\n    }\r\n\r\n    //#endregion\r\n\r\n    computedWidth: SizeAndUnit;\r\n}\r\n\r\nexport abstract class StylableContainer<\r\n    T extends CardElement\r\n> extends StylableCardElementContainer {\r\n    private _items: T[] = [];\r\n\r\n    private parseItem(source: any, context: SerializationContext): T | undefined {\r\n        return context.parseCardObject<T>(\r\n            this,\r\n            source,\r\n            [], // Forbidden types not supported for elements for now\r\n            !this.isDesignMode(),\r\n            (typeName: string) => {\r\n                return this.createItemInstance(typeName);\r\n            },\r\n            (typeName: string, _errorType: TypeErrorType) => {\r\n                context.logParseEvent(\r\n                    undefined,\r\n                    ValidationEvent.ElementTypeNotAllowed,\r\n                    Strings.errors.elementTypeNotAllowed(typeName)\r\n                );\r\n            }\r\n        );\r\n    }\r\n\r\n    protected abstract getCollectionPropertyName(): string;\r\n    protected abstract createItemInstance(typeName: string): T | undefined;\r\n\r\n    protected internalAddItem(item: T) {\r\n        if (!item.parent) {\r\n            this._items.push(item);\r\n\r\n            item.setParent(this);\r\n        } else {\r\n            throw new Error(Strings.errors.elementAlreadyParented());\r\n        }\r\n    }\r\n\r\n    protected internalRemoveItem(item: T): boolean {\r\n        const itemIndex = this._items.indexOf(item);\r\n\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n\r\n            item.setParent(undefined);\r\n\r\n            this.updateLayout();\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected internalIndexOf(item: T): number {\r\n        return this._items.indexOf(item);\r\n    }\r\n\r\n    protected internalParse(source: any, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this._items = [];\r\n\r\n        const items = source[this.getCollectionPropertyName()];\r\n\r\n        if (Array.isArray(items)) {\r\n            for (const item of items) {\r\n                const instance = this.parseItem(item, context);\r\n\r\n                if (instance) {\r\n                    this._items.push(instance);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalToJSON(target: PropertyBag, context: SerializationContext) {\r\n        super.internalToJSON(target, context);\r\n\r\n        context.serializeArray(target, this.getCollectionPropertyName(), this._items);\r\n    }\r\n\r\n    removeItem(item: T): boolean {\r\n        return this.internalRemoveItem(item);\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._items.length;\r\n    }\r\n\r\n    getItemAt(index: number): T {\r\n        return this._items[index];\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): T | undefined {\r\n        return this.getItemCount() > 0 ? this.getItemAt(0) : undefined;\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): T | undefined {\r\n        return this.getItemCount() > 0 ? this.getItemAt(this.getItemCount() - 1) : undefined;\r\n    }\r\n}\r\n\r\nexport type CellType = \"data\" | \"header\";\r\n\r\nexport class TableCell extends Container {\r\n    private _columnIndex: number = -1;\r\n    private _cellType: CellType = \"data\";\r\n\r\n    protected getHasBorder(): boolean {\r\n        return this.parentRow.parentTable.showGridLines;\r\n    }\r\n\r\n    protected applyBorder() {\r\n        if (this.renderedElement && this.getHasBorder()) {\r\n            const styleDefinition = this.hostConfig.containerStyles.getStyleByName(\r\n                this.parentRow.parentTable.gridStyle\r\n            );\r\n\r\n            if (styleDefinition.borderColor) {\r\n                const borderColor = stringToCssColor(styleDefinition.borderColor);\r\n\r\n                if (borderColor) {\r\n                    this.renderedElement.style.borderRight = \"1px solid \" + borderColor;\r\n                    this.renderedElement.style.borderBottom = \"1px solid \" + borderColor;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return this.getHasBackground() || this.getHasBorder()\r\n            ? new PaddingDefinition(Spacing.Small, Spacing.Small, Spacing.Small, Spacing.Small)\r\n            : super.getDefaultPadding();\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const cellElement = super.internalRender();\r\n\r\n        if (cellElement) {\r\n            cellElement.setAttribute(\"role\", this.cellType === \"data\" ? \"cell\" : \"columnheader\");\r\n            cellElement.style.minWidth = \"0\";\r\n\r\n            if (this.cellType === \"header\") {\r\n                cellElement.setAttribute(\"scope\", \"col\");\r\n            }\r\n        }\r\n\r\n        return cellElement;\r\n    }\r\n\r\n    protected shouldSerialize(_context: SerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TableCell\";\r\n    }\r\n\r\n    getEffectiveTextStyleDefinition(): TextStyleDefinition {\r\n        if (this.cellType === \"header\") {\r\n            return this.hostConfig.textStyles.columnHeader;\r\n        }\r\n\r\n        return super.getEffectiveTextStyleDefinition();\r\n    }\r\n\r\n    getEffectiveHorizontalAlignment(): HorizontalAlignment {\r\n        if (this.horizontalAlignment !== undefined) {\r\n            return this.horizontalAlignment;\r\n        }\r\n\r\n        if (this.parentRow.horizontalCellContentAlignment !== undefined) {\r\n            return this.parentRow.horizontalCellContentAlignment;\r\n        }\r\n\r\n        if (this.columnIndex >= 0) {\r\n            const horizontalAlignment = this.parentRow.parentTable.getColumnAt(\r\n                this.columnIndex\r\n            ).horizontalCellContentAlignment;\r\n\r\n            if (horizontalAlignment !== undefined) {\r\n                return horizontalAlignment;\r\n            }\r\n        }\r\n\r\n        if (this.parentRow.parentTable.horizontalCellContentAlignment !== undefined) {\r\n            return this.parentRow.parentTable.horizontalCellContentAlignment;\r\n        }\r\n\r\n        return super.getEffectiveHorizontalAlignment();\r\n    }\r\n\r\n    getEffectiveVerticalContentAlignment(): VerticalAlignment {\r\n        if (this.verticalContentAlignment !== undefined) {\r\n            return this.verticalContentAlignment;\r\n        }\r\n\r\n        if (this.parentRow.verticalCellContentAlignment !== undefined) {\r\n            return this.parentRow.verticalCellContentAlignment;\r\n        }\r\n\r\n        if (this.columnIndex >= 0) {\r\n            const verticalAlignment = this.parentRow.parentTable.getColumnAt(\r\n                this.columnIndex\r\n            ).verticalCellContentAlignment;\r\n\r\n            if (verticalAlignment !== undefined) {\r\n                return verticalAlignment;\r\n            }\r\n        }\r\n\r\n        if (this.parentRow.parentTable.verticalCellContentAlignment !== undefined) {\r\n            return this.parentRow.parentTable.verticalCellContentAlignment;\r\n        }\r\n\r\n        return super.getEffectiveVerticalContentAlignment();\r\n    }\r\n\r\n    get columnIndex(): number {\r\n        return this._columnIndex;\r\n    }\r\n\r\n    get cellType(): CellType {\r\n        return this._cellType;\r\n    }\r\n\r\n    get parentRow(): TableRow {\r\n        return this.parent as TableRow;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class TableRow extends StylableContainer<TableCell> {\r\n    //#region Schema\r\n\r\n    static readonly styleProperty = new ContainerStyleProperty(Versions.v1_5, \"style\");\r\n    static readonly horizontalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"horizontalCellContentAlignment\",\r\n        HorizontalAlignment\r\n    );\r\n    static readonly verticalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"verticalCellContentAlignment\",\r\n        VerticalAlignment\r\n    );\r\n\r\n    @property(TableRow.horizontalCellContentAlignmentProperty)\r\n    horizontalCellContentAlignment?: HorizontalAlignment;\r\n\r\n    @property(TableRow.verticalCellContentAlignmentProperty)\r\n    verticalCellContentAlignment?: VerticalAlignment;\r\n\r\n    //#endregion\r\n\r\n    protected getDefaultPadding(): PaddingDefinition {\r\n        return new PaddingDefinition(Spacing.None, Spacing.None, Spacing.None, Spacing.None);\r\n    }\r\n\r\n    protected applyBackground() {\r\n        if (this.renderedElement) {\r\n            const styleDefinition = this.hostConfig.containerStyles.getStyleByName(\r\n                this.style,\r\n                this.hostConfig.containerStyles.getStyleByName(this.defaultStyle)\r\n            );\r\n\r\n            if (styleDefinition.backgroundColor) {\r\n                const bgColor = stringToCssColor(styleDefinition.backgroundColor);\r\n\r\n                if (bgColor) {\r\n                    this.renderedElement.style.backgroundColor = bgColor;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getCollectionPropertyName(): string {\r\n        return \"cells\";\r\n    }\r\n\r\n    protected createItemInstance(typeName: string): TableCell | undefined {\r\n        return !typeName || typeName === \"TableCell\" ? new TableCell() : undefined;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        const isFirstRow = this.getIsFirstRow();\r\n        const cellSpacing = this.hostConfig.table.cellSpacing;\r\n\r\n        const rowElement = document.createElement(\"div\");\r\n        rowElement.setAttribute(\"role\", \"row\");\r\n        rowElement.style.display = \"flex\";\r\n        rowElement.style.flexDirection = \"row\";\r\n\r\n        for (let i = 0; i < Math.min(this.getItemCount(), this.parentTable.getColumnCount()); i++) {\r\n            const cell = this.getItemAt(i);\r\n\r\n            // Cheating a bit in order to keep cellType read-only\r\n            cell[\"_columnIndex\"] = i;\r\n            cell[\"_cellType\"] =\r\n                this.parentTable.firstRowAsHeaders && isFirstRow ? \"header\" : \"data\";\r\n\r\n            const renderedCell = cell.render();\r\n\r\n            if (renderedCell) {\r\n                const column = this.parentTable.getColumnAt(i);\r\n\r\n                if (column.computedWidth.unit === SizeUnit.Pixel) {\r\n                    renderedCell.style.flex = \"0 0 \" + column.computedWidth.physicalSize + \"px\";\r\n                } else {\r\n                    renderedCell.style.flex = \"1 1 \" + column.computedWidth.physicalSize + \"%\";\r\n                }\r\n\r\n                if (i > 0 && !this.parentTable.showGridLines && cellSpacing > 0) {\r\n                    renderedCell.style.marginLeft = cellSpacing + \"px\";\r\n                }\r\n\r\n                rowElement.appendChild(renderedCell);\r\n            }\r\n        }\r\n\r\n        return rowElement.children.length > 0 ? rowElement : undefined;\r\n    }\r\n\r\n    protected shouldSerialize(_context: SerializationContext): boolean {\r\n        return true;\r\n    }\r\n\r\n    addCell(cell: TableCell) {\r\n        this.internalAddItem(cell);\r\n    }\r\n\r\n    removeCellAt(columnIndex: number): boolean {\r\n        if (columnIndex >= 0 && columnIndex < this.getItemCount()) {\r\n            return this.removeItem(this.getItemAt(columnIndex));\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof TableCell ? this.internalIndexOf(cardElement) : -1;\r\n    }\r\n\r\n    ensureHasEnoughCells(cellCount: number) {\r\n        while (this.getItemCount() < cellCount) {\r\n            this.addCell(new TableCell());\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TableRow\";\r\n    }\r\n\r\n    getIsFirstRow(): boolean {\r\n        return this.parentTable.getItemAt(0) === this;\r\n    }\r\n\r\n    get parentTable(): Table {\r\n        return this.parent as Table;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class Table extends StylableContainer<TableRow> {\r\n    //#region Schema\r\n\r\n    private static readonly _columnsProperty = new SerializableObjectCollectionProperty(\r\n        Versions.v1_5,\r\n        \"columns\",\r\n        TableColumnDefinition\r\n    );\r\n\r\n    static readonly firstRowAsHeadersProperty = new BoolProperty(\r\n        Versions.v1_5,\r\n        \"firstRowAsHeaders\",\r\n        true\r\n    );\r\n    static readonly showGridLinesProperty = new BoolProperty(Versions.v1_5, \"showGridLines\", true);\r\n    static readonly gridStyleProperty = new ContainerStyleProperty(Versions.v1_5, \"gridStyle\");\r\n    static readonly horizontalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"horizontalCellContentAlignment\",\r\n        HorizontalAlignment\r\n    );\r\n    static readonly verticalCellContentAlignmentProperty = new EnumProperty(\r\n        Versions.v1_5,\r\n        \"verticalCellContentAlignment\",\r\n        VerticalAlignment\r\n    );\r\n\r\n    @property(Table._columnsProperty)\r\n    private _columns: TableColumnDefinition[] = [];\r\n\r\n    @property(Table.firstRowAsHeadersProperty)\r\n    firstRowAsHeaders: boolean = true;\r\n\r\n    @property(Table.showGridLinesProperty)\r\n    showGridLines: boolean = true;\r\n\r\n    @property(Table.gridStyleProperty)\r\n    get gridStyle(): string | undefined {\r\n        const style = this.getValue(Table.gridStyleProperty);\r\n\r\n        if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\r\n            return style;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    set gridStyle(value: string | undefined) {\r\n        this.setValue(Table.gridStyleProperty, value);\r\n    }\r\n\r\n    @property(Table.horizontalCellContentAlignmentProperty)\r\n    horizontalCellContentAlignment?: HorizontalAlignment;\r\n\r\n    @property(Table.verticalCellContentAlignmentProperty)\r\n    verticalCellContentAlignment?: VerticalAlignment;\r\n\r\n    //#endregion\r\n\r\n    private ensureRowsHaveEnoughCells() {\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).ensureHasEnoughCells(this.getColumnCount());\r\n        }\r\n    }\r\n\r\n    private removeCellsFromColumn(columnIndex: number) {\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).removeCellAt(columnIndex);\r\n        }\r\n    }\r\n\r\n    protected getCollectionPropertyName(): string {\r\n        return \"rows\";\r\n    }\r\n\r\n    protected createItemInstance(typeName: string): TableRow | undefined {\r\n        return !typeName || typeName === \"TableRow\" ? new TableRow() : undefined;\r\n    }\r\n\r\n    protected internalParse(source: PropertyBag, context: SerializationContext) {\r\n        super.internalParse(source, context);\r\n\r\n        this.ensureRowsHaveEnoughCells();\r\n    }\r\n\r\n    protected internalRender(): HTMLElement | undefined {\r\n        if (this.getItemCount() > 0) {\r\n            let totalWeights: number = 0;\r\n\r\n            for (const column of this._columns) {\r\n                if (column.width.unit === SizeUnit.Weight) {\r\n                    totalWeights += column.width.physicalSize;\r\n                }\r\n            }\r\n\r\n            for (const column of this._columns) {\r\n                if (column.width.unit === SizeUnit.Pixel) {\r\n                    column.computedWidth = new SizeAndUnit(\r\n                        column.width.physicalSize,\r\n                        SizeUnit.Pixel\r\n                    );\r\n                } else {\r\n                    column.computedWidth = new SizeAndUnit(\r\n                        (100 / totalWeights) * column.width.physicalSize,\r\n                        SizeUnit.Weight\r\n                    );\r\n                }\r\n            }\r\n\r\n            const tableElement = document.createElement(\"div\");\r\n            tableElement.setAttribute(\"role\", \"table\");\r\n            tableElement.style.display = \"flex\";\r\n            tableElement.style.flexDirection = \"column\";\r\n\r\n            if (this.showGridLines) {\r\n                const styleDefinition = this.hostConfig.containerStyles.getStyleByName(\r\n                    this.gridStyle\r\n                );\r\n\r\n                if (styleDefinition.borderColor) {\r\n                    const borderColor = stringToCssColor(styleDefinition.borderColor);\r\n\r\n                    if (borderColor) {\r\n                        tableElement.style.borderTop = \"1px solid \" + borderColor;\r\n                        tableElement.style.borderLeft = \"1px solid \" + borderColor;\r\n                    }\r\n                }\r\n            }\r\n\r\n            const cellSpacing = this.hostConfig.table.cellSpacing;\r\n\r\n            for (let i = 0; i < this.getItemCount(); i++) {\r\n                const renderedRow = this.getItemAt(i).render();\r\n\r\n                if (renderedRow) {\r\n                    if (i > 0 && !this.showGridLines && cellSpacing > 0) {\r\n                        const separatorRow = document.createElement(\"div\");\r\n                        separatorRow.setAttribute(\"aria-hidden\", \"true\");\r\n                        separatorRow.style.height = cellSpacing + \"px\";\r\n\r\n                        tableElement.appendChild(separatorRow);\r\n                    }\r\n\r\n                    tableElement.appendChild(renderedRow);\r\n                }\r\n            }\r\n\r\n            return tableElement;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    addColumn(column: TableColumnDefinition) {\r\n        this._columns.push(column);\r\n\r\n        this.ensureRowsHaveEnoughCells();\r\n    }\r\n\r\n    removeColumn(column: TableColumnDefinition) {\r\n        const index = this._columns.indexOf(column);\r\n\r\n        if (index >= 0) {\r\n            this.removeCellsFromColumn(index);\r\n\r\n            this._columns.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    getColumnCount(): number {\r\n        return this._columns.length;\r\n    }\r\n\r\n    getColumnAt(index: number): TableColumnDefinition {\r\n        return this._columns[index];\r\n    }\r\n\r\n    addRow(row: TableRow) {\r\n        this.internalAddItem(row);\r\n\r\n        row.ensureHasEnoughCells(this.getColumnCount());\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof TableRow ? this.internalIndexOf(cardElement) : -1;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Table\";\r\n    }\r\n}\r\n\r\nGlobalRegistry.defaultElements.register(\"Table\", Table, Versions.v1_5);\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nabstract class AbstractTextFormatter {\r\n    private _regularExpression: RegExp;\r\n\r\n    protected abstract internalFormat(lang: string | undefined, matches: RegExpExecArray): string;\r\n\r\n    constructor(regularExpression: RegExp) {\r\n        this._regularExpression = regularExpression;\r\n    }\r\n\r\n    format(lang: string | undefined, input: string | undefined): string | undefined {\r\n        let matches;\r\n\r\n        if (input) {\r\n            let result = input;\r\n\r\n            while ((matches = this._regularExpression.exec(input)) != null) {\r\n                result = result.replace(matches[0], this.internalFormat(lang, matches));\r\n            }\r\n\r\n            return result;\r\n        } else {\r\n            return input;\r\n        }\r\n    }\r\n}\r\n\r\nclass DateFormatter extends AbstractTextFormatter {\r\n    protected internalFormat(lang: string | undefined, matches: RegExpExecArray): string {\r\n        const date = new Date(Date.parse(matches[1]));\r\n        const format = matches[2] !== undefined ? matches[2].toLowerCase() : \"compact\";\r\n\r\n        if (format !== \"compact\") {\r\n            return date.toLocaleDateString(lang, {\r\n                day: \"numeric\",\r\n                weekday: format,\r\n                month: format,\r\n                year: \"numeric\"\r\n            } as Intl.DateTimeFormatOptions);\r\n        } else {\r\n            return date.toLocaleDateString();\r\n        }\r\n    }\r\n}\r\n\r\nclass TimeFormatter extends AbstractTextFormatter {\r\n    protected internalFormat(lang: string | undefined, matches: RegExpExecArray): string {\r\n        const date = new Date(Date.parse(matches[1]));\r\n\r\n        return date.toLocaleTimeString(lang, { hour: \"numeric\", minute: \"2-digit\" });\r\n    }\r\n}\r\n\r\nexport function formatText(lang: string | undefined, text: string | undefined): string | undefined {\r\n    const formatters: AbstractTextFormatter[] = [\r\n        new DateFormatter(\r\n            /\\{{2}DATE\\((\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:Z|(?:(?:-|\\+)\\d{2}:\\d{2})))(?:, ?(COMPACT|LONG|SHORT))?\\)\\}{2}/g\r\n        ),\r\n        new TimeFormatter(\r\n            /\\{{2}TIME\\((\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:Z|(?:(?:-|\\+)\\d{2}:\\d{2})))\\)\\}{2}/g\r\n        )\r\n    ];\r\n\r\n    let result = text;\r\n\r\n    for (const formatter of formatters) {\r\n        result = formatter.format(lang, result);\r\n    }\r\n\r\n    return result;\r\n}\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport * as Shared from \"./shared\";\r\n\r\n// To work around TypeScript complaining about documentMode not being declared\r\n// on type Document\r\ndeclare global {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    interface Document {\r\n        documentMode?: any;\r\n    }\r\n}\r\n\r\nexport function isInternetExplorer(): boolean {\r\n    // The documentMode property only exists in IE\r\n    return window.document.documentMode !== undefined;\r\n}\r\n\r\nexport function isMobileOS(): boolean {\r\n    const userAgent = window.navigator.userAgent;\r\n\r\n    return (\r\n        !!userAgent.match(/Android/i) || !!userAgent.match(/iPad/i) || !!userAgent.match(/iPhone/i)\r\n    );\r\n}\r\n\r\n/**\r\n * Generate a UUID prepended with \"__ac-\"\r\n */\r\nexport function generateUniqueId(): string {\r\n    return \"__ac-\" + Shared.UUID.generate();\r\n}\r\n\r\nexport function appendChild(node: Node, child: Node | undefined) {\r\n    if (child) {\r\n        node.appendChild(child);\r\n    }\r\n}\r\n\r\nexport function parseString(obj: any, defaultValue?: string): string | undefined {\r\n    return typeof obj === \"string\" ? obj : defaultValue;\r\n}\r\n\r\nexport function parseNumber(obj: any, defaultValue?: number): number | undefined {\r\n    return typeof obj === \"number\" ? obj : defaultValue;\r\n}\r\n\r\nexport function parseBool(value: any, defaultValue?: boolean): boolean | undefined {\r\n    if (typeof value === \"boolean\") {\r\n        return value;\r\n    } else if (typeof value === \"string\") {\r\n        switch (value.toLowerCase()) {\r\n            case \"true\":\r\n                return true;\r\n            case \"false\":\r\n                return false;\r\n            default:\r\n                return defaultValue;\r\n        }\r\n    }\r\n\r\n    return defaultValue;\r\n}\r\n\r\nexport function getEnumValueByName(\r\n    enumType: { [s: number]: string },\r\n    name: string\r\n): number | undefined {\r\n    // eslint-disable-next-line guard-for-in\r\n    for (const key in enumType) {\r\n        const keyAsNumber = parseInt(key, 10);\r\n\r\n        if (keyAsNumber >= 0) {\r\n            const value = enumType[key];\r\n\r\n            if (value && typeof value === \"string\" && value.toLowerCase() === name.toLowerCase()) {\r\n                return keyAsNumber;\r\n            }\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\nexport function parseEnum(\r\n    enumType: { [s: number]: string },\r\n    name: string,\r\n    defaultValue?: number\r\n): number | undefined {\r\n    if (!name) {\r\n        return defaultValue;\r\n    }\r\n\r\n    const enumValue = getEnumValueByName(enumType, name);\r\n\r\n    return enumValue !== undefined ? enumValue : defaultValue;\r\n}\r\n\r\nexport function stringToCssColor(color: string | undefined): string | undefined {\r\n    if (color) {\r\n        const regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;\r\n        const matches = regEx.exec(color);\r\n\r\n        if (matches && matches[4]) {\r\n            const a = parseInt(matches[1], 16) / 255;\r\n            const r = parseInt(matches[2], 16);\r\n            const g = parseInt(matches[3], 16);\r\n            const b = parseInt(matches[4], 16);\r\n\r\n            return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\r\n        }\r\n    }\r\n\r\n    return color;\r\n}\r\n\r\nfunction truncateWorker(\r\n    element: HTMLElement,\r\n    maxHeight: number,\r\n    fullText: string,\r\n    truncateAt: (text: string, idx: number) => void,\r\n    lineHeight?: number\r\n) {\r\n    const fits = () => {\r\n        // Allow a one pixel overflow to account for rounding differences\r\n        // between browsers\r\n        return maxHeight - element.scrollHeight >= -1.0;\r\n    };\r\n\r\n    if (fits()) {\r\n        return;\r\n    }\r\n\r\n    const breakableIndices = findBreakableIndices(fullText);\r\n    let lo = 0;\r\n    let hi = breakableIndices.length;\r\n    let bestBreakIdx = 0;\r\n\r\n    // Do a binary search for the longest string that fits\r\n    while (lo < hi) {\r\n        const mid = Math.floor((lo + hi) / 2);\r\n        truncateAt(fullText, breakableIndices[mid]);\r\n\r\n        if (fits()) {\r\n            bestBreakIdx = breakableIndices[mid];\r\n            lo = mid + 1;\r\n        } else {\r\n            hi = mid;\r\n        }\r\n    }\r\n\r\n    truncateAt(fullText, bestBreakIdx);\r\n\r\n    // If we have extra room, try to expand the string letter by letter\r\n    // (covers the case where we have to break in the middle of a long word)\r\n    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {\r\n        let idx = findNextCharacter(fullText, bestBreakIdx);\r\n\r\n        while (idx < fullText.length) {\r\n            truncateAt(fullText, idx);\r\n\r\n            if (fits()) {\r\n                bestBreakIdx = idx;\r\n                idx = findNextCharacter(fullText, idx);\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        truncateAt(fullText, bestBreakIdx);\r\n    }\r\n}\r\n\r\nexport function truncateText(element: HTMLElement, maxHeight: number, lineHeight?: number) {\r\n    truncateWorker(\r\n        element,\r\n        maxHeight,\r\n        element.innerText,\r\n        (text: string, idx: number) => {\r\n            element.innerText = text.substring(0, idx) + \"...\";\r\n        },\r\n        lineHeight\r\n    );\r\n}\r\n\r\n/**\r\n * {@link truncate} has been deprecated and is no longer in use internally. This policy passes\r\n * content through as it always has, which is _supposed_ to be dealing with text only (see {@link\r\n * TextBlock.truncateIfSupported}), but had a bug where it might actually pass through an element\r\n * for which innerHTML yielded actual HTML (since fixed).\r\n */\r\nconst ttDeprecatedPolicy = (typeof window === 'undefined') ? undefined : window.trustedTypes?.createPolicy(\"adaptivecards#deprecatedExportedFunctionPolicy\", {\r\n    createHTML: (value) => value\r\n});\r\n\r\n/** @deprecated Use {@link truncateText} instead. */\r\nexport function truncate(element: HTMLElement, maxHeight: number, lineHeight?: number) {\r\n    truncateWorker(\r\n        element,\r\n        maxHeight,\r\n        element.innerHTML,\r\n        (text: string, idx: number) => {\r\n            const truncatedString = text.substring(0, idx) + \"...\";\r\n            const truncatedHTML =\r\n                ttDeprecatedPolicy?.createHTML(truncatedString) ?? truncatedString;\r\n            element.innerHTML = truncatedHTML as string;\r\n        },\r\n        lineHeight\r\n    );\r\n}\r\n\r\nfunction findBreakableIndices(html: string): number[] {\r\n    const results: number[] = [];\r\n    let idx = findNextCharacter(html, -1);\r\n\r\n    while (idx < html.length) {\r\n        if (html[idx] === \" \") {\r\n            results.push(idx);\r\n        }\r\n\r\n        idx = findNextCharacter(html, idx);\r\n    }\r\n\r\n    return results;\r\n}\r\n\r\nfunction findNextCharacter(html: string, currIdx: number): number {\r\n    currIdx += 1;\r\n\r\n    // If we found the start of an HTML tag, keep advancing until we get\r\n    // past it, so we don't end up truncating in the middle of the tag\r\n    while (currIdx < html.length && html[currIdx] === \"<\") {\r\n        while (currIdx < html.length && html[currIdx++] !== \">\") {\r\n            continue;\r\n        }\r\n    }\r\n\r\n    return currIdx;\r\n}\r\n\r\nexport function getFitStatus(element: HTMLElement, containerEnd: number): Enums.ContainerFitStatus {\r\n    const start = element.offsetTop;\r\n    const end = start + element.clientHeight;\r\n\r\n    if (end <= containerEnd) {\r\n        return Enums.ContainerFitStatus.FullyInContainer;\r\n    } else if (start < containerEnd) {\r\n        return Enums.ContainerFitStatus.Overflowing;\r\n    } else {\r\n        return Enums.ContainerFitStatus.FullyOutOfContainer;\r\n    }\r\n}\r\n\r\nexport function getScrollX(): number {\r\n    return window.pageXOffset;\r\n}\r\n\r\nexport function getScrollY(): number {\r\n    return window.pageYOffset;\r\n}\r\n\r\nexport function clearElementChildren(element: HTMLElement) {\r\n    while (element.firstChild) {\r\n        element.removeChild(element.firstChild);\r\n    }\r\n}\r\n\r\nexport function addCancelSelectActionEventHandler(element: HTMLElement) {\r\n    element.onclick = (e) => {\r\n        e.preventDefault();\r\n        e.cancelBubble = true;\r\n    };\r\n}\r\n\r\nexport function debounce(fn: (...args: unknown[]) => unknown, delay: number) {\r\n    let timer: NodeJS.Timeout;\r\n    function debouncedFn(...args: unknown[]) {\r\n        if (timer) {\r\n            clearTimeout(timer);\r\n        }\r\n        timer = setTimeout(() => {\r\n            fn(...args);\r\n        }, delay);\r\n    }\r\n    return debouncedFn;\r\n}\r\n","/**\n * SSR Window 4.0.2\n * Better handling for window object in SSR environment\n * https://github.com/nolimits4web/ssr-window\n *\n * Copyright 2021, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: December 13, 2021\n */\n/* eslint-disable no-param-reassign */\nfunction isObject(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        'constructor' in obj &&\n        obj.constructor === Object);\n}\nfunction extend(target = {}, src = {}) {\n    Object.keys(src).forEach((key) => {\n        if (typeof target[key] === 'undefined')\n            target[key] = src[key];\n        else if (isObject(src[key]) &&\n            isObject(target[key]) &&\n            Object.keys(src[key]).length > 0) {\n            extend(target[key], src[key]);\n        }\n    });\n}\n\nconst ssrDocument = {\n    body: {},\n    addEventListener() { },\n    removeEventListener() { },\n    activeElement: {\n        blur() { },\n        nodeName: '',\n    },\n    querySelector() {\n        return null;\n    },\n    querySelectorAll() {\n        return [];\n    },\n    getElementById() {\n        return null;\n    },\n    createEvent() {\n        return {\n            initEvent() { },\n        };\n    },\n    createElement() {\n        return {\n            children: [],\n            childNodes: [],\n            style: {},\n            setAttribute() { },\n            getElementsByTagName() {\n                return [];\n            },\n        };\n    },\n    createElementNS() {\n        return {};\n    },\n    importNode() {\n        return null;\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n};\nfunction getDocument() {\n    const doc = typeof document !== 'undefined' ? document : {};\n    extend(doc, ssrDocument);\n    return doc;\n}\n\nconst ssrWindow = {\n    document: ssrDocument,\n    navigator: {\n        userAgent: '',\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n    history: {\n        replaceState() { },\n        pushState() { },\n        go() { },\n        back() { },\n    },\n    CustomEvent: function CustomEvent() {\n        return this;\n    },\n    addEventListener() { },\n    removeEventListener() { },\n    getComputedStyle() {\n        return {\n            getPropertyValue() {\n                return '';\n            },\n        };\n    },\n    Image() { },\n    Date() { },\n    screen: {},\n    setTimeout() { },\n    clearTimeout() { },\n    matchMedia() {\n        return {};\n    },\n    requestAnimationFrame(callback) {\n        if (typeof setTimeout === 'undefined') {\n            callback();\n            return null;\n        }\n        return setTimeout(callback, 0);\n    },\n    cancelAnimationFrame(id) {\n        if (typeof setTimeout === 'undefined') {\n            return;\n        }\n        clearTimeout(id);\n    },\n};\nfunction getWindow() {\n    const win = typeof window !== 'undefined' ? window : {};\n    extend(win, ssrWindow);\n    return win;\n}\n\nexport { extend, getDocument, getWindow, ssrDocument, ssrWindow };\n","/**\n * Dom7 4.0.4\n * Minimalistic JavaScript library for DOM manipulation, with a jQuery-compatible API\n * https://framework7.io/docs/dom7.html\n *\n * Copyright 2022, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: January 11, 2022\n */\nimport { getWindow, getDocument } from 'ssr-window';\n\n/* eslint-disable no-proto */\nfunction makeReactive(obj) {\n  const proto = obj.__proto__;\n  Object.defineProperty(obj, '__proto__', {\n    get() {\n      return proto;\n    },\n\n    set(value) {\n      proto.__proto__ = value;\n    }\n\n  });\n}\n\nclass Dom7 extends Array {\n  constructor(items) {\n    if (typeof items === 'number') {\n      super(items);\n    } else {\n      super(...(items || []));\n      makeReactive(this);\n    }\n  }\n\n}\n\nfunction arrayFlat(arr = []) {\n  const res = [];\n  arr.forEach(el => {\n    if (Array.isArray(el)) {\n      res.push(...arrayFlat(el));\n    } else {\n      res.push(el);\n    }\n  });\n  return res;\n}\nfunction arrayFilter(arr, callback) {\n  return Array.prototype.filter.call(arr, callback);\n}\nfunction arrayUnique(arr) {\n  const uniqueArray = [];\n\n  for (let i = 0; i < arr.length; i += 1) {\n    if (uniqueArray.indexOf(arr[i]) === -1) uniqueArray.push(arr[i]);\n  }\n\n  return uniqueArray;\n}\nfunction toCamelCase(string) {\n  return string.toLowerCase().replace(/-(.)/g, (match, group) => group.toUpperCase());\n}\n\n// eslint-disable-next-line\n\nfunction qsa(selector, context) {\n  if (typeof selector !== 'string') {\n    return [selector];\n  }\n\n  const a = [];\n  const res = context.querySelectorAll(selector);\n\n  for (let i = 0; i < res.length; i += 1) {\n    a.push(res[i]);\n  }\n\n  return a;\n}\n\nfunction $(selector, context) {\n  const window = getWindow();\n  const document = getDocument();\n  let arr = [];\n\n  if (!context && selector instanceof Dom7) {\n    return selector;\n  }\n\n  if (!selector) {\n    return new Dom7(arr);\n  }\n\n  if (typeof selector === 'string') {\n    const html = selector.trim();\n\n    if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {\n      let toCreate = 'div';\n      if (html.indexOf('<li') === 0) toCreate = 'ul';\n      if (html.indexOf('<tr') === 0) toCreate = 'tbody';\n      if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) toCreate = 'tr';\n      if (html.indexOf('<tbody') === 0) toCreate = 'table';\n      if (html.indexOf('<option') === 0) toCreate = 'select';\n      const tempParent = document.createElement(toCreate);\n      tempParent.innerHTML = html;\n\n      for (let i = 0; i < tempParent.childNodes.length; i += 1) {\n        arr.push(tempParent.childNodes[i]);\n      }\n    } else {\n      arr = qsa(selector.trim(), context || document);\n    } // arr = qsa(selector, document);\n\n  } else if (selector.nodeType || selector === window || selector === document) {\n    arr.push(selector);\n  } else if (Array.isArray(selector)) {\n    if (selector instanceof Dom7) return selector;\n    arr = selector;\n  }\n\n  return new Dom7(arrayUnique(arr));\n}\n\n$.fn = Dom7.prototype;\n\n// eslint-disable-next-line\n\nfunction addClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.add(...classNames);\n  });\n  return this;\n}\n\nfunction removeClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.remove(...classNames);\n  });\n  return this;\n}\n\nfunction toggleClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    classNames.forEach(className => {\n      el.classList.toggle(className);\n    });\n  });\n}\n\nfunction hasClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  return arrayFilter(this, el => {\n    return classNames.filter(className => el.classList.contains(className)).length > 0;\n  }).length > 0;\n}\n\nfunction attr(attrs, value) {\n  if (arguments.length === 1 && typeof attrs === 'string') {\n    // Get attr\n    if (this[0]) return this[0].getAttribute(attrs);\n    return undefined;\n  } // Set attrs\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (arguments.length === 2) {\n      // String\n      this[i].setAttribute(attrs, value);\n    } else {\n      // Object\n      for (const attrName in attrs) {\n        this[i][attrName] = attrs[attrName];\n        this[i].setAttribute(attrName, attrs[attrName]);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction removeAttr(attr) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].removeAttribute(attr);\n  }\n\n  return this;\n}\n\nfunction prop(props, value) {\n  if (arguments.length === 1 && typeof props === 'string') {\n    // Get prop\n    if (this[0]) return this[0][props];\n  } else {\n    // Set props\n    for (let i = 0; i < this.length; i += 1) {\n      if (arguments.length === 2) {\n        // String\n        this[i][props] = value;\n      } else {\n        // Object\n        for (const propName in props) {\n          this[i][propName] = props[propName];\n        }\n      }\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction data(key, value) {\n  let el;\n\n  if (typeof value === 'undefined') {\n    el = this[0];\n    if (!el) return undefined; // Get value\n\n    if (el.dom7ElementDataStorage && key in el.dom7ElementDataStorage) {\n      return el.dom7ElementDataStorage[key];\n    }\n\n    const dataKey = el.getAttribute(`data-${key}`);\n\n    if (dataKey) {\n      return dataKey;\n    }\n\n    return undefined;\n  } // Set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    el = this[i];\n    if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};\n    el.dom7ElementDataStorage[key] = value;\n  }\n\n  return this;\n}\n\nfunction removeData(key) {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.dom7ElementDataStorage && el.dom7ElementDataStorage[key]) {\n      el.dom7ElementDataStorage[key] = null;\n      delete el.dom7ElementDataStorage[key];\n    }\n  }\n}\n\nfunction dataset() {\n  const el = this[0];\n  if (!el) return undefined;\n  const dataset = {}; // eslint-disable-line\n\n  if (el.dataset) {\n    for (const dataKey in el.dataset) {\n      dataset[dataKey] = el.dataset[dataKey];\n    }\n  } else {\n    for (let i = 0; i < el.attributes.length; i += 1) {\n      const attr = el.attributes[i];\n\n      if (attr.name.indexOf('data-') >= 0) {\n        dataset[toCamelCase(attr.name.split('data-')[1])] = attr.value;\n      }\n    }\n  }\n\n  for (const key in dataset) {\n    if (dataset[key] === 'false') dataset[key] = false;else if (dataset[key] === 'true') dataset[key] = true;else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] *= 1;\n  }\n\n  return dataset;\n}\n\nfunction val(value) {\n  if (typeof value === 'undefined') {\n    // get value\n    const el = this[0];\n    if (!el) return undefined;\n\n    if (el.multiple && el.nodeName.toLowerCase() === 'select') {\n      const values = [];\n\n      for (let i = 0; i < el.selectedOptions.length; i += 1) {\n        values.push(el.selectedOptions[i].value);\n      }\n\n      return values;\n    }\n\n    return el.value;\n  } // set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (Array.isArray(value) && el.multiple && el.nodeName.toLowerCase() === 'select') {\n      for (let j = 0; j < el.options.length; j += 1) {\n        el.options[j].selected = value.indexOf(el.options[j].value) >= 0;\n      }\n    } else {\n      el.value = value;\n    }\n  }\n\n  return this;\n}\n\nfunction value(value) {\n  return this.val(value);\n}\n\nfunction transform(transform) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transform = transform;\n  }\n\n  return this;\n}\n\nfunction transition(duration) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transitionDuration = typeof duration !== 'string' ? `${duration}ms` : duration;\n  }\n\n  return this;\n}\n\nfunction on(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n\n  function handleLiveEvent(e) {\n    const target = e.target;\n    if (!target) return;\n    const eventData = e.target.dom7EventData || [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    if ($(target).is(targetSelector)) listener.apply(target, eventData);else {\n      const parents = $(target).parents(); // eslint-disable-line\n\n      for (let k = 0; k < parents.length; k += 1) {\n        if ($(parents[k]).is(targetSelector)) listener.apply(parents[k], eventData);\n      }\n    }\n  }\n\n  function handleEvent(e) {\n    const eventData = e && e.target ? e.target.dom7EventData || [] : [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    listener.apply(this, eventData);\n  }\n\n  const events = eventType.split(' ');\n  let j;\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (!targetSelector) {\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7Listeners) el.dom7Listeners = {};\n        if (!el.dom7Listeners[event]) el.dom7Listeners[event] = [];\n        el.dom7Listeners[event].push({\n          listener,\n          proxyListener: handleEvent\n        });\n        el.addEventListener(event, handleEvent, capture);\n      }\n    } else {\n      // Live events\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7LiveListeners) el.dom7LiveListeners = {};\n        if (!el.dom7LiveListeners[event]) el.dom7LiveListeners[event] = [];\n        el.dom7LiveListeners[event].push({\n          listener,\n          proxyListener: handleLiveEvent\n        });\n        el.addEventListener(event, handleLiveEvent, capture);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction off(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n  const events = eventType.split(' ');\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n      let handlers;\n\n      if (!targetSelector && el.dom7Listeners) {\n        handlers = el.dom7Listeners[event];\n      } else if (targetSelector && el.dom7LiveListeners) {\n        handlers = el.dom7LiveListeners[event];\n      }\n\n      if (handlers && handlers.length) {\n        for (let k = handlers.length - 1; k >= 0; k -= 1) {\n          const handler = handlers[k];\n\n          if (listener && handler.listener === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (listener && handler.listener && handler.listener.dom7proxy && handler.listener.dom7proxy === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (!listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          }\n        }\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction once(...args) {\n  const dom = this;\n  let [eventName, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventName, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  function onceHandler(...eventArgs) {\n    listener.apply(this, eventArgs);\n    dom.off(eventName, targetSelector, onceHandler, capture);\n\n    if (onceHandler.dom7proxy) {\n      delete onceHandler.dom7proxy;\n    }\n  }\n\n  onceHandler.dom7proxy = listener;\n  return dom.on(eventName, targetSelector, onceHandler, capture);\n}\n\nfunction trigger(...args) {\n  const window = getWindow();\n  const events = args[0].split(' ');\n  const eventData = args[1];\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n\n      if (window.CustomEvent) {\n        const evt = new window.CustomEvent(event, {\n          detail: eventData,\n          bubbles: true,\n          cancelable: true\n        });\n        el.dom7EventData = args.filter((data, dataIndex) => dataIndex > 0);\n        el.dispatchEvent(evt);\n        el.dom7EventData = [];\n        delete el.dom7EventData;\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction transitionEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('transitionend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('transitionend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction animationEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('animationend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('animationend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction width() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerWidth;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('width'));\n  }\n\n  return null;\n}\n\nfunction outerWidth(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetWidth + parseFloat(styles.getPropertyValue('margin-right')) + parseFloat(styles.getPropertyValue('margin-left'));\n    }\n\n    return this[0].offsetWidth;\n  }\n\n  return null;\n}\n\nfunction height() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerHeight;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('height'));\n  }\n\n  return null;\n}\n\nfunction outerHeight(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetHeight + parseFloat(styles.getPropertyValue('margin-top')) + parseFloat(styles.getPropertyValue('margin-bottom'));\n    }\n\n    return this[0].offsetHeight;\n  }\n\n  return null;\n}\n\nfunction offset() {\n  if (this.length > 0) {\n    const window = getWindow();\n    const document = getDocument();\n    const el = this[0];\n    const box = el.getBoundingClientRect();\n    const body = document.body;\n    const clientTop = el.clientTop || body.clientTop || 0;\n    const clientLeft = el.clientLeft || body.clientLeft || 0;\n    const scrollTop = el === window ? window.scrollY : el.scrollTop;\n    const scrollLeft = el === window ? window.scrollX : el.scrollLeft;\n    return {\n      top: box.top + scrollTop - clientTop,\n      left: box.left + scrollLeft - clientLeft\n    };\n  }\n\n  return null;\n}\n\nfunction hide() {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.display = 'none';\n  }\n\n  return this;\n}\n\nfunction show() {\n  const window = getWindow();\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.style.display === 'none') {\n      el.style.display = '';\n    }\n\n    if (window.getComputedStyle(el, null).getPropertyValue('display') === 'none') {\n      // Still not visible\n      el.style.display = 'block';\n    }\n  }\n\n  return this;\n}\n\nfunction styles() {\n  const window = getWindow();\n  if (this[0]) return window.getComputedStyle(this[0], null);\n  return {};\n}\n\nfunction css(props, value) {\n  const window = getWindow();\n  let i;\n\n  if (arguments.length === 1) {\n    if (typeof props === 'string') {\n      // .css('width')\n      if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props);\n    } else {\n      // .css({ width: '100px' })\n      for (i = 0; i < this.length; i += 1) {\n        for (const prop in props) {\n          this[i].style[prop] = props[prop];\n        }\n      }\n\n      return this;\n    }\n  }\n\n  if (arguments.length === 2 && typeof props === 'string') {\n    // .css('width', '100px')\n    for (i = 0; i < this.length; i += 1) {\n      this[i].style[props] = value;\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction each(callback) {\n  if (!callback) return this;\n  this.forEach((el, index) => {\n    callback.apply(el, [el, index]);\n  });\n  return this;\n}\n\nfunction filter(callback) {\n  const result = arrayFilter(this, callback);\n  return $(result);\n}\n\nfunction html(html) {\n  if (typeof html === 'undefined') {\n    return this[0] ? this[0].innerHTML : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].innerHTML = html;\n  }\n\n  return this;\n}\n\nfunction text(text) {\n  if (typeof text === 'undefined') {\n    return this[0] ? this[0].textContent.trim() : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].textContent = text;\n  }\n\n  return this;\n}\n\nfunction is(selector) {\n  const window = getWindow();\n  const document = getDocument();\n  const el = this[0];\n  let compareWith;\n  let i;\n  if (!el || typeof selector === 'undefined') return false;\n\n  if (typeof selector === 'string') {\n    if (el.matches) return el.matches(selector);\n    if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);\n    if (el.msMatchesSelector) return el.msMatchesSelector(selector);\n    compareWith = $(selector);\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  if (selector === document) {\n    return el === document;\n  }\n\n  if (selector === window) {\n    return el === window;\n  }\n\n  if (selector.nodeType || selector instanceof Dom7) {\n    compareWith = selector.nodeType ? [selector] : selector;\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  return false;\n}\n\nfunction index() {\n  let child = this[0];\n  let i;\n\n  if (child) {\n    i = 0; // eslint-disable-next-line\n\n    while ((child = child.previousSibling) !== null) {\n      if (child.nodeType === 1) i += 1;\n    }\n\n    return i;\n  }\n\n  return undefined;\n}\n\nfunction eq(index) {\n  if (typeof index === 'undefined') return this;\n  const length = this.length;\n\n  if (index > length - 1) {\n    return $([]);\n  }\n\n  if (index < 0) {\n    const returnIndex = length + index;\n    if (returnIndex < 0) return $([]);\n    return $([this[returnIndex]]);\n  }\n\n  return $([this[index]]);\n}\n\nfunction append(...els) {\n  let newChild;\n  const document = getDocument();\n\n  for (let k = 0; k < els.length; k += 1) {\n    newChild = els[k];\n\n    for (let i = 0; i < this.length; i += 1) {\n      if (typeof newChild === 'string') {\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = newChild;\n\n        while (tempDiv.firstChild) {\n          this[i].appendChild(tempDiv.firstChild);\n        }\n      } else if (newChild instanceof Dom7) {\n        for (let j = 0; j < newChild.length; j += 1) {\n          this[i].appendChild(newChild[j]);\n        }\n      } else {\n        this[i].appendChild(newChild);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction appendTo(parent) {\n  $(parent).append(this);\n  return this;\n}\n\nfunction prepend(newChild) {\n  const document = getDocument();\n  let i;\n  let j;\n\n  for (i = 0; i < this.length; i += 1) {\n    if (typeof newChild === 'string') {\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = newChild;\n\n      for (j = tempDiv.childNodes.length - 1; j >= 0; j -= 1) {\n        this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);\n      }\n    } else if (newChild instanceof Dom7) {\n      for (j = 0; j < newChild.length; j += 1) {\n        this[i].insertBefore(newChild[j], this[i].childNodes[0]);\n      }\n    } else {\n      this[i].insertBefore(newChild, this[i].childNodes[0]);\n    }\n  }\n\n  return this;\n}\n\nfunction prependTo(parent) {\n  $(parent).prepend(this);\n  return this;\n}\n\nfunction insertBefore(selector) {\n  const before = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (before.length === 1) {\n      before[0].parentNode.insertBefore(this[i], before[0]);\n    } else if (before.length > 1) {\n      for (let j = 0; j < before.length; j += 1) {\n        before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);\n      }\n    }\n  }\n}\n\nfunction insertAfter(selector) {\n  const after = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (after.length === 1) {\n      after[0].parentNode.insertBefore(this[i], after[0].nextSibling);\n    } else if (after.length > 1) {\n      for (let j = 0; j < after.length; j += 1) {\n        after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);\n      }\n    }\n  }\n}\n\nfunction next(selector) {\n  if (this.length > 0) {\n    if (selector) {\n      if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {\n        return $([this[0].nextElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (this[0].nextElementSibling) return $([this[0].nextElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction nextAll(selector) {\n  const nextEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.nextElementSibling) {\n    const next = el.nextElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(next).is(selector)) nextEls.push(next);\n    } else nextEls.push(next);\n\n    el = next;\n  }\n\n  return $(nextEls);\n}\n\nfunction prev(selector) {\n  if (this.length > 0) {\n    const el = this[0];\n\n    if (selector) {\n      if (el.previousElementSibling && $(el.previousElementSibling).is(selector)) {\n        return $([el.previousElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (el.previousElementSibling) return $([el.previousElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction prevAll(selector) {\n  const prevEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.previousElementSibling) {\n    const prev = el.previousElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(prev).is(selector)) prevEls.push(prev);\n    } else prevEls.push(prev);\n\n    el = prev;\n  }\n\n  return $(prevEls);\n}\n\nfunction siblings(selector) {\n  return this.nextAll(selector).add(this.prevAll(selector));\n}\n\nfunction parent(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode !== null) {\n      if (selector) {\n        if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);\n      } else {\n        parents.push(this[i].parentNode);\n      }\n    }\n  }\n\n  return $(parents);\n}\n\nfunction parents(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    let parent = this[i].parentNode; // eslint-disable-line\n\n    while (parent) {\n      if (selector) {\n        if ($(parent).is(selector)) parents.push(parent);\n      } else {\n        parents.push(parent);\n      }\n\n      parent = parent.parentNode;\n    }\n  }\n\n  return $(parents);\n}\n\nfunction closest(selector) {\n  let closest = this; // eslint-disable-line\n\n  if (typeof selector === 'undefined') {\n    return $([]);\n  }\n\n  if (!closest.is(selector)) {\n    closest = closest.parents(selector).eq(0);\n  }\n\n  return closest;\n}\n\nfunction find(selector) {\n  const foundElements = [];\n\n  for (let i = 0; i < this.length; i += 1) {\n    const found = this[i].querySelectorAll(selector);\n\n    for (let j = 0; j < found.length; j += 1) {\n      foundElements.push(found[j]);\n    }\n  }\n\n  return $(foundElements);\n}\n\nfunction children(selector) {\n  const children = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    const childNodes = this[i].children;\n\n    for (let j = 0; j < childNodes.length; j += 1) {\n      if (!selector || $(childNodes[j]).is(selector)) {\n        children.push(childNodes[j]);\n      }\n    }\n  }\n\n  return $(children);\n}\n\nfunction remove() {\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);\n  }\n\n  return this;\n}\n\nfunction detach() {\n  return this.remove();\n}\n\nfunction add(...els) {\n  const dom = this;\n  let i;\n  let j;\n\n  for (i = 0; i < els.length; i += 1) {\n    const toAdd = $(els[i]);\n\n    for (j = 0; j < toAdd.length; j += 1) {\n      dom.push(toAdd[j]);\n    }\n  }\n\n  return dom;\n}\n\nfunction empty() {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.nodeType === 1) {\n      for (let j = 0; j < el.childNodes.length; j += 1) {\n        if (el.childNodes[j].parentNode) {\n          el.childNodes[j].parentNode.removeChild(el.childNodes[j]);\n        }\n      }\n\n      el.textContent = '';\n    }\n  }\n\n  return this;\n}\n\n// eslint-disable-next-line\n\nfunction scrollTo(...args) {\n  const window = getWindow();\n  let [left, top, duration, easing, callback] = args;\n\n  if (args.length === 4 && typeof easing === 'function') {\n    callback = easing;\n    [left, top, duration, callback, easing] = args;\n  }\n\n  if (typeof easing === 'undefined') easing = 'swing';\n  return this.each(function animate() {\n    const el = this;\n    let currentTop;\n    let currentLeft;\n    let maxTop;\n    let maxLeft;\n    let newTop;\n    let newLeft;\n    let scrollTop; // eslint-disable-line\n\n    let scrollLeft; // eslint-disable-line\n\n    let animateTop = top > 0 || top === 0;\n    let animateLeft = left > 0 || left === 0;\n\n    if (typeof easing === 'undefined') {\n      easing = 'swing';\n    }\n\n    if (animateTop) {\n      currentTop = el.scrollTop;\n\n      if (!duration) {\n        el.scrollTop = top;\n      }\n    }\n\n    if (animateLeft) {\n      currentLeft = el.scrollLeft;\n\n      if (!duration) {\n        el.scrollLeft = left;\n      }\n    }\n\n    if (!duration) return;\n\n    if (animateTop) {\n      maxTop = el.scrollHeight - el.offsetHeight;\n      newTop = Math.max(Math.min(top, maxTop), 0);\n    }\n\n    if (animateLeft) {\n      maxLeft = el.scrollWidth - el.offsetWidth;\n      newLeft = Math.max(Math.min(left, maxLeft), 0);\n    }\n\n    let startTime = null;\n    if (animateTop && newTop === currentTop) animateTop = false;\n    if (animateLeft && newLeft === currentLeft) animateLeft = false;\n\n    function render(time = new Date().getTime()) {\n      if (startTime === null) {\n        startTime = time;\n      }\n\n      const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n      const easeProgress = easing === 'linear' ? progress : 0.5 - Math.cos(progress * Math.PI) / 2;\n      let done;\n      if (animateTop) scrollTop = currentTop + easeProgress * (newTop - currentTop);\n      if (animateLeft) scrollLeft = currentLeft + easeProgress * (newLeft - currentLeft);\n\n      if (animateTop && newTop > currentTop && scrollTop >= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateTop && newTop < currentTop && scrollTop <= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateLeft && newLeft > currentLeft && scrollLeft >= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (animateLeft && newLeft < currentLeft && scrollLeft <= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (done) {\n        if (callback) callback();\n        return;\n      }\n\n      if (animateTop) el.scrollTop = scrollTop;\n      if (animateLeft) el.scrollLeft = scrollLeft;\n      window.requestAnimationFrame(render);\n    }\n\n    window.requestAnimationFrame(render);\n  });\n} // scrollTop(top, duration, easing, callback) {\n\n\nfunction scrollTop(...args) {\n  let [top, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [top, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof top === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollTop;\n    return null;\n  }\n\n  return dom.scrollTo(undefined, top, duration, easing, callback);\n}\n\nfunction scrollLeft(...args) {\n  let [left, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [left, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof left === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollLeft;\n    return null;\n  }\n\n  return dom.scrollTo(left, undefined, duration, easing, callback);\n}\n\n// eslint-disable-next-line\n\nfunction animate(initialProps, initialParams) {\n  const window = getWindow();\n  const els = this;\n  const a = {\n    props: Object.assign({}, initialProps),\n    params: Object.assign({\n      duration: 300,\n      easing: 'swing' // or 'linear'\n\n      /* Callbacks\n      begin(elements)\n      complete(elements)\n      progress(elements, complete, remaining, start, tweenValue)\n      */\n\n    }, initialParams),\n    elements: els,\n    animating: false,\n    que: [],\n\n    easingProgress(easing, progress) {\n      if (easing === 'swing') {\n        return 0.5 - Math.cos(progress * Math.PI) / 2;\n      }\n\n      if (typeof easing === 'function') {\n        return easing(progress);\n      }\n\n      return progress;\n    },\n\n    stop() {\n      if (a.frameId) {\n        window.cancelAnimationFrame(a.frameId);\n      }\n\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      a.que = [];\n    },\n\n    done(complete) {\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      if (complete) complete(els);\n\n      if (a.que.length > 0) {\n        const que = a.que.shift();\n        a.animate(que[0], que[1]);\n      }\n    },\n\n    animate(props, params) {\n      if (a.animating) {\n        a.que.push([props, params]);\n        return a;\n      }\n\n      const elements = []; // Define & Cache Initials & Units\n\n      a.elements.each((el, index) => {\n        let initialFullValue;\n        let initialValue;\n        let unit;\n        let finalValue;\n        let finalFullValue;\n        if (!el.dom7AnimateInstance) a.elements[index].dom7AnimateInstance = a;\n        elements[index] = {\n          container: el\n        };\n        Object.keys(props).forEach(prop => {\n          initialFullValue = window.getComputedStyle(el, null).getPropertyValue(prop).replace(',', '.');\n          initialValue = parseFloat(initialFullValue);\n          unit = initialFullValue.replace(initialValue, '');\n          finalValue = parseFloat(props[prop]);\n          finalFullValue = props[prop] + unit;\n          elements[index][prop] = {\n            initialFullValue,\n            initialValue,\n            unit,\n            finalValue,\n            finalFullValue,\n            currentValue: initialValue\n          };\n        });\n      });\n      let startTime = null;\n      let time;\n      let elementsDone = 0;\n      let propsDone = 0;\n      let done;\n      let began = false;\n      a.animating = true;\n\n      function render() {\n        time = new Date().getTime();\n        let progress;\n        let easeProgress; // let el;\n\n        if (!began) {\n          began = true;\n          if (params.begin) params.begin(els);\n        }\n\n        if (startTime === null) {\n          startTime = time;\n        }\n\n        if (params.progress) {\n          // eslint-disable-next-line\n          params.progress(els, Math.max(Math.min((time - startTime) / params.duration, 1), 0), startTime + params.duration - time < 0 ? 0 : startTime + params.duration - time, startTime);\n        }\n\n        elements.forEach(element => {\n          const el = element;\n          if (done || el.done) return;\n          Object.keys(props).forEach(prop => {\n            if (done || el.done) return;\n            progress = Math.max(Math.min((time - startTime) / params.duration, 1), 0);\n            easeProgress = a.easingProgress(params.easing, progress);\n            const {\n              initialValue,\n              finalValue,\n              unit\n            } = el[prop];\n            el[prop].currentValue = initialValue + easeProgress * (finalValue - initialValue);\n            const currentValue = el[prop].currentValue;\n\n            if (finalValue > initialValue && currentValue >= finalValue || finalValue < initialValue && currentValue <= finalValue) {\n              el.container.style[prop] = finalValue + unit;\n              propsDone += 1;\n\n              if (propsDone === Object.keys(props).length) {\n                el.done = true;\n                elementsDone += 1;\n              }\n\n              if (elementsDone === elements.length) {\n                done = true;\n              }\n            }\n\n            if (done) {\n              a.done(params.complete);\n              return;\n            }\n\n            el.container.style[prop] = currentValue + unit;\n          });\n        });\n        if (done) return; // Then call\n\n        a.frameId = window.requestAnimationFrame(render);\n      }\n\n      a.frameId = window.requestAnimationFrame(render);\n      return a;\n    }\n\n  };\n\n  if (a.elements.length === 0) {\n    return els;\n  }\n\n  let animateInstance;\n\n  for (let i = 0; i < a.elements.length; i += 1) {\n    if (a.elements[i].dom7AnimateInstance) {\n      animateInstance = a.elements[i].dom7AnimateInstance;\n    } else a.elements[i].dom7AnimateInstance = a;\n  }\n\n  if (!animateInstance) {\n    animateInstance = a;\n  }\n\n  if (initialProps === 'stop') {\n    animateInstance.stop();\n  } else {\n    animateInstance.animate(a.props, a.params);\n  }\n\n  return els;\n}\n\nfunction stop() {\n  const els = this;\n\n  for (let i = 0; i < els.length; i += 1) {\n    if (els[i].dom7AnimateInstance) {\n      els[i].dom7AnimateInstance.stop();\n    }\n  }\n}\n\nconst noTrigger = 'resize scroll'.split(' ');\n\nfunction shortcut(name) {\n  function eventHandler(...args) {\n    if (typeof args[0] === 'undefined') {\n      for (let i = 0; i < this.length; i += 1) {\n        if (noTrigger.indexOf(name) < 0) {\n          if (name in this[i]) this[i][name]();else {\n            $(this[i]).trigger(name);\n          }\n        }\n      }\n\n      return this;\n    }\n\n    return this.on(name, ...args);\n  }\n\n  return eventHandler;\n}\n\nconst click = shortcut('click');\nconst blur = shortcut('blur');\nconst focus = shortcut('focus');\nconst focusin = shortcut('focusin');\nconst focusout = shortcut('focusout');\nconst keyup = shortcut('keyup');\nconst keydown = shortcut('keydown');\nconst keypress = shortcut('keypress');\nconst submit = shortcut('submit');\nconst change = shortcut('change');\nconst mousedown = shortcut('mousedown');\nconst mousemove = shortcut('mousemove');\nconst mouseup = shortcut('mouseup');\nconst mouseenter = shortcut('mouseenter');\nconst mouseleave = shortcut('mouseleave');\nconst mouseout = shortcut('mouseout');\nconst mouseover = shortcut('mouseover');\nconst touchstart = shortcut('touchstart');\nconst touchend = shortcut('touchend');\nconst touchmove = shortcut('touchmove');\nconst resize = shortcut('resize');\nconst scroll = shortcut('scroll');\n\nexport default $;\nexport { $, add, addClass, animate, animationEnd, append, appendTo, attr, blur, change, children, click, closest, css, data, dataset, detach, each, empty, eq, filter, find, focus, focusin, focusout, hasClass, height, hide, html, index, insertAfter, insertBefore, is, keydown, keypress, keyup, mousedown, mouseenter, mouseleave, mousemove, mouseout, mouseover, mouseup, next, nextAll, off, offset, on, once, outerHeight, outerWidth, parent, parents, prepend, prependTo, prev, prevAll, prop, remove, removeAttr, removeClass, removeData, resize, scroll, scrollLeft, scrollTo, scrollTop, show, siblings, stop, styles, submit, text, toggleClass, touchend, touchmove, touchstart, transform, transition, transitionEnd, trigger, val, value, width };\n","import { $, addClass, removeClass, hasClass, toggleClass, attr, removeAttr, transform, transition, on, off, trigger, transitionEnd, outerWidth, outerHeight, styles, offset, css, each, html, text, is, index, eq, append, prepend, next, nextAll, prev, prevAll, parent, parents, closest, find, children, filter, remove } from 'dom7';\nconst Methods = {\n  addClass,\n  removeClass,\n  hasClass,\n  toggleClass,\n  attr,\n  removeAttr,\n  transform,\n  transition,\n  on,\n  off,\n  trigger,\n  transitionEnd,\n  outerWidth,\n  outerHeight,\n  styles,\n  offset,\n  css,\n  each,\n  html,\n  text,\n  is,\n  index,\n  eq,\n  append,\n  prepend,\n  next,\n  nextAll,\n  prev,\n  prevAll,\n  parent,\n  parents,\n  closest,\n  find,\n  children,\n  filter,\n  remove\n};\nObject.keys(Methods).forEach(methodName => {\n  Object.defineProperty($.fn, methodName, {\n    value: Methods[methodName],\n    writable: true\n  });\n});\nexport default $;","import { getWindow } from 'ssr-window';\n\nfunction deleteProps(obj) {\n  const object = obj;\n  Object.keys(object).forEach(key => {\n    try {\n      object[key] = null;\n    } catch (e) {// no getter for object\n    }\n\n    try {\n      delete object[key];\n    } catch (e) {// something got wrong\n    }\n  });\n}\n\nfunction nextTick(callback, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  return setTimeout(callback, delay);\n}\n\nfunction now() {\n  return Date.now();\n}\n\nfunction getComputedStyle(el) {\n  const window = getWindow();\n  let style;\n\n  if (window.getComputedStyle) {\n    style = window.getComputedStyle(el, null);\n  }\n\n  if (!style && el.currentStyle) {\n    style = el.currentStyle;\n  }\n\n  if (!style) {\n    style = el.style;\n  }\n\n  return style;\n}\n\nfunction getTranslate(el, axis) {\n  if (axis === void 0) {\n    axis = 'x';\n  }\n\n  const window = getWindow();\n  let matrix;\n  let curTransform;\n  let transformMatrix;\n  const curStyle = getComputedStyle(el, null);\n\n  if (window.WebKitCSSMatrix) {\n    curTransform = curStyle.transform || curStyle.webkitTransform;\n\n    if (curTransform.split(',').length > 6) {\n      curTransform = curTransform.split(', ').map(a => a.replace(',', '.')).join(', ');\n    } // Some old versions of Webkit choke when 'none' is passed; pass\n    // empty string instead in this case\n\n\n    transformMatrix = new window.WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);\n  } else {\n    transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n    matrix = transformMatrix.toString().split(',');\n  }\n\n  if (axis === 'x') {\n    // Latest Chrome and webkits Fix\n    if (window.WebKitCSSMatrix) curTransform = transformMatrix.m41; // Crazy IE10 Matrix\n    else if (matrix.length === 16) curTransform = parseFloat(matrix[12]); // Normal Browsers\n    else curTransform = parseFloat(matrix[4]);\n  }\n\n  if (axis === 'y') {\n    // Latest Chrome and webkits Fix\n    if (window.WebKitCSSMatrix) curTransform = transformMatrix.m42; // Crazy IE10 Matrix\n    else if (matrix.length === 16) curTransform = parseFloat(matrix[13]); // Normal Browsers\n    else curTransform = parseFloat(matrix[5]);\n  }\n\n  return curTransform || 0;\n}\n\nfunction isObject(o) {\n  return typeof o === 'object' && o !== null && o.constructor && Object.prototype.toString.call(o).slice(8, -1) === 'Object';\n}\n\nfunction isNode(node) {\n  // eslint-disable-next-line\n  if (typeof window !== 'undefined' && typeof window.HTMLElement !== 'undefined') {\n    return node instanceof HTMLElement;\n  }\n\n  return node && (node.nodeType === 1 || node.nodeType === 11);\n}\n\nfunction extend() {\n  const to = Object(arguments.length <= 0 ? undefined : arguments[0]);\n  const noExtend = ['__proto__', 'constructor', 'prototype'];\n\n  for (let i = 1; i < arguments.length; i += 1) {\n    const nextSource = i < 0 || arguments.length <= i ? undefined : arguments[i];\n\n    if (nextSource !== undefined && nextSource !== null && !isNode(nextSource)) {\n      const keysArray = Object.keys(Object(nextSource)).filter(key => noExtend.indexOf(key) < 0);\n\n      for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {\n        const nextKey = keysArray[nextIndex];\n        const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n\n        if (desc !== undefined && desc.enumerable) {\n          if (isObject(to[nextKey]) && isObject(nextSource[nextKey])) {\n            if (nextSource[nextKey].__swiper__) {\n              to[nextKey] = nextSource[nextKey];\n            } else {\n              extend(to[nextKey], nextSource[nextKey]);\n            }\n          } else if (!isObject(to[nextKey]) && isObject(nextSource[nextKey])) {\n            to[nextKey] = {};\n\n            if (nextSource[nextKey].__swiper__) {\n              to[nextKey] = nextSource[nextKey];\n            } else {\n              extend(to[nextKey], nextSource[nextKey]);\n            }\n          } else {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n    }\n  }\n\n  return to;\n}\n\nfunction setCSSProperty(el, varName, varValue) {\n  el.style.setProperty(varName, varValue);\n}\n\nfunction animateCSSModeScroll(_ref) {\n  let {\n    swiper,\n    targetPosition,\n    side\n  } = _ref;\n  const window = getWindow();\n  const startPosition = -swiper.translate;\n  let startTime = null;\n  let time;\n  const duration = swiper.params.speed;\n  swiper.wrapperEl.style.scrollSnapType = 'none';\n  window.cancelAnimationFrame(swiper.cssModeFrameID);\n  const dir = targetPosition > startPosition ? 'next' : 'prev';\n\n  const isOutOfBound = (current, target) => {\n    return dir === 'next' && current >= target || dir === 'prev' && current <= target;\n  };\n\n  const animate = () => {\n    time = new Date().getTime();\n\n    if (startTime === null) {\n      startTime = time;\n    }\n\n    const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n    const easeProgress = 0.5 - Math.cos(progress * Math.PI) / 2;\n    let currentPosition = startPosition + easeProgress * (targetPosition - startPosition);\n\n    if (isOutOfBound(currentPosition, targetPosition)) {\n      currentPosition = targetPosition;\n    }\n\n    swiper.wrapperEl.scrollTo({\n      [side]: currentPosition\n    });\n\n    if (isOutOfBound(currentPosition, targetPosition)) {\n      swiper.wrapperEl.style.overflow = 'hidden';\n      swiper.wrapperEl.style.scrollSnapType = '';\n      setTimeout(() => {\n        swiper.wrapperEl.style.overflow = '';\n        swiper.wrapperEl.scrollTo({\n          [side]: currentPosition\n        });\n      });\n      window.cancelAnimationFrame(swiper.cssModeFrameID);\n      return;\n    }\n\n    swiper.cssModeFrameID = window.requestAnimationFrame(animate);\n  };\n\n  animate();\n}\n\nexport { animateCSSModeScroll, deleteProps, nextTick, now, getTranslate, isObject, extend, getComputedStyle, setCSSProperty };","import { getWindow, getDocument } from 'ssr-window';\nlet support;\n\nfunction calcSupport() {\n  const window = getWindow();\n  const document = getDocument();\n  return {\n    smoothScroll: document.documentElement && 'scrollBehavior' in document.documentElement.style,\n    touch: !!('ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch),\n    passiveListener: function checkPassiveListener() {\n      let supportsPassive = false;\n\n      try {\n        const opts = Object.defineProperty({}, 'passive', {\n          // eslint-disable-next-line\n          get() {\n            supportsPassive = true;\n          }\n\n        });\n        window.addEventListener('testPassiveListener', null, opts);\n      } catch (e) {// No support\n      }\n\n      return supportsPassive;\n    }(),\n    gestures: function checkGestures() {\n      return 'ongesturestart' in window;\n    }()\n  };\n}\n\nfunction getSupport() {\n  if (!support) {\n    support = calcSupport();\n  }\n\n  return support;\n}\n\nexport { getSupport };","import { getWindow } from 'ssr-window';\nimport { getSupport } from './get-support.js';\nlet deviceCached;\n\nfunction calcDevice(_temp) {\n  let {\n    userAgent\n  } = _temp === void 0 ? {} : _temp;\n  const support = getSupport();\n  const window = getWindow();\n  const platform = window.navigator.platform;\n  const ua = userAgent || window.navigator.userAgent;\n  const device = {\n    ios: false,\n    android: false\n  };\n  const screenWidth = window.screen.width;\n  const screenHeight = window.screen.height;\n  const android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/); // eslint-disable-line\n\n  let ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  const ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  const iphone = !ipad && ua.match(/(iPhone\\sOS|iOS)\\s([\\d_]+)/);\n  const windows = platform === 'Win32';\n  let macos = platform === 'MacIntel'; // iPadOs 13 fix\n\n  const iPadScreens = ['1024x1366', '1366x1024', '834x1194', '1194x834', '834x1112', '1112x834', '768x1024', '1024x768', '820x1180', '1180x820', '810x1080', '1080x810'];\n\n  if (!ipad && macos && support.touch && iPadScreens.indexOf(`${screenWidth}x${screenHeight}`) >= 0) {\n    ipad = ua.match(/(Version)\\/([\\d.]+)/);\n    if (!ipad) ipad = [0, 1, '13_0_0'];\n    macos = false;\n  } // Android\n\n\n  if (android && !windows) {\n    device.os = 'android';\n    device.android = true;\n  }\n\n  if (ipad || iphone || ipod) {\n    device.os = 'ios';\n    device.ios = true;\n  } // Export object\n\n\n  return device;\n}\n\nfunction getDevice(overrides) {\n  if (overrides === void 0) {\n    overrides = {};\n  }\n\n  if (!deviceCached) {\n    deviceCached = calcDevice(overrides);\n  }\n\n  return deviceCached;\n}\n\nexport { getDevice };","import { getWindow } from 'ssr-window';\nlet browser;\n\nfunction calcBrowser() {\n  const window = getWindow();\n\n  function isSafari() {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return ua.indexOf('safari') >= 0 && ua.indexOf('chrome') < 0 && ua.indexOf('android') < 0;\n  }\n\n  return {\n    isSafari: isSafari(),\n    isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent)\n  };\n}\n\nfunction getBrowser() {\n  if (!browser) {\n    browser = calcBrowser();\n  }\n\n  return browser;\n}\n\nexport { getBrowser };","/* eslint-disable no-underscore-dangle */\nexport default {\n  on(events, handler, priority) {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (typeof handler !== 'function') return self;\n    const method = priority ? 'unshift' : 'push';\n    events.split(' ').forEach(event => {\n      if (!self.eventsListeners[event]) self.eventsListeners[event] = [];\n      self.eventsListeners[event][method](handler);\n    });\n    return self;\n  },\n\n  once(events, handler, priority) {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (typeof handler !== 'function') return self;\n\n    function onceHandler() {\n      self.off(events, onceHandler);\n\n      if (onceHandler.__emitterProxy) {\n        delete onceHandler.__emitterProxy;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      handler.apply(self, args);\n    }\n\n    onceHandler.__emitterProxy = handler;\n    return self.on(events, onceHandler, priority);\n  },\n\n  onAny(handler, priority) {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (typeof handler !== 'function') return self;\n    const method = priority ? 'unshift' : 'push';\n\n    if (self.eventsAnyListeners.indexOf(handler) < 0) {\n      self.eventsAnyListeners[method](handler);\n    }\n\n    return self;\n  },\n\n  offAny(handler) {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (!self.eventsAnyListeners) return self;\n    const index = self.eventsAnyListeners.indexOf(handler);\n\n    if (index >= 0) {\n      self.eventsAnyListeners.splice(index, 1);\n    }\n\n    return self;\n  },\n\n  off(events, handler) {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (!self.eventsListeners) return self;\n    events.split(' ').forEach(event => {\n      if (typeof handler === 'undefined') {\n        self.eventsListeners[event] = [];\n      } else if (self.eventsListeners[event]) {\n        self.eventsListeners[event].forEach((eventHandler, index) => {\n          if (eventHandler === handler || eventHandler.__emitterProxy && eventHandler.__emitterProxy === handler) {\n            self.eventsListeners[event].splice(index, 1);\n          }\n        });\n      }\n    });\n    return self;\n  },\n\n  emit() {\n    const self = this;\n    if (!self.eventsListeners || self.destroyed) return self;\n    if (!self.eventsListeners) return self;\n    let events;\n    let data;\n    let context;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (typeof args[0] === 'string' || Array.isArray(args[0])) {\n      events = args[0];\n      data = args.slice(1, args.length);\n      context = self;\n    } else {\n      events = args[0].events;\n      data = args[0].data;\n      context = args[0].context || self;\n    }\n\n    data.unshift(context);\n    const eventsArray = Array.isArray(events) ? events : events.split(' ');\n    eventsArray.forEach(event => {\n      if (self.eventsAnyListeners && self.eventsAnyListeners.length) {\n        self.eventsAnyListeners.forEach(eventHandler => {\n          eventHandler.apply(context, [event, ...data]);\n        });\n      }\n\n      if (self.eventsListeners && self.eventsListeners[event]) {\n        self.eventsListeners[event].forEach(eventHandler => {\n          eventHandler.apply(context, data);\n        });\n      }\n    });\n    return self;\n  }\n\n};","import updateSize from './updateSize.js';\nimport updateSlides from './updateSlides.js';\nimport updateAutoHeight from './updateAutoHeight.js';\nimport updateSlidesOffset from './updateSlidesOffset.js';\nimport updateSlidesProgress from './updateSlidesProgress.js';\nimport updateProgress from './updateProgress.js';\nimport updateSlidesClasses from './updateSlidesClasses.js';\nimport updateActiveIndex from './updateActiveIndex.js';\nimport updateClickedSlide from './updateClickedSlide.js';\nexport default {\n  updateSize,\n  updateSlides,\n  updateAutoHeight,\n  updateSlidesOffset,\n  updateSlidesProgress,\n  updateProgress,\n  updateSlidesClasses,\n  updateActiveIndex,\n  updateClickedSlide\n};","export default function updateSize() {\n  const swiper = this;\n  let width;\n  let height;\n  const $el = swiper.$el;\n\n  if (typeof swiper.params.width !== 'undefined' && swiper.params.width !== null) {\n    width = swiper.params.width;\n  } else {\n    width = $el[0].clientWidth;\n  }\n\n  if (typeof swiper.params.height !== 'undefined' && swiper.params.height !== null) {\n    height = swiper.params.height;\n  } else {\n    height = $el[0].clientHeight;\n  }\n\n  if (width === 0 && swiper.isHorizontal() || height === 0 && swiper.isVertical()) {\n    return;\n  } // Subtract paddings\n\n\n  width = width - parseInt($el.css('padding-left') || 0, 10) - parseInt($el.css('padding-right') || 0, 10);\n  height = height - parseInt($el.css('padding-top') || 0, 10) - parseInt($el.css('padding-bottom') || 0, 10);\n  if (Number.isNaN(width)) width = 0;\n  if (Number.isNaN(height)) height = 0;\n  Object.assign(swiper, {\n    width,\n    height,\n    size: swiper.isHorizontal() ? width : height\n  });\n}","import { setCSSProperty } from '../../shared/utils.js';\nexport default function updateSlides() {\n  const swiper = this;\n\n  function getDirectionLabel(property) {\n    if (swiper.isHorizontal()) {\n      return property;\n    } // prettier-ignore\n\n\n    return {\n      'width': 'height',\n      'margin-top': 'margin-left',\n      'margin-bottom ': 'margin-right',\n      'margin-left': 'margin-top',\n      'margin-right': 'margin-bottom',\n      'padding-left': 'padding-top',\n      'padding-right': 'padding-bottom',\n      'marginRight': 'marginBottom'\n    }[property];\n  }\n\n  function getDirectionPropertyValue(node, label) {\n    return parseFloat(node.getPropertyValue(getDirectionLabel(label)) || 0);\n  }\n\n  const params = swiper.params;\n  const {\n    $wrapperEl,\n    size: swiperSize,\n    rtlTranslate: rtl,\n    wrongRTL\n  } = swiper;\n  const isVirtual = swiper.virtual && params.virtual.enabled;\n  const previousSlidesLength = isVirtual ? swiper.virtual.slides.length : swiper.slides.length;\n  const slides = $wrapperEl.children(`.${swiper.params.slideClass}`);\n  const slidesLength = isVirtual ? swiper.virtual.slides.length : slides.length;\n  let snapGrid = [];\n  const slidesGrid = [];\n  const slidesSizesGrid = [];\n  let offsetBefore = params.slidesOffsetBefore;\n\n  if (typeof offsetBefore === 'function') {\n    offsetBefore = params.slidesOffsetBefore.call(swiper);\n  }\n\n  let offsetAfter = params.slidesOffsetAfter;\n\n  if (typeof offsetAfter === 'function') {\n    offsetAfter = params.slidesOffsetAfter.call(swiper);\n  }\n\n  const previousSnapGridLength = swiper.snapGrid.length;\n  const previousSlidesGridLength = swiper.slidesGrid.length;\n  let spaceBetween = params.spaceBetween;\n  let slidePosition = -offsetBefore;\n  let prevSlideSize = 0;\n  let index = 0;\n\n  if (typeof swiperSize === 'undefined') {\n    return;\n  }\n\n  if (typeof spaceBetween === 'string' && spaceBetween.indexOf('%') >= 0) {\n    spaceBetween = parseFloat(spaceBetween.replace('%', '')) / 100 * swiperSize;\n  }\n\n  swiper.virtualSize = -spaceBetween; // reset margins\n\n  if (rtl) slides.css({\n    marginLeft: '',\n    marginBottom: '',\n    marginTop: ''\n  });else slides.css({\n    marginRight: '',\n    marginBottom: '',\n    marginTop: ''\n  }); // reset cssMode offsets\n\n  if (params.centeredSlides && params.cssMode) {\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-before', '');\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-after', '');\n  }\n\n  const gridEnabled = params.grid && params.grid.rows > 1 && swiper.grid;\n\n  if (gridEnabled) {\n    swiper.grid.initSlides(slidesLength);\n  } // Calc slides\n\n\n  let slideSize;\n  const shouldResetSlideSize = params.slidesPerView === 'auto' && params.breakpoints && Object.keys(params.breakpoints).filter(key => {\n    return typeof params.breakpoints[key].slidesPerView !== 'undefined';\n  }).length > 0;\n\n  for (let i = 0; i < slidesLength; i += 1) {\n    slideSize = 0;\n    const slide = slides.eq(i);\n\n    if (gridEnabled) {\n      swiper.grid.updateSlide(i, slide, slidesLength, getDirectionLabel);\n    }\n\n    if (slide.css('display') === 'none') continue; // eslint-disable-line\n\n    if (params.slidesPerView === 'auto') {\n      if (shouldResetSlideSize) {\n        slides[i].style[getDirectionLabel('width')] = ``;\n      }\n\n      const slideStyles = getComputedStyle(slide[0]);\n      const currentTransform = slide[0].style.transform;\n      const currentWebKitTransform = slide[0].style.webkitTransform;\n\n      if (currentTransform) {\n        slide[0].style.transform = 'none';\n      }\n\n      if (currentWebKitTransform) {\n        slide[0].style.webkitTransform = 'none';\n      }\n\n      if (params.roundLengths) {\n        slideSize = swiper.isHorizontal() ? slide.outerWidth(true) : slide.outerHeight(true);\n      } else {\n        // eslint-disable-next-line\n        const width = getDirectionPropertyValue(slideStyles, 'width');\n        const paddingLeft = getDirectionPropertyValue(slideStyles, 'padding-left');\n        const paddingRight = getDirectionPropertyValue(slideStyles, 'padding-right');\n        const marginLeft = getDirectionPropertyValue(slideStyles, 'margin-left');\n        const marginRight = getDirectionPropertyValue(slideStyles, 'margin-right');\n        const boxSizing = slideStyles.getPropertyValue('box-sizing');\n\n        if (boxSizing && boxSizing === 'border-box') {\n          slideSize = width + marginLeft + marginRight;\n        } else {\n          const {\n            clientWidth,\n            offsetWidth\n          } = slide[0];\n          slideSize = width + paddingLeft + paddingRight + marginLeft + marginRight + (offsetWidth - clientWidth);\n        }\n      }\n\n      if (currentTransform) {\n        slide[0].style.transform = currentTransform;\n      }\n\n      if (currentWebKitTransform) {\n        slide[0].style.webkitTransform = currentWebKitTransform;\n      }\n\n      if (params.roundLengths) slideSize = Math.floor(slideSize);\n    } else {\n      slideSize = (swiperSize - (params.slidesPerView - 1) * spaceBetween) / params.slidesPerView;\n      if (params.roundLengths) slideSize = Math.floor(slideSize);\n\n      if (slides[i]) {\n        slides[i].style[getDirectionLabel('width')] = `${slideSize}px`;\n      }\n    }\n\n    if (slides[i]) {\n      slides[i].swiperSlideSize = slideSize;\n    }\n\n    slidesSizesGrid.push(slideSize);\n\n    if (params.centeredSlides) {\n      slidePosition = slidePosition + slideSize / 2 + prevSlideSize / 2 + spaceBetween;\n      if (prevSlideSize === 0 && i !== 0) slidePosition = slidePosition - swiperSize / 2 - spaceBetween;\n      if (i === 0) slidePosition = slidePosition - swiperSize / 2 - spaceBetween;\n      if (Math.abs(slidePosition) < 1 / 1000) slidePosition = 0;\n      if (params.roundLengths) slidePosition = Math.floor(slidePosition);\n      if (index % params.slidesPerGroup === 0) snapGrid.push(slidePosition);\n      slidesGrid.push(slidePosition);\n    } else {\n      if (params.roundLengths) slidePosition = Math.floor(slidePosition);\n      if ((index - Math.min(swiper.params.slidesPerGroupSkip, index)) % swiper.params.slidesPerGroup === 0) snapGrid.push(slidePosition);\n      slidesGrid.push(slidePosition);\n      slidePosition = slidePosition + slideSize + spaceBetween;\n    }\n\n    swiper.virtualSize += slideSize + spaceBetween;\n    prevSlideSize = slideSize;\n    index += 1;\n  }\n\n  swiper.virtualSize = Math.max(swiper.virtualSize, swiperSize) + offsetAfter;\n\n  if (rtl && wrongRTL && (params.effect === 'slide' || params.effect === 'coverflow')) {\n    $wrapperEl.css({\n      width: `${swiper.virtualSize + params.spaceBetween}px`\n    });\n  }\n\n  if (params.setWrapperSize) {\n    $wrapperEl.css({\n      [getDirectionLabel('width')]: `${swiper.virtualSize + params.spaceBetween}px`\n    });\n  }\n\n  if (gridEnabled) {\n    swiper.grid.updateWrapperSize(slideSize, snapGrid, getDirectionLabel);\n  } // Remove last grid elements depending on width\n\n\n  if (!params.centeredSlides) {\n    const newSlidesGrid = [];\n\n    for (let i = 0; i < snapGrid.length; i += 1) {\n      let slidesGridItem = snapGrid[i];\n      if (params.roundLengths) slidesGridItem = Math.floor(slidesGridItem);\n\n      if (snapGrid[i] <= swiper.virtualSize - swiperSize) {\n        newSlidesGrid.push(slidesGridItem);\n      }\n    }\n\n    snapGrid = newSlidesGrid;\n\n    if (Math.floor(swiper.virtualSize - swiperSize) - Math.floor(snapGrid[snapGrid.length - 1]) > 1) {\n      snapGrid.push(swiper.virtualSize - swiperSize);\n    }\n  }\n\n  if (snapGrid.length === 0) snapGrid = [0];\n\n  if (params.spaceBetween !== 0) {\n    const key = swiper.isHorizontal() && rtl ? 'marginLeft' : getDirectionLabel('marginRight');\n    slides.filter((_, slideIndex) => {\n      if (!params.cssMode) return true;\n\n      if (slideIndex === slides.length - 1) {\n        return false;\n      }\n\n      return true;\n    }).css({\n      [key]: `${spaceBetween}px`\n    });\n  }\n\n  if (params.centeredSlides && params.centeredSlidesBounds) {\n    let allSlidesSize = 0;\n    slidesSizesGrid.forEach(slideSizeValue => {\n      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);\n    });\n    allSlidesSize -= params.spaceBetween;\n    const maxSnap = allSlidesSize - swiperSize;\n    snapGrid = snapGrid.map(snap => {\n      if (snap < 0) return -offsetBefore;\n      if (snap > maxSnap) return maxSnap + offsetAfter;\n      return snap;\n    });\n  }\n\n  if (params.centerInsufficientSlides) {\n    let allSlidesSize = 0;\n    slidesSizesGrid.forEach(slideSizeValue => {\n      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);\n    });\n    allSlidesSize -= params.spaceBetween;\n\n    if (allSlidesSize < swiperSize) {\n      const allSlidesOffset = (swiperSize - allSlidesSize) / 2;\n      snapGrid.forEach((snap, snapIndex) => {\n        snapGrid[snapIndex] = snap - allSlidesOffset;\n      });\n      slidesGrid.forEach((snap, snapIndex) => {\n        slidesGrid[snapIndex] = snap + allSlidesOffset;\n      });\n    }\n  }\n\n  Object.assign(swiper, {\n    slides,\n    snapGrid,\n    slidesGrid,\n    slidesSizesGrid\n  });\n\n  if (params.centeredSlides && params.cssMode && !params.centeredSlidesBounds) {\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-before', `${-snapGrid[0]}px`);\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-after', `${swiper.size / 2 - slidesSizesGrid[slidesSizesGrid.length - 1] / 2}px`);\n    const addToSnapGrid = -swiper.snapGrid[0];\n    const addToSlidesGrid = -swiper.slidesGrid[0];\n    swiper.snapGrid = swiper.snapGrid.map(v => v + addToSnapGrid);\n    swiper.slidesGrid = swiper.slidesGrid.map(v => v + addToSlidesGrid);\n  }\n\n  if (slidesLength !== previousSlidesLength) {\n    swiper.emit('slidesLengthChange');\n  }\n\n  if (snapGrid.length !== previousSnapGridLength) {\n    if (swiper.params.watchOverflow) swiper.checkOverflow();\n    swiper.emit('snapGridLengthChange');\n  }\n\n  if (slidesGrid.length !== previousSlidesGridLength) {\n    swiper.emit('slidesGridLengthChange');\n  }\n\n  if (params.watchSlidesProgress) {\n    swiper.updateSlidesOffset();\n  }\n\n  if (!isVirtual && !params.cssMode && (params.effect === 'slide' || params.effect === 'fade')) {\n    const backFaceHiddenClass = `${params.containerModifierClass}backface-hidden`;\n    const hasClassBackfaceClassAdded = swiper.$el.hasClass(backFaceHiddenClass);\n\n    if (slidesLength <= params.maxBackfaceHiddenSlides) {\n      if (!hasClassBackfaceClassAdded) swiper.$el.addClass(backFaceHiddenClass);\n    } else if (hasClassBackfaceClassAdded) {\n      swiper.$el.removeClass(backFaceHiddenClass);\n    }\n  }\n}","import $ from '../../shared/dom.js';\nexport default function updateAutoHeight(speed) {\n  const swiper = this;\n  const activeSlides = [];\n  const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n  let newHeight = 0;\n  let i;\n\n  if (typeof speed === 'number') {\n    swiper.setTransition(speed);\n  } else if (speed === true) {\n    swiper.setTransition(swiper.params.speed);\n  }\n\n  const getSlideByIndex = index => {\n    if (isVirtual) {\n      return swiper.slides.filter(el => parseInt(el.getAttribute('data-swiper-slide-index'), 10) === index)[0];\n    }\n\n    return swiper.slides.eq(index)[0];\n  }; // Find slides currently in view\n\n\n  if (swiper.params.slidesPerView !== 'auto' && swiper.params.slidesPerView > 1) {\n    if (swiper.params.centeredSlides) {\n      (swiper.visibleSlides || $([])).each(slide => {\n        activeSlides.push(slide);\n      });\n    } else {\n      for (i = 0; i < Math.ceil(swiper.params.slidesPerView); i += 1) {\n        const index = swiper.activeIndex + i;\n        if (index > swiper.slides.length && !isVirtual) break;\n        activeSlides.push(getSlideByIndex(index));\n      }\n    }\n  } else {\n    activeSlides.push(getSlideByIndex(swiper.activeIndex));\n  } // Find new height from highest slide in view\n\n\n  for (i = 0; i < activeSlides.length; i += 1) {\n    if (typeof activeSlides[i] !== 'undefined') {\n      const height = activeSlides[i].offsetHeight;\n      newHeight = height > newHeight ? height : newHeight;\n    }\n  } // Update Height\n\n\n  if (newHeight || newHeight === 0) swiper.$wrapperEl.css('height', `${newHeight}px`);\n}","export default function updateSlidesOffset() {\n  const swiper = this;\n  const slides = swiper.slides;\n\n  for (let i = 0; i < slides.length; i += 1) {\n    slides[i].swiperSlideOffset = swiper.isHorizontal() ? slides[i].offsetLeft : slides[i].offsetTop;\n  }\n}","import $ from '../../shared/dom.js';\nexport default function updateSlidesProgress(translate) {\n  if (translate === void 0) {\n    translate = this && this.translate || 0;\n  }\n\n  const swiper = this;\n  const params = swiper.params;\n  const {\n    slides,\n    rtlTranslate: rtl,\n    snapGrid\n  } = swiper;\n  if (slides.length === 0) return;\n  if (typeof slides[0].swiperSlideOffset === 'undefined') swiper.updateSlidesOffset();\n  let offsetCenter = -translate;\n  if (rtl) offsetCenter = translate; // Visible Slides\n\n  slides.removeClass(params.slideVisibleClass);\n  swiper.visibleSlidesIndexes = [];\n  swiper.visibleSlides = [];\n\n  for (let i = 0; i < slides.length; i += 1) {\n    const slide = slides[i];\n    let slideOffset = slide.swiperSlideOffset;\n\n    if (params.cssMode && params.centeredSlides) {\n      slideOffset -= slides[0].swiperSlideOffset;\n    }\n\n    const slideProgress = (offsetCenter + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);\n    const originalSlideProgress = (offsetCenter - snapGrid[0] + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);\n    const slideBefore = -(offsetCenter - slideOffset);\n    const slideAfter = slideBefore + swiper.slidesSizesGrid[i];\n    const isVisible = slideBefore >= 0 && slideBefore < swiper.size - 1 || slideAfter > 1 && slideAfter <= swiper.size || slideBefore <= 0 && slideAfter >= swiper.size;\n\n    if (isVisible) {\n      swiper.visibleSlides.push(slide);\n      swiper.visibleSlidesIndexes.push(i);\n      slides.eq(i).addClass(params.slideVisibleClass);\n    }\n\n    slide.progress = rtl ? -slideProgress : slideProgress;\n    slide.originalProgress = rtl ? -originalSlideProgress : originalSlideProgress;\n  }\n\n  swiper.visibleSlides = $(swiper.visibleSlides);\n}","export default function updateProgress(translate) {\n  const swiper = this;\n\n  if (typeof translate === 'undefined') {\n    const multiplier = swiper.rtlTranslate ? -1 : 1; // eslint-disable-next-line\n\n    translate = swiper && swiper.translate && swiper.translate * multiplier || 0;\n  }\n\n  const params = swiper.params;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n  let {\n    progress,\n    isBeginning,\n    isEnd\n  } = swiper;\n  const wasBeginning = isBeginning;\n  const wasEnd = isEnd;\n\n  if (translatesDiff === 0) {\n    progress = 0;\n    isBeginning = true;\n    isEnd = true;\n  } else {\n    progress = (translate - swiper.minTranslate()) / translatesDiff;\n    isBeginning = progress <= 0;\n    isEnd = progress >= 1;\n  }\n\n  Object.assign(swiper, {\n    progress,\n    isBeginning,\n    isEnd\n  });\n  if (params.watchSlidesProgress || params.centeredSlides && params.autoHeight) swiper.updateSlidesProgress(translate);\n\n  if (isBeginning && !wasBeginning) {\n    swiper.emit('reachBeginning toEdge');\n  }\n\n  if (isEnd && !wasEnd) {\n    swiper.emit('reachEnd toEdge');\n  }\n\n  if (wasBeginning && !isBeginning || wasEnd && !isEnd) {\n    swiper.emit('fromEdge');\n  }\n\n  swiper.emit('progress', progress);\n}","export default function updateSlidesClasses() {\n  const swiper = this;\n  const {\n    slides,\n    params,\n    $wrapperEl,\n    activeIndex,\n    realIndex\n  } = swiper;\n  const isVirtual = swiper.virtual && params.virtual.enabled;\n  slides.removeClass(`${params.slideActiveClass} ${params.slideNextClass} ${params.slidePrevClass} ${params.slideDuplicateActiveClass} ${params.slideDuplicateNextClass} ${params.slideDuplicatePrevClass}`);\n  let activeSlide;\n\n  if (isVirtual) {\n    activeSlide = swiper.$wrapperEl.find(`.${params.slideClass}[data-swiper-slide-index=\"${activeIndex}\"]`);\n  } else {\n    activeSlide = slides.eq(activeIndex);\n  } // Active classes\n\n\n  activeSlide.addClass(params.slideActiveClass);\n\n  if (params.loop) {\n    // Duplicate to all looped slides\n    if (activeSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${realIndex}\"]`).addClass(params.slideDuplicateActiveClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${realIndex}\"]`).addClass(params.slideDuplicateActiveClass);\n    }\n  } // Next Slide\n\n\n  let nextSlide = activeSlide.nextAll(`.${params.slideClass}`).eq(0).addClass(params.slideNextClass);\n\n  if (params.loop && nextSlide.length === 0) {\n    nextSlide = slides.eq(0);\n    nextSlide.addClass(params.slideNextClass);\n  } // Prev Slide\n\n\n  let prevSlide = activeSlide.prevAll(`.${params.slideClass}`).eq(0).addClass(params.slidePrevClass);\n\n  if (params.loop && prevSlide.length === 0) {\n    prevSlide = slides.eq(-1);\n    prevSlide.addClass(params.slidePrevClass);\n  }\n\n  if (params.loop) {\n    // Duplicate to all looped slides\n    if (nextSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${nextSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicateNextClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${nextSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicateNextClass);\n    }\n\n    if (prevSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${prevSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicatePrevClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${prevSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicatePrevClass);\n    }\n  }\n\n  swiper.emitSlidesClasses();\n}","export default function updateActiveIndex(newActiveIndex) {\n  const swiper = this;\n  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;\n  const {\n    slidesGrid,\n    snapGrid,\n    params,\n    activeIndex: previousIndex,\n    realIndex: previousRealIndex,\n    snapIndex: previousSnapIndex\n  } = swiper;\n  let activeIndex = newActiveIndex;\n  let snapIndex;\n\n  if (typeof activeIndex === 'undefined') {\n    for (let i = 0; i < slidesGrid.length; i += 1) {\n      if (typeof slidesGrid[i + 1] !== 'undefined') {\n        if (translate >= slidesGrid[i] && translate < slidesGrid[i + 1] - (slidesGrid[i + 1] - slidesGrid[i]) / 2) {\n          activeIndex = i;\n        } else if (translate >= slidesGrid[i] && translate < slidesGrid[i + 1]) {\n          activeIndex = i + 1;\n        }\n      } else if (translate >= slidesGrid[i]) {\n        activeIndex = i;\n      }\n    } // Normalize slideIndex\n\n\n    if (params.normalizeSlideIndex) {\n      if (activeIndex < 0 || typeof activeIndex === 'undefined') activeIndex = 0;\n    }\n  }\n\n  if (snapGrid.indexOf(translate) >= 0) {\n    snapIndex = snapGrid.indexOf(translate);\n  } else {\n    const skip = Math.min(params.slidesPerGroupSkip, activeIndex);\n    snapIndex = skip + Math.floor((activeIndex - skip) / params.slidesPerGroup);\n  }\n\n  if (snapIndex >= snapGrid.length) snapIndex = snapGrid.length - 1;\n\n  if (activeIndex === previousIndex) {\n    if (snapIndex !== previousSnapIndex) {\n      swiper.snapIndex = snapIndex;\n      swiper.emit('snapIndexChange');\n    }\n\n    return;\n  } // Get real index\n\n\n  const realIndex = parseInt(swiper.slides.eq(activeIndex).attr('data-swiper-slide-index') || activeIndex, 10);\n  Object.assign(swiper, {\n    snapIndex,\n    realIndex,\n    previousIndex,\n    activeIndex\n  });\n  swiper.emit('activeIndexChange');\n  swiper.emit('snapIndexChange');\n\n  if (previousRealIndex !== realIndex) {\n    swiper.emit('realIndexChange');\n  }\n\n  if (swiper.initialized || swiper.params.runCallbacksOnInit) {\n    swiper.emit('slideChange');\n  }\n}","import $ from '../../shared/dom.js';\nexport default function updateClickedSlide(e) {\n  const swiper = this;\n  const params = swiper.params;\n  const slide = $(e).closest(`.${params.slideClass}`)[0];\n  let slideFound = false;\n  let slideIndex;\n\n  if (slide) {\n    for (let i = 0; i < swiper.slides.length; i += 1) {\n      if (swiper.slides[i] === slide) {\n        slideFound = true;\n        slideIndex = i;\n        break;\n      }\n    }\n  }\n\n  if (slide && slideFound) {\n    swiper.clickedSlide = slide;\n\n    if (swiper.virtual && swiper.params.virtual.enabled) {\n      swiper.clickedIndex = parseInt($(slide).attr('data-swiper-slide-index'), 10);\n    } else {\n      swiper.clickedIndex = slideIndex;\n    }\n  } else {\n    swiper.clickedSlide = undefined;\n    swiper.clickedIndex = undefined;\n    return;\n  }\n\n  if (params.slideToClickedSlide && swiper.clickedIndex !== undefined && swiper.clickedIndex !== swiper.activeIndex) {\n    swiper.slideToClickedSlide();\n  }\n}","export default function transitionEmit(_ref) {\n  let {\n    swiper,\n    runCallbacks,\n    direction,\n    step\n  } = _ref;\n  const {\n    activeIndex,\n    previousIndex\n  } = swiper;\n  let dir = direction;\n\n  if (!dir) {\n    if (activeIndex > previousIndex) dir = 'next';else if (activeIndex < previousIndex) dir = 'prev';else dir = 'reset';\n  }\n\n  swiper.emit(`transition${step}`);\n\n  if (runCallbacks && activeIndex !== previousIndex) {\n    if (dir === 'reset') {\n      swiper.emit(`slideResetTransition${step}`);\n      return;\n    }\n\n    swiper.emit(`slideChangeTransition${step}`);\n\n    if (dir === 'next') {\n      swiper.emit(`slideNextTransition${step}`);\n    } else {\n      swiper.emit(`slidePrevTransition${step}`);\n    }\n  }\n}","import slideTo from './slideTo.js';\nimport slideToLoop from './slideToLoop.js';\nimport slideNext from './slideNext.js';\nimport slidePrev from './slidePrev.js';\nimport slideReset from './slideReset.js';\nimport slideToClosest from './slideToClosest.js';\nimport slideToClickedSlide from './slideToClickedSlide.js';\nexport default {\n  slideTo,\n  slideToLoop,\n  slideNext,\n  slidePrev,\n  slideReset,\n  slideToClosest,\n  slideToClickedSlide\n};","import { animateCSSModeScroll } from '../../shared/utils.js';\nexport default function slideTo(index, speed, runCallbacks, internal, initial) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  if (typeof index !== 'number' && typeof index !== 'string') {\n    throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof index}] given.`);\n  }\n\n  if (typeof index === 'string') {\n    /**\n     * The `index` argument converted from `string` to `number`.\n     * @type {number}\n     */\n    const indexAsNumber = parseInt(index, 10);\n    /**\n     * Determines whether the `index` argument is a valid `number`\n     * after being converted from the `string` type.\n     * @type {boolean}\n     */\n\n    const isValidNumber = isFinite(indexAsNumber);\n\n    if (!isValidNumber) {\n      throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${index}] given.`);\n    } // Knowing that the converted `index` is a valid number,\n    // we can update the original argument's value.\n\n\n    index = indexAsNumber;\n  }\n\n  const swiper = this;\n  let slideIndex = index;\n  if (slideIndex < 0) slideIndex = 0;\n  const {\n    params,\n    snapGrid,\n    slidesGrid,\n    previousIndex,\n    activeIndex,\n    rtlTranslate: rtl,\n    wrapperEl,\n    enabled\n  } = swiper;\n\n  if (swiper.animating && params.preventInteractionOnTransition || !enabled && !internal && !initial) {\n    return false;\n  }\n\n  const skip = Math.min(swiper.params.slidesPerGroupSkip, slideIndex);\n  let snapIndex = skip + Math.floor((slideIndex - skip) / swiper.params.slidesPerGroup);\n  if (snapIndex >= snapGrid.length) snapIndex = snapGrid.length - 1;\n\n  if ((activeIndex || params.initialSlide || 0) === (previousIndex || 0) && runCallbacks) {\n    swiper.emit('beforeSlideChangeStart');\n  }\n\n  const translate = -snapGrid[snapIndex]; // Update progress\n\n  swiper.updateProgress(translate); // Normalize slideIndex\n\n  if (params.normalizeSlideIndex) {\n    for (let i = 0; i < slidesGrid.length; i += 1) {\n      const normalizedTranslate = -Math.floor(translate * 100);\n      const normalizedGrid = Math.floor(slidesGrid[i] * 100);\n      const normalizedGridNext = Math.floor(slidesGrid[i + 1] * 100);\n\n      if (typeof slidesGrid[i + 1] !== 'undefined') {\n        if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext - (normalizedGridNext - normalizedGrid) / 2) {\n          slideIndex = i;\n        } else if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext) {\n          slideIndex = i + 1;\n        }\n      } else if (normalizedTranslate >= normalizedGrid) {\n        slideIndex = i;\n      }\n    }\n  } // Directions locks\n\n\n  if (swiper.initialized && slideIndex !== activeIndex) {\n    if (!swiper.allowSlideNext && translate < swiper.translate && translate < swiper.minTranslate()) {\n      return false;\n    }\n\n    if (!swiper.allowSlidePrev && translate > swiper.translate && translate > swiper.maxTranslate()) {\n      if ((activeIndex || 0) !== slideIndex) return false;\n    }\n  }\n\n  let direction;\n  if (slideIndex > activeIndex) direction = 'next';else if (slideIndex < activeIndex) direction = 'prev';else direction = 'reset'; // Update Index\n\n  if (rtl && -translate === swiper.translate || !rtl && translate === swiper.translate) {\n    swiper.updateActiveIndex(slideIndex); // Update Height\n\n    if (params.autoHeight) {\n      swiper.updateAutoHeight();\n    }\n\n    swiper.updateSlidesClasses();\n\n    if (params.effect !== 'slide') {\n      swiper.setTranslate(translate);\n    }\n\n    if (direction !== 'reset') {\n      swiper.transitionStart(runCallbacks, direction);\n      swiper.transitionEnd(runCallbacks, direction);\n    }\n\n    return false;\n  }\n\n  if (params.cssMode) {\n    const isH = swiper.isHorizontal();\n    const t = rtl ? translate : -translate;\n\n    if (speed === 0) {\n      const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n\n      if (isVirtual) {\n        swiper.wrapperEl.style.scrollSnapType = 'none';\n        swiper._immediateVirtual = true;\n      }\n\n      wrapperEl[isH ? 'scrollLeft' : 'scrollTop'] = t;\n\n      if (isVirtual) {\n        requestAnimationFrame(() => {\n          swiper.wrapperEl.style.scrollSnapType = '';\n          swiper._swiperImmediateVirtual = false;\n        });\n      }\n    } else {\n      if (!swiper.support.smoothScroll) {\n        animateCSSModeScroll({\n          swiper,\n          targetPosition: t,\n          side: isH ? 'left' : 'top'\n        });\n        return true;\n      }\n\n      wrapperEl.scrollTo({\n        [isH ? 'left' : 'top']: t,\n        behavior: 'smooth'\n      });\n    }\n\n    return true;\n  }\n\n  swiper.setTransition(speed);\n  swiper.setTranslate(translate);\n  swiper.updateActiveIndex(slideIndex);\n  swiper.updateSlidesClasses();\n  swiper.emit('beforeTransitionStart', speed, internal);\n  swiper.transitionStart(runCallbacks, direction);\n\n  if (speed === 0) {\n    swiper.transitionEnd(runCallbacks, direction);\n  } else if (!swiper.animating) {\n    swiper.animating = true;\n\n    if (!swiper.onSlideToWrapperTransitionEnd) {\n      swiper.onSlideToWrapperTransitionEnd = function transitionEnd(e) {\n        if (!swiper || swiper.destroyed) return;\n        if (e.target !== this) return;\n        swiper.$wrapperEl[0].removeEventListener('transitionend', swiper.onSlideToWrapperTransitionEnd);\n        swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd', swiper.onSlideToWrapperTransitionEnd);\n        swiper.onSlideToWrapperTransitionEnd = null;\n        delete swiper.onSlideToWrapperTransitionEnd;\n        swiper.transitionEnd(runCallbacks, direction);\n      };\n    }\n\n    swiper.$wrapperEl[0].addEventListener('transitionend', swiper.onSlideToWrapperTransitionEnd);\n    swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd', swiper.onSlideToWrapperTransitionEnd);\n  }\n\n  return true;\n}","export default function slideToLoop(index, speed, runCallbacks, internal) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  if (typeof index === 'string') {\n    /**\n     * The `index` argument converted from `string` to `number`.\n     * @type {number}\n     */\n    const indexAsNumber = parseInt(index, 10);\n    /**\n     * Determines whether the `index` argument is a valid `number`\n     * after being converted from the `string` type.\n     * @type {boolean}\n     */\n\n    const isValidNumber = isFinite(indexAsNumber);\n\n    if (!isValidNumber) {\n      throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${index}] given.`);\n    } // Knowing that the converted `index` is a valid number,\n    // we can update the original argument's value.\n\n\n    index = indexAsNumber;\n  }\n\n  const swiper = this;\n  let newIndex = index;\n\n  if (swiper.params.loop) {\n    newIndex += swiper.loopedSlides;\n  }\n\n  return swiper.slideTo(newIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideNext(speed, runCallbacks, internal) {\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  const swiper = this;\n  const {\n    animating,\n    enabled,\n    params\n  } = swiper;\n  if (!enabled) return swiper;\n  let perGroup = params.slidesPerGroup;\n\n  if (params.slidesPerView === 'auto' && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {\n    perGroup = Math.max(swiper.slidesPerViewDynamic('current', true), 1);\n  }\n\n  const increment = swiper.activeIndex < params.slidesPerGroupSkip ? 1 : perGroup;\n\n  if (params.loop) {\n    if (animating && params.loopPreventsSlide) return false;\n    swiper.loopFix(); // eslint-disable-next-line\n\n    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;\n  }\n\n  if (params.rewind && swiper.isEnd) {\n    return swiper.slideTo(0, speed, runCallbacks, internal);\n  }\n\n  return swiper.slideTo(swiper.activeIndex + increment, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slidePrev(speed, runCallbacks, internal) {\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  const swiper = this;\n  const {\n    params,\n    animating,\n    snapGrid,\n    slidesGrid,\n    rtlTranslate,\n    enabled\n  } = swiper;\n  if (!enabled) return swiper;\n\n  if (params.loop) {\n    if (animating && params.loopPreventsSlide) return false;\n    swiper.loopFix(); // eslint-disable-next-line\n\n    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;\n  }\n\n  const translate = rtlTranslate ? swiper.translate : -swiper.translate;\n\n  function normalize(val) {\n    if (val < 0) return -Math.floor(Math.abs(val));\n    return Math.floor(val);\n  }\n\n  const normalizedTranslate = normalize(translate);\n  const normalizedSnapGrid = snapGrid.map(val => normalize(val));\n  let prevSnap = snapGrid[normalizedSnapGrid.indexOf(normalizedTranslate) - 1];\n\n  if (typeof prevSnap === 'undefined' && params.cssMode) {\n    let prevSnapIndex;\n    snapGrid.forEach((snap, snapIndex) => {\n      if (normalizedTranslate >= snap) {\n        // prevSnap = snap;\n        prevSnapIndex = snapIndex;\n      }\n    });\n\n    if (typeof prevSnapIndex !== 'undefined') {\n      prevSnap = snapGrid[prevSnapIndex > 0 ? prevSnapIndex - 1 : prevSnapIndex];\n    }\n  }\n\n  let prevIndex = 0;\n\n  if (typeof prevSnap !== 'undefined') {\n    prevIndex = slidesGrid.indexOf(prevSnap);\n    if (prevIndex < 0) prevIndex = swiper.activeIndex - 1;\n\n    if (params.slidesPerView === 'auto' && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {\n      prevIndex = prevIndex - swiper.slidesPerViewDynamic('previous', true) + 1;\n      prevIndex = Math.max(prevIndex, 0);\n    }\n  }\n\n  if (params.rewind && swiper.isBeginning) {\n    const lastIndex = swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual ? swiper.virtual.slides.length - 1 : swiper.slides.length - 1;\n    return swiper.slideTo(lastIndex, speed, runCallbacks, internal);\n  }\n\n  return swiper.slideTo(prevIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideReset(speed, runCallbacks, internal) {\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  const swiper = this;\n  return swiper.slideTo(swiper.activeIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideToClosest(speed, runCallbacks, internal, threshold) {\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  if (threshold === void 0) {\n    threshold = 0.5;\n  }\n\n  const swiper = this;\n  let index = swiper.activeIndex;\n  const skip = Math.min(swiper.params.slidesPerGroupSkip, index);\n  const snapIndex = skip + Math.floor((index - skip) / swiper.params.slidesPerGroup);\n  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;\n\n  if (translate >= swiper.snapGrid[snapIndex]) {\n    // The current translate is on or after the current snap index, so the choice\n    // is between the current index and the one after it.\n    const currentSnap = swiper.snapGrid[snapIndex];\n    const nextSnap = swiper.snapGrid[snapIndex + 1];\n\n    if (translate - currentSnap > (nextSnap - currentSnap) * threshold) {\n      index += swiper.params.slidesPerGroup;\n    }\n  } else {\n    // The current translate is before the current snap index, so the choice\n    // is between the current index and the one before it.\n    const prevSnap = swiper.snapGrid[snapIndex - 1];\n    const currentSnap = swiper.snapGrid[snapIndex];\n\n    if (translate - prevSnap <= (currentSnap - prevSnap) * threshold) {\n      index -= swiper.params.slidesPerGroup;\n    }\n  }\n\n  index = Math.max(index, 0);\n  index = Math.min(index, swiper.slidesGrid.length - 1);\n  return swiper.slideTo(index, speed, runCallbacks, internal);\n}","import $ from '../../shared/dom.js';\nimport { nextTick } from '../../shared/utils.js';\nexport default function slideToClickedSlide() {\n  const swiper = this;\n  const {\n    params,\n    $wrapperEl\n  } = swiper;\n  const slidesPerView = params.slidesPerView === 'auto' ? swiper.slidesPerViewDynamic() : params.slidesPerView;\n  let slideToIndex = swiper.clickedIndex;\n  let realIndex;\n\n  if (params.loop) {\n    if (swiper.animating) return;\n    realIndex = parseInt($(swiper.clickedSlide).attr('data-swiper-slide-index'), 10);\n\n    if (params.centeredSlides) {\n      if (slideToIndex < swiper.loopedSlides - slidesPerView / 2 || slideToIndex > swiper.slides.length - swiper.loopedSlides + slidesPerView / 2) {\n        swiper.loopFix();\n        slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index=\"${realIndex}\"]:not(.${params.slideDuplicateClass})`).eq(0).index();\n        nextTick(() => {\n          swiper.slideTo(slideToIndex);\n        });\n      } else {\n        swiper.slideTo(slideToIndex);\n      }\n    } else if (slideToIndex > swiper.slides.length - slidesPerView) {\n      swiper.loopFix();\n      slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index=\"${realIndex}\"]:not(.${params.slideDuplicateClass})`).eq(0).index();\n      nextTick(() => {\n        swiper.slideTo(slideToIndex);\n      });\n    } else {\n      swiper.slideTo(slideToIndex);\n    }\n  } else {\n    swiper.slideTo(slideToIndex);\n  }\n}","import loopCreate from './loopCreate.js';\nimport loopFix from './loopFix.js';\nimport loopDestroy from './loopDestroy.js';\nexport default {\n  loopCreate,\n  loopFix,\n  loopDestroy\n};","import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function loopCreate() {\n  const swiper = this;\n  const document = getDocument();\n  const {\n    params,\n    $wrapperEl\n  } = swiper; // Remove duplicated slides\n\n  const $selector = $wrapperEl.children().length > 0 ? $($wrapperEl.children()[0].parentNode) : $wrapperEl;\n  $selector.children(`.${params.slideClass}.${params.slideDuplicateClass}`).remove();\n  let slides = $selector.children(`.${params.slideClass}`);\n\n  if (params.loopFillGroupWithBlank) {\n    const blankSlidesNum = params.slidesPerGroup - slides.length % params.slidesPerGroup;\n\n    if (blankSlidesNum !== params.slidesPerGroup) {\n      for (let i = 0; i < blankSlidesNum; i += 1) {\n        const blankNode = $(document.createElement('div')).addClass(`${params.slideClass} ${params.slideBlankClass}`);\n        $selector.append(blankNode);\n      }\n\n      slides = $selector.children(`.${params.slideClass}`);\n    }\n  }\n\n  if (params.slidesPerView === 'auto' && !params.loopedSlides) params.loopedSlides = slides.length;\n  swiper.loopedSlides = Math.ceil(parseFloat(params.loopedSlides || params.slidesPerView, 10));\n  swiper.loopedSlides += params.loopAdditionalSlides;\n\n  if (swiper.loopedSlides > slides.length) {\n    swiper.loopedSlides = slides.length;\n  }\n\n  const prependSlides = [];\n  const appendSlides = [];\n  slides.each((el, index) => {\n    const slide = $(el);\n\n    if (index < swiper.loopedSlides) {\n      appendSlides.push(el);\n    }\n\n    if (index < slides.length && index >= slides.length - swiper.loopedSlides) {\n      prependSlides.push(el);\n    }\n\n    slide.attr('data-swiper-slide-index', index);\n  });\n\n  for (let i = 0; i < appendSlides.length; i += 1) {\n    $selector.append($(appendSlides[i].cloneNode(true)).addClass(params.slideDuplicateClass));\n  }\n\n  for (let i = prependSlides.length - 1; i >= 0; i -= 1) {\n    $selector.prepend($(prependSlides[i].cloneNode(true)).addClass(params.slideDuplicateClass));\n  }\n}","export default function loopFix() {\n  const swiper = this;\n  swiper.emit('beforeLoopFix');\n  const {\n    activeIndex,\n    slides,\n    loopedSlides,\n    allowSlidePrev,\n    allowSlideNext,\n    snapGrid,\n    rtlTranslate: rtl\n  } = swiper;\n  let newIndex;\n  swiper.allowSlidePrev = true;\n  swiper.allowSlideNext = true;\n  const snapTranslate = -snapGrid[activeIndex];\n  const diff = snapTranslate - swiper.getTranslate(); // Fix For Negative Oversliding\n\n  if (activeIndex < loopedSlides) {\n    newIndex = slides.length - loopedSlides * 3 + activeIndex;\n    newIndex += loopedSlides;\n    const slideChanged = swiper.slideTo(newIndex, 0, false, true);\n\n    if (slideChanged && diff !== 0) {\n      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);\n    }\n  } else if (activeIndex >= slides.length - loopedSlides) {\n    // Fix For Positive Oversliding\n    newIndex = -slides.length + activeIndex + loopedSlides;\n    newIndex += loopedSlides;\n    const slideChanged = swiper.slideTo(newIndex, 0, false, true);\n\n    if (slideChanged && diff !== 0) {\n      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);\n    }\n  }\n\n  swiper.allowSlidePrev = allowSlidePrev;\n  swiper.allowSlideNext = allowSlideNext;\n  swiper.emit('loopFix');\n}","export default function loopDestroy() {\n  const swiper = this;\n  const {\n    $wrapperEl,\n    params,\n    slides\n  } = swiper;\n  $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass},.${params.slideClass}.${params.slideBlankClass}`).remove();\n  slides.removeAttr('data-swiper-slide-index');\n}","import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { now } from '../../shared/utils.js'; // Modified from https://stackoverflow.com/questions/54520554/custom-element-getrootnode-closest-function-crossing-multiple-parent-shadowd\n\nfunction closestElement(selector, base) {\n  if (base === void 0) {\n    base = this;\n  }\n\n  function __closestFrom(el) {\n    if (!el || el === getDocument() || el === getWindow()) return null;\n    if (el.assignedSlot) el = el.assignedSlot;\n    const found = el.closest(selector);\n\n    if (!found && !el.getRootNode) {\n      return null;\n    }\n\n    return found || __closestFrom(el.getRootNode().host);\n  }\n\n  return __closestFrom(base);\n}\n\nexport default function onTouchStart(event) {\n  const swiper = this;\n  const document = getDocument();\n  const window = getWindow();\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n\n  if (swiper.animating && params.preventInteractionOnTransition) {\n    return;\n  }\n\n  if (!swiper.animating && params.cssMode && params.loop) {\n    swiper.loopFix();\n  }\n\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n  let $targetEl = $(e.target);\n\n  if (params.touchEventsTarget === 'wrapper') {\n    if (!$targetEl.closest(swiper.wrapperEl).length) return;\n  }\n\n  data.isTouchEvent = e.type === 'touchstart';\n  if (!data.isTouchEvent && 'which' in e && e.which === 3) return;\n  if (!data.isTouchEvent && 'button' in e && e.button > 0) return;\n  if (data.isTouched && data.isMoved) return; // change target el for shadow root component\n\n  const swipingClassHasValue = !!params.noSwipingClass && params.noSwipingClass !== '';\n\n  if (swipingClassHasValue && e.target && e.target.shadowRoot && event.path && event.path[0]) {\n    $targetEl = $(event.path[0]);\n  }\n\n  const noSwipingSelector = params.noSwipingSelector ? params.noSwipingSelector : `.${params.noSwipingClass}`;\n  const isTargetShadow = !!(e.target && e.target.shadowRoot); // use closestElement for shadow root element to get the actual closest for nested shadow root element\n\n  if (params.noSwiping && (isTargetShadow ? closestElement(noSwipingSelector, $targetEl[0]) : $targetEl.closest(noSwipingSelector)[0])) {\n    swiper.allowClick = true;\n    return;\n  }\n\n  if (params.swipeHandler) {\n    if (!$targetEl.closest(params.swipeHandler)[0]) return;\n  }\n\n  touches.currentX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n  touches.currentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  const startX = touches.currentX;\n  const startY = touches.currentY; // Do NOT start if iOS edge swipe is detected. Otherwise iOS app cannot swipe-to-go-back anymore\n\n  const edgeSwipeDetection = params.edgeSwipeDetection || params.iOSEdgeSwipeDetection;\n  const edgeSwipeThreshold = params.edgeSwipeThreshold || params.iOSEdgeSwipeThreshold;\n\n  if (edgeSwipeDetection && (startX <= edgeSwipeThreshold || startX >= window.innerWidth - edgeSwipeThreshold)) {\n    if (edgeSwipeDetection === 'prevent') {\n      event.preventDefault();\n    } else {\n      return;\n    }\n  }\n\n  Object.assign(data, {\n    isTouched: true,\n    isMoved: false,\n    allowTouchCallbacks: true,\n    isScrolling: undefined,\n    startMoving: undefined\n  });\n  touches.startX = startX;\n  touches.startY = startY;\n  data.touchStartTime = now();\n  swiper.allowClick = true;\n  swiper.updateSize();\n  swiper.swipeDirection = undefined;\n  if (params.threshold > 0) data.allowThresholdMove = false;\n\n  if (e.type !== 'touchstart') {\n    let preventDefault = true;\n\n    if ($targetEl.is(data.focusableElements)) {\n      preventDefault = false;\n\n      if ($targetEl[0].nodeName === 'SELECT') {\n        data.isTouched = false;\n      }\n    }\n\n    if (document.activeElement && $(document.activeElement).is(data.focusableElements) && document.activeElement !== $targetEl[0]) {\n      document.activeElement.blur();\n    }\n\n    const shouldPreventDefault = preventDefault && swiper.allowTouchMove && params.touchStartPreventDefault;\n\n    if ((params.touchStartForcePreventDefault || shouldPreventDefault) && !$targetEl[0].isContentEditable) {\n      e.preventDefault();\n    }\n  }\n\n  if (swiper.params.freeMode && swiper.params.freeMode.enabled && swiper.freeMode && swiper.animating && !params.cssMode) {\n    swiper.freeMode.onTouchStart();\n  }\n\n  swiper.emit('touchStart', e);\n}","import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { now } from '../../shared/utils.js';\nexport default function onTouchMove(event) {\n  const document = getDocument();\n  const swiper = this;\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    rtlTranslate: rtl,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n\n  if (!data.isTouched) {\n    if (data.startMoving && data.isScrolling) {\n      swiper.emit('touchMoveOpposite', e);\n    }\n\n    return;\n  }\n\n  if (data.isTouchEvent && e.type !== 'touchmove') return;\n  const targetTouch = e.type === 'touchmove' && e.targetTouches && (e.targetTouches[0] || e.changedTouches[0]);\n  const pageX = e.type === 'touchmove' ? targetTouch.pageX : e.pageX;\n  const pageY = e.type === 'touchmove' ? targetTouch.pageY : e.pageY;\n\n  if (e.preventedByNestedSwiper) {\n    touches.startX = pageX;\n    touches.startY = pageY;\n    return;\n  }\n\n  if (!swiper.allowTouchMove) {\n    if (!$(e.target).is(data.focusableElements)) {\n      swiper.allowClick = false;\n    }\n\n    if (data.isTouched) {\n      Object.assign(touches, {\n        startX: pageX,\n        startY: pageY,\n        currentX: pageX,\n        currentY: pageY\n      });\n      data.touchStartTime = now();\n    }\n\n    return;\n  }\n\n  if (data.isTouchEvent && params.touchReleaseOnEdges && !params.loop) {\n    if (swiper.isVertical()) {\n      // Vertical\n      if (pageY < touches.startY && swiper.translate <= swiper.maxTranslate() || pageY > touches.startY && swiper.translate >= swiper.minTranslate()) {\n        data.isTouched = false;\n        data.isMoved = false;\n        return;\n      }\n    } else if (pageX < touches.startX && swiper.translate <= swiper.maxTranslate() || pageX > touches.startX && swiper.translate >= swiper.minTranslate()) {\n      return;\n    }\n  }\n\n  if (data.isTouchEvent && document.activeElement) {\n    if (e.target === document.activeElement && $(e.target).is(data.focusableElements)) {\n      data.isMoved = true;\n      swiper.allowClick = false;\n      return;\n    }\n  }\n\n  if (data.allowTouchCallbacks) {\n    swiper.emit('touchMove', e);\n  }\n\n  if (e.targetTouches && e.targetTouches.length > 1) return;\n  touches.currentX = pageX;\n  touches.currentY = pageY;\n  const diffX = touches.currentX - touches.startX;\n  const diffY = touches.currentY - touches.startY;\n  if (swiper.params.threshold && Math.sqrt(diffX ** 2 + diffY ** 2) < swiper.params.threshold) return;\n\n  if (typeof data.isScrolling === 'undefined') {\n    let touchAngle;\n\n    if (swiper.isHorizontal() && touches.currentY === touches.startY || swiper.isVertical() && touches.currentX === touches.startX) {\n      data.isScrolling = false;\n    } else {\n      // eslint-disable-next-line\n      if (diffX * diffX + diffY * diffY >= 25) {\n        touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;\n        data.isScrolling = swiper.isHorizontal() ? touchAngle > params.touchAngle : 90 - touchAngle > params.touchAngle;\n      }\n    }\n  }\n\n  if (data.isScrolling) {\n    swiper.emit('touchMoveOpposite', e);\n  }\n\n  if (typeof data.startMoving === 'undefined') {\n    if (touches.currentX !== touches.startX || touches.currentY !== touches.startY) {\n      data.startMoving = true;\n    }\n  }\n\n  if (data.isScrolling) {\n    data.isTouched = false;\n    return;\n  }\n\n  if (!data.startMoving) {\n    return;\n  }\n\n  swiper.allowClick = false;\n\n  if (!params.cssMode && e.cancelable) {\n    e.preventDefault();\n  }\n\n  if (params.touchMoveStopPropagation && !params.nested) {\n    e.stopPropagation();\n  }\n\n  if (!data.isMoved) {\n    if (params.loop && !params.cssMode) {\n      swiper.loopFix();\n    }\n\n    data.startTranslate = swiper.getTranslate();\n    swiper.setTransition(0);\n\n    if (swiper.animating) {\n      swiper.$wrapperEl.trigger('webkitTransitionEnd transitionend');\n    }\n\n    data.allowMomentumBounce = false; // Grab Cursor\n\n    if (params.grabCursor && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {\n      swiper.setGrabCursor(true);\n    }\n\n    swiper.emit('sliderFirstMove', e);\n  }\n\n  swiper.emit('sliderMove', e);\n  data.isMoved = true;\n  let diff = swiper.isHorizontal() ? diffX : diffY;\n  touches.diff = diff;\n  diff *= params.touchRatio;\n  if (rtl) diff = -diff;\n  swiper.swipeDirection = diff > 0 ? 'prev' : 'next';\n  data.currentTranslate = diff + data.startTranslate;\n  let disableParentSwiper = true;\n  let resistanceRatio = params.resistanceRatio;\n\n  if (params.touchReleaseOnEdges) {\n    resistanceRatio = 0;\n  }\n\n  if (diff > 0 && data.currentTranslate > swiper.minTranslate()) {\n    disableParentSwiper = false;\n    if (params.resistance) data.currentTranslate = swiper.minTranslate() - 1 + (-swiper.minTranslate() + data.startTranslate + diff) ** resistanceRatio;\n  } else if (diff < 0 && data.currentTranslate < swiper.maxTranslate()) {\n    disableParentSwiper = false;\n    if (params.resistance) data.currentTranslate = swiper.maxTranslate() + 1 - (swiper.maxTranslate() - data.startTranslate - diff) ** resistanceRatio;\n  }\n\n  if (disableParentSwiper) {\n    e.preventedByNestedSwiper = true;\n  } // Directions locks\n\n\n  if (!swiper.allowSlideNext && swiper.swipeDirection === 'next' && data.currentTranslate < data.startTranslate) {\n    data.currentTranslate = data.startTranslate;\n  }\n\n  if (!swiper.allowSlidePrev && swiper.swipeDirection === 'prev' && data.currentTranslate > data.startTranslate) {\n    data.currentTranslate = data.startTranslate;\n  }\n\n  if (!swiper.allowSlidePrev && !swiper.allowSlideNext) {\n    data.currentTranslate = data.startTranslate;\n  } // Threshold\n\n\n  if (params.threshold > 0) {\n    if (Math.abs(diff) > params.threshold || data.allowThresholdMove) {\n      if (!data.allowThresholdMove) {\n        data.allowThresholdMove = true;\n        touches.startX = touches.currentX;\n        touches.startY = touches.currentY;\n        data.currentTranslate = data.startTranslate;\n        touches.diff = swiper.isHorizontal() ? touches.currentX - touches.startX : touches.currentY - touches.startY;\n        return;\n      }\n    } else {\n      data.currentTranslate = data.startTranslate;\n      return;\n    }\n  }\n\n  if (!params.followFinger || params.cssMode) return; // Update active index in free mode\n\n  if (params.freeMode && params.freeMode.enabled && swiper.freeMode || params.watchSlidesProgress) {\n    swiper.updateActiveIndex();\n    swiper.updateSlidesClasses();\n  }\n\n  if (swiper.params.freeMode && params.freeMode.enabled && swiper.freeMode) {\n    swiper.freeMode.onTouchMove();\n  } // Update progress\n\n\n  swiper.updateProgress(data.currentTranslate); // Update translate\n\n  swiper.setTranslate(data.currentTranslate);\n}","import { now, nextTick } from '../../shared/utils.js';\nexport default function onTouchEnd(event) {\n  const swiper = this;\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    rtlTranslate: rtl,\n    slidesGrid,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n\n  if (data.allowTouchCallbacks) {\n    swiper.emit('touchEnd', e);\n  }\n\n  data.allowTouchCallbacks = false;\n\n  if (!data.isTouched) {\n    if (data.isMoved && params.grabCursor) {\n      swiper.setGrabCursor(false);\n    }\n\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  } // Return Grab Cursor\n\n\n  if (params.grabCursor && data.isMoved && data.isTouched && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {\n    swiper.setGrabCursor(false);\n  } // Time diff\n\n\n  const touchEndTime = now();\n  const timeDiff = touchEndTime - data.touchStartTime; // Tap, doubleTap, Click\n\n  if (swiper.allowClick) {\n    const pathTree = e.path || e.composedPath && e.composedPath();\n    swiper.updateClickedSlide(pathTree && pathTree[0] || e.target);\n    swiper.emit('tap click', e);\n\n    if (timeDiff < 300 && touchEndTime - data.lastClickTime < 300) {\n      swiper.emit('doubleTap doubleClick', e);\n    }\n  }\n\n  data.lastClickTime = now();\n  nextTick(() => {\n    if (!swiper.destroyed) swiper.allowClick = true;\n  });\n\n  if (!data.isTouched || !data.isMoved || !swiper.swipeDirection || touches.diff === 0 || data.currentTranslate === data.startTranslate) {\n    data.isTouched = false;\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  }\n\n  data.isTouched = false;\n  data.isMoved = false;\n  data.startMoving = false;\n  let currentPos;\n\n  if (params.followFinger) {\n    currentPos = rtl ? swiper.translate : -swiper.translate;\n  } else {\n    currentPos = -data.currentTranslate;\n  }\n\n  if (params.cssMode) {\n    return;\n  }\n\n  if (swiper.params.freeMode && params.freeMode.enabled) {\n    swiper.freeMode.onTouchEnd({\n      currentPos\n    });\n    return;\n  } // Find current slide\n\n\n  let stopIndex = 0;\n  let groupSize = swiper.slidesSizesGrid[0];\n\n  for (let i = 0; i < slidesGrid.length; i += i < params.slidesPerGroupSkip ? 1 : params.slidesPerGroup) {\n    const increment = i < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n\n    if (typeof slidesGrid[i + increment] !== 'undefined') {\n      if (currentPos >= slidesGrid[i] && currentPos < slidesGrid[i + increment]) {\n        stopIndex = i;\n        groupSize = slidesGrid[i + increment] - slidesGrid[i];\n      }\n    } else if (currentPos >= slidesGrid[i]) {\n      stopIndex = i;\n      groupSize = slidesGrid[slidesGrid.length - 1] - slidesGrid[slidesGrid.length - 2];\n    }\n  }\n\n  let rewindFirstIndex = null;\n  let rewindLastIndex = null;\n\n  if (params.rewind) {\n    if (swiper.isBeginning) {\n      rewindLastIndex = swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual ? swiper.virtual.slides.length - 1 : swiper.slides.length - 1;\n    } else if (swiper.isEnd) {\n      rewindFirstIndex = 0;\n    }\n  } // Find current slide size\n\n\n  const ratio = (currentPos - slidesGrid[stopIndex]) / groupSize;\n  const increment = stopIndex < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n\n  if (timeDiff > params.longSwipesMs) {\n    // Long touches\n    if (!params.longSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n\n    if (swiper.swipeDirection === 'next') {\n      if (ratio >= params.longSwipesRatio) swiper.slideTo(params.rewind && swiper.isEnd ? rewindFirstIndex : stopIndex + increment);else swiper.slideTo(stopIndex);\n    }\n\n    if (swiper.swipeDirection === 'prev') {\n      if (ratio > 1 - params.longSwipesRatio) {\n        swiper.slideTo(stopIndex + increment);\n      } else if (rewindLastIndex !== null && ratio < 0 && Math.abs(ratio) > params.longSwipesRatio) {\n        swiper.slideTo(rewindLastIndex);\n      } else {\n        swiper.slideTo(stopIndex);\n      }\n    }\n  } else {\n    // Short swipes\n    if (!params.shortSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n\n    const isNavButtonTarget = swiper.navigation && (e.target === swiper.navigation.nextEl || e.target === swiper.navigation.prevEl);\n\n    if (!isNavButtonTarget) {\n      if (swiper.swipeDirection === 'next') {\n        swiper.slideTo(rewindFirstIndex !== null ? rewindFirstIndex : stopIndex + increment);\n      }\n\n      if (swiper.swipeDirection === 'prev') {\n        swiper.slideTo(rewindLastIndex !== null ? rewindLastIndex : stopIndex);\n      }\n    } else if (e.target === swiper.navigation.nextEl) {\n      swiper.slideTo(stopIndex + increment);\n    } else {\n      swiper.slideTo(stopIndex);\n    }\n  }\n}","export default function onResize() {\n  const swiper = this;\n  const {\n    params,\n    el\n  } = swiper;\n  if (el && el.offsetWidth === 0) return; // Breakpoints\n\n  if (params.breakpoints) {\n    swiper.setBreakpoint();\n  } // Save locks\n\n\n  const {\n    allowSlideNext,\n    allowSlidePrev,\n    snapGrid\n  } = swiper; // Disable locks on resize\n\n  swiper.allowSlideNext = true;\n  swiper.allowSlidePrev = true;\n  swiper.updateSize();\n  swiper.updateSlides();\n  swiper.updateSlidesClasses();\n\n  if ((params.slidesPerView === 'auto' || params.slidesPerView > 1) && swiper.isEnd && !swiper.isBeginning && !swiper.params.centeredSlides) {\n    swiper.slideTo(swiper.slides.length - 1, 0, false, true);\n  } else {\n    swiper.slideTo(swiper.activeIndex, 0, false, true);\n  }\n\n  if (swiper.autoplay && swiper.autoplay.running && swiper.autoplay.paused) {\n    swiper.autoplay.run();\n  } // Return locks after resize\n\n\n  swiper.allowSlidePrev = allowSlidePrev;\n  swiper.allowSlideNext = allowSlideNext;\n\n  if (swiper.params.watchOverflow && snapGrid !== swiper.snapGrid) {\n    swiper.checkOverflow();\n  }\n}","export default function onClick(e) {\n  const swiper = this;\n  if (!swiper.enabled) return;\n\n  if (!swiper.allowClick) {\n    if (swiper.params.preventClicks) e.preventDefault();\n\n    if (swiper.params.preventClicksPropagation && swiper.animating) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n  }\n}","export default function onScroll() {\n  const swiper = this;\n  const {\n    wrapperEl,\n    rtlTranslate,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  swiper.previousTranslate = swiper.translate;\n\n  if (swiper.isHorizontal()) {\n    swiper.translate = -wrapperEl.scrollLeft;\n  } else {\n    swiper.translate = -wrapperEl.scrollTop;\n  } // eslint-disable-next-line\n\n\n  if (swiper.translate === 0) swiper.translate = 0;\n  swiper.updateActiveIndex();\n  swiper.updateSlidesClasses();\n  let newProgress;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n\n  if (translatesDiff === 0) {\n    newProgress = 0;\n  } else {\n    newProgress = (swiper.translate - swiper.minTranslate()) / translatesDiff;\n  }\n\n  if (newProgress !== swiper.progress) {\n    swiper.updateProgress(rtlTranslate ? -swiper.translate : swiper.translate);\n  }\n\n  swiper.emit('setTranslate', swiper.translate, false);\n}","import { getDocument } from 'ssr-window';\nimport onTouchStart from './onTouchStart.js';\nimport onTouchMove from './onTouchMove.js';\nimport onTouchEnd from './onTouchEnd.js';\nimport onResize from './onResize.js';\nimport onClick from './onClick.js';\nimport onScroll from './onScroll.js';\nlet dummyEventAttached = false;\n\nfunction dummyEventListener() {}\n\nconst events = (swiper, method) => {\n  const document = getDocument();\n  const {\n    params,\n    touchEvents,\n    el,\n    wrapperEl,\n    device,\n    support\n  } = swiper;\n  const capture = !!params.nested;\n  const domMethod = method === 'on' ? 'addEventListener' : 'removeEventListener';\n  const swiperMethod = method; // Touch Events\n\n  if (!support.touch) {\n    el[domMethod](touchEvents.start, swiper.onTouchStart, false);\n    document[domMethod](touchEvents.move, swiper.onTouchMove, capture);\n    document[domMethod](touchEvents.end, swiper.onTouchEnd, false);\n  } else {\n    const passiveListener = touchEvents.start === 'touchstart' && support.passiveListener && params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    el[domMethod](touchEvents.start, swiper.onTouchStart, passiveListener);\n    el[domMethod](touchEvents.move, swiper.onTouchMove, support.passiveListener ? {\n      passive: false,\n      capture\n    } : capture);\n    el[domMethod](touchEvents.end, swiper.onTouchEnd, passiveListener);\n\n    if (touchEvents.cancel) {\n      el[domMethod](touchEvents.cancel, swiper.onTouchEnd, passiveListener);\n    }\n  } // Prevent Links Clicks\n\n\n  if (params.preventClicks || params.preventClicksPropagation) {\n    el[domMethod]('click', swiper.onClick, true);\n  }\n\n  if (params.cssMode) {\n    wrapperEl[domMethod]('scroll', swiper.onScroll);\n  } // Resize handler\n\n\n  if (params.updateOnWindowResize) {\n    swiper[swiperMethod](device.ios || device.android ? 'resize orientationchange observerUpdate' : 'resize observerUpdate', onResize, true);\n  } else {\n    swiper[swiperMethod]('observerUpdate', onResize, true);\n  }\n};\n\nfunction attachEvents() {\n  const swiper = this;\n  const document = getDocument();\n  const {\n    params,\n    support\n  } = swiper;\n  swiper.onTouchStart = onTouchStart.bind(swiper);\n  swiper.onTouchMove = onTouchMove.bind(swiper);\n  swiper.onTouchEnd = onTouchEnd.bind(swiper);\n\n  if (params.cssMode) {\n    swiper.onScroll = onScroll.bind(swiper);\n  }\n\n  swiper.onClick = onClick.bind(swiper);\n\n  if (support.touch && !dummyEventAttached) {\n    document.addEventListener('touchstart', dummyEventListener);\n    dummyEventAttached = true;\n  }\n\n  events(swiper, 'on');\n}\n\nfunction detachEvents() {\n  const swiper = this;\n  events(swiper, 'off');\n}\n\nexport default {\n  attachEvents,\n  detachEvents\n};","import { extend } from '../../shared/utils.js';\n\nconst isGridEnabled = (swiper, params) => {\n  return swiper.grid && params.grid && params.grid.rows > 1;\n};\n\nexport default function setBreakpoint() {\n  const swiper = this;\n  const {\n    activeIndex,\n    initialized,\n    loopedSlides = 0,\n    params,\n    $el\n  } = swiper;\n  const breakpoints = params.breakpoints;\n  if (!breakpoints || breakpoints && Object.keys(breakpoints).length === 0) return; // Get breakpoint for window width and update parameters\n\n  const breakpoint = swiper.getBreakpoint(breakpoints, swiper.params.breakpointsBase, swiper.el);\n  if (!breakpoint || swiper.currentBreakpoint === breakpoint) return;\n  const breakpointOnlyParams = breakpoint in breakpoints ? breakpoints[breakpoint] : undefined;\n  const breakpointParams = breakpointOnlyParams || swiper.originalParams;\n  const wasMultiRow = isGridEnabled(swiper, params);\n  const isMultiRow = isGridEnabled(swiper, breakpointParams);\n  const wasEnabled = params.enabled;\n\n  if (wasMultiRow && !isMultiRow) {\n    $el.removeClass(`${params.containerModifierClass}grid ${params.containerModifierClass}grid-column`);\n    swiper.emitContainerClasses();\n  } else if (!wasMultiRow && isMultiRow) {\n    $el.addClass(`${params.containerModifierClass}grid`);\n\n    if (breakpointParams.grid.fill && breakpointParams.grid.fill === 'column' || !breakpointParams.grid.fill && params.grid.fill === 'column') {\n      $el.addClass(`${params.containerModifierClass}grid-column`);\n    }\n\n    swiper.emitContainerClasses();\n  } // Toggle navigation, pagination, scrollbar\n\n\n  ['navigation', 'pagination', 'scrollbar'].forEach(prop => {\n    const wasModuleEnabled = params[prop] && params[prop].enabled;\n    const isModuleEnabled = breakpointParams[prop] && breakpointParams[prop].enabled;\n\n    if (wasModuleEnabled && !isModuleEnabled) {\n      swiper[prop].disable();\n    }\n\n    if (!wasModuleEnabled && isModuleEnabled) {\n      swiper[prop].enable();\n    }\n  });\n  const directionChanged = breakpointParams.direction && breakpointParams.direction !== params.direction;\n  const needsReLoop = params.loop && (breakpointParams.slidesPerView !== params.slidesPerView || directionChanged);\n\n  if (directionChanged && initialized) {\n    swiper.changeDirection();\n  }\n\n  extend(swiper.params, breakpointParams);\n  const isEnabled = swiper.params.enabled;\n  Object.assign(swiper, {\n    allowTouchMove: swiper.params.allowTouchMove,\n    allowSlideNext: swiper.params.allowSlideNext,\n    allowSlidePrev: swiper.params.allowSlidePrev\n  });\n\n  if (wasEnabled && !isEnabled) {\n    swiper.disable();\n  } else if (!wasEnabled && isEnabled) {\n    swiper.enable();\n  }\n\n  swiper.currentBreakpoint = breakpoint;\n  swiper.emit('_beforeBreakpoint', breakpointParams);\n\n  if (needsReLoop && initialized) {\n    swiper.loopDestroy();\n    swiper.loopCreate();\n    swiper.updateSlides();\n    swiper.slideTo(activeIndex - loopedSlides + swiper.loopedSlides, 0, false);\n  }\n\n  swiper.emit('breakpoint', breakpointParams);\n}","import addClasses from './addClasses.js';\nimport removeClasses from './removeClasses.js';\nexport default {\n  addClasses,\n  removeClasses\n};","function prepareClasses(entries, prefix) {\n  const resultClasses = [];\n  entries.forEach(item => {\n    if (typeof item === 'object') {\n      Object.keys(item).forEach(classNames => {\n        if (item[classNames]) {\n          resultClasses.push(prefix + classNames);\n        }\n      });\n    } else if (typeof item === 'string') {\n      resultClasses.push(prefix + item);\n    }\n  });\n  return resultClasses;\n}\n\nexport default function addClasses() {\n  const swiper = this;\n  const {\n    classNames,\n    params,\n    rtl,\n    $el,\n    device,\n    support\n  } = swiper; // prettier-ignore\n\n  const suffixes = prepareClasses(['initialized', params.direction, {\n    'pointer-events': !support.touch\n  }, {\n    'free-mode': swiper.params.freeMode && params.freeMode.enabled\n  }, {\n    'autoheight': params.autoHeight\n  }, {\n    'rtl': rtl\n  }, {\n    'grid': params.grid && params.grid.rows > 1\n  }, {\n    'grid-column': params.grid && params.grid.rows > 1 && params.grid.fill === 'column'\n  }, {\n    'android': device.android\n  }, {\n    'ios': device.ios\n  }, {\n    'css-mode': params.cssMode\n  }, {\n    'centered': params.cssMode && params.centeredSlides\n  }, {\n    'watch-progress': params.watchSlidesProgress\n  }], params.containerModifierClass);\n  classNames.push(...suffixes);\n  $el.addClass([...classNames].join(' '));\n  swiper.emitContainerClasses();\n}","export default function removeClasses() {\n  const swiper = this;\n  const {\n    $el,\n    classNames\n  } = swiper;\n  $el.removeClass(classNames.join(' '));\n  swiper.emitContainerClasses();\n}","export default {\n  init: true,\n  direction: 'horizontal',\n  touchEventsTarget: 'wrapper',\n  initialSlide: 0,\n  speed: 300,\n  cssMode: false,\n  updateOnWindowResize: true,\n  resizeObserver: true,\n  nested: false,\n  createElements: false,\n  enabled: true,\n  focusableElements: 'input, select, option, textarea, button, video, label',\n  // Overrides\n  width: null,\n  height: null,\n  //\n  preventInteractionOnTransition: false,\n  // ssr\n  userAgent: null,\n  url: null,\n  // To support iOS's swipe-to-go-back gesture (when being used in-app).\n  edgeSwipeDetection: false,\n  edgeSwipeThreshold: 20,\n  // Autoheight\n  autoHeight: false,\n  // Set wrapper width\n  setWrapperSize: false,\n  // Virtual Translate\n  virtualTranslate: false,\n  // Effects\n  effect: 'slide',\n  // 'slide' or 'fade' or 'cube' or 'coverflow' or 'flip'\n  // Breakpoints\n  breakpoints: undefined,\n  breakpointsBase: 'window',\n  // Slides grid\n  spaceBetween: 0,\n  slidesPerView: 1,\n  slidesPerGroup: 1,\n  slidesPerGroupSkip: 0,\n  slidesPerGroupAuto: false,\n  centeredSlides: false,\n  centeredSlidesBounds: false,\n  slidesOffsetBefore: 0,\n  // in px\n  slidesOffsetAfter: 0,\n  // in px\n  normalizeSlideIndex: true,\n  centerInsufficientSlides: false,\n  // Disable swiper and hide navigation when container not overflow\n  watchOverflow: true,\n  // Round length\n  roundLengths: false,\n  // Touches\n  touchRatio: 1,\n  touchAngle: 45,\n  simulateTouch: true,\n  shortSwipes: true,\n  longSwipes: true,\n  longSwipesRatio: 0.5,\n  longSwipesMs: 300,\n  followFinger: true,\n  allowTouchMove: true,\n  threshold: 0,\n  touchMoveStopPropagation: false,\n  touchStartPreventDefault: true,\n  touchStartForcePreventDefault: false,\n  touchReleaseOnEdges: false,\n  // Unique Navigation Elements\n  uniqueNavElements: true,\n  // Resistance\n  resistance: true,\n  resistanceRatio: 0.85,\n  // Progress\n  watchSlidesProgress: false,\n  // Cursor\n  grabCursor: false,\n  // Clicks\n  preventClicks: true,\n  preventClicksPropagation: true,\n  slideToClickedSlide: false,\n  // Images\n  preloadImages: true,\n  updateOnImagesReady: true,\n  // loop\n  loop: false,\n  loopAdditionalSlides: 0,\n  loopedSlides: null,\n  loopFillGroupWithBlank: false,\n  loopPreventsSlide: true,\n  // rewind\n  rewind: false,\n  // Swiping/no swiping\n  allowSlidePrev: true,\n  allowSlideNext: true,\n  swipeHandler: null,\n  // '.swipe-handler',\n  noSwiping: true,\n  noSwipingClass: 'swiper-no-swiping',\n  noSwipingSelector: null,\n  // Passive Listeners\n  passiveListeners: true,\n  maxBackfaceHiddenSlides: 10,\n  // NS\n  containerModifierClass: 'swiper-',\n  // NEW\n  slideClass: 'swiper-slide',\n  slideBlankClass: 'swiper-slide-invisible-blank',\n  slideActiveClass: 'swiper-slide-active',\n  slideDuplicateActiveClass: 'swiper-slide-duplicate-active',\n  slideVisibleClass: 'swiper-slide-visible',\n  slideDuplicateClass: 'swiper-slide-duplicate',\n  slideNextClass: 'swiper-slide-next',\n  slideDuplicateNextClass: 'swiper-slide-duplicate-next',\n  slidePrevClass: 'swiper-slide-prev',\n  slideDuplicatePrevClass: 'swiper-slide-duplicate-prev',\n  wrapperClass: 'swiper-wrapper',\n  // Callbacks\n  runCallbacksOnInit: true,\n  // Internals\n  _emitClasses: false\n};","import { extend } from '../shared/utils.js';\nexport default function moduleExtendParams(params, allModulesParams) {\n  return function extendParams(obj) {\n    if (obj === void 0) {\n      obj = {};\n    }\n\n    const moduleParamName = Object.keys(obj)[0];\n    const moduleParams = obj[moduleParamName];\n\n    if (typeof moduleParams !== 'object' || moduleParams === null) {\n      extend(allModulesParams, obj);\n      return;\n    }\n\n    if (['navigation', 'pagination', 'scrollbar'].indexOf(moduleParamName) >= 0 && params[moduleParamName] === true) {\n      params[moduleParamName] = {\n        auto: true\n      };\n    }\n\n    if (!(moduleParamName in params && 'enabled' in moduleParams)) {\n      extend(allModulesParams, obj);\n      return;\n    }\n\n    if (params[moduleParamName] === true) {\n      params[moduleParamName] = {\n        enabled: true\n      };\n    }\n\n    if (typeof params[moduleParamName] === 'object' && !('enabled' in params[moduleParamName])) {\n      params[moduleParamName].enabled = true;\n    }\n\n    if (!params[moduleParamName]) params[moduleParamName] = {\n      enabled: false\n    };\n    extend(allModulesParams, obj);\n  };\n}","/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport $ from '../shared/dom.js';\nimport { extend, now, deleteProps } from '../shared/utils.js';\nimport { getSupport } from '../shared/get-support.js';\nimport { getDevice } from '../shared/get-device.js';\nimport { getBrowser } from '../shared/get-browser.js';\nimport Resize from './modules/resize/resize.js';\nimport Observer from './modules/observer/observer.js';\nimport eventsEmitter from './events-emitter.js';\nimport update from './update/index.js';\nimport translate from './translate/index.js';\nimport transition from './transition/index.js';\nimport slide from './slide/index.js';\nimport loop from './loop/index.js';\nimport grabCursor from './grab-cursor/index.js';\nimport events from './events/index.js';\nimport breakpoints from './breakpoints/index.js';\nimport classes from './classes/index.js';\nimport images from './images/index.js';\nimport checkOverflow from './check-overflow/index.js';\nimport defaults from './defaults.js';\nimport moduleExtendParams from './moduleExtendParams.js';\nconst prototypes = {\n  eventsEmitter,\n  update,\n  translate,\n  transition,\n  slide,\n  loop,\n  grabCursor,\n  events,\n  breakpoints,\n  checkOverflow,\n  classes,\n  images\n};\nconst extendedDefaults = {};\n\nclass Swiper {\n  constructor() {\n    let el;\n    let params;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (args.length === 1 && args[0].constructor && Object.prototype.toString.call(args[0]).slice(8, -1) === 'Object') {\n      params = args[0];\n    } else {\n      [el, params] = args;\n    }\n\n    if (!params) params = {};\n    params = extend({}, params);\n    if (el && !params.el) params.el = el;\n\n    if (params.el && $(params.el).length > 1) {\n      const swipers = [];\n      $(params.el).each(containerEl => {\n        const newParams = extend({}, params, {\n          el: containerEl\n        });\n        swipers.push(new Swiper(newParams));\n      });\n      return swipers;\n    } // Swiper Instance\n\n\n    const swiper = this;\n    swiper.__swiper__ = true;\n    swiper.support = getSupport();\n    swiper.device = getDevice({\n      userAgent: params.userAgent\n    });\n    swiper.browser = getBrowser();\n    swiper.eventsListeners = {};\n    swiper.eventsAnyListeners = [];\n    swiper.modules = [...swiper.__modules__];\n\n    if (params.modules && Array.isArray(params.modules)) {\n      swiper.modules.push(...params.modules);\n    }\n\n    const allModulesParams = {};\n    swiper.modules.forEach(mod => {\n      mod({\n        swiper,\n        extendParams: moduleExtendParams(params, allModulesParams),\n        on: swiper.on.bind(swiper),\n        once: swiper.once.bind(swiper),\n        off: swiper.off.bind(swiper),\n        emit: swiper.emit.bind(swiper)\n      });\n    }); // Extend defaults with modules params\n\n    const swiperParams = extend({}, defaults, allModulesParams); // Extend defaults with passed params\n\n    swiper.params = extend({}, swiperParams, extendedDefaults, params);\n    swiper.originalParams = extend({}, swiper.params);\n    swiper.passedParams = extend({}, params); // add event listeners\n\n    if (swiper.params && swiper.params.on) {\n      Object.keys(swiper.params.on).forEach(eventName => {\n        swiper.on(eventName, swiper.params.on[eventName]);\n      });\n    }\n\n    if (swiper.params && swiper.params.onAny) {\n      swiper.onAny(swiper.params.onAny);\n    } // Save Dom lib\n\n\n    swiper.$ = $; // Extend Swiper\n\n    Object.assign(swiper, {\n      enabled: swiper.params.enabled,\n      el,\n      // Classes\n      classNames: [],\n      // Slides\n      slides: $(),\n      slidesGrid: [],\n      snapGrid: [],\n      slidesSizesGrid: [],\n\n      // isDirection\n      isHorizontal() {\n        return swiper.params.direction === 'horizontal';\n      },\n\n      isVertical() {\n        return swiper.params.direction === 'vertical';\n      },\n\n      // Indexes\n      activeIndex: 0,\n      realIndex: 0,\n      //\n      isBeginning: true,\n      isEnd: false,\n      // Props\n      translate: 0,\n      previousTranslate: 0,\n      progress: 0,\n      velocity: 0,\n      animating: false,\n      // Locks\n      allowSlideNext: swiper.params.allowSlideNext,\n      allowSlidePrev: swiper.params.allowSlidePrev,\n      // Touch Events\n      touchEvents: function touchEvents() {\n        const touch = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n        const desktop = ['pointerdown', 'pointermove', 'pointerup'];\n        swiper.touchEventsTouch = {\n          start: touch[0],\n          move: touch[1],\n          end: touch[2],\n          cancel: touch[3]\n        };\n        swiper.touchEventsDesktop = {\n          start: desktop[0],\n          move: desktop[1],\n          end: desktop[2]\n        };\n        return swiper.support.touch || !swiper.params.simulateTouch ? swiper.touchEventsTouch : swiper.touchEventsDesktop;\n      }(),\n      touchEventsData: {\n        isTouched: undefined,\n        isMoved: undefined,\n        allowTouchCallbacks: undefined,\n        touchStartTime: undefined,\n        isScrolling: undefined,\n        currentTranslate: undefined,\n        startTranslate: undefined,\n        allowThresholdMove: undefined,\n        // Form elements to match\n        focusableElements: swiper.params.focusableElements,\n        // Last click time\n        lastClickTime: now(),\n        clickTimeout: undefined,\n        // Velocities\n        velocities: [],\n        allowMomentumBounce: undefined,\n        isTouchEvent: undefined,\n        startMoving: undefined\n      },\n      // Clicks\n      allowClick: true,\n      // Touches\n      allowTouchMove: swiper.params.allowTouchMove,\n      touches: {\n        startX: 0,\n        startY: 0,\n        currentX: 0,\n        currentY: 0,\n        diff: 0\n      },\n      // Images\n      imagesToLoad: [],\n      imagesLoaded: 0\n    });\n    swiper.emit('_swiper'); // Init\n\n    if (swiper.params.init) {\n      swiper.init();\n    } // Return app instance\n\n\n    return swiper;\n  }\n\n  enable() {\n    const swiper = this;\n    if (swiper.enabled) return;\n    swiper.enabled = true;\n\n    if (swiper.params.grabCursor) {\n      swiper.setGrabCursor();\n    }\n\n    swiper.emit('enable');\n  }\n\n  disable() {\n    const swiper = this;\n    if (!swiper.enabled) return;\n    swiper.enabled = false;\n\n    if (swiper.params.grabCursor) {\n      swiper.unsetGrabCursor();\n    }\n\n    swiper.emit('disable');\n  }\n\n  setProgress(progress, speed) {\n    const swiper = this;\n    progress = Math.min(Math.max(progress, 0), 1);\n    const min = swiper.minTranslate();\n    const max = swiper.maxTranslate();\n    const current = (max - min) * progress + min;\n    swiper.translateTo(current, typeof speed === 'undefined' ? 0 : speed);\n    swiper.updateActiveIndex();\n    swiper.updateSlidesClasses();\n  }\n\n  emitContainerClasses() {\n    const swiper = this;\n    if (!swiper.params._emitClasses || !swiper.el) return;\n    const cls = swiper.el.className.split(' ').filter(className => {\n      return className.indexOf('swiper') === 0 || className.indexOf(swiper.params.containerModifierClass) === 0;\n    });\n    swiper.emit('_containerClasses', cls.join(' '));\n  }\n\n  getSlideClasses(slideEl) {\n    const swiper = this;\n    if (swiper.destroyed) return '';\n    return slideEl.className.split(' ').filter(className => {\n      return className.indexOf('swiper-slide') === 0 || className.indexOf(swiper.params.slideClass) === 0;\n    }).join(' ');\n  }\n\n  emitSlidesClasses() {\n    const swiper = this;\n    if (!swiper.params._emitClasses || !swiper.el) return;\n    const updates = [];\n    swiper.slides.each(slideEl => {\n      const classNames = swiper.getSlideClasses(slideEl);\n      updates.push({\n        slideEl,\n        classNames\n      });\n      swiper.emit('_slideClass', slideEl, classNames);\n    });\n    swiper.emit('_slideClasses', updates);\n  }\n\n  slidesPerViewDynamic(view, exact) {\n    if (view === void 0) {\n      view = 'current';\n    }\n\n    if (exact === void 0) {\n      exact = false;\n    }\n\n    const swiper = this;\n    const {\n      params,\n      slides,\n      slidesGrid,\n      slidesSizesGrid,\n      size: swiperSize,\n      activeIndex\n    } = swiper;\n    let spv = 1;\n\n    if (params.centeredSlides) {\n      let slideSize = slides[activeIndex].swiperSlideSize;\n      let breakLoop;\n\n      for (let i = activeIndex + 1; i < slides.length; i += 1) {\n        if (slides[i] && !breakLoop) {\n          slideSize += slides[i].swiperSlideSize;\n          spv += 1;\n          if (slideSize > swiperSize) breakLoop = true;\n        }\n      }\n\n      for (let i = activeIndex - 1; i >= 0; i -= 1) {\n        if (slides[i] && !breakLoop) {\n          slideSize += slides[i].swiperSlideSize;\n          spv += 1;\n          if (slideSize > swiperSize) breakLoop = true;\n        }\n      }\n    } else {\n      // eslint-disable-next-line\n      if (view === 'current') {\n        for (let i = activeIndex + 1; i < slides.length; i += 1) {\n          const slideInView = exact ? slidesGrid[i] + slidesSizesGrid[i] - slidesGrid[activeIndex] < swiperSize : slidesGrid[i] - slidesGrid[activeIndex] < swiperSize;\n\n          if (slideInView) {\n            spv += 1;\n          }\n        }\n      } else {\n        // previous\n        for (let i = activeIndex - 1; i >= 0; i -= 1) {\n          const slideInView = slidesGrid[activeIndex] - slidesGrid[i] < swiperSize;\n\n          if (slideInView) {\n            spv += 1;\n          }\n        }\n      }\n    }\n\n    return spv;\n  }\n\n  update() {\n    const swiper = this;\n    if (!swiper || swiper.destroyed) return;\n    const {\n      snapGrid,\n      params\n    } = swiper; // Breakpoints\n\n    if (params.breakpoints) {\n      swiper.setBreakpoint();\n    }\n\n    swiper.updateSize();\n    swiper.updateSlides();\n    swiper.updateProgress();\n    swiper.updateSlidesClasses();\n\n    function setTranslate() {\n      const translateValue = swiper.rtlTranslate ? swiper.translate * -1 : swiper.translate;\n      const newTranslate = Math.min(Math.max(translateValue, swiper.maxTranslate()), swiper.minTranslate());\n      swiper.setTranslate(newTranslate);\n      swiper.updateActiveIndex();\n      swiper.updateSlidesClasses();\n    }\n\n    let translated;\n\n    if (swiper.params.freeMode && swiper.params.freeMode.enabled) {\n      setTranslate();\n\n      if (swiper.params.autoHeight) {\n        swiper.updateAutoHeight();\n      }\n    } else {\n      if ((swiper.params.slidesPerView === 'auto' || swiper.params.slidesPerView > 1) && swiper.isEnd && !swiper.params.centeredSlides) {\n        translated = swiper.slideTo(swiper.slides.length - 1, 0, false, true);\n      } else {\n        translated = swiper.slideTo(swiper.activeIndex, 0, false, true);\n      }\n\n      if (!translated) {\n        setTranslate();\n      }\n    }\n\n    if (params.watchOverflow && snapGrid !== swiper.snapGrid) {\n      swiper.checkOverflow();\n    }\n\n    swiper.emit('update');\n  }\n\n  changeDirection(newDirection, needUpdate) {\n    if (needUpdate === void 0) {\n      needUpdate = true;\n    }\n\n    const swiper = this;\n    const currentDirection = swiper.params.direction;\n\n    if (!newDirection) {\n      // eslint-disable-next-line\n      newDirection = currentDirection === 'horizontal' ? 'vertical' : 'horizontal';\n    }\n\n    if (newDirection === currentDirection || newDirection !== 'horizontal' && newDirection !== 'vertical') {\n      return swiper;\n    }\n\n    swiper.$el.removeClass(`${swiper.params.containerModifierClass}${currentDirection}`).addClass(`${swiper.params.containerModifierClass}${newDirection}`);\n    swiper.emitContainerClasses();\n    swiper.params.direction = newDirection;\n    swiper.slides.each(slideEl => {\n      if (newDirection === 'vertical') {\n        slideEl.style.width = '';\n      } else {\n        slideEl.style.height = '';\n      }\n    });\n    swiper.emit('changeDirection');\n    if (needUpdate) swiper.update();\n    return swiper;\n  }\n\n  changeLanguageDirection(direction) {\n    const swiper = this;\n    if (swiper.rtl && direction === 'rtl' || !swiper.rtl && direction === 'ltr') return;\n    swiper.rtl = direction === 'rtl';\n    swiper.rtlTranslate = swiper.params.direction === 'horizontal' && swiper.rtl;\n\n    if (swiper.rtl) {\n      swiper.$el.addClass(`${swiper.params.containerModifierClass}rtl`);\n      swiper.el.dir = 'rtl';\n    } else {\n      swiper.$el.removeClass(`${swiper.params.containerModifierClass}rtl`);\n      swiper.el.dir = 'ltr';\n    }\n\n    swiper.update();\n  }\n\n  mount(el) {\n    const swiper = this;\n    if (swiper.mounted) return true; // Find el\n\n    const $el = $(el || swiper.params.el);\n    el = $el[0];\n\n    if (!el) {\n      return false;\n    }\n\n    el.swiper = swiper;\n\n    const getWrapperSelector = () => {\n      return `.${(swiper.params.wrapperClass || '').trim().split(' ').join('.')}`;\n    };\n\n    const getWrapper = () => {\n      if (el && el.shadowRoot && el.shadowRoot.querySelector) {\n        const res = $(el.shadowRoot.querySelector(getWrapperSelector())); // Children needs to return slot items\n\n        res.children = options => $el.children(options);\n\n        return res;\n      }\n\n      if (!$el.children) {\n        return $($el).children(getWrapperSelector());\n      }\n\n      return $el.children(getWrapperSelector());\n    }; // Find Wrapper\n\n\n    let $wrapperEl = getWrapper();\n\n    if ($wrapperEl.length === 0 && swiper.params.createElements) {\n      const document = getDocument();\n      const wrapper = document.createElement('div');\n      $wrapperEl = $(wrapper);\n      wrapper.className = swiper.params.wrapperClass;\n      $el.append(wrapper);\n      $el.children(`.${swiper.params.slideClass}`).each(slideEl => {\n        $wrapperEl.append(slideEl);\n      });\n    }\n\n    Object.assign(swiper, {\n      $el,\n      el,\n      $wrapperEl,\n      wrapperEl: $wrapperEl[0],\n      mounted: true,\n      // RTL\n      rtl: el.dir.toLowerCase() === 'rtl' || $el.css('direction') === 'rtl',\n      rtlTranslate: swiper.params.direction === 'horizontal' && (el.dir.toLowerCase() === 'rtl' || $el.css('direction') === 'rtl'),\n      wrongRTL: $wrapperEl.css('display') === '-webkit-box'\n    });\n    return true;\n  }\n\n  init(el) {\n    const swiper = this;\n    if (swiper.initialized) return swiper;\n    const mounted = swiper.mount(el);\n    if (mounted === false) return swiper;\n    swiper.emit('beforeInit'); // Set breakpoint\n\n    if (swiper.params.breakpoints) {\n      swiper.setBreakpoint();\n    } // Add Classes\n\n\n    swiper.addClasses(); // Create loop\n\n    if (swiper.params.loop) {\n      swiper.loopCreate();\n    } // Update size\n\n\n    swiper.updateSize(); // Update slides\n\n    swiper.updateSlides();\n\n    if (swiper.params.watchOverflow) {\n      swiper.checkOverflow();\n    } // Set Grab Cursor\n\n\n    if (swiper.params.grabCursor && swiper.enabled) {\n      swiper.setGrabCursor();\n    }\n\n    if (swiper.params.preloadImages) {\n      swiper.preloadImages();\n    } // Slide To Initial Slide\n\n\n    if (swiper.params.loop) {\n      swiper.slideTo(swiper.params.initialSlide + swiper.loopedSlides, 0, swiper.params.runCallbacksOnInit, false, true);\n    } else {\n      swiper.slideTo(swiper.params.initialSlide, 0, swiper.params.runCallbacksOnInit, false, true);\n    } // Attach events\n\n\n    swiper.attachEvents(); // Init Flag\n\n    swiper.initialized = true; // Emit\n\n    swiper.emit('init');\n    swiper.emit('afterInit');\n    return swiper;\n  }\n\n  destroy(deleteInstance, cleanStyles) {\n    if (deleteInstance === void 0) {\n      deleteInstance = true;\n    }\n\n    if (cleanStyles === void 0) {\n      cleanStyles = true;\n    }\n\n    const swiper = this;\n    const {\n      params,\n      $el,\n      $wrapperEl,\n      slides\n    } = swiper;\n\n    if (typeof swiper.params === 'undefined' || swiper.destroyed) {\n      return null;\n    }\n\n    swiper.emit('beforeDestroy'); // Init Flag\n\n    swiper.initialized = false; // Detach events\n\n    swiper.detachEvents(); // Destroy loop\n\n    if (params.loop) {\n      swiper.loopDestroy();\n    } // Cleanup styles\n\n\n    if (cleanStyles) {\n      swiper.removeClasses();\n      $el.removeAttr('style');\n      $wrapperEl.removeAttr('style');\n\n      if (slides && slides.length) {\n        slides.removeClass([params.slideVisibleClass, params.slideActiveClass, params.slideNextClass, params.slidePrevClass].join(' ')).removeAttr('style').removeAttr('data-swiper-slide-index');\n      }\n    }\n\n    swiper.emit('destroy'); // Detach emitter events\n\n    Object.keys(swiper.eventsListeners).forEach(eventName => {\n      swiper.off(eventName);\n    });\n\n    if (deleteInstance !== false) {\n      swiper.$el[0].swiper = null;\n      deleteProps(swiper);\n    }\n\n    swiper.destroyed = true;\n    return null;\n  }\n\n  static extendDefaults(newDefaults) {\n    extend(extendedDefaults, newDefaults);\n  }\n\n  static get extendedDefaults() {\n    return extendedDefaults;\n  }\n\n  static get defaults() {\n    return defaults;\n  }\n\n  static installModule(mod) {\n    if (!Swiper.prototype.__modules__) Swiper.prototype.__modules__ = [];\n    const modules = Swiper.prototype.__modules__;\n\n    if (typeof mod === 'function' && modules.indexOf(mod) < 0) {\n      modules.push(mod);\n    }\n  }\n\n  static use(module) {\n    if (Array.isArray(module)) {\n      module.forEach(m => Swiper.installModule(m));\n      return Swiper;\n    }\n\n    Swiper.installModule(module);\n    return Swiper;\n  }\n\n}\n\nObject.keys(prototypes).forEach(prototypeGroup => {\n  Object.keys(prototypes[prototypeGroup]).forEach(protoMethod => {\n    Swiper.prototype[protoMethod] = prototypes[prototypeGroup][protoMethod];\n  });\n});\nSwiper.use([Resize, Observer]);\nexport default Swiper;","import getTranslate from './getTranslate.js';\nimport setTranslate from './setTranslate.js';\nimport minTranslate from './minTranslate.js';\nimport maxTranslate from './maxTranslate.js';\nimport translateTo from './translateTo.js';\nexport default {\n  getTranslate,\n  setTranslate,\n  minTranslate,\n  maxTranslate,\n  translateTo\n};","import { getTranslate } from '../../shared/utils.js';\nexport default function getSwiperTranslate(axis) {\n  if (axis === void 0) {\n    axis = this.isHorizontal() ? 'x' : 'y';\n  }\n\n  const swiper = this;\n  const {\n    params,\n    rtlTranslate: rtl,\n    translate,\n    $wrapperEl\n  } = swiper;\n\n  if (params.virtualTranslate) {\n    return rtl ? -translate : translate;\n  }\n\n  if (params.cssMode) {\n    return translate;\n  }\n\n  let currentTranslate = getTranslate($wrapperEl[0], axis);\n  if (rtl) currentTranslate = -currentTranslate;\n  return currentTranslate || 0;\n}","export default function setTranslate(translate, byController) {\n  const swiper = this;\n  const {\n    rtlTranslate: rtl,\n    params,\n    $wrapperEl,\n    wrapperEl,\n    progress\n  } = swiper;\n  let x = 0;\n  let y = 0;\n  const z = 0;\n\n  if (swiper.isHorizontal()) {\n    x = rtl ? -translate : translate;\n  } else {\n    y = translate;\n  }\n\n  if (params.roundLengths) {\n    x = Math.floor(x);\n    y = Math.floor(y);\n  }\n\n  if (params.cssMode) {\n    wrapperEl[swiper.isHorizontal() ? 'scrollLeft' : 'scrollTop'] = swiper.isHorizontal() ? -x : -y;\n  } else if (!params.virtualTranslate) {\n    $wrapperEl.transform(`translate3d(${x}px, ${y}px, ${z}px)`);\n  }\n\n  swiper.previousTranslate = swiper.translate;\n  swiper.translate = swiper.isHorizontal() ? x : y; // Check if we need to update progress\n\n  let newProgress;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n\n  if (translatesDiff === 0) {\n    newProgress = 0;\n  } else {\n    newProgress = (translate - swiper.minTranslate()) / translatesDiff;\n  }\n\n  if (newProgress !== progress) {\n    swiper.updateProgress(translate);\n  }\n\n  swiper.emit('setTranslate', swiper.translate, byController);\n}","export default function minTranslate() {\n  return -this.snapGrid[0];\n}","export default function maxTranslate() {\n  return -this.snapGrid[this.snapGrid.length - 1];\n}","import { animateCSSModeScroll } from '../../shared/utils.js';\nexport default function translateTo(translate, speed, runCallbacks, translateBounds, internal) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (speed === void 0) {\n    speed = this.params.speed;\n  }\n\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  if (translateBounds === void 0) {\n    translateBounds = true;\n  }\n\n  const swiper = this;\n  const {\n    params,\n    wrapperEl\n  } = swiper;\n\n  if (swiper.animating && params.preventInteractionOnTransition) {\n    return false;\n  }\n\n  const minTranslate = swiper.minTranslate();\n  const maxTranslate = swiper.maxTranslate();\n  let newTranslate;\n  if (translateBounds && translate > minTranslate) newTranslate = minTranslate;else if (translateBounds && translate < maxTranslate) newTranslate = maxTranslate;else newTranslate = translate; // Update progress\n\n  swiper.updateProgress(newTranslate);\n\n  if (params.cssMode) {\n    const isH = swiper.isHorizontal();\n\n    if (speed === 0) {\n      wrapperEl[isH ? 'scrollLeft' : 'scrollTop'] = -newTranslate;\n    } else {\n      if (!swiper.support.smoothScroll) {\n        animateCSSModeScroll({\n          swiper,\n          targetPosition: -newTranslate,\n          side: isH ? 'left' : 'top'\n        });\n        return true;\n      }\n\n      wrapperEl.scrollTo({\n        [isH ? 'left' : 'top']: -newTranslate,\n        behavior: 'smooth'\n      });\n    }\n\n    return true;\n  }\n\n  if (speed === 0) {\n    swiper.setTransition(0);\n    swiper.setTranslate(newTranslate);\n\n    if (runCallbacks) {\n      swiper.emit('beforeTransitionStart', speed, internal);\n      swiper.emit('transitionEnd');\n    }\n  } else {\n    swiper.setTransition(speed);\n    swiper.setTranslate(newTranslate);\n\n    if (runCallbacks) {\n      swiper.emit('beforeTransitionStart', speed, internal);\n      swiper.emit('transitionStart');\n    }\n\n    if (!swiper.animating) {\n      swiper.animating = true;\n\n      if (!swiper.onTranslateToWrapperTransitionEnd) {\n        swiper.onTranslateToWrapperTransitionEnd = function transitionEnd(e) {\n          if (!swiper || swiper.destroyed) return;\n          if (e.target !== this) return;\n          swiper.$wrapperEl[0].removeEventListener('transitionend', swiper.onTranslateToWrapperTransitionEnd);\n          swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd', swiper.onTranslateToWrapperTransitionEnd);\n          swiper.onTranslateToWrapperTransitionEnd = null;\n          delete swiper.onTranslateToWrapperTransitionEnd;\n\n          if (runCallbacks) {\n            swiper.emit('transitionEnd');\n          }\n        };\n      }\n\n      swiper.$wrapperEl[0].addEventListener('transitionend', swiper.onTranslateToWrapperTransitionEnd);\n      swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd', swiper.onTranslateToWrapperTransitionEnd);\n    }\n  }\n\n  return true;\n}","import setTransition from './setTransition.js';\nimport transitionStart from './transitionStart.js';\nimport transitionEnd from './transitionEnd.js';\nexport default {\n  setTransition,\n  transitionStart,\n  transitionEnd\n};","export default function setTransition(duration, byController) {\n  const swiper = this;\n\n  if (!swiper.params.cssMode) {\n    swiper.$wrapperEl.transition(duration);\n  }\n\n  swiper.emit('setTransition', duration, byController);\n}","import transitionEmit from './transitionEmit.js';\nexport default function transitionStart(runCallbacks, direction) {\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  const swiper = this;\n  const {\n    params\n  } = swiper;\n  if (params.cssMode) return;\n\n  if (params.autoHeight) {\n    swiper.updateAutoHeight();\n  }\n\n  transitionEmit({\n    swiper,\n    runCallbacks,\n    direction,\n    step: 'Start'\n  });\n}","import transitionEmit from './transitionEmit.js';\nexport default function transitionEnd(runCallbacks, direction) {\n  if (runCallbacks === void 0) {\n    runCallbacks = true;\n  }\n\n  const swiper = this;\n  const {\n    params\n  } = swiper;\n  swiper.animating = false;\n  if (params.cssMode) return;\n  swiper.setTransition(0);\n  transitionEmit({\n    swiper,\n    runCallbacks,\n    direction,\n    step: 'End'\n  });\n}","import setGrabCursor from './setGrabCursor.js';\nimport unsetGrabCursor from './unsetGrabCursor.js';\nexport default {\n  setGrabCursor,\n  unsetGrabCursor\n};","export default function setGrabCursor(moving) {\n  const swiper = this;\n  if (swiper.support.touch || !swiper.params.simulateTouch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode) return;\n  const el = swiper.params.touchEventsTarget === 'container' ? swiper.el : swiper.wrapperEl;\n  el.style.cursor = 'move';\n  el.style.cursor = moving ? 'grabbing' : 'grab';\n}","export default function unsetGrabCursor() {\n  const swiper = this;\n\n  if (swiper.support.touch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode) {\n    return;\n  }\n\n  swiper[swiper.params.touchEventsTarget === 'container' ? 'el' : 'wrapperEl'].style.cursor = '';\n}","import setBreakpoint from './setBreakpoint.js';\nimport getBreakpoint from './getBreakpoint.js';\nexport default {\n  setBreakpoint,\n  getBreakpoint\n};","import { getWindow } from 'ssr-window';\nexport default function getBreakpoint(breakpoints, base, containerEl) {\n  if (base === void 0) {\n    base = 'window';\n  }\n\n  if (!breakpoints || base === 'container' && !containerEl) return undefined;\n  let breakpoint = false;\n  const window = getWindow();\n  const currentHeight = base === 'window' ? window.innerHeight : containerEl.clientHeight;\n  const points = Object.keys(breakpoints).map(point => {\n    if (typeof point === 'string' && point.indexOf('@') === 0) {\n      const minRatio = parseFloat(point.substr(1));\n      const value = currentHeight * minRatio;\n      return {\n        value,\n        point\n      };\n    }\n\n    return {\n      value: point,\n      point\n    };\n  });\n  points.sort((a, b) => parseInt(a.value, 10) - parseInt(b.value, 10));\n\n  for (let i = 0; i < points.length; i += 1) {\n    const {\n      point,\n      value\n    } = points[i];\n\n    if (base === 'window') {\n      if (window.matchMedia(`(min-width: ${value}px)`).matches) {\n        breakpoint = point;\n      }\n    } else if (value <= containerEl.clientWidth) {\n      breakpoint = point;\n    }\n  }\n\n  return breakpoint || 'max';\n}","function checkOverflow() {\n  const swiper = this;\n  const {\n    isLocked: wasLocked,\n    params\n  } = swiper;\n  const {\n    slidesOffsetBefore\n  } = params;\n\n  if (slidesOffsetBefore) {\n    const lastSlideIndex = swiper.slides.length - 1;\n    const lastSlideRightEdge = swiper.slidesGrid[lastSlideIndex] + swiper.slidesSizesGrid[lastSlideIndex] + slidesOffsetBefore * 2;\n    swiper.isLocked = swiper.size > lastSlideRightEdge;\n  } else {\n    swiper.isLocked = swiper.snapGrid.length === 1;\n  }\n\n  if (params.allowSlideNext === true) {\n    swiper.allowSlideNext = !swiper.isLocked;\n  }\n\n  if (params.allowSlidePrev === true) {\n    swiper.allowSlidePrev = !swiper.isLocked;\n  }\n\n  if (wasLocked && wasLocked !== swiper.isLocked) {\n    swiper.isEnd = false;\n  }\n\n  if (wasLocked !== swiper.isLocked) {\n    swiper.emit(swiper.isLocked ? 'lock' : 'unlock');\n  }\n}\n\nexport default {\n  checkOverflow\n};","import loadImage from './loadImage.js';\nimport preloadImages from './preloadImages.js';\nexport default {\n  loadImage,\n  preloadImages\n};","import { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function loadImage(imageEl, src, srcset, sizes, checkForComplete, callback) {\n  const window = getWindow();\n  let image;\n\n  function onReady() {\n    if (callback) callback();\n  }\n\n  const isPicture = $(imageEl).parent('picture')[0];\n\n  if (!isPicture && (!imageEl.complete || !checkForComplete)) {\n    if (src) {\n      image = new window.Image();\n      image.onload = onReady;\n      image.onerror = onReady;\n\n      if (sizes) {\n        image.sizes = sizes;\n      }\n\n      if (srcset) {\n        image.srcset = srcset;\n      }\n\n      if (src) {\n        image.src = src;\n      }\n    } else {\n      onReady();\n    }\n  } else {\n    // image already loaded...\n    onReady();\n  }\n}","export default function preloadImages() {\n  const swiper = this;\n  swiper.imagesToLoad = swiper.$el.find('img');\n\n  function onReady() {\n    if (typeof swiper === 'undefined' || swiper === null || !swiper || swiper.destroyed) return;\n    if (swiper.imagesLoaded !== undefined) swiper.imagesLoaded += 1;\n\n    if (swiper.imagesLoaded === swiper.imagesToLoad.length) {\n      if (swiper.params.updateOnImagesReady) swiper.update();\n      swiper.emit('imagesReady');\n    }\n  }\n\n  for (let i = 0; i < swiper.imagesToLoad.length; i += 1) {\n    const imageEl = swiper.imagesToLoad[i];\n    swiper.loadImage(imageEl, imageEl.currentSrc || imageEl.getAttribute('src'), imageEl.srcset || imageEl.getAttribute('srcset'), imageEl.sizes || imageEl.getAttribute('sizes'), true, onReady);\n  }\n}","import { getWindow } from 'ssr-window';\nexport default function Resize(_ref) {\n  let {\n    swiper,\n    on,\n    emit\n  } = _ref;\n  const window = getWindow();\n  let observer = null;\n  let animationFrame = null;\n\n  const resizeHandler = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    emit('beforeResize');\n    emit('resize');\n  };\n\n  const createObserver = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    observer = new ResizeObserver(entries => {\n      animationFrame = window.requestAnimationFrame(() => {\n        const {\n          width,\n          height\n        } = swiper;\n        let newWidth = width;\n        let newHeight = height;\n        entries.forEach(_ref2 => {\n          let {\n            contentBoxSize,\n            contentRect,\n            target\n          } = _ref2;\n          if (target && target !== swiper.el) return;\n          newWidth = contentRect ? contentRect.width : (contentBoxSize[0] || contentBoxSize).inlineSize;\n          newHeight = contentRect ? contentRect.height : (contentBoxSize[0] || contentBoxSize).blockSize;\n        });\n\n        if (newWidth !== width || newHeight !== height) {\n          resizeHandler();\n        }\n      });\n    });\n    observer.observe(swiper.el);\n  };\n\n  const removeObserver = () => {\n    if (animationFrame) {\n      window.cancelAnimationFrame(animationFrame);\n    }\n\n    if (observer && observer.unobserve && swiper.el) {\n      observer.unobserve(swiper.el);\n      observer = null;\n    }\n  };\n\n  const orientationChangeHandler = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    emit('orientationchange');\n  };\n\n  on('init', () => {\n    if (swiper.params.resizeObserver && typeof window.ResizeObserver !== 'undefined') {\n      createObserver();\n      return;\n    }\n\n    window.addEventListener('resize', resizeHandler);\n    window.addEventListener('orientationchange', orientationChangeHandler);\n  });\n  on('destroy', () => {\n    removeObserver();\n    window.removeEventListener('resize', resizeHandler);\n    window.removeEventListener('orientationchange', orientationChangeHandler);\n  });\n}","import { getWindow } from 'ssr-window';\nexport default function Observer(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const observers = [];\n  const window = getWindow();\n\n  const attach = function (target, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    const ObserverFunc = window.MutationObserver || window.WebkitMutationObserver;\n    const observer = new ObserverFunc(mutations => {\n      // The observerUpdate event should only be triggered\n      // once despite the number of mutations.  Additional\n      // triggers are redundant and are very costly\n      if (mutations.length === 1) {\n        emit('observerUpdate', mutations[0]);\n        return;\n      }\n\n      const observerUpdate = function observerUpdate() {\n        emit('observerUpdate', mutations[0]);\n      };\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(observerUpdate);\n      } else {\n        window.setTimeout(observerUpdate, 0);\n      }\n    });\n    observer.observe(target, {\n      attributes: typeof options.attributes === 'undefined' ? true : options.attributes,\n      childList: typeof options.childList === 'undefined' ? true : options.childList,\n      characterData: typeof options.characterData === 'undefined' ? true : options.characterData\n    });\n    observers.push(observer);\n  };\n\n  const init = () => {\n    if (!swiper.params.observer) return;\n\n    if (swiper.params.observeParents) {\n      const containerParents = swiper.$el.parents();\n\n      for (let i = 0; i < containerParents.length; i += 1) {\n        attach(containerParents[i]);\n      }\n    } // Observe container\n\n\n    attach(swiper.$el[0], {\n      childList: swiper.params.observeSlideChildren\n    }); // Observe wrapper\n\n    attach(swiper.$wrapperEl[0], {\n      attributes: false\n    });\n  };\n\n  const destroy = () => {\n    observers.forEach(observer => {\n      observer.disconnect();\n    });\n    observers.splice(0, observers.length);\n  };\n\n  extendParams({\n    observer: false,\n    observeParents: false,\n    observeSlideChildren: false\n  });\n  on('init', init);\n  on('destroy', destroy);\n}","import $ from '../../shared/dom.js';\nimport { setCSSProperty } from '../../shared/utils.js';\nexport default function Virtual(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  extendParams({\n    virtual: {\n      enabled: false,\n      slides: [],\n      cache: true,\n      renderSlide: null,\n      renderExternal: null,\n      renderExternalUpdate: true,\n      addSlidesBefore: 0,\n      addSlidesAfter: 0\n    }\n  });\n  let cssModeTimeout;\n  swiper.virtual = {\n    cache: {},\n    from: undefined,\n    to: undefined,\n    slides: [],\n    offset: 0,\n    slidesGrid: []\n  };\n\n  function renderSlide(slide, index) {\n    const params = swiper.params.virtual;\n\n    if (params.cache && swiper.virtual.cache[index]) {\n      return swiper.virtual.cache[index];\n    }\n\n    const $slideEl = params.renderSlide ? $(params.renderSlide.call(swiper, slide, index)) : $(`<div class=\"${swiper.params.slideClass}\" data-swiper-slide-index=\"${index}\">${slide}</div>`);\n    if (!$slideEl.attr('data-swiper-slide-index')) $slideEl.attr('data-swiper-slide-index', index);\n    if (params.cache) swiper.virtual.cache[index] = $slideEl;\n    return $slideEl;\n  }\n\n  function update(force) {\n    const {\n      slidesPerView,\n      slidesPerGroup,\n      centeredSlides\n    } = swiper.params;\n    const {\n      addSlidesBefore,\n      addSlidesAfter\n    } = swiper.params.virtual;\n    const {\n      from: previousFrom,\n      to: previousTo,\n      slides,\n      slidesGrid: previousSlidesGrid,\n      offset: previousOffset\n    } = swiper.virtual;\n\n    if (!swiper.params.cssMode) {\n      swiper.updateActiveIndex();\n    }\n\n    const activeIndex = swiper.activeIndex || 0;\n    let offsetProp;\n    if (swiper.rtlTranslate) offsetProp = 'right';else offsetProp = swiper.isHorizontal() ? 'left' : 'top';\n    let slidesAfter;\n    let slidesBefore;\n\n    if (centeredSlides) {\n      slidesAfter = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesAfter;\n      slidesBefore = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesBefore;\n    } else {\n      slidesAfter = slidesPerView + (slidesPerGroup - 1) + addSlidesAfter;\n      slidesBefore = slidesPerGroup + addSlidesBefore;\n    }\n\n    const from = Math.max((activeIndex || 0) - slidesBefore, 0);\n    const to = Math.min((activeIndex || 0) + slidesAfter, slides.length - 1);\n    const offset = (swiper.slidesGrid[from] || 0) - (swiper.slidesGrid[0] || 0);\n    Object.assign(swiper.virtual, {\n      from,\n      to,\n      offset,\n      slidesGrid: swiper.slidesGrid\n    });\n\n    function onRendered() {\n      swiper.updateSlides();\n      swiper.updateProgress();\n      swiper.updateSlidesClasses();\n\n      if (swiper.lazy && swiper.params.lazy.enabled) {\n        swiper.lazy.load();\n      }\n\n      emit('virtualUpdate');\n    }\n\n    if (previousFrom === from && previousTo === to && !force) {\n      if (swiper.slidesGrid !== previousSlidesGrid && offset !== previousOffset) {\n        swiper.slides.css(offsetProp, `${offset}px`);\n      }\n\n      swiper.updateProgress();\n      emit('virtualUpdate');\n      return;\n    }\n\n    if (swiper.params.virtual.renderExternal) {\n      swiper.params.virtual.renderExternal.call(swiper, {\n        offset,\n        from,\n        to,\n        slides: function getSlides() {\n          const slidesToRender = [];\n\n          for (let i = from; i <= to; i += 1) {\n            slidesToRender.push(slides[i]);\n          }\n\n          return slidesToRender;\n        }()\n      });\n\n      if (swiper.params.virtual.renderExternalUpdate) {\n        onRendered();\n      } else {\n        emit('virtualUpdate');\n      }\n\n      return;\n    }\n\n    const prependIndexes = [];\n    const appendIndexes = [];\n\n    if (force) {\n      swiper.$wrapperEl.find(`.${swiper.params.slideClass}`).remove();\n    } else {\n      for (let i = previousFrom; i <= previousTo; i += 1) {\n        if (i < from || i > to) {\n          swiper.$wrapperEl.find(`.${swiper.params.slideClass}[data-swiper-slide-index=\"${i}\"]`).remove();\n        }\n      }\n    }\n\n    for (let i = 0; i < slides.length; i += 1) {\n      if (i >= from && i <= to) {\n        if (typeof previousTo === 'undefined' || force) {\n          appendIndexes.push(i);\n        } else {\n          if (i > previousTo) appendIndexes.push(i);\n          if (i < previousFrom) prependIndexes.push(i);\n        }\n      }\n    }\n\n    appendIndexes.forEach(index => {\n      swiper.$wrapperEl.append(renderSlide(slides[index], index));\n    });\n    prependIndexes.sort((a, b) => b - a).forEach(index => {\n      swiper.$wrapperEl.prepend(renderSlide(slides[index], index));\n    });\n    swiper.$wrapperEl.children('.swiper-slide').css(offsetProp, `${offset}px`);\n    onRendered();\n  }\n\n  function appendSlide(slides) {\n    if (typeof slides === 'object' && 'length' in slides) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.push(slides[i]);\n      }\n    } else {\n      swiper.virtual.slides.push(slides);\n    }\n\n    update(true);\n  }\n\n  function prependSlide(slides) {\n    const activeIndex = swiper.activeIndex;\n    let newActiveIndex = activeIndex + 1;\n    let numberOfNewSlides = 1;\n\n    if (Array.isArray(slides)) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.unshift(slides[i]);\n      }\n\n      newActiveIndex = activeIndex + slides.length;\n      numberOfNewSlides = slides.length;\n    } else {\n      swiper.virtual.slides.unshift(slides);\n    }\n\n    if (swiper.params.virtual.cache) {\n      const cache = swiper.virtual.cache;\n      const newCache = {};\n      Object.keys(cache).forEach(cachedIndex => {\n        const $cachedEl = cache[cachedIndex];\n        const cachedElIndex = $cachedEl.attr('data-swiper-slide-index');\n\n        if (cachedElIndex) {\n          $cachedEl.attr('data-swiper-slide-index', parseInt(cachedElIndex, 10) + numberOfNewSlides);\n        }\n\n        newCache[parseInt(cachedIndex, 10) + numberOfNewSlides] = $cachedEl;\n      });\n      swiper.virtual.cache = newCache;\n    }\n\n    update(true);\n    swiper.slideTo(newActiveIndex, 0);\n  }\n\n  function removeSlide(slidesIndexes) {\n    if (typeof slidesIndexes === 'undefined' || slidesIndexes === null) return;\n    let activeIndex = swiper.activeIndex;\n\n    if (Array.isArray(slidesIndexes)) {\n      for (let i = slidesIndexes.length - 1; i >= 0; i -= 1) {\n        swiper.virtual.slides.splice(slidesIndexes[i], 1);\n\n        if (swiper.params.virtual.cache) {\n          delete swiper.virtual.cache[slidesIndexes[i]];\n        }\n\n        if (slidesIndexes[i] < activeIndex) activeIndex -= 1;\n        activeIndex = Math.max(activeIndex, 0);\n      }\n    } else {\n      swiper.virtual.slides.splice(slidesIndexes, 1);\n\n      if (swiper.params.virtual.cache) {\n        delete swiper.virtual.cache[slidesIndexes];\n      }\n\n      if (slidesIndexes < activeIndex) activeIndex -= 1;\n      activeIndex = Math.max(activeIndex, 0);\n    }\n\n    update(true);\n    swiper.slideTo(activeIndex, 0);\n  }\n\n  function removeAllSlides() {\n    swiper.virtual.slides = [];\n\n    if (swiper.params.virtual.cache) {\n      swiper.virtual.cache = {};\n    }\n\n    update(true);\n    swiper.slideTo(0, 0);\n  }\n\n  on('beforeInit', () => {\n    if (!swiper.params.virtual.enabled) return;\n    swiper.virtual.slides = swiper.params.virtual.slides;\n    swiper.classNames.push(`${swiper.params.containerModifierClass}virtual`);\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n\n    if (!swiper.params.initialSlide) {\n      update();\n    }\n  });\n  on('setTranslate', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode && !swiper._immediateVirtual) {\n      clearTimeout(cssModeTimeout);\n      cssModeTimeout = setTimeout(() => {\n        update();\n      }, 100);\n    } else {\n      update();\n    }\n  });\n  on('init update resize', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode) {\n      setCSSProperty(swiper.wrapperEl, '--swiper-virtual-size', `${swiper.virtualSize}px`);\n    }\n  });\n  Object.assign(swiper.virtual, {\n    appendSlide,\n    prependSlide,\n    removeSlide,\n    removeAllSlides,\n    update\n  });\n}","/* eslint-disable consistent-return */\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function Keyboard(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const document = getDocument();\n  const window = getWindow();\n  swiper.keyboard = {\n    enabled: false\n  };\n  extendParams({\n    keyboard: {\n      enabled: false,\n      onlyInViewport: true,\n      pageUpDown: true\n    }\n  });\n\n  function handle(event) {\n    if (!swiper.enabled) return;\n    const {\n      rtlTranslate: rtl\n    } = swiper;\n    let e = event;\n    if (e.originalEvent) e = e.originalEvent; // jquery fix\n\n    const kc = e.keyCode || e.charCode;\n    const pageUpDown = swiper.params.keyboard.pageUpDown;\n    const isPageUp = pageUpDown && kc === 33;\n    const isPageDown = pageUpDown && kc === 34;\n    const isArrowLeft = kc === 37;\n    const isArrowRight = kc === 39;\n    const isArrowUp = kc === 38;\n    const isArrowDown = kc === 40; // Directions locks\n\n    if (!swiper.allowSlideNext && (swiper.isHorizontal() && isArrowRight || swiper.isVertical() && isArrowDown || isPageDown)) {\n      return false;\n    }\n\n    if (!swiper.allowSlidePrev && (swiper.isHorizontal() && isArrowLeft || swiper.isVertical() && isArrowUp || isPageUp)) {\n      return false;\n    }\n\n    if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey) {\n      return undefined;\n    }\n\n    if (document.activeElement && document.activeElement.nodeName && (document.activeElement.nodeName.toLowerCase() === 'input' || document.activeElement.nodeName.toLowerCase() === 'textarea')) {\n      return undefined;\n    }\n\n    if (swiper.params.keyboard.onlyInViewport && (isPageUp || isPageDown || isArrowLeft || isArrowRight || isArrowUp || isArrowDown)) {\n      let inView = false; // Check that swiper should be inside of visible area of window\n\n      if (swiper.$el.parents(`.${swiper.params.slideClass}`).length > 0 && swiper.$el.parents(`.${swiper.params.slideActiveClass}`).length === 0) {\n        return undefined;\n      }\n\n      const $el = swiper.$el;\n      const swiperWidth = $el[0].clientWidth;\n      const swiperHeight = $el[0].clientHeight;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n      const swiperOffset = swiper.$el.offset();\n      if (rtl) swiperOffset.left -= swiper.$el[0].scrollLeft;\n      const swiperCoord = [[swiperOffset.left, swiperOffset.top], [swiperOffset.left + swiperWidth, swiperOffset.top], [swiperOffset.left, swiperOffset.top + swiperHeight], [swiperOffset.left + swiperWidth, swiperOffset.top + swiperHeight]];\n\n      for (let i = 0; i < swiperCoord.length; i += 1) {\n        const point = swiperCoord[i];\n\n        if (point[0] >= 0 && point[0] <= windowWidth && point[1] >= 0 && point[1] <= windowHeight) {\n          if (point[0] === 0 && point[1] === 0) continue; // eslint-disable-line\n\n          inView = true;\n        }\n      }\n\n      if (!inView) return undefined;\n    }\n\n    if (swiper.isHorizontal()) {\n      if (isPageUp || isPageDown || isArrowLeft || isArrowRight) {\n        if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n      }\n\n      if ((isPageDown || isArrowRight) && !rtl || (isPageUp || isArrowLeft) && rtl) swiper.slideNext();\n      if ((isPageUp || isArrowLeft) && !rtl || (isPageDown || isArrowRight) && rtl) swiper.slidePrev();\n    } else {\n      if (isPageUp || isPageDown || isArrowUp || isArrowDown) {\n        if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n      }\n\n      if (isPageDown || isArrowDown) swiper.slideNext();\n      if (isPageUp || isArrowUp) swiper.slidePrev();\n    }\n\n    emit('keyPress', kc);\n    return undefined;\n  }\n\n  function enable() {\n    if (swiper.keyboard.enabled) return;\n    $(document).on('keydown', handle);\n    swiper.keyboard.enabled = true;\n  }\n\n  function disable() {\n    if (!swiper.keyboard.enabled) return;\n    $(document).off('keydown', handle);\n    swiper.keyboard.enabled = false;\n  }\n\n  on('init', () => {\n    if (swiper.params.keyboard.enabled) {\n      enable();\n    }\n  });\n  on('destroy', () => {\n    if (swiper.keyboard.enabled) {\n      disable();\n    }\n  });\n  Object.assign(swiper.keyboard, {\n    enable,\n    disable\n  });\n}","/* eslint-disable consistent-return */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { now, nextTick } from '../../shared/utils.js';\nexport default function Mousewheel(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const window = getWindow();\n  extendParams({\n    mousewheel: {\n      enabled: false,\n      releaseOnEdges: false,\n      invert: false,\n      forceToAxis: false,\n      sensitivity: 1,\n      eventsTarget: 'container',\n      thresholdDelta: null,\n      thresholdTime: null\n    }\n  });\n  swiper.mousewheel = {\n    enabled: false\n  };\n  let timeout;\n  let lastScrollTime = now();\n  let lastEventBeforeSnap;\n  const recentWheelEvents = [];\n\n  function normalize(e) {\n    // Reasonable defaults\n    const PIXEL_STEP = 10;\n    const LINE_HEIGHT = 40;\n    const PAGE_HEIGHT = 800;\n    let sX = 0;\n    let sY = 0; // spinX, spinY\n\n    let pX = 0;\n    let pY = 0; // pixelX, pixelY\n    // Legacy\n\n    if ('detail' in e) {\n      sY = e.detail;\n    }\n\n    if ('wheelDelta' in e) {\n      sY = -e.wheelDelta / 120;\n    }\n\n    if ('wheelDeltaY' in e) {\n      sY = -e.wheelDeltaY / 120;\n    }\n\n    if ('wheelDeltaX' in e) {\n      sX = -e.wheelDeltaX / 120;\n    } // side scrolling on FF with DOMMouseScroll\n\n\n    if ('axis' in e && e.axis === e.HORIZONTAL_AXIS) {\n      sX = sY;\n      sY = 0;\n    }\n\n    pX = sX * PIXEL_STEP;\n    pY = sY * PIXEL_STEP;\n\n    if ('deltaY' in e) {\n      pY = e.deltaY;\n    }\n\n    if ('deltaX' in e) {\n      pX = e.deltaX;\n    }\n\n    if (e.shiftKey && !pX) {\n      // if user scrolls with shift he wants horizontal scroll\n      pX = pY;\n      pY = 0;\n    }\n\n    if ((pX || pY) && e.deltaMode) {\n      if (e.deltaMode === 1) {\n        // delta in LINE units\n        pX *= LINE_HEIGHT;\n        pY *= LINE_HEIGHT;\n      } else {\n        // delta in PAGE units\n        pX *= PAGE_HEIGHT;\n        pY *= PAGE_HEIGHT;\n      }\n    } // Fall-back if spin cannot be determined\n\n\n    if (pX && !sX) {\n      sX = pX < 1 ? -1 : 1;\n    }\n\n    if (pY && !sY) {\n      sY = pY < 1 ? -1 : 1;\n    }\n\n    return {\n      spinX: sX,\n      spinY: sY,\n      pixelX: pX,\n      pixelY: pY\n    };\n  }\n\n  function handleMouseEnter() {\n    if (!swiper.enabled) return;\n    swiper.mouseEntered = true;\n  }\n\n  function handleMouseLeave() {\n    if (!swiper.enabled) return;\n    swiper.mouseEntered = false;\n  }\n\n  function animateSlider(newEvent) {\n    if (swiper.params.mousewheel.thresholdDelta && newEvent.delta < swiper.params.mousewheel.thresholdDelta) {\n      // Prevent if delta of wheel scroll delta is below configured threshold\n      return false;\n    }\n\n    if (swiper.params.mousewheel.thresholdTime && now() - lastScrollTime < swiper.params.mousewheel.thresholdTime) {\n      // Prevent if time between scrolls is below configured threshold\n      return false;\n    } // If the movement is NOT big enough and\n    // if the last time the user scrolled was too close to the current one (avoid continuously triggering the slider):\n    //   Don't go any further (avoid insignificant scroll movement).\n\n\n    if (newEvent.delta >= 6 && now() - lastScrollTime < 60) {\n      // Return false as a default\n      return true;\n    } // If user is scrolling towards the end:\n    //   If the slider hasn't hit the latest slide or\n    //   if the slider is a loop and\n    //   if the slider isn't moving right now:\n    //     Go to next slide and\n    //     emit a scroll event.\n    // Else (the user is scrolling towards the beginning) and\n    // if the slider hasn't hit the first slide or\n    // if the slider is a loop and\n    // if the slider isn't moving right now:\n    //   Go to prev slide and\n    //   emit a scroll event.\n\n\n    if (newEvent.direction < 0) {\n      if ((!swiper.isEnd || swiper.params.loop) && !swiper.animating) {\n        swiper.slideNext();\n        emit('scroll', newEvent.raw);\n      }\n    } else if ((!swiper.isBeginning || swiper.params.loop) && !swiper.animating) {\n      swiper.slidePrev();\n      emit('scroll', newEvent.raw);\n    } // If you got here is because an animation has been triggered so store the current time\n\n\n    lastScrollTime = new window.Date().getTime(); // Return false as a default\n\n    return false;\n  }\n\n  function releaseScroll(newEvent) {\n    const params = swiper.params.mousewheel;\n\n    if (newEvent.direction < 0) {\n      if (swiper.isEnd && !swiper.params.loop && params.releaseOnEdges) {\n        // Return true to animate scroll on edges\n        return true;\n      }\n    } else if (swiper.isBeginning && !swiper.params.loop && params.releaseOnEdges) {\n      // Return true to animate scroll on edges\n      return true;\n    }\n\n    return false;\n  }\n\n  function handle(event) {\n    let e = event;\n    let disableParentSwiper = true;\n    if (!swiper.enabled) return;\n    const params = swiper.params.mousewheel;\n\n    if (swiper.params.cssMode) {\n      e.preventDefault();\n    }\n\n    let target = swiper.$el;\n\n    if (swiper.params.mousewheel.eventsTarget !== 'container') {\n      target = $(swiper.params.mousewheel.eventsTarget);\n    }\n\n    if (!swiper.mouseEntered && !target[0].contains(e.target) && !params.releaseOnEdges) return true;\n    if (e.originalEvent) e = e.originalEvent; // jquery fix\n\n    let delta = 0;\n    const rtlFactor = swiper.rtlTranslate ? -1 : 1;\n    const data = normalize(e);\n\n    if (params.forceToAxis) {\n      if (swiper.isHorizontal()) {\n        if (Math.abs(data.pixelX) > Math.abs(data.pixelY)) delta = -data.pixelX * rtlFactor;else return true;\n      } else if (Math.abs(data.pixelY) > Math.abs(data.pixelX)) delta = -data.pixelY;else return true;\n    } else {\n      delta = Math.abs(data.pixelX) > Math.abs(data.pixelY) ? -data.pixelX * rtlFactor : -data.pixelY;\n    }\n\n    if (delta === 0) return true;\n    if (params.invert) delta = -delta; // Get the scroll positions\n\n    let positions = swiper.getTranslate() + delta * params.sensitivity;\n    if (positions >= swiper.minTranslate()) positions = swiper.minTranslate();\n    if (positions <= swiper.maxTranslate()) positions = swiper.maxTranslate(); // When loop is true:\n    //     the disableParentSwiper will be true.\n    // When loop is false:\n    //     if the scroll positions is not on edge,\n    //     then the disableParentSwiper will be true.\n    //     if the scroll on edge positions,\n    //     then the disableParentSwiper will be false.\n\n    disableParentSwiper = swiper.params.loop ? true : !(positions === swiper.minTranslate() || positions === swiper.maxTranslate());\n    if (disableParentSwiper && swiper.params.nested) e.stopPropagation();\n\n    if (!swiper.params.freeMode || !swiper.params.freeMode.enabled) {\n      // Register the new event in a variable which stores the relevant data\n      const newEvent = {\n        time: now(),\n        delta: Math.abs(delta),\n        direction: Math.sign(delta),\n        raw: event\n      }; // Keep the most recent events\n\n      if (recentWheelEvents.length >= 2) {\n        recentWheelEvents.shift(); // only store the last N events\n      }\n\n      const prevEvent = recentWheelEvents.length ? recentWheelEvents[recentWheelEvents.length - 1] : undefined;\n      recentWheelEvents.push(newEvent); // If there is at least one previous recorded event:\n      //   If direction has changed or\n      //   if the scroll is quicker than the previous one:\n      //     Animate the slider.\n      // Else (this is the first time the wheel is moved):\n      //     Animate the slider.\n\n      if (prevEvent) {\n        if (newEvent.direction !== prevEvent.direction || newEvent.delta > prevEvent.delta || newEvent.time > prevEvent.time + 150) {\n          animateSlider(newEvent);\n        }\n      } else {\n        animateSlider(newEvent);\n      } // If it's time to release the scroll:\n      //   Return now so you don't hit the preventDefault.\n\n\n      if (releaseScroll(newEvent)) {\n        return true;\n      }\n    } else {\n      // Freemode or scrollContainer:\n      // If we recently snapped after a momentum scroll, then ignore wheel events\n      // to give time for the deceleration to finish. Stop ignoring after 500 msecs\n      // or if it's a new scroll (larger delta or inverse sign as last event before\n      // an end-of-momentum snap).\n      const newEvent = {\n        time: now(),\n        delta: Math.abs(delta),\n        direction: Math.sign(delta)\n      };\n      const ignoreWheelEvents = lastEventBeforeSnap && newEvent.time < lastEventBeforeSnap.time + 500 && newEvent.delta <= lastEventBeforeSnap.delta && newEvent.direction === lastEventBeforeSnap.direction;\n\n      if (!ignoreWheelEvents) {\n        lastEventBeforeSnap = undefined;\n\n        if (swiper.params.loop) {\n          swiper.loopFix();\n        }\n\n        let position = swiper.getTranslate() + delta * params.sensitivity;\n        const wasBeginning = swiper.isBeginning;\n        const wasEnd = swiper.isEnd;\n        if (position >= swiper.minTranslate()) position = swiper.minTranslate();\n        if (position <= swiper.maxTranslate()) position = swiper.maxTranslate();\n        swiper.setTransition(0);\n        swiper.setTranslate(position);\n        swiper.updateProgress();\n        swiper.updateActiveIndex();\n        swiper.updateSlidesClasses();\n\n        if (!wasBeginning && swiper.isBeginning || !wasEnd && swiper.isEnd) {\n          swiper.updateSlidesClasses();\n        }\n\n        if (swiper.params.freeMode.sticky) {\n          // When wheel scrolling starts with sticky (aka snap) enabled, then detect\n          // the end of a momentum scroll by storing recent (N=15?) wheel events.\n          // 1. do all N events have decreasing or same (absolute value) delta?\n          // 2. did all N events arrive in the last M (M=500?) msecs?\n          // 3. does the earliest event have an (absolute value) delta that's\n          //    at least P (P=1?) larger than the most recent event's delta?\n          // 4. does the latest event have a delta that's smaller than Q (Q=6?) pixels?\n          // If 1-4 are \"yes\" then we're near the end of a momentum scroll deceleration.\n          // Snap immediately and ignore remaining wheel events in this scroll.\n          // See comment above for \"remaining wheel events in this scroll\" determination.\n          // If 1-4 aren't satisfied, then wait to snap until 500ms after the last event.\n          clearTimeout(timeout);\n          timeout = undefined;\n\n          if (recentWheelEvents.length >= 15) {\n            recentWheelEvents.shift(); // only store the last N events\n          }\n\n          const prevEvent = recentWheelEvents.length ? recentWheelEvents[recentWheelEvents.length - 1] : undefined;\n          const firstEvent = recentWheelEvents[0];\n          recentWheelEvents.push(newEvent);\n\n          if (prevEvent && (newEvent.delta > prevEvent.delta || newEvent.direction !== prevEvent.direction)) {\n            // Increasing or reverse-sign delta means the user started scrolling again. Clear the wheel event log.\n            recentWheelEvents.splice(0);\n          } else if (recentWheelEvents.length >= 15 && newEvent.time - firstEvent.time < 500 && firstEvent.delta - newEvent.delta >= 1 && newEvent.delta <= 6) {\n            // We're at the end of the deceleration of a momentum scroll, so there's no need\n            // to wait for more events. Snap ASAP on the next tick.\n            // Also, because there's some remaining momentum we'll bias the snap in the\n            // direction of the ongoing scroll because it's better UX for the scroll to snap\n            // in the same direction as the scroll instead of reversing to snap.  Therefore,\n            // if it's already scrolled more than 20% in the current direction, keep going.\n            const snapToThreshold = delta > 0 ? 0.8 : 0.2;\n            lastEventBeforeSnap = newEvent;\n            recentWheelEvents.splice(0);\n            timeout = nextTick(() => {\n              swiper.slideToClosest(swiper.params.speed, true, undefined, snapToThreshold);\n            }, 0); // no delay; move on next tick\n          }\n\n          if (!timeout) {\n            // if we get here, then we haven't detected the end of a momentum scroll, so\n            // we'll consider a scroll \"complete\" when there haven't been any wheel events\n            // for 500ms.\n            timeout = nextTick(() => {\n              const snapToThreshold = 0.5;\n              lastEventBeforeSnap = newEvent;\n              recentWheelEvents.splice(0);\n              swiper.slideToClosest(swiper.params.speed, true, undefined, snapToThreshold);\n            }, 500);\n          }\n        } // Emit event\n\n\n        if (!ignoreWheelEvents) emit('scroll', e); // Stop autoplay\n\n        if (swiper.params.autoplay && swiper.params.autoplayDisableOnInteraction) swiper.autoplay.stop(); // Return page scroll on edge positions\n\n        if (position === swiper.minTranslate() || position === swiper.maxTranslate()) return true;\n      }\n    }\n\n    if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n    return false;\n  }\n\n  function events(method) {\n    let target = swiper.$el;\n\n    if (swiper.params.mousewheel.eventsTarget !== 'container') {\n      target = $(swiper.params.mousewheel.eventsTarget);\n    }\n\n    target[method]('mouseenter', handleMouseEnter);\n    target[method]('mouseleave', handleMouseLeave);\n    target[method]('wheel', handle);\n  }\n\n  function enable() {\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.removeEventListener('wheel', handle);\n      return true;\n    }\n\n    if (swiper.mousewheel.enabled) return false;\n    events('on');\n    swiper.mousewheel.enabled = true;\n    return true;\n  }\n\n  function disable() {\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.addEventListener(event, handle);\n      return true;\n    }\n\n    if (!swiper.mousewheel.enabled) return false;\n    events('off');\n    swiper.mousewheel.enabled = false;\n    return true;\n  }\n\n  on('init', () => {\n    if (!swiper.params.mousewheel.enabled && swiper.params.cssMode) {\n      disable();\n    }\n\n    if (swiper.params.mousewheel.enabled) enable();\n  });\n  on('destroy', () => {\n    if (swiper.params.cssMode) {\n      enable();\n    }\n\n    if (swiper.mousewheel.enabled) disable();\n  });\n  Object.assign(swiper.mousewheel, {\n    enable,\n    disable\n  });\n}","import { getDocument } from 'ssr-window';\nexport default function createElementIfNotDefined(swiper, originalParams, params, checkProps) {\n  const document = getDocument();\n\n  if (swiper.params.createElements) {\n    Object.keys(checkProps).forEach(key => {\n      if (!params[key] && params.auto === true) {\n        let element = swiper.$el.children(`.${checkProps[key]}`)[0];\n\n        if (!element) {\n          element = document.createElement('div');\n          element.className = checkProps[key];\n          swiper.$el.append(element);\n        }\n\n        params[key] = element;\n        originalParams[key] = element;\n      }\n    });\n  }\n\n  return params;\n}","import createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nimport $ from '../../shared/dom.js';\nexport default function Navigation(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  extendParams({\n    navigation: {\n      nextEl: null,\n      prevEl: null,\n      hideOnClick: false,\n      disabledClass: 'swiper-button-disabled',\n      hiddenClass: 'swiper-button-hidden',\n      lockClass: 'swiper-button-lock',\n      navigationDisabledClass: 'swiper-navigation-disabled'\n    }\n  });\n  swiper.navigation = {\n    nextEl: null,\n    $nextEl: null,\n    prevEl: null,\n    $prevEl: null\n  };\n\n  function getEl(el) {\n    let $el;\n\n    if (el) {\n      $el = $(el);\n\n      if (swiper.params.uniqueNavElements && typeof el === 'string' && $el.length > 1 && swiper.$el.find(el).length === 1) {\n        $el = swiper.$el.find(el);\n      }\n    }\n\n    return $el;\n  }\n\n  function toggleEl($el, disabled) {\n    const params = swiper.params.navigation;\n\n    if ($el && $el.length > 0) {\n      $el[disabled ? 'addClass' : 'removeClass'](params.disabledClass);\n      if ($el[0] && $el[0].tagName === 'BUTTON') $el[0].disabled = disabled;\n\n      if (swiper.params.watchOverflow && swiper.enabled) {\n        $el[swiper.isLocked ? 'addClass' : 'removeClass'](params.lockClass);\n      }\n    }\n  }\n\n  function update() {\n    // Update Navigation Buttons\n    if (swiper.params.loop) return;\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n    toggleEl($prevEl, swiper.isBeginning && !swiper.params.rewind);\n    toggleEl($nextEl, swiper.isEnd && !swiper.params.rewind);\n  }\n\n  function onPrevClick(e) {\n    e.preventDefault();\n    if (swiper.isBeginning && !swiper.params.loop && !swiper.params.rewind) return;\n    swiper.slidePrev();\n    emit('navigationPrev');\n  }\n\n  function onNextClick(e) {\n    e.preventDefault();\n    if (swiper.isEnd && !swiper.params.loop && !swiper.params.rewind) return;\n    swiper.slideNext();\n    emit('navigationNext');\n  }\n\n  function init() {\n    const params = swiper.params.navigation;\n    swiper.params.navigation = createElementIfNotDefined(swiper, swiper.originalParams.navigation, swiper.params.navigation, {\n      nextEl: 'swiper-button-next',\n      prevEl: 'swiper-button-prev'\n    });\n    if (!(params.nextEl || params.prevEl)) return;\n    const $nextEl = getEl(params.nextEl);\n    const $prevEl = getEl(params.prevEl);\n\n    if ($nextEl && $nextEl.length > 0) {\n      $nextEl.on('click', onNextClick);\n    }\n\n    if ($prevEl && $prevEl.length > 0) {\n      $prevEl.on('click', onPrevClick);\n    }\n\n    Object.assign(swiper.navigation, {\n      $nextEl,\n      nextEl: $nextEl && $nextEl[0],\n      $prevEl,\n      prevEl: $prevEl && $prevEl[0]\n    });\n\n    if (!swiper.enabled) {\n      if ($nextEl) $nextEl.addClass(params.lockClass);\n      if ($prevEl) $prevEl.addClass(params.lockClass);\n    }\n  }\n\n  function destroy() {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n\n    if ($nextEl && $nextEl.length) {\n      $nextEl.off('click', onNextClick);\n      $nextEl.removeClass(swiper.params.navigation.disabledClass);\n    }\n\n    if ($prevEl && $prevEl.length) {\n      $prevEl.off('click', onPrevClick);\n      $prevEl.removeClass(swiper.params.navigation.disabledClass);\n    }\n  }\n\n  on('init', () => {\n    if (swiper.params.navigation.enabled === false) {\n      // eslint-disable-next-line\n      disable();\n    } else {\n      init();\n      update();\n    }\n  });\n  on('toEdge fromEdge lock unlock', () => {\n    update();\n  });\n  on('destroy', () => {\n    destroy();\n  });\n  on('enable disable', () => {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n\n    if ($nextEl) {\n      $nextEl[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.navigation.lockClass);\n    }\n\n    if ($prevEl) {\n      $prevEl[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.navigation.lockClass);\n    }\n  });\n  on('click', (_s, e) => {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n    const targetEl = e.target;\n\n    if (swiper.params.navigation.hideOnClick && !$(targetEl).is($prevEl) && !$(targetEl).is($nextEl)) {\n      if (swiper.pagination && swiper.params.pagination && swiper.params.pagination.clickable && (swiper.pagination.el === targetEl || swiper.pagination.el.contains(targetEl))) return;\n      let isHidden;\n\n      if ($nextEl) {\n        isHidden = $nextEl.hasClass(swiper.params.navigation.hiddenClass);\n      } else if ($prevEl) {\n        isHidden = $prevEl.hasClass(swiper.params.navigation.hiddenClass);\n      }\n\n      if (isHidden === true) {\n        emit('navigationShow');\n      } else {\n        emit('navigationHide');\n      }\n\n      if ($nextEl) {\n        $nextEl.toggleClass(swiper.params.navigation.hiddenClass);\n      }\n\n      if ($prevEl) {\n        $prevEl.toggleClass(swiper.params.navigation.hiddenClass);\n      }\n    }\n  });\n\n  const enable = () => {\n    swiper.$el.removeClass(swiper.params.navigation.navigationDisabledClass);\n    init();\n    update();\n  };\n\n  const disable = () => {\n    swiper.$el.addClass(swiper.params.navigation.navigationDisabledClass);\n    destroy();\n  };\n\n  Object.assign(swiper.navigation, {\n    enable,\n    disable,\n    update,\n    init,\n    destroy\n  });\n}","export default function classesToSelector(classes) {\n  if (classes === void 0) {\n    classes = '';\n  }\n\n  return `.${classes.trim().replace(/([\\.:!\\/])/g, '\\\\$1') // eslint-disable-line\n  .replace(/ /g, '.')}`;\n}","import $ from '../../shared/dom.js';\nimport classesToSelector from '../../shared/classes-to-selector.js';\nimport createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nexport default function Pagination(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const pfx = 'swiper-pagination';\n  extendParams({\n    pagination: {\n      el: null,\n      bulletElement: 'span',\n      clickable: false,\n      hideOnClick: false,\n      renderBullet: null,\n      renderProgressbar: null,\n      renderFraction: null,\n      renderCustom: null,\n      progressbarOpposite: false,\n      type: 'bullets',\n      // 'bullets' or 'progressbar' or 'fraction' or 'custom'\n      dynamicBullets: false,\n      dynamicMainBullets: 1,\n      formatFractionCurrent: number => number,\n      formatFractionTotal: number => number,\n      bulletClass: `${pfx}-bullet`,\n      bulletActiveClass: `${pfx}-bullet-active`,\n      modifierClass: `${pfx}-`,\n      currentClass: `${pfx}-current`,\n      totalClass: `${pfx}-total`,\n      hiddenClass: `${pfx}-hidden`,\n      progressbarFillClass: `${pfx}-progressbar-fill`,\n      progressbarOppositeClass: `${pfx}-progressbar-opposite`,\n      clickableClass: `${pfx}-clickable`,\n      lockClass: `${pfx}-lock`,\n      horizontalClass: `${pfx}-horizontal`,\n      verticalClass: `${pfx}-vertical`,\n      paginationDisabledClass: `${pfx}-disabled`\n    }\n  });\n  swiper.pagination = {\n    el: null,\n    $el: null,\n    bullets: []\n  };\n  let bulletSize;\n  let dynamicBulletIndex = 0;\n\n  function isPaginationDisabled() {\n    return !swiper.params.pagination.el || !swiper.pagination.el || !swiper.pagination.$el || swiper.pagination.$el.length === 0;\n  }\n\n  function setSideBullets($bulletEl, position) {\n    const {\n      bulletActiveClass\n    } = swiper.params.pagination;\n    $bulletEl[position]().addClass(`${bulletActiveClass}-${position}`)[position]().addClass(`${bulletActiveClass}-${position}-${position}`);\n  }\n\n  function update() {\n    // Render || Update Pagination bullets/items\n    const rtl = swiper.rtl;\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el; // Current/Total\n\n    let current;\n    const total = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n    if (swiper.params.loop) {\n      current = Math.ceil((swiper.activeIndex - swiper.loopedSlides) / swiper.params.slidesPerGroup);\n\n      if (current > slidesLength - 1 - swiper.loopedSlides * 2) {\n        current -= slidesLength - swiper.loopedSlides * 2;\n      }\n\n      if (current > total - 1) current -= total;\n      if (current < 0 && swiper.params.paginationType !== 'bullets') current = total + current;\n    } else if (typeof swiper.snapIndex !== 'undefined') {\n      current = swiper.snapIndex;\n    } else {\n      current = swiper.activeIndex || 0;\n    } // Types\n\n\n    if (params.type === 'bullets' && swiper.pagination.bullets && swiper.pagination.bullets.length > 0) {\n      const bullets = swiper.pagination.bullets;\n      let firstIndex;\n      let lastIndex;\n      let midIndex;\n\n      if (params.dynamicBullets) {\n        bulletSize = bullets.eq(0)[swiper.isHorizontal() ? 'outerWidth' : 'outerHeight'](true);\n        $el.css(swiper.isHorizontal() ? 'width' : 'height', `${bulletSize * (params.dynamicMainBullets + 4)}px`);\n\n        if (params.dynamicMainBullets > 1 && swiper.previousIndex !== undefined) {\n          dynamicBulletIndex += current - (swiper.previousIndex - swiper.loopedSlides || 0);\n\n          if (dynamicBulletIndex > params.dynamicMainBullets - 1) {\n            dynamicBulletIndex = params.dynamicMainBullets - 1;\n          } else if (dynamicBulletIndex < 0) {\n            dynamicBulletIndex = 0;\n          }\n        }\n\n        firstIndex = Math.max(current - dynamicBulletIndex, 0);\n        lastIndex = firstIndex + (Math.min(bullets.length, params.dynamicMainBullets) - 1);\n        midIndex = (lastIndex + firstIndex) / 2;\n      }\n\n      bullets.removeClass(['', '-next', '-next-next', '-prev', '-prev-prev', '-main'].map(suffix => `${params.bulletActiveClass}${suffix}`).join(' '));\n\n      if ($el.length > 1) {\n        bullets.each(bullet => {\n          const $bullet = $(bullet);\n          const bulletIndex = $bullet.index();\n\n          if (bulletIndex === current) {\n            $bullet.addClass(params.bulletActiveClass);\n          }\n\n          if (params.dynamicBullets) {\n            if (bulletIndex >= firstIndex && bulletIndex <= lastIndex) {\n              $bullet.addClass(`${params.bulletActiveClass}-main`);\n            }\n\n            if (bulletIndex === firstIndex) {\n              setSideBullets($bullet, 'prev');\n            }\n\n            if (bulletIndex === lastIndex) {\n              setSideBullets($bullet, 'next');\n            }\n          }\n        });\n      } else {\n        const $bullet = bullets.eq(current);\n        const bulletIndex = $bullet.index();\n        $bullet.addClass(params.bulletActiveClass);\n\n        if (params.dynamicBullets) {\n          const $firstDisplayedBullet = bullets.eq(firstIndex);\n          const $lastDisplayedBullet = bullets.eq(lastIndex);\n\n          for (let i = firstIndex; i <= lastIndex; i += 1) {\n            bullets.eq(i).addClass(`${params.bulletActiveClass}-main`);\n          }\n\n          if (swiper.params.loop) {\n            if (bulletIndex >= bullets.length) {\n              for (let i = params.dynamicMainBullets; i >= 0; i -= 1) {\n                bullets.eq(bullets.length - i).addClass(`${params.bulletActiveClass}-main`);\n              }\n\n              bullets.eq(bullets.length - params.dynamicMainBullets - 1).addClass(`${params.bulletActiveClass}-prev`);\n            } else {\n              setSideBullets($firstDisplayedBullet, 'prev');\n              setSideBullets($lastDisplayedBullet, 'next');\n            }\n          } else {\n            setSideBullets($firstDisplayedBullet, 'prev');\n            setSideBullets($lastDisplayedBullet, 'next');\n          }\n        }\n      }\n\n      if (params.dynamicBullets) {\n        const dynamicBulletsLength = Math.min(bullets.length, params.dynamicMainBullets + 4);\n        const bulletsOffset = (bulletSize * dynamicBulletsLength - bulletSize) / 2 - midIndex * bulletSize;\n        const offsetProp = rtl ? 'right' : 'left';\n        bullets.css(swiper.isHorizontal() ? offsetProp : 'top', `${bulletsOffset}px`);\n      }\n    }\n\n    if (params.type === 'fraction') {\n      $el.find(classesToSelector(params.currentClass)).text(params.formatFractionCurrent(current + 1));\n      $el.find(classesToSelector(params.totalClass)).text(params.formatFractionTotal(total));\n    }\n\n    if (params.type === 'progressbar') {\n      let progressbarDirection;\n\n      if (params.progressbarOpposite) {\n        progressbarDirection = swiper.isHorizontal() ? 'vertical' : 'horizontal';\n      } else {\n        progressbarDirection = swiper.isHorizontal() ? 'horizontal' : 'vertical';\n      }\n\n      const scale = (current + 1) / total;\n      let scaleX = 1;\n      let scaleY = 1;\n\n      if (progressbarDirection === 'horizontal') {\n        scaleX = scale;\n      } else {\n        scaleY = scale;\n      }\n\n      $el.find(classesToSelector(params.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${scaleX}) scaleY(${scaleY})`).transition(swiper.params.speed);\n    }\n\n    if (params.type === 'custom' && params.renderCustom) {\n      $el.html(params.renderCustom(swiper, current + 1, total));\n      emit('paginationRender', $el[0]);\n    } else {\n      emit('paginationUpdate', $el[0]);\n    }\n\n    if (swiper.params.watchOverflow && swiper.enabled) {\n      $el[swiper.isLocked ? 'addClass' : 'removeClass'](params.lockClass);\n    }\n  }\n\n  function render() {\n    // Render Container\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el;\n    let paginationHTML = '';\n\n    if (params.type === 'bullets') {\n      let numberOfBullets = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n      if (swiper.params.freeMode && swiper.params.freeMode.enabled && !swiper.params.loop && numberOfBullets > slidesLength) {\n        numberOfBullets = slidesLength;\n      }\n\n      for (let i = 0; i < numberOfBullets; i += 1) {\n        if (params.renderBullet) {\n          paginationHTML += params.renderBullet.call(swiper, i, params.bulletClass);\n        } else {\n          paginationHTML += `<${params.bulletElement} class=\"${params.bulletClass}\"></${params.bulletElement}>`;\n        }\n      }\n\n      $el.html(paginationHTML);\n      swiper.pagination.bullets = $el.find(classesToSelector(params.bulletClass));\n    }\n\n    if (params.type === 'fraction') {\n      if (params.renderFraction) {\n        paginationHTML = params.renderFraction.call(swiper, params.currentClass, params.totalClass);\n      } else {\n        paginationHTML = `<span class=\"${params.currentClass}\"></span>` + ' / ' + `<span class=\"${params.totalClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type === 'progressbar') {\n      if (params.renderProgressbar) {\n        paginationHTML = params.renderProgressbar.call(swiper, params.progressbarFillClass);\n      } else {\n        paginationHTML = `<span class=\"${params.progressbarFillClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type !== 'custom') {\n      emit('paginationRender', swiper.pagination.$el[0]);\n    }\n  }\n\n  function init() {\n    swiper.params.pagination = createElementIfNotDefined(swiper, swiper.originalParams.pagination, swiper.params.pagination, {\n      el: 'swiper-pagination'\n    });\n    const params = swiper.params.pagination;\n    if (!params.el) return;\n    let $el = $(params.el);\n    if ($el.length === 0) return;\n\n    if (swiper.params.uniqueNavElements && typeof params.el === 'string' && $el.length > 1) {\n      $el = swiper.$el.find(params.el); // check if it belongs to another nested Swiper\n\n      if ($el.length > 1) {\n        $el = $el.filter(el => {\n          if ($(el).parents('.swiper')[0] !== swiper.el) return false;\n          return true;\n        });\n      }\n    }\n\n    if (params.type === 'bullets' && params.clickable) {\n      $el.addClass(params.clickableClass);\n    }\n\n    $el.addClass(params.modifierClass + params.type);\n    $el.addClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n\n    if (params.type === 'bullets' && params.dynamicBullets) {\n      $el.addClass(`${params.modifierClass}${params.type}-dynamic`);\n      dynamicBulletIndex = 0;\n\n      if (params.dynamicMainBullets < 1) {\n        params.dynamicMainBullets = 1;\n      }\n    }\n\n    if (params.type === 'progressbar' && params.progressbarOpposite) {\n      $el.addClass(params.progressbarOppositeClass);\n    }\n\n    if (params.clickable) {\n      $el.on('click', classesToSelector(params.bulletClass), function onClick(e) {\n        e.preventDefault();\n        let index = $(this).index() * swiper.params.slidesPerGroup;\n        if (swiper.params.loop) index += swiper.loopedSlides;\n        swiper.slideTo(index);\n      });\n    }\n\n    Object.assign(swiper.pagination, {\n      $el,\n      el: $el[0]\n    });\n\n    if (!swiper.enabled) {\n      $el.addClass(params.lockClass);\n    }\n  }\n\n  function destroy() {\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const $el = swiper.pagination.$el;\n    $el.removeClass(params.hiddenClass);\n    $el.removeClass(params.modifierClass + params.type);\n    $el.removeClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n    if (swiper.pagination.bullets && swiper.pagination.bullets.removeClass) swiper.pagination.bullets.removeClass(params.bulletActiveClass);\n\n    if (params.clickable) {\n      $el.off('click', classesToSelector(params.bulletClass));\n    }\n  }\n\n  on('init', () => {\n    if (swiper.params.pagination.enabled === false) {\n      // eslint-disable-next-line\n      disable();\n    } else {\n      init();\n      render();\n      update();\n    }\n  });\n  on('activeIndexChange', () => {\n    if (swiper.params.loop) {\n      update();\n    } else if (typeof swiper.snapIndex === 'undefined') {\n      update();\n    }\n  });\n  on('snapIndexChange', () => {\n    if (!swiper.params.loop) {\n      update();\n    }\n  });\n  on('slidesLengthChange', () => {\n    if (swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('snapGridLengthChange', () => {\n    if (!swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('destroy', () => {\n    destroy();\n  });\n  on('enable disable', () => {\n    const {\n      $el\n    } = swiper.pagination;\n\n    if ($el) {\n      $el[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.pagination.lockClass);\n    }\n  });\n  on('lock unlock', () => {\n    update();\n  });\n  on('click', (_s, e) => {\n    const targetEl = e.target;\n    const {\n      $el\n    } = swiper.pagination;\n\n    if (swiper.params.pagination.el && swiper.params.pagination.hideOnClick && $el && $el.length > 0 && !$(targetEl).hasClass(swiper.params.pagination.bulletClass)) {\n      if (swiper.navigation && (swiper.navigation.nextEl && targetEl === swiper.navigation.nextEl || swiper.navigation.prevEl && targetEl === swiper.navigation.prevEl)) return;\n      const isHidden = $el.hasClass(swiper.params.pagination.hiddenClass);\n\n      if (isHidden === true) {\n        emit('paginationShow');\n      } else {\n        emit('paginationHide');\n      }\n\n      $el.toggleClass(swiper.params.pagination.hiddenClass);\n    }\n  });\n\n  const enable = () => {\n    swiper.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    init();\n    render();\n    update();\n  };\n\n  const disable = () => {\n    swiper.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    destroy();\n  };\n\n  Object.assign(swiper.pagination, {\n    enable,\n    disable,\n    render,\n    update,\n    init,\n    destroy\n  });\n}","import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { nextTick } from '../../shared/utils.js';\nimport createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nexport default function Scrollbar(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const document = getDocument();\n  let isTouched = false;\n  let timeout = null;\n  let dragTimeout = null;\n  let dragStartPos;\n  let dragSize;\n  let trackSize;\n  let divider;\n  extendParams({\n    scrollbar: {\n      el: null,\n      dragSize: 'auto',\n      hide: false,\n      draggable: false,\n      snapOnRelease: true,\n      lockClass: 'swiper-scrollbar-lock',\n      dragClass: 'swiper-scrollbar-drag',\n      scrollbarDisabledClass: 'swiper-scrollbar-disabled',\n      horizontalClass: `swiper-scrollbar-horizontal`,\n      verticalClass: `swiper-scrollbar-vertical`\n    }\n  });\n  swiper.scrollbar = {\n    el: null,\n    dragEl: null,\n    $el: null,\n    $dragEl: null\n  };\n\n  function setTranslate() {\n    if (!swiper.params.scrollbar.el || !swiper.scrollbar.el) return;\n    const {\n      scrollbar,\n      rtlTranslate: rtl,\n      progress\n    } = swiper;\n    const {\n      $dragEl,\n      $el\n    } = scrollbar;\n    const params = swiper.params.scrollbar;\n    let newSize = dragSize;\n    let newPos = (trackSize - dragSize) * progress;\n\n    if (rtl) {\n      newPos = -newPos;\n\n      if (newPos > 0) {\n        newSize = dragSize - newPos;\n        newPos = 0;\n      } else if (-newPos + dragSize > trackSize) {\n        newSize = trackSize + newPos;\n      }\n    } else if (newPos < 0) {\n      newSize = dragSize + newPos;\n      newPos = 0;\n    } else if (newPos + dragSize > trackSize) {\n      newSize = trackSize - newPos;\n    }\n\n    if (swiper.isHorizontal()) {\n      $dragEl.transform(`translate3d(${newPos}px, 0, 0)`);\n      $dragEl[0].style.width = `${newSize}px`;\n    } else {\n      $dragEl.transform(`translate3d(0px, ${newPos}px, 0)`);\n      $dragEl[0].style.height = `${newSize}px`;\n    }\n\n    if (params.hide) {\n      clearTimeout(timeout);\n      $el[0].style.opacity = 1;\n      timeout = setTimeout(() => {\n        $el[0].style.opacity = 0;\n        $el.transition(400);\n      }, 1000);\n    }\n  }\n\n  function setTransition(duration) {\n    if (!swiper.params.scrollbar.el || !swiper.scrollbar.el) return;\n    swiper.scrollbar.$dragEl.transition(duration);\n  }\n\n  function updateSize() {\n    if (!swiper.params.scrollbar.el || !swiper.scrollbar.el) return;\n    const {\n      scrollbar\n    } = swiper;\n    const {\n      $dragEl,\n      $el\n    } = scrollbar;\n    $dragEl[0].style.width = '';\n    $dragEl[0].style.height = '';\n    trackSize = swiper.isHorizontal() ? $el[0].offsetWidth : $el[0].offsetHeight;\n    divider = swiper.size / (swiper.virtualSize + swiper.params.slidesOffsetBefore - (swiper.params.centeredSlides ? swiper.snapGrid[0] : 0));\n\n    if (swiper.params.scrollbar.dragSize === 'auto') {\n      dragSize = trackSize * divider;\n    } else {\n      dragSize = parseInt(swiper.params.scrollbar.dragSize, 10);\n    }\n\n    if (swiper.isHorizontal()) {\n      $dragEl[0].style.width = `${dragSize}px`;\n    } else {\n      $dragEl[0].style.height = `${dragSize}px`;\n    }\n\n    if (divider >= 1) {\n      $el[0].style.display = 'none';\n    } else {\n      $el[0].style.display = '';\n    }\n\n    if (swiper.params.scrollbar.hide) {\n      $el[0].style.opacity = 0;\n    }\n\n    if (swiper.params.watchOverflow && swiper.enabled) {\n      scrollbar.$el[swiper.isLocked ? 'addClass' : 'removeClass'](swiper.params.scrollbar.lockClass);\n    }\n  }\n\n  function getPointerPosition(e) {\n    if (swiper.isHorizontal()) {\n      return e.type === 'touchstart' || e.type === 'touchmove' ? e.targetTouches[0].clientX : e.clientX;\n    }\n\n    return e.type === 'touchstart' || e.type === 'touchmove' ? e.targetTouches[0].clientY : e.clientY;\n  }\n\n  function setDragPosition(e) {\n    const {\n      scrollbar,\n      rtlTranslate: rtl\n    } = swiper;\n    const {\n      $el\n    } = scrollbar;\n    let positionRatio;\n    positionRatio = (getPointerPosition(e) - $el.offset()[swiper.isHorizontal() ? 'left' : 'top'] - (dragStartPos !== null ? dragStartPos : dragSize / 2)) / (trackSize - dragSize);\n    positionRatio = Math.max(Math.min(positionRatio, 1), 0);\n\n    if (rtl) {\n      positionRatio = 1 - positionRatio;\n    }\n\n    const position = swiper.minTranslate() + (swiper.maxTranslate() - swiper.minTranslate()) * positionRatio;\n    swiper.updateProgress(position);\n    swiper.setTranslate(position);\n    swiper.updateActiveIndex();\n    swiper.updateSlidesClasses();\n  }\n\n  function onDragStart(e) {\n    const params = swiper.params.scrollbar;\n    const {\n      scrollbar,\n      $wrapperEl\n    } = swiper;\n    const {\n      $el,\n      $dragEl\n    } = scrollbar;\n    isTouched = true;\n    dragStartPos = e.target === $dragEl[0] || e.target === $dragEl ? getPointerPosition(e) - e.target.getBoundingClientRect()[swiper.isHorizontal() ? 'left' : 'top'] : null;\n    e.preventDefault();\n    e.stopPropagation();\n    $wrapperEl.transition(100);\n    $dragEl.transition(100);\n    setDragPosition(e);\n    clearTimeout(dragTimeout);\n    $el.transition(0);\n\n    if (params.hide) {\n      $el.css('opacity', 1);\n    }\n\n    if (swiper.params.cssMode) {\n      swiper.$wrapperEl.css('scroll-snap-type', 'none');\n    }\n\n    emit('scrollbarDragStart', e);\n  }\n\n  function onDragMove(e) {\n    const {\n      scrollbar,\n      $wrapperEl\n    } = swiper;\n    const {\n      $el,\n      $dragEl\n    } = scrollbar;\n    if (!isTouched) return;\n    if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n    setDragPosition(e);\n    $wrapperEl.transition(0);\n    $el.transition(0);\n    $dragEl.transition(0);\n    emit('scrollbarDragMove', e);\n  }\n\n  function onDragEnd(e) {\n    const params = swiper.params.scrollbar;\n    const {\n      scrollbar,\n      $wrapperEl\n    } = swiper;\n    const {\n      $el\n    } = scrollbar;\n    if (!isTouched) return;\n    isTouched = false;\n\n    if (swiper.params.cssMode) {\n      swiper.$wrapperEl.css('scroll-snap-type', '');\n      $wrapperEl.transition('');\n    }\n\n    if (params.hide) {\n      clearTimeout(dragTimeout);\n      dragTimeout = nextTick(() => {\n        $el.css('opacity', 0);\n        $el.transition(400);\n      }, 1000);\n    }\n\n    emit('scrollbarDragEnd', e);\n\n    if (params.snapOnRelease) {\n      swiper.slideToClosest();\n    }\n  }\n\n  function events(method) {\n    const {\n      scrollbar,\n      touchEventsTouch,\n      touchEventsDesktop,\n      params,\n      support\n    } = swiper;\n    const $el = scrollbar.$el;\n    if (!$el) return;\n    const target = $el[0];\n    const activeListener = support.passiveListener && params.passiveListeners ? {\n      passive: false,\n      capture: false\n    } : false;\n    const passiveListener = support.passiveListener && params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    if (!target) return;\n    const eventMethod = method === 'on' ? 'addEventListener' : 'removeEventListener';\n\n    if (!support.touch) {\n      target[eventMethod](touchEventsDesktop.start, onDragStart, activeListener);\n      document[eventMethod](touchEventsDesktop.move, onDragMove, activeListener);\n      document[eventMethod](touchEventsDesktop.end, onDragEnd, passiveListener);\n    } else {\n      target[eventMethod](touchEventsTouch.start, onDragStart, activeListener);\n      target[eventMethod](touchEventsTouch.move, onDragMove, activeListener);\n      target[eventMethod](touchEventsTouch.end, onDragEnd, passiveListener);\n    }\n  }\n\n  function enableDraggable() {\n    if (!swiper.params.scrollbar.el || !swiper.scrollbar.el) return;\n    events('on');\n  }\n\n  function disableDraggable() {\n    if (!swiper.params.scrollbar.el || !swiper.scrollbar.el) return;\n    events('off');\n  }\n\n  function init() {\n    const {\n      scrollbar,\n      $el: $swiperEl\n    } = swiper;\n    swiper.params.scrollbar = createElementIfNotDefined(swiper, swiper.originalParams.scrollbar, swiper.params.scrollbar, {\n      el: 'swiper-scrollbar'\n    });\n    const params = swiper.params.scrollbar;\n    if (!params.el) return;\n    let $el = $(params.el);\n\n    if (swiper.params.uniqueNavElements && typeof params.el === 'string' && $el.length > 1 && $swiperEl.find(params.el).length === 1) {\n      $el = $swiperEl.find(params.el);\n    }\n\n    $el.addClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n    let $dragEl = $el.find(`.${swiper.params.scrollbar.dragClass}`);\n\n    if ($dragEl.length === 0) {\n      $dragEl = $(`<div class=\"${swiper.params.scrollbar.dragClass}\"></div>`);\n      $el.append($dragEl);\n    }\n\n    Object.assign(scrollbar, {\n      $el,\n      el: $el[0],\n      $dragEl,\n      dragEl: $dragEl[0]\n    });\n\n    if (params.draggable) {\n      enableDraggable();\n    }\n\n    if ($el) {\n      $el[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.scrollbar.lockClass);\n    }\n  }\n\n  function destroy() {\n    const params = swiper.params.scrollbar;\n    const $el = swiper.scrollbar.$el;\n\n    if ($el) {\n      $el.removeClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n    }\n\n    disableDraggable();\n  }\n\n  on('init', () => {\n    if (swiper.params.scrollbar.enabled === false) {\n      // eslint-disable-next-line\n      disable();\n    } else {\n      init();\n      updateSize();\n      setTranslate();\n    }\n  });\n  on('update resize observerUpdate lock unlock', () => {\n    updateSize();\n  });\n  on('setTranslate', () => {\n    setTranslate();\n  });\n  on('setTransition', (_s, duration) => {\n    setTransition(duration);\n  });\n  on('enable disable', () => {\n    const {\n      $el\n    } = swiper.scrollbar;\n\n    if ($el) {\n      $el[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.scrollbar.lockClass);\n    }\n  });\n  on('destroy', () => {\n    destroy();\n  });\n\n  const enable = () => {\n    swiper.$el.removeClass(swiper.params.scrollbar.scrollbarDisabledClass);\n\n    if (swiper.scrollbar.$el) {\n      swiper.scrollbar.$el.removeClass(swiper.params.scrollbar.scrollbarDisabledClass);\n    }\n\n    init();\n    updateSize();\n    setTranslate();\n  };\n\n  const disable = () => {\n    swiper.$el.addClass(swiper.params.scrollbar.scrollbarDisabledClass);\n\n    if (swiper.scrollbar.$el) {\n      swiper.scrollbar.$el.addClass(swiper.params.scrollbar.scrollbarDisabledClass);\n    }\n\n    destroy();\n  };\n\n  Object.assign(swiper.scrollbar, {\n    enable,\n    disable,\n    updateSize,\n    setTranslate,\n    init,\n    destroy\n  });\n}","import $ from '../../shared/dom.js';\nexport default function Parallax(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    parallax: {\n      enabled: false\n    }\n  });\n\n  const setTransform = (el, progress) => {\n    const {\n      rtl\n    } = swiper;\n    const $el = $(el);\n    const rtlFactor = rtl ? -1 : 1;\n    const p = $el.attr('data-swiper-parallax') || '0';\n    let x = $el.attr('data-swiper-parallax-x');\n    let y = $el.attr('data-swiper-parallax-y');\n    const scale = $el.attr('data-swiper-parallax-scale');\n    const opacity = $el.attr('data-swiper-parallax-opacity');\n\n    if (x || y) {\n      x = x || '0';\n      y = y || '0';\n    } else if (swiper.isHorizontal()) {\n      x = p;\n      y = '0';\n    } else {\n      y = p;\n      x = '0';\n    }\n\n    if (x.indexOf('%') >= 0) {\n      x = `${parseInt(x, 10) * progress * rtlFactor}%`;\n    } else {\n      x = `${x * progress * rtlFactor}px`;\n    }\n\n    if (y.indexOf('%') >= 0) {\n      y = `${parseInt(y, 10) * progress}%`;\n    } else {\n      y = `${y * progress}px`;\n    }\n\n    if (typeof opacity !== 'undefined' && opacity !== null) {\n      const currentOpacity = opacity - (opacity - 1) * (1 - Math.abs(progress));\n      $el[0].style.opacity = currentOpacity;\n    }\n\n    if (typeof scale === 'undefined' || scale === null) {\n      $el.transform(`translate3d(${x}, ${y}, 0px)`);\n    } else {\n      const currentScale = scale - (scale - 1) * (1 - Math.abs(progress));\n      $el.transform(`translate3d(${x}, ${y}, 0px) scale(${currentScale})`);\n    }\n  };\n\n  const setTranslate = () => {\n    const {\n      $el,\n      slides,\n      progress,\n      snapGrid\n    } = swiper;\n    $el.children('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]').each(el => {\n      setTransform(el, progress);\n    });\n    slides.each((slideEl, slideIndex) => {\n      let slideProgress = slideEl.progress;\n\n      if (swiper.params.slidesPerGroup > 1 && swiper.params.slidesPerView !== 'auto') {\n        slideProgress += Math.ceil(slideIndex / 2) - progress * (snapGrid.length - 1);\n      }\n\n      slideProgress = Math.min(Math.max(slideProgress, -1), 1);\n      $(slideEl).find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]').each(el => {\n        setTransform(el, slideProgress);\n      });\n    });\n  };\n\n  const setTransition = function (duration) {\n    if (duration === void 0) {\n      duration = swiper.params.speed;\n    }\n\n    const {\n      $el\n    } = swiper;\n    $el.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]').each(parallaxEl => {\n      const $parallaxEl = $(parallaxEl);\n      let parallaxDuration = parseInt($parallaxEl.attr('data-swiper-parallax-duration'), 10) || duration;\n      if (duration === 0) parallaxDuration = 0;\n      $parallaxEl.transition(parallaxDuration);\n    });\n  };\n\n  on('beforeInit', () => {\n    if (!swiper.params.parallax.enabled) return;\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n  });\n  on('init', () => {\n    if (!swiper.params.parallax.enabled) return;\n    setTranslate();\n  });\n  on('setTranslate', () => {\n    if (!swiper.params.parallax.enabled) return;\n    setTranslate();\n  });\n  on('setTransition', (_swiper, duration) => {\n    if (!swiper.params.parallax.enabled) return;\n    setTransition(duration);\n  });\n}","import { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { getTranslate } from '../../shared/utils.js';\nexport default function Zoom(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const window = getWindow();\n  extendParams({\n    zoom: {\n      enabled: false,\n      maxRatio: 3,\n      minRatio: 1,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  });\n  swiper.zoom = {\n    enabled: false\n  };\n  let currentScale = 1;\n  let isScaling = false;\n  let gesturesEnabled;\n  let fakeGestureTouched;\n  let fakeGestureMoved;\n  const gesture = {\n    $slideEl: undefined,\n    slideWidth: undefined,\n    slideHeight: undefined,\n    $imageEl: undefined,\n    $imageWrapEl: undefined,\n    maxRatio: 3\n  };\n  const image = {\n    isTouched: undefined,\n    isMoved: undefined,\n    currentX: undefined,\n    currentY: undefined,\n    minX: undefined,\n    minY: undefined,\n    maxX: undefined,\n    maxY: undefined,\n    width: undefined,\n    height: undefined,\n    startX: undefined,\n    startY: undefined,\n    touchesStart: {},\n    touchesCurrent: {}\n  };\n  const velocity = {\n    x: undefined,\n    y: undefined,\n    prevPositionX: undefined,\n    prevPositionY: undefined,\n    prevTime: undefined\n  };\n  let scale = 1;\n  Object.defineProperty(swiper.zoom, 'scale', {\n    get() {\n      return scale;\n    },\n\n    set(value) {\n      if (scale !== value) {\n        const imageEl = gesture.$imageEl ? gesture.$imageEl[0] : undefined;\n        const slideEl = gesture.$slideEl ? gesture.$slideEl[0] : undefined;\n        emit('zoomChange', value, imageEl, slideEl);\n      }\n\n      scale = value;\n    }\n\n  });\n\n  function getDistanceBetweenTouches(e) {\n    if (e.targetTouches.length < 2) return 1;\n    const x1 = e.targetTouches[0].pageX;\n    const y1 = e.targetTouches[0].pageY;\n    const x2 = e.targetTouches[1].pageX;\n    const y2 = e.targetTouches[1].pageY;\n    const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n    return distance;\n  } // Events\n\n\n  function onGestureStart(e) {\n    const support = swiper.support;\n    const params = swiper.params.zoom;\n    fakeGestureTouched = false;\n    fakeGestureMoved = false;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      fakeGestureTouched = true;\n      gesture.scaleStart = getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$slideEl || !gesture.$slideEl.length) {\n      gesture.$slideEl = $(e.target).closest(`.${swiper.params.slideClass}`);\n      if (gesture.$slideEl.length === 0) gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      gesture.$imageEl = gesture.$slideEl.find(`.${params.containerClass}`).eq(0).find('picture, img, svg, canvas, .swiper-zoom-target').eq(0);\n      gesture.$imageWrapEl = gesture.$imageEl.parent(`.${params.containerClass}`);\n      gesture.maxRatio = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n      if (gesture.$imageWrapEl.length === 0) {\n        gesture.$imageEl = undefined;\n        return;\n      }\n    }\n\n    if (gesture.$imageEl) {\n      gesture.$imageEl.transition(0);\n    }\n\n    isScaling = true;\n  }\n\n  function onGestureChange(e) {\n    const support = swiper.support;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      fakeGestureMoved = true;\n      gesture.scaleMove = getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) {\n      if (e.type === 'gesturechange') onGestureStart(e);\n      return;\n    }\n\n    if (support.gestures) {\n      zoom.scale = e.scale * currentScale;\n    } else {\n      zoom.scale = gesture.scaleMove / gesture.scaleStart * currentScale;\n    }\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + (zoom.scale - gesture.maxRatio + 1) ** 0.5;\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - (params.minRatio - zoom.scale + 1) ** 0.5;\n    }\n\n    gesture.$imageEl.transform(`translate3d(0,0,0) scale(${zoom.scale})`);\n  }\n\n  function onGestureEnd(e) {\n    const device = swiper.device;\n    const support = swiper.support;\n    const params = swiper.params.zoom;\n    const zoom = swiper.zoom;\n\n    if (!support.gestures) {\n      if (!fakeGestureTouched || !fakeGestureMoved) {\n        return;\n      }\n\n      if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2 && !device.android) {\n        return;\n      }\n\n      fakeGestureTouched = false;\n      fakeGestureMoved = false;\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.$imageEl.transition(swiper.params.speed).transform(`translate3d(0,0,0) scale(${zoom.scale})`);\n    currentScale = zoom.scale;\n    isScaling = false;\n    if (zoom.scale === 1) gesture.$slideEl = undefined;\n  }\n\n  function onTouchStart(e) {\n    const device = swiper.device;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  }\n\n  function onTouchMove(e) {\n    const zoom = swiper.zoom;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    swiper.allowClick = false;\n    if (!image.isTouched || !gesture.$slideEl) return;\n\n    if (!image.isMoved) {\n      image.width = gesture.$imageEl[0].offsetWidth;\n      image.height = gesture.$imageEl[0].offsetHeight;\n      image.startX = getTranslate(gesture.$imageWrapEl[0], 'x') || 0;\n      image.startY = getTranslate(gesture.$imageWrapEl[0], 'y') || 0;\n      gesture.slideWidth = gesture.$slideEl[0].offsetWidth;\n      gesture.slideHeight = gesture.$slideEl[0].offsetHeight;\n      gesture.$imageWrapEl.transition(0);\n    } // Define if we need image drag\n\n\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    if (scaledWidth < gesture.slideWidth && scaledHeight < gesture.slideHeight) return;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n    if (!image.isMoved && !isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    image.isMoved = true;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX;\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY;\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - (image.minX - image.currentX + 1) ** 0.8;\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + (image.currentX - image.maxX + 1) ** 0.8;\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - (image.minY - image.currentY + 1) ** 0.8;\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + (image.currentY - image.maxY + 1) ** 0.8;\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.$imageWrapEl.transform(`translate3d(${image.currentX}px, ${image.currentY}px,0)`);\n  }\n\n  function onTouchEnd() {\n    const zoom = swiper.zoom;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    let momentumDurationX = 300;\n    let momentumDurationY = 300;\n    const momentumDistanceX = velocity.x * momentumDurationX;\n    const newPositionX = image.currentX + momentumDistanceX;\n    const momentumDistanceY = velocity.y * momentumDurationY;\n    const newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    const momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    const scaledWidth = image.width * zoom.scale;\n    const scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.$imageWrapEl.transition(momentumDuration).transform(`translate3d(${image.currentX}px, ${image.currentY}px,0)`);\n  }\n\n  function onTransitionEnd() {\n    const zoom = swiper.zoom;\n\n    if (gesture.$slideEl && swiper.previousIndex !== swiper.activeIndex) {\n      if (gesture.$imageEl) {\n        gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');\n      }\n\n      if (gesture.$imageWrapEl) {\n        gesture.$imageWrapEl.transform('translate3d(0,0,0)');\n      }\n\n      zoom.scale = 1;\n      currentScale = 1;\n      gesture.$slideEl = undefined;\n      gesture.$imageEl = undefined;\n      gesture.$imageWrapEl = undefined;\n    }\n  }\n\n  function zoomIn(e) {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n\n    if (!gesture.$slideEl) {\n      if (e && e.target) {\n        gesture.$slideEl = $(e.target).closest(`.${swiper.params.slideClass}`);\n      }\n\n      if (!gesture.$slideEl) {\n        if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n          gesture.$slideEl = swiper.$wrapperEl.children(`.${swiper.params.slideActiveClass}`);\n        } else {\n          gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n        }\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find(`.${params.containerClass}`).eq(0).find('picture, img, svg, canvas, .swiper-zoom-target').eq(0);\n      gesture.$imageWrapEl = gesture.$imageEl.parent(`.${params.containerClass}`);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = 'hidden';\n      swiper.wrapperEl.style.touchAction = 'none';\n    }\n\n    gesture.$slideEl.addClass(`${params.zoomedSlideClass}`);\n    let touchX;\n    let touchY;\n    let offsetX;\n    let offsetY;\n    let diffX;\n    let diffY;\n    let translateX;\n    let translateY;\n    let imageWidth;\n    let imageHeight;\n    let scaledWidth;\n    let scaledHeight;\n    let translateMinX;\n    let translateMinY;\n    let translateMaxX;\n    let translateMaxY;\n    let slideWidth;\n    let slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n      touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    zoom.scale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n    currentScale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n    if (e) {\n      slideWidth = gesture.$slideEl[0].offsetWidth;\n      slideHeight = gesture.$slideEl[0].offsetHeight;\n      offsetX = gesture.$slideEl.offset().left + window.scrollX;\n      offsetY = gesture.$slideEl.offset().top + window.scrollY;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.$imageEl[0].offsetWidth;\n      imageHeight = gesture.$imageEl[0].offsetHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      translateX = diffX * zoom.scale;\n      translateY = diffY * zoom.scale;\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    gesture.$imageWrapEl.transition(300).transform(`translate3d(${translateX}px, ${translateY}px,0)`);\n    gesture.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${zoom.scale})`);\n  }\n\n  function zoomOut() {\n    const zoom = swiper.zoom;\n    const params = swiper.params.zoom;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(`.${swiper.params.slideActiveClass}`);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find(`.${params.containerClass}`).eq(0).find('picture, img, svg, canvas, .swiper-zoom-target').eq(0);\n      gesture.$imageWrapEl = gesture.$imageEl.parent(`.${params.containerClass}`);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n\n    if (swiper.params.cssMode) {\n      swiper.wrapperEl.style.overflow = '';\n      swiper.wrapperEl.style.touchAction = '';\n    }\n\n    zoom.scale = 1;\n    currentScale = 1;\n    gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');\n    gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');\n    gesture.$slideEl.removeClass(`${params.zoomedSlideClass}`);\n    gesture.$slideEl = undefined;\n  } // Toggle Zoom\n\n\n  function zoomToggle(e) {\n    const zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoomOut();\n    } else {\n      // Zoom In\n      zoomIn(e);\n    }\n  }\n\n  function getListeners() {\n    const support = swiper.support;\n    const passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    const activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    return {\n      passiveListener,\n      activeListenerWithCapture\n    };\n  }\n\n  function getSlideSelector() {\n    return `.${swiper.params.slideClass}`;\n  }\n\n  function toggleGestures(method) {\n    const {\n      passiveListener\n    } = getListeners();\n    const slideSelector = getSlideSelector();\n    swiper.$wrapperEl[method]('gesturestart', slideSelector, onGestureStart, passiveListener);\n    swiper.$wrapperEl[method]('gesturechange', slideSelector, onGestureChange, passiveListener);\n    swiper.$wrapperEl[method]('gestureend', slideSelector, onGestureEnd, passiveListener);\n  }\n\n  function enableGestures() {\n    if (gesturesEnabled) return;\n    gesturesEnabled = true;\n    toggleGestures('on');\n  }\n\n  function disableGestures() {\n    if (!gesturesEnabled) return;\n    gesturesEnabled = false;\n    toggleGestures('off');\n  } // Attach/Detach Events\n\n\n  function enable() {\n    const zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    const support = swiper.support;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners();\n    const slideSelector = getSlideSelector(); // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, enableGestures, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, slideSelector, onGestureStart, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.move, slideSelector, onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, slideSelector, onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.on(swiper.touchEvents.cancel, slideSelector, onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.on(swiper.touchEvents.move, `.${swiper.params.zoom.containerClass}`, onTouchMove, activeListenerWithCapture);\n  }\n\n  function disable() {\n    const zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    const support = swiper.support;\n    zoom.enabled = false;\n    const {\n      passiveListener,\n      activeListenerWithCapture\n    } = getListeners();\n    const slideSelector = getSlideSelector(); // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, enableGestures, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, slideSelector, onGestureStart, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.move, slideSelector, onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, slideSelector, onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.off(swiper.touchEvents.cancel, slideSelector, onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.off(swiper.touchEvents.move, `.${swiper.params.zoom.containerClass}`, onTouchMove, activeListenerWithCapture);\n  }\n\n  on('init', () => {\n    if (swiper.params.zoom.enabled) {\n      enable();\n    }\n  });\n  on('destroy', () => {\n    disable();\n  });\n  on('touchStart', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchStart(e);\n  });\n  on('touchEnd', (_s, e) => {\n    if (!swiper.zoom.enabled) return;\n    onTouchEnd(e);\n  });\n  on('doubleTap', (_s, e) => {\n    if (!swiper.animating && swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n      zoomToggle(e);\n    }\n  });\n  on('transitionEnd', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n      onTransitionEnd();\n    }\n  });\n  on('slideChange', () => {\n    if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n      onTransitionEnd();\n    }\n  });\n  Object.assign(swiper.zoom, {\n    enable,\n    disable,\n    in: zoomIn,\n    out: zoomOut,\n    toggle: zoomToggle\n  });\n}","import { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function Lazy(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  extendParams({\n    lazy: {\n      checkInView: false,\n      enabled: false,\n      loadPrevNext: false,\n      loadPrevNextAmount: 1,\n      loadOnTransitionStart: false,\n      scrollingElement: '',\n      elementClass: 'swiper-lazy',\n      loadingClass: 'swiper-lazy-loading',\n      loadedClass: 'swiper-lazy-loaded',\n      preloaderClass: 'swiper-lazy-preloader'\n    }\n  });\n  swiper.lazy = {};\n  let scrollHandlerAttached = false;\n  let initialImageLoaded = false;\n\n  function loadInSlide(index, loadInDuplicate) {\n    if (loadInDuplicate === void 0) {\n      loadInDuplicate = true;\n    }\n\n    const params = swiper.params.lazy;\n    if (typeof index === 'undefined') return;\n    if (swiper.slides.length === 0) return;\n    const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n    const $slideEl = isVirtual ? swiper.$wrapperEl.children(`.${swiper.params.slideClass}[data-swiper-slide-index=\"${index}\"]`) : swiper.slides.eq(index);\n    const $images = $slideEl.find(`.${params.elementClass}:not(.${params.loadedClass}):not(.${params.loadingClass})`);\n\n    if ($slideEl.hasClass(params.elementClass) && !$slideEl.hasClass(params.loadedClass) && !$slideEl.hasClass(params.loadingClass)) {\n      $images.push($slideEl[0]);\n    }\n\n    if ($images.length === 0) return;\n    $images.each(imageEl => {\n      const $imageEl = $(imageEl);\n      $imageEl.addClass(params.loadingClass);\n      const background = $imageEl.attr('data-background');\n      const src = $imageEl.attr('data-src');\n      const srcset = $imageEl.attr('data-srcset');\n      const sizes = $imageEl.attr('data-sizes');\n      const $pictureEl = $imageEl.parent('picture');\n      swiper.loadImage($imageEl[0], src || background, srcset, sizes, false, () => {\n        if (typeof swiper === 'undefined' || swiper === null || !swiper || swiper && !swiper.params || swiper.destroyed) return;\n\n        if (background) {\n          $imageEl.css('background-image', `url(\"${background}\")`);\n          $imageEl.removeAttr('data-background');\n        } else {\n          if (srcset) {\n            $imageEl.attr('srcset', srcset);\n            $imageEl.removeAttr('data-srcset');\n          }\n\n          if (sizes) {\n            $imageEl.attr('sizes', sizes);\n            $imageEl.removeAttr('data-sizes');\n          }\n\n          if ($pictureEl.length) {\n            $pictureEl.children('source').each(sourceEl => {\n              const $source = $(sourceEl);\n\n              if ($source.attr('data-srcset')) {\n                $source.attr('srcset', $source.attr('data-srcset'));\n                $source.removeAttr('data-srcset');\n              }\n            });\n          }\n\n          if (src) {\n            $imageEl.attr('src', src);\n            $imageEl.removeAttr('data-src');\n          }\n        }\n\n        $imageEl.addClass(params.loadedClass).removeClass(params.loadingClass);\n        $slideEl.find(`.${params.preloaderClass}`).remove();\n\n        if (swiper.params.loop && loadInDuplicate) {\n          const slideOriginalIndex = $slideEl.attr('data-swiper-slide-index');\n\n          if ($slideEl.hasClass(swiper.params.slideDuplicateClass)) {\n            const originalSlide = swiper.$wrapperEl.children(`[data-swiper-slide-index=\"${slideOriginalIndex}\"]:not(.${swiper.params.slideDuplicateClass})`);\n            loadInSlide(originalSlide.index(), false);\n          } else {\n            const duplicatedSlide = swiper.$wrapperEl.children(`.${swiper.params.slideDuplicateClass}[data-swiper-slide-index=\"${slideOriginalIndex}\"]`);\n            loadInSlide(duplicatedSlide.index(), false);\n          }\n        }\n\n        emit('lazyImageReady', $slideEl[0], $imageEl[0]);\n\n        if (swiper.params.autoHeight) {\n          swiper.updateAutoHeight();\n        }\n      });\n      emit('lazyImageLoad', $slideEl[0], $imageEl[0]);\n    });\n  }\n\n  function load() {\n    const {\n      $wrapperEl,\n      params: swiperParams,\n      slides,\n      activeIndex\n    } = swiper;\n    const isVirtual = swiper.virtual && swiperParams.virtual.enabled;\n    const params = swiperParams.lazy;\n    let slidesPerView = swiperParams.slidesPerView;\n\n    if (slidesPerView === 'auto') {\n      slidesPerView = 0;\n    }\n\n    function slideExist(index) {\n      if (isVirtual) {\n        if ($wrapperEl.children(`.${swiperParams.slideClass}[data-swiper-slide-index=\"${index}\"]`).length) {\n          return true;\n        }\n      } else if (slides[index]) return true;\n\n      return false;\n    }\n\n    function slideIndex(slideEl) {\n      if (isVirtual) {\n        return $(slideEl).attr('data-swiper-slide-index');\n      }\n\n      return $(slideEl).index();\n    }\n\n    if (!initialImageLoaded) initialImageLoaded = true;\n\n    if (swiper.params.watchSlidesProgress) {\n      $wrapperEl.children(`.${swiperParams.slideVisibleClass}`).each(slideEl => {\n        const index = isVirtual ? $(slideEl).attr('data-swiper-slide-index') : $(slideEl).index();\n        loadInSlide(index);\n      });\n    } else if (slidesPerView > 1) {\n      for (let i = activeIndex; i < activeIndex + slidesPerView; i += 1) {\n        if (slideExist(i)) loadInSlide(i);\n      }\n    } else {\n      loadInSlide(activeIndex);\n    }\n\n    if (params.loadPrevNext) {\n      if (slidesPerView > 1 || params.loadPrevNextAmount && params.loadPrevNextAmount > 1) {\n        const amount = params.loadPrevNextAmount;\n        const spv = Math.ceil(slidesPerView);\n        const maxIndex = Math.min(activeIndex + spv + Math.max(amount, spv), slides.length);\n        const minIndex = Math.max(activeIndex - Math.max(spv, amount), 0); // Next Slides\n\n        for (let i = activeIndex + spv; i < maxIndex; i += 1) {\n          if (slideExist(i)) loadInSlide(i);\n        } // Prev Slides\n\n\n        for (let i = minIndex; i < activeIndex; i += 1) {\n          if (slideExist(i)) loadInSlide(i);\n        }\n      } else {\n        const nextSlide = $wrapperEl.children(`.${swiperParams.slideNextClass}`);\n        if (nextSlide.length > 0) loadInSlide(slideIndex(nextSlide));\n        const prevSlide = $wrapperEl.children(`.${swiperParams.slidePrevClass}`);\n        if (prevSlide.length > 0) loadInSlide(slideIndex(prevSlide));\n      }\n    }\n  }\n\n  function checkInViewOnLoad() {\n    const window = getWindow();\n    if (!swiper || swiper.destroyed) return;\n    const $scrollElement = swiper.params.lazy.scrollingElement ? $(swiper.params.lazy.scrollingElement) : $(window);\n    const isWindow = $scrollElement[0] === window;\n    const scrollElementWidth = isWindow ? window.innerWidth : $scrollElement[0].offsetWidth;\n    const scrollElementHeight = isWindow ? window.innerHeight : $scrollElement[0].offsetHeight;\n    const swiperOffset = swiper.$el.offset();\n    const {\n      rtlTranslate: rtl\n    } = swiper;\n    let inView = false;\n    if (rtl) swiperOffset.left -= swiper.$el[0].scrollLeft;\n    const swiperCoord = [[swiperOffset.left, swiperOffset.top], [swiperOffset.left + swiper.width, swiperOffset.top], [swiperOffset.left, swiperOffset.top + swiper.height], [swiperOffset.left + swiper.width, swiperOffset.top + swiper.height]];\n\n    for (let i = 0; i < swiperCoord.length; i += 1) {\n      const point = swiperCoord[i];\n\n      if (point[0] >= 0 && point[0] <= scrollElementWidth && point[1] >= 0 && point[1] <= scrollElementHeight) {\n        if (point[0] === 0 && point[1] === 0) continue; // eslint-disable-line\n\n        inView = true;\n      }\n    }\n\n    const passiveListener = swiper.touchEvents.start === 'touchstart' && swiper.support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n\n    if (inView) {\n      load();\n      $scrollElement.off('scroll', checkInViewOnLoad, passiveListener);\n    } else if (!scrollHandlerAttached) {\n      scrollHandlerAttached = true;\n      $scrollElement.on('scroll', checkInViewOnLoad, passiveListener);\n    }\n  }\n\n  on('beforeInit', () => {\n    if (swiper.params.lazy.enabled && swiper.params.preloadImages) {\n      swiper.params.preloadImages = false;\n    }\n  });\n  on('init', () => {\n    if (swiper.params.lazy.enabled) {\n      if (swiper.params.lazy.checkInView) {\n        checkInViewOnLoad();\n      } else {\n        load();\n      }\n    }\n  });\n  on('scroll', () => {\n    if (swiper.params.freeMode && swiper.params.freeMode.enabled && !swiper.params.freeMode.sticky) {\n      load();\n    }\n  });\n  on('scrollbarDragMove resize _freeModeNoMomentumRelease', () => {\n    if (swiper.params.lazy.enabled) {\n      if (swiper.params.lazy.checkInView) {\n        checkInViewOnLoad();\n      } else {\n        load();\n      }\n    }\n  });\n  on('transitionStart', () => {\n    if (swiper.params.lazy.enabled) {\n      if (swiper.params.lazy.loadOnTransitionStart || !swiper.params.lazy.loadOnTransitionStart && !initialImageLoaded) {\n        if (swiper.params.lazy.checkInView) {\n          checkInViewOnLoad();\n        } else {\n          load();\n        }\n      }\n    }\n  });\n  on('transitionEnd', () => {\n    if (swiper.params.lazy.enabled && !swiper.params.lazy.loadOnTransitionStart) {\n      if (swiper.params.lazy.checkInView) {\n        checkInViewOnLoad();\n      } else {\n        load();\n      }\n    }\n  });\n  on('slideChange', () => {\n    const {\n      lazy,\n      cssMode,\n      watchSlidesProgress,\n      touchReleaseOnEdges,\n      resistanceRatio\n    } = swiper.params;\n\n    if (lazy.enabled && (cssMode || watchSlidesProgress && (touchReleaseOnEdges || resistanceRatio === 0))) {\n      load();\n    }\n  });\n  on('destroy', () => {\n    if (!swiper.$el) return;\n    swiper.$el.find(`.${swiper.params.lazy.loadingClass}`).removeClass(swiper.params.lazy.loadingClass);\n  });\n  Object.assign(swiper.lazy, {\n    load,\n    loadInSlide\n  });\n}","/* eslint no-bitwise: [\"error\", { \"allow\": [\">>\"] }] */\nimport { nextTick } from '../../shared/utils.js';\nexport default function Controller(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    controller: {\n      control: undefined,\n      inverse: false,\n      by: 'slide' // or 'container'\n\n    }\n  });\n  swiper.controller = {\n    control: undefined\n  };\n\n  function LinearSpline(x, y) {\n    const binarySearch = function search() {\n      let maxIndex;\n      let minIndex;\n      let guess;\n      return (array, val) => {\n        minIndex = -1;\n        maxIndex = array.length;\n\n        while (maxIndex - minIndex > 1) {\n          guess = maxIndex + minIndex >> 1;\n\n          if (array[guess] <= val) {\n            minIndex = guess;\n          } else {\n            maxIndex = guess;\n          }\n        }\n\n        return maxIndex;\n      };\n    }();\n\n    this.x = x;\n    this.y = y;\n    this.lastIndex = x.length - 1; // Given an x value (x2), return the expected y2 value:\n    // (x1,y1) is the known point before given value,\n    // (x3,y3) is the known point after given value.\n\n    let i1;\n    let i3;\n\n    this.interpolate = function interpolate(x2) {\n      if (!x2) return 0; // Get the indexes of x1 and x3 (the array indexes before and after given x2):\n\n      i3 = binarySearch(this.x, x2);\n      i1 = i3 - 1; // We have our indexes i1 & i3, so we can calculate already:\n      // y2 := ((x2x1)  (y3y1))  (x3x1) + y1\n\n      return (x2 - this.x[i1]) * (this.y[i3] - this.y[i1]) / (this.x[i3] - this.x[i1]) + this.y[i1];\n    };\n\n    return this;\n  } // xxx: for now i will just save one spline function to to\n\n\n  function getInterpolateFunction(c) {\n    if (!swiper.controller.spline) {\n      swiper.controller.spline = swiper.params.loop ? new LinearSpline(swiper.slidesGrid, c.slidesGrid) : new LinearSpline(swiper.snapGrid, c.snapGrid);\n    }\n  }\n\n  function setTranslate(_t, byController) {\n    const controlled = swiper.controller.control;\n    let multiplier;\n    let controlledTranslate;\n    const Swiper = swiper.constructor;\n\n    function setControlledTranslate(c) {\n      // this will create an Interpolate function based on the snapGrids\n      // x is the Grid of the scrolled scroller and y will be the controlled scroller\n      // it makes sense to create this only once and recall it for the interpolation\n      // the function does a lot of value caching for performance\n      const translate = swiper.rtlTranslate ? -swiper.translate : swiper.translate;\n\n      if (swiper.params.controller.by === 'slide') {\n        getInterpolateFunction(c); // i am not sure why the values have to be multiplicated this way, tried to invert the snapGrid\n        // but it did not work out\n\n        controlledTranslate = -swiper.controller.spline.interpolate(-translate);\n      }\n\n      if (!controlledTranslate || swiper.params.controller.by === 'container') {\n        multiplier = (c.maxTranslate() - c.minTranslate()) / (swiper.maxTranslate() - swiper.minTranslate());\n        controlledTranslate = (translate - swiper.minTranslate()) * multiplier + c.minTranslate();\n      }\n\n      if (swiper.params.controller.inverse) {\n        controlledTranslate = c.maxTranslate() - controlledTranslate;\n      }\n\n      c.updateProgress(controlledTranslate);\n      c.setTranslate(controlledTranslate, swiper);\n      c.updateActiveIndex();\n      c.updateSlidesClasses();\n    }\n\n    if (Array.isArray(controlled)) {\n      for (let i = 0; i < controlled.length; i += 1) {\n        if (controlled[i] !== byController && controlled[i] instanceof Swiper) {\n          setControlledTranslate(controlled[i]);\n        }\n      }\n    } else if (controlled instanceof Swiper && byController !== controlled) {\n      setControlledTranslate(controlled);\n    }\n  }\n\n  function setTransition(duration, byController) {\n    const Swiper = swiper.constructor;\n    const controlled = swiper.controller.control;\n    let i;\n\n    function setControlledTransition(c) {\n      c.setTransition(duration, swiper);\n\n      if (duration !== 0) {\n        c.transitionStart();\n\n        if (c.params.autoHeight) {\n          nextTick(() => {\n            c.updateAutoHeight();\n          });\n        }\n\n        c.$wrapperEl.transitionEnd(() => {\n          if (!controlled) return;\n\n          if (c.params.loop && swiper.params.controller.by === 'slide') {\n            c.loopFix();\n          }\n\n          c.transitionEnd();\n        });\n      }\n    }\n\n    if (Array.isArray(controlled)) {\n      for (i = 0; i < controlled.length; i += 1) {\n        if (controlled[i] !== byController && controlled[i] instanceof Swiper) {\n          setControlledTransition(controlled[i]);\n        }\n      }\n    } else if (controlled instanceof Swiper && byController !== controlled) {\n      setControlledTransition(controlled);\n    }\n  }\n\n  function removeSpline() {\n    if (!swiper.controller.control) return;\n\n    if (swiper.controller.spline) {\n      swiper.controller.spline = undefined;\n      delete swiper.controller.spline;\n    }\n  }\n\n  on('beforeInit', () => {\n    swiper.controller.control = swiper.params.controller.control;\n  });\n  on('update', () => {\n    removeSpline();\n  });\n  on('resize', () => {\n    removeSpline();\n  });\n  on('observerUpdate', () => {\n    removeSpline();\n  });\n  on('setTranslate', (_s, translate, byController) => {\n    if (!swiper.controller.control) return;\n    swiper.controller.setTranslate(translate, byController);\n  });\n  on('setTransition', (_s, duration, byController) => {\n    if (!swiper.controller.control) return;\n    swiper.controller.setTransition(duration, byController);\n  });\n  Object.assign(swiper.controller, {\n    setTranslate,\n    setTransition\n  });\n}","import classesToSelector from '../../shared/classes-to-selector.js';\nimport $ from '../../shared/dom.js';\nexport default function A11y(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    a11y: {\n      enabled: true,\n      notificationClass: 'swiper-notification',\n      prevSlideMessage: 'Previous slide',\n      nextSlideMessage: 'Next slide',\n      firstSlideMessage: 'This is the first slide',\n      lastSlideMessage: 'This is the last slide',\n      paginationBulletMessage: 'Go to slide {{index}}',\n      slideLabelMessage: '{{index}} / {{slidesLength}}',\n      containerMessage: null,\n      containerRoleDescriptionMessage: null,\n      itemRoleDescriptionMessage: null,\n      slideRole: 'group',\n      id: null\n    }\n  });\n  let liveRegion = null;\n\n  function notify(message) {\n    const notification = liveRegion;\n    if (notification.length === 0) return;\n    notification.html('');\n    notification.html(message);\n  }\n\n  function getRandomNumber(size) {\n    if (size === void 0) {\n      size = 16;\n    }\n\n    const randomChar = () => Math.round(16 * Math.random()).toString(16);\n\n    return 'x'.repeat(size).replace(/x/g, randomChar);\n  }\n\n  function makeElFocusable($el) {\n    $el.attr('tabIndex', '0');\n  }\n\n  function makeElNotFocusable($el) {\n    $el.attr('tabIndex', '-1');\n  }\n\n  function addElRole($el, role) {\n    $el.attr('role', role);\n  }\n\n  function addElRoleDescription($el, description) {\n    $el.attr('aria-roledescription', description);\n  }\n\n  function addElControls($el, controls) {\n    $el.attr('aria-controls', controls);\n  }\n\n  function addElLabel($el, label) {\n    $el.attr('aria-label', label);\n  }\n\n  function addElId($el, id) {\n    $el.attr('id', id);\n  }\n\n  function addElLive($el, live) {\n    $el.attr('aria-live', live);\n  }\n\n  function disableEl($el) {\n    $el.attr('aria-disabled', true);\n  }\n\n  function enableEl($el) {\n    $el.attr('aria-disabled', false);\n  }\n\n  function onEnterOrSpaceKey(e) {\n    if (e.keyCode !== 13 && e.keyCode !== 32) return;\n    const params = swiper.params.a11y;\n    const $targetEl = $(e.target);\n\n    if (swiper.navigation && swiper.navigation.$nextEl && $targetEl.is(swiper.navigation.$nextEl)) {\n      if (!(swiper.isEnd && !swiper.params.loop)) {\n        swiper.slideNext();\n      }\n\n      if (swiper.isEnd) {\n        notify(params.lastSlideMessage);\n      } else {\n        notify(params.nextSlideMessage);\n      }\n    }\n\n    if (swiper.navigation && swiper.navigation.$prevEl && $targetEl.is(swiper.navigation.$prevEl)) {\n      if (!(swiper.isBeginning && !swiper.params.loop)) {\n        swiper.slidePrev();\n      }\n\n      if (swiper.isBeginning) {\n        notify(params.firstSlideMessage);\n      } else {\n        notify(params.prevSlideMessage);\n      }\n    }\n\n    if (swiper.pagination && $targetEl.is(classesToSelector(swiper.params.pagination.bulletClass))) {\n      $targetEl[0].click();\n    }\n  }\n\n  function updateNavigation() {\n    if (swiper.params.loop || swiper.params.rewind || !swiper.navigation) return;\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n\n    if ($prevEl && $prevEl.length > 0) {\n      if (swiper.isBeginning) {\n        disableEl($prevEl);\n        makeElNotFocusable($prevEl);\n      } else {\n        enableEl($prevEl);\n        makeElFocusable($prevEl);\n      }\n    }\n\n    if ($nextEl && $nextEl.length > 0) {\n      if (swiper.isEnd) {\n        disableEl($nextEl);\n        makeElNotFocusable($nextEl);\n      } else {\n        enableEl($nextEl);\n        makeElFocusable($nextEl);\n      }\n    }\n  }\n\n  function hasPagination() {\n    return swiper.pagination && swiper.pagination.bullets && swiper.pagination.bullets.length;\n  }\n\n  function hasClickablePagination() {\n    return hasPagination() && swiper.params.pagination.clickable;\n  }\n\n  function updatePagination() {\n    const params = swiper.params.a11y;\n    if (!hasPagination()) return;\n    swiper.pagination.bullets.each(bulletEl => {\n      const $bulletEl = $(bulletEl);\n\n      if (swiper.params.pagination.clickable) {\n        makeElFocusable($bulletEl);\n\n        if (!swiper.params.pagination.renderBullet) {\n          addElRole($bulletEl, 'button');\n          addElLabel($bulletEl, params.paginationBulletMessage.replace(/\\{\\{index\\}\\}/, $bulletEl.index() + 1));\n        }\n      }\n\n      if ($bulletEl.is(`.${swiper.params.pagination.bulletActiveClass}`)) {\n        $bulletEl.attr('aria-current', 'true');\n      } else {\n        $bulletEl.removeAttr('aria-current');\n      }\n    });\n  }\n\n  const initNavEl = ($el, wrapperId, message) => {\n    makeElFocusable($el);\n\n    if ($el[0].tagName !== 'BUTTON') {\n      addElRole($el, 'button');\n      $el.on('keydown', onEnterOrSpaceKey);\n    }\n\n    addElLabel($el, message);\n    addElControls($el, wrapperId);\n  };\n\n  const handleFocus = e => {\n    const slideEl = e.target.closest(`.${swiper.params.slideClass}`);\n    if (!slideEl || !swiper.slides.includes(slideEl)) return;\n    const isActive = swiper.slides.indexOf(slideEl) === swiper.activeIndex;\n    const isVisible = swiper.params.watchSlidesProgress && swiper.visibleSlides && swiper.visibleSlides.includes(slideEl);\n    if (isActive || isVisible) return;\n    swiper.slideTo(swiper.slides.indexOf(slideEl), 0);\n  };\n\n  const initSlides = () => {\n    const params = swiper.params.a11y;\n\n    if (params.itemRoleDescriptionMessage) {\n      addElRoleDescription($(swiper.slides), params.itemRoleDescriptionMessage);\n    }\n\n    if (params.slideRole) {\n      addElRole($(swiper.slides), params.slideRole);\n    }\n\n    const slidesLength = swiper.params.loop ? swiper.slides.filter(el => !el.classList.contains(swiper.params.slideDuplicateClass)).length : swiper.slides.length;\n\n    if (params.slideLabelMessage) {\n      swiper.slides.each((slideEl, index) => {\n        const $slideEl = $(slideEl);\n        const slideIndex = swiper.params.loop ? parseInt($slideEl.attr('data-swiper-slide-index'), 10) : index;\n        const ariaLabelMessage = params.slideLabelMessage.replace(/\\{\\{index\\}\\}/, slideIndex + 1).replace(/\\{\\{slidesLength\\}\\}/, slidesLength);\n        addElLabel($slideEl, ariaLabelMessage);\n      });\n    }\n  };\n\n  const init = () => {\n    const params = swiper.params.a11y;\n    swiper.$el.append(liveRegion); // Container\n\n    const $containerEl = swiper.$el;\n\n    if (params.containerRoleDescriptionMessage) {\n      addElRoleDescription($containerEl, params.containerRoleDescriptionMessage);\n    }\n\n    if (params.containerMessage) {\n      addElLabel($containerEl, params.containerMessage);\n    } // Wrapper\n\n\n    const $wrapperEl = swiper.$wrapperEl;\n    const wrapperId = params.id || $wrapperEl.attr('id') || `swiper-wrapper-${getRandomNumber(16)}`;\n    const live = swiper.params.autoplay && swiper.params.autoplay.enabled ? 'off' : 'polite';\n    addElId($wrapperEl, wrapperId);\n    addElLive($wrapperEl, live); // Slide\n\n    initSlides(); // Navigation\n\n    let $nextEl;\n    let $prevEl;\n\n    if (swiper.navigation && swiper.navigation.$nextEl) {\n      $nextEl = swiper.navigation.$nextEl;\n    }\n\n    if (swiper.navigation && swiper.navigation.$prevEl) {\n      $prevEl = swiper.navigation.$prevEl;\n    }\n\n    if ($nextEl && $nextEl.length) {\n      initNavEl($nextEl, wrapperId, params.nextSlideMessage);\n    }\n\n    if ($prevEl && $prevEl.length) {\n      initNavEl($prevEl, wrapperId, params.prevSlideMessage);\n    } // Pagination\n\n\n    if (hasClickablePagination()) {\n      swiper.pagination.$el.on('keydown', classesToSelector(swiper.params.pagination.bulletClass), onEnterOrSpaceKey);\n    } // Tab focus\n\n\n    swiper.$el.on('focus', handleFocus, true);\n  };\n\n  function destroy() {\n    if (liveRegion && liveRegion.length > 0) liveRegion.remove();\n    let $nextEl;\n    let $prevEl;\n\n    if (swiper.navigation && swiper.navigation.$nextEl) {\n      $nextEl = swiper.navigation.$nextEl;\n    }\n\n    if (swiper.navigation && swiper.navigation.$prevEl) {\n      $prevEl = swiper.navigation.$prevEl;\n    }\n\n    if ($nextEl) {\n      $nextEl.off('keydown', onEnterOrSpaceKey);\n    }\n\n    if ($prevEl) {\n      $prevEl.off('keydown', onEnterOrSpaceKey);\n    } // Pagination\n\n\n    if (hasClickablePagination()) {\n      swiper.pagination.$el.off('keydown', classesToSelector(swiper.params.pagination.bulletClass), onEnterOrSpaceKey);\n    } // Tab focus\n\n\n    swiper.$el.off('focus', handleFocus, true);\n  }\n\n  on('beforeInit', () => {\n    liveRegion = $(`<span class=\"${swiper.params.a11y.notificationClass}\" aria-live=\"assertive\" aria-atomic=\"true\"></span>`);\n  });\n  on('afterInit', () => {\n    if (!swiper.params.a11y.enabled) return;\n    init();\n  });\n  on('slidesLengthChange snapGridLengthChange slidesGridLengthChange', () => {\n    if (!swiper.params.a11y.enabled) return;\n    initSlides();\n  });\n  on('fromEdge toEdge afterInit lock unlock', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updateNavigation();\n  });\n  on('paginationUpdate', () => {\n    if (!swiper.params.a11y.enabled) return;\n    updatePagination();\n  });\n  on('destroy', () => {\n    if (!swiper.params.a11y.enabled) return;\n    destroy();\n  });\n}","import { getWindow } from 'ssr-window';\nexport default function History(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    history: {\n      enabled: false,\n      root: '',\n      replaceState: false,\n      key: 'slides',\n      keepQuery: false\n    }\n  });\n  let initialized = false;\n  let paths = {};\n\n  const slugify = text => {\n    return text.toString().replace(/\\s+/g, '-').replace(/[^\\w-]+/g, '').replace(/--+/g, '-').replace(/^-+/, '').replace(/-+$/, '');\n  };\n\n  const getPathValues = urlOverride => {\n    const window = getWindow();\n    let location;\n\n    if (urlOverride) {\n      location = new URL(urlOverride);\n    } else {\n      location = window.location;\n    }\n\n    const pathArray = location.pathname.slice(1).split('/').filter(part => part !== '');\n    const total = pathArray.length;\n    const key = pathArray[total - 2];\n    const value = pathArray[total - 1];\n    return {\n      key,\n      value\n    };\n  };\n\n  const setHistory = (key, index) => {\n    const window = getWindow();\n    if (!initialized || !swiper.params.history.enabled) return;\n    let location;\n\n    if (swiper.params.url) {\n      location = new URL(swiper.params.url);\n    } else {\n      location = window.location;\n    }\n\n    const slide = swiper.slides.eq(index);\n    let value = slugify(slide.attr('data-history'));\n\n    if (swiper.params.history.root.length > 0) {\n      let root = swiper.params.history.root;\n      if (root[root.length - 1] === '/') root = root.slice(0, root.length - 1);\n      value = `${root}/${key}/${value}`;\n    } else if (!location.pathname.includes(key)) {\n      value = `${key}/${value}`;\n    }\n\n    if (swiper.params.history.keepQuery) {\n      value += location.search;\n    }\n\n    const currentState = window.history.state;\n\n    if (currentState && currentState.value === value) {\n      return;\n    }\n\n    if (swiper.params.history.replaceState) {\n      window.history.replaceState({\n        value\n      }, null, value);\n    } else {\n      window.history.pushState({\n        value\n      }, null, value);\n    }\n  };\n\n  const scrollToSlide = (speed, value, runCallbacks) => {\n    if (value) {\n      for (let i = 0, length = swiper.slides.length; i < length; i += 1) {\n        const slide = swiper.slides.eq(i);\n        const slideHistory = slugify(slide.attr('data-history'));\n\n        if (slideHistory === value && !slide.hasClass(swiper.params.slideDuplicateClass)) {\n          const index = slide.index();\n          swiper.slideTo(index, speed, runCallbacks);\n        }\n      }\n    } else {\n      swiper.slideTo(0, speed, runCallbacks);\n    }\n  };\n\n  const setHistoryPopState = () => {\n    paths = getPathValues(swiper.params.url);\n    scrollToSlide(swiper.params.speed, paths.value, false);\n  };\n\n  const init = () => {\n    const window = getWindow();\n    if (!swiper.params.history) return;\n\n    if (!window.history || !window.history.pushState) {\n      swiper.params.history.enabled = false;\n      swiper.params.hashNavigation.enabled = true;\n      return;\n    }\n\n    initialized = true;\n    paths = getPathValues(swiper.params.url);\n    if (!paths.key && !paths.value) return;\n    scrollToSlide(0, paths.value, swiper.params.runCallbacksOnInit);\n\n    if (!swiper.params.history.replaceState) {\n      window.addEventListener('popstate', setHistoryPopState);\n    }\n  };\n\n  const destroy = () => {\n    const window = getWindow();\n\n    if (!swiper.params.history.replaceState) {\n      window.removeEventListener('popstate', setHistoryPopState);\n    }\n  };\n\n  on('init', () => {\n    if (swiper.params.history.enabled) {\n      init();\n    }\n  });\n  on('destroy', () => {\n    if (swiper.params.history.enabled) {\n      destroy();\n    }\n  });\n  on('transitionEnd _freeModeNoMomentumRelease', () => {\n    if (initialized) {\n      setHistory(swiper.params.history.key, swiper.activeIndex);\n    }\n  });\n  on('slideChange', () => {\n    if (initialized && swiper.params.cssMode) {\n      setHistory(swiper.params.history.key, swiper.activeIndex);\n    }\n  });\n}","import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function HashNavigation(_ref) {\n  let {\n    swiper,\n    extendParams,\n    emit,\n    on\n  } = _ref;\n  let initialized = false;\n  const document = getDocument();\n  const window = getWindow();\n  extendParams({\n    hashNavigation: {\n      enabled: false,\n      replaceState: false,\n      watchState: false\n    }\n  });\n\n  const onHashChange = () => {\n    emit('hashChange');\n    const newHash = document.location.hash.replace('#', '');\n    const activeSlideHash = swiper.slides.eq(swiper.activeIndex).attr('data-hash');\n\n    if (newHash !== activeSlideHash) {\n      const newIndex = swiper.$wrapperEl.children(`.${swiper.params.slideClass}[data-hash=\"${newHash}\"]`).index();\n      if (typeof newIndex === 'undefined') return;\n      swiper.slideTo(newIndex);\n    }\n  };\n\n  const setHash = () => {\n    if (!initialized || !swiper.params.hashNavigation.enabled) return;\n\n    if (swiper.params.hashNavigation.replaceState && window.history && window.history.replaceState) {\n      window.history.replaceState(null, null, `#${swiper.slides.eq(swiper.activeIndex).attr('data-hash')}` || '');\n      emit('hashSet');\n    } else {\n      const slide = swiper.slides.eq(swiper.activeIndex);\n      const hash = slide.attr('data-hash') || slide.attr('data-history');\n      document.location.hash = hash || '';\n      emit('hashSet');\n    }\n  };\n\n  const init = () => {\n    if (!swiper.params.hashNavigation.enabled || swiper.params.history && swiper.params.history.enabled) return;\n    initialized = true;\n    const hash = document.location.hash.replace('#', '');\n\n    if (hash) {\n      const speed = 0;\n\n      for (let i = 0, length = swiper.slides.length; i < length; i += 1) {\n        const slide = swiper.slides.eq(i);\n        const slideHash = slide.attr('data-hash') || slide.attr('data-history');\n\n        if (slideHash === hash && !slide.hasClass(swiper.params.slideDuplicateClass)) {\n          const index = slide.index();\n          swiper.slideTo(index, speed, swiper.params.runCallbacksOnInit, true);\n        }\n      }\n    }\n\n    if (swiper.params.hashNavigation.watchState) {\n      $(window).on('hashchange', onHashChange);\n    }\n  };\n\n  const destroy = () => {\n    if (swiper.params.hashNavigation.watchState) {\n      $(window).off('hashchange', onHashChange);\n    }\n  };\n\n  on('init', () => {\n    if (swiper.params.hashNavigation.enabled) {\n      init();\n    }\n  });\n  on('destroy', () => {\n    if (swiper.params.hashNavigation.enabled) {\n      destroy();\n    }\n  });\n  on('transitionEnd _freeModeNoMomentumRelease', () => {\n    if (initialized) {\n      setHash();\n    }\n  });\n  on('slideChange', () => {\n    if (initialized && swiper.params.cssMode) {\n      setHash();\n    }\n  });\n}","/* eslint no-underscore-dangle: \"off\" */\n\n/* eslint no-use-before-define: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport { nextTick } from '../../shared/utils.js';\nexport default function Autoplay(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  let timeout;\n  swiper.autoplay = {\n    running: false,\n    paused: false\n  };\n  extendParams({\n    autoplay: {\n      enabled: false,\n      delay: 3000,\n      waitForTransition: true,\n      disableOnInteraction: true,\n      stopOnLastSlide: false,\n      reverseDirection: false,\n      pauseOnMouseEnter: false\n    }\n  });\n\n  function run() {\n    const $activeSlideEl = swiper.slides.eq(swiper.activeIndex);\n    let delay = swiper.params.autoplay.delay;\n\n    if ($activeSlideEl.attr('data-swiper-autoplay')) {\n      delay = $activeSlideEl.attr('data-swiper-autoplay') || swiper.params.autoplay.delay;\n    }\n\n    clearTimeout(timeout);\n    timeout = nextTick(() => {\n      let autoplayResult;\n\n      if (swiper.params.autoplay.reverseDirection) {\n        if (swiper.params.loop) {\n          swiper.loopFix();\n          autoplayResult = swiper.slidePrev(swiper.params.speed, true, true);\n          emit('autoplay');\n        } else if (!swiper.isBeginning) {\n          autoplayResult = swiper.slidePrev(swiper.params.speed, true, true);\n          emit('autoplay');\n        } else if (!swiper.params.autoplay.stopOnLastSlide) {\n          autoplayResult = swiper.slideTo(swiper.slides.length - 1, swiper.params.speed, true, true);\n          emit('autoplay');\n        } else {\n          stop();\n        }\n      } else if (swiper.params.loop) {\n        swiper.loopFix();\n        autoplayResult = swiper.slideNext(swiper.params.speed, true, true);\n        emit('autoplay');\n      } else if (!swiper.isEnd) {\n        autoplayResult = swiper.slideNext(swiper.params.speed, true, true);\n        emit('autoplay');\n      } else if (!swiper.params.autoplay.stopOnLastSlide) {\n        autoplayResult = swiper.slideTo(0, swiper.params.speed, true, true);\n        emit('autoplay');\n      } else {\n        stop();\n      }\n\n      if (swiper.params.cssMode && swiper.autoplay.running) run();else if (autoplayResult === false) {\n        run();\n      }\n    }, delay);\n  }\n\n  function start() {\n    if (typeof timeout !== 'undefined') return false;\n    if (swiper.autoplay.running) return false;\n    swiper.autoplay.running = true;\n    emit('autoplayStart');\n    run();\n    return true;\n  }\n\n  function stop() {\n    if (!swiper.autoplay.running) return false;\n    if (typeof timeout === 'undefined') return false;\n\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    swiper.autoplay.running = false;\n    emit('autoplayStop');\n    return true;\n  }\n\n  function pause(speed) {\n    if (!swiper.autoplay.running) return;\n    if (swiper.autoplay.paused) return;\n    if (timeout) clearTimeout(timeout);\n    swiper.autoplay.paused = true;\n\n    if (speed === 0 || !swiper.params.autoplay.waitForTransition) {\n      swiper.autoplay.paused = false;\n      run();\n    } else {\n      ['transitionend', 'webkitTransitionEnd'].forEach(event => {\n        swiper.$wrapperEl[0].addEventListener(event, onTransitionEnd);\n      });\n    }\n  }\n\n  function onVisibilityChange() {\n    const document = getDocument();\n\n    if (document.visibilityState === 'hidden' && swiper.autoplay.running) {\n      pause();\n    }\n\n    if (document.visibilityState === 'visible' && swiper.autoplay.paused) {\n      run();\n      swiper.autoplay.paused = false;\n    }\n  }\n\n  function onTransitionEnd(e) {\n    if (!swiper || swiper.destroyed || !swiper.$wrapperEl) return;\n    if (e.target !== swiper.$wrapperEl[0]) return;\n    ['transitionend', 'webkitTransitionEnd'].forEach(event => {\n      swiper.$wrapperEl[0].removeEventListener(event, onTransitionEnd);\n    });\n    swiper.autoplay.paused = false;\n\n    if (!swiper.autoplay.running) {\n      stop();\n    } else {\n      run();\n    }\n  }\n\n  function onMouseEnter() {\n    if (swiper.params.autoplay.disableOnInteraction) {\n      stop();\n    } else {\n      emit('autoplayPause');\n      pause();\n    }\n\n    ['transitionend', 'webkitTransitionEnd'].forEach(event => {\n      swiper.$wrapperEl[0].removeEventListener(event, onTransitionEnd);\n    });\n  }\n\n  function onMouseLeave() {\n    if (swiper.params.autoplay.disableOnInteraction) {\n      return;\n    }\n\n    swiper.autoplay.paused = false;\n    emit('autoplayResume');\n    run();\n  }\n\n  function attachMouseEvents() {\n    if (swiper.params.autoplay.pauseOnMouseEnter) {\n      swiper.$el.on('mouseenter', onMouseEnter);\n      swiper.$el.on('mouseleave', onMouseLeave);\n    }\n  }\n\n  function detachMouseEvents() {\n    swiper.$el.off('mouseenter', onMouseEnter);\n    swiper.$el.off('mouseleave', onMouseLeave);\n  }\n\n  on('init', () => {\n    if (swiper.params.autoplay.enabled) {\n      start();\n      const document = getDocument();\n      document.addEventListener('visibilitychange', onVisibilityChange);\n      attachMouseEvents();\n    }\n  });\n  on('beforeTransitionStart', (_s, speed, internal) => {\n    if (swiper.autoplay.running) {\n      if (internal || !swiper.params.autoplay.disableOnInteraction) {\n        swiper.autoplay.pause(speed);\n      } else {\n        stop();\n      }\n    }\n  });\n  on('sliderFirstMove', () => {\n    if (swiper.autoplay.running) {\n      if (swiper.params.autoplay.disableOnInteraction) {\n        stop();\n      } else {\n        pause();\n      }\n    }\n  });\n  on('touchEnd', () => {\n    if (swiper.params.cssMode && swiper.autoplay.paused && !swiper.params.autoplay.disableOnInteraction) {\n      run();\n    }\n  });\n  on('destroy', () => {\n    detachMouseEvents();\n\n    if (swiper.autoplay.running) {\n      stop();\n    }\n\n    const document = getDocument();\n    document.removeEventListener('visibilitychange', onVisibilityChange);\n  });\n  Object.assign(swiper.autoplay, {\n    pause,\n    run,\n    start,\n    stop\n  });\n}","import { isObject } from '../../shared/utils.js';\nimport $ from '../../shared/dom.js';\nexport default function Thumb(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    thumbs: {\n      swiper: null,\n      multipleActiveThumbs: true,\n      autoScrollOffset: 0,\n      slideThumbActiveClass: 'swiper-slide-thumb-active',\n      thumbsContainerClass: 'swiper-thumbs'\n    }\n  });\n  let initialized = false;\n  let swiperCreated = false;\n  swiper.thumbs = {\n    swiper: null\n  };\n\n  function onThumbClick() {\n    const thumbsSwiper = swiper.thumbs.swiper;\n    if (!thumbsSwiper || thumbsSwiper.destroyed) return;\n    const clickedIndex = thumbsSwiper.clickedIndex;\n    const clickedSlide = thumbsSwiper.clickedSlide;\n    if (clickedSlide && $(clickedSlide).hasClass(swiper.params.thumbs.slideThumbActiveClass)) return;\n    if (typeof clickedIndex === 'undefined' || clickedIndex === null) return;\n    let slideToIndex;\n\n    if (thumbsSwiper.params.loop) {\n      slideToIndex = parseInt($(thumbsSwiper.clickedSlide).attr('data-swiper-slide-index'), 10);\n    } else {\n      slideToIndex = clickedIndex;\n    }\n\n    if (swiper.params.loop) {\n      let currentIndex = swiper.activeIndex;\n\n      if (swiper.slides.eq(currentIndex).hasClass(swiper.params.slideDuplicateClass)) {\n        swiper.loopFix(); // eslint-disable-next-line\n\n        swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;\n        currentIndex = swiper.activeIndex;\n      }\n\n      const prevIndex = swiper.slides.eq(currentIndex).prevAll(`[data-swiper-slide-index=\"${slideToIndex}\"]`).eq(0).index();\n      const nextIndex = swiper.slides.eq(currentIndex).nextAll(`[data-swiper-slide-index=\"${slideToIndex}\"]`).eq(0).index();\n      if (typeof prevIndex === 'undefined') slideToIndex = nextIndex;else if (typeof nextIndex === 'undefined') slideToIndex = prevIndex;else if (nextIndex - currentIndex < currentIndex - prevIndex) slideToIndex = nextIndex;else slideToIndex = prevIndex;\n    }\n\n    swiper.slideTo(slideToIndex);\n  }\n\n  function init() {\n    const {\n      thumbs: thumbsParams\n    } = swiper.params;\n    if (initialized) return false;\n    initialized = true;\n    const SwiperClass = swiper.constructor;\n\n    if (thumbsParams.swiper instanceof SwiperClass) {\n      swiper.thumbs.swiper = thumbsParams.swiper;\n      Object.assign(swiper.thumbs.swiper.originalParams, {\n        watchSlidesProgress: true,\n        slideToClickedSlide: false\n      });\n      Object.assign(swiper.thumbs.swiper.params, {\n        watchSlidesProgress: true,\n        slideToClickedSlide: false\n      });\n    } else if (isObject(thumbsParams.swiper)) {\n      const thumbsSwiperParams = Object.assign({}, thumbsParams.swiper);\n      Object.assign(thumbsSwiperParams, {\n        watchSlidesProgress: true,\n        slideToClickedSlide: false\n      });\n      swiper.thumbs.swiper = new SwiperClass(thumbsSwiperParams);\n      swiperCreated = true;\n    }\n\n    swiper.thumbs.swiper.$el.addClass(swiper.params.thumbs.thumbsContainerClass);\n    swiper.thumbs.swiper.on('tap', onThumbClick);\n    return true;\n  }\n\n  function update(initial) {\n    const thumbsSwiper = swiper.thumbs.swiper;\n    if (!thumbsSwiper || thumbsSwiper.destroyed) return;\n    const slidesPerView = thumbsSwiper.params.slidesPerView === 'auto' ? thumbsSwiper.slidesPerViewDynamic() : thumbsSwiper.params.slidesPerView; // Activate thumbs\n\n    let thumbsToActivate = 1;\n    const thumbActiveClass = swiper.params.thumbs.slideThumbActiveClass;\n\n    if (swiper.params.slidesPerView > 1 && !swiper.params.centeredSlides) {\n      thumbsToActivate = swiper.params.slidesPerView;\n    }\n\n    if (!swiper.params.thumbs.multipleActiveThumbs) {\n      thumbsToActivate = 1;\n    }\n\n    thumbsToActivate = Math.floor(thumbsToActivate);\n    thumbsSwiper.slides.removeClass(thumbActiveClass);\n\n    if (thumbsSwiper.params.loop || thumbsSwiper.params.virtual && thumbsSwiper.params.virtual.enabled) {\n      for (let i = 0; i < thumbsToActivate; i += 1) {\n        thumbsSwiper.$wrapperEl.children(`[data-swiper-slide-index=\"${swiper.realIndex + i}\"]`).addClass(thumbActiveClass);\n      }\n    } else {\n      for (let i = 0; i < thumbsToActivate; i += 1) {\n        thumbsSwiper.slides.eq(swiper.realIndex + i).addClass(thumbActiveClass);\n      }\n    }\n\n    const autoScrollOffset = swiper.params.thumbs.autoScrollOffset;\n    const useOffset = autoScrollOffset && !thumbsSwiper.params.loop;\n\n    if (swiper.realIndex !== thumbsSwiper.realIndex || useOffset) {\n      let currentThumbsIndex = thumbsSwiper.activeIndex;\n      let newThumbsIndex;\n      let direction;\n\n      if (thumbsSwiper.params.loop) {\n        if (thumbsSwiper.slides.eq(currentThumbsIndex).hasClass(thumbsSwiper.params.slideDuplicateClass)) {\n          thumbsSwiper.loopFix(); // eslint-disable-next-line\n\n          thumbsSwiper._clientLeft = thumbsSwiper.$wrapperEl[0].clientLeft;\n          currentThumbsIndex = thumbsSwiper.activeIndex;\n        } // Find actual thumbs index to slide to\n\n\n        const prevThumbsIndex = thumbsSwiper.slides.eq(currentThumbsIndex).prevAll(`[data-swiper-slide-index=\"${swiper.realIndex}\"]`).eq(0).index();\n        const nextThumbsIndex = thumbsSwiper.slides.eq(currentThumbsIndex).nextAll(`[data-swiper-slide-index=\"${swiper.realIndex}\"]`).eq(0).index();\n\n        if (typeof prevThumbsIndex === 'undefined') {\n          newThumbsIndex = nextThumbsIndex;\n        } else if (typeof nextThumbsIndex === 'undefined') {\n          newThumbsIndex = prevThumbsIndex;\n        } else if (nextThumbsIndex - currentThumbsIndex === currentThumbsIndex - prevThumbsIndex) {\n          newThumbsIndex = thumbsSwiper.params.slidesPerGroup > 1 ? nextThumbsIndex : currentThumbsIndex;\n        } else if (nextThumbsIndex - currentThumbsIndex < currentThumbsIndex - prevThumbsIndex) {\n          newThumbsIndex = nextThumbsIndex;\n        } else {\n          newThumbsIndex = prevThumbsIndex;\n        }\n\n        direction = swiper.activeIndex > swiper.previousIndex ? 'next' : 'prev';\n      } else {\n        newThumbsIndex = swiper.realIndex;\n        direction = newThumbsIndex > swiper.previousIndex ? 'next' : 'prev';\n      }\n\n      if (useOffset) {\n        newThumbsIndex += direction === 'next' ? autoScrollOffset : -1 * autoScrollOffset;\n      }\n\n      if (thumbsSwiper.visibleSlidesIndexes && thumbsSwiper.visibleSlidesIndexes.indexOf(newThumbsIndex) < 0) {\n        if (thumbsSwiper.params.centeredSlides) {\n          if (newThumbsIndex > currentThumbsIndex) {\n            newThumbsIndex = newThumbsIndex - Math.floor(slidesPerView / 2) + 1;\n          } else {\n            newThumbsIndex = newThumbsIndex + Math.floor(slidesPerView / 2) - 1;\n          }\n        } else if (newThumbsIndex > currentThumbsIndex && thumbsSwiper.params.slidesPerGroup === 1) {// newThumbsIndex = newThumbsIndex - slidesPerView + 1;\n        }\n\n        thumbsSwiper.slideTo(newThumbsIndex, initial ? 0 : undefined);\n      }\n    }\n  }\n\n  on('beforeInit', () => {\n    const {\n      thumbs\n    } = swiper.params;\n    if (!thumbs || !thumbs.swiper) return;\n    init();\n    update(true);\n  });\n  on('slideChange update resize observerUpdate', () => {\n    update();\n  });\n  on('setTransition', (_s, duration) => {\n    const thumbsSwiper = swiper.thumbs.swiper;\n    if (!thumbsSwiper || thumbsSwiper.destroyed) return;\n    thumbsSwiper.setTransition(duration);\n  });\n  on('beforeDestroy', () => {\n    const thumbsSwiper = swiper.thumbs.swiper;\n    if (!thumbsSwiper || thumbsSwiper.destroyed) return;\n\n    if (swiperCreated) {\n      thumbsSwiper.destroy();\n    }\n  });\n  Object.assign(swiper.thumbs, {\n    init,\n    update\n  });\n}","import { now } from '../../shared/utils.js';\nexport default function freeMode(_ref) {\n  let {\n    swiper,\n    extendParams,\n    emit,\n    once\n  } = _ref;\n  extendParams({\n    freeMode: {\n      enabled: false,\n      momentum: true,\n      momentumRatio: 1,\n      momentumBounce: true,\n      momentumBounceRatio: 1,\n      momentumVelocityRatio: 1,\n      sticky: false,\n      minimumVelocity: 0.02\n    }\n  });\n\n  function onTouchStart() {\n    const translate = swiper.getTranslate();\n    swiper.setTranslate(translate);\n    swiper.setTransition(0);\n    swiper.touchEventsData.velocities.length = 0;\n    swiper.freeMode.onTouchEnd({\n      currentPos: swiper.rtl ? swiper.translate : -swiper.translate\n    });\n  }\n\n  function onTouchMove() {\n    const {\n      touchEventsData: data,\n      touches\n    } = swiper; // Velocity\n\n    if (data.velocities.length === 0) {\n      data.velocities.push({\n        position: touches[swiper.isHorizontal() ? 'startX' : 'startY'],\n        time: data.touchStartTime\n      });\n    }\n\n    data.velocities.push({\n      position: touches[swiper.isHorizontal() ? 'currentX' : 'currentY'],\n      time: now()\n    });\n  }\n\n  function onTouchEnd(_ref2) {\n    let {\n      currentPos\n    } = _ref2;\n    const {\n      params,\n      $wrapperEl,\n      rtlTranslate: rtl,\n      snapGrid,\n      touchEventsData: data\n    } = swiper; // Time diff\n\n    const touchEndTime = now();\n    const timeDiff = touchEndTime - data.touchStartTime;\n\n    if (currentPos < -swiper.minTranslate()) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n\n    if (currentPos > -swiper.maxTranslate()) {\n      if (swiper.slides.length < snapGrid.length) {\n        swiper.slideTo(snapGrid.length - 1);\n      } else {\n        swiper.slideTo(swiper.slides.length - 1);\n      }\n\n      return;\n    }\n\n    if (params.freeMode.momentum) {\n      if (data.velocities.length > 1) {\n        const lastMoveEvent = data.velocities.pop();\n        const velocityEvent = data.velocities.pop();\n        const distance = lastMoveEvent.position - velocityEvent.position;\n        const time = lastMoveEvent.time - velocityEvent.time;\n        swiper.velocity = distance / time;\n        swiper.velocity /= 2;\n\n        if (Math.abs(swiper.velocity) < params.freeMode.minimumVelocity) {\n          swiper.velocity = 0;\n        } // this implies that the user stopped moving a finger then released.\n        // There would be no events with distance zero, so the last event is stale.\n\n\n        if (time > 150 || now() - lastMoveEvent.time > 300) {\n          swiper.velocity = 0;\n        }\n      } else {\n        swiper.velocity = 0;\n      }\n\n      swiper.velocity *= params.freeMode.momentumVelocityRatio;\n      data.velocities.length = 0;\n      let momentumDuration = 1000 * params.freeMode.momentumRatio;\n      const momentumDistance = swiper.velocity * momentumDuration;\n      let newPosition = swiper.translate + momentumDistance;\n      if (rtl) newPosition = -newPosition;\n      let doBounce = false;\n      let afterBouncePosition;\n      const bounceAmount = Math.abs(swiper.velocity) * 20 * params.freeMode.momentumBounceRatio;\n      let needsLoopFix;\n\n      if (newPosition < swiper.maxTranslate()) {\n        if (params.freeMode.momentumBounce) {\n          if (newPosition + swiper.maxTranslate() < -bounceAmount) {\n            newPosition = swiper.maxTranslate() - bounceAmount;\n          }\n\n          afterBouncePosition = swiper.maxTranslate();\n          doBounce = true;\n          data.allowMomentumBounce = true;\n        } else {\n          newPosition = swiper.maxTranslate();\n        }\n\n        if (params.loop && params.centeredSlides) needsLoopFix = true;\n      } else if (newPosition > swiper.minTranslate()) {\n        if (params.freeMode.momentumBounce) {\n          if (newPosition - swiper.minTranslate() > bounceAmount) {\n            newPosition = swiper.minTranslate() + bounceAmount;\n          }\n\n          afterBouncePosition = swiper.minTranslate();\n          doBounce = true;\n          data.allowMomentumBounce = true;\n        } else {\n          newPosition = swiper.minTranslate();\n        }\n\n        if (params.loop && params.centeredSlides) needsLoopFix = true;\n      } else if (params.freeMode.sticky) {\n        let nextSlide;\n\n        for (let j = 0; j < snapGrid.length; j += 1) {\n          if (snapGrid[j] > -newPosition) {\n            nextSlide = j;\n            break;\n          }\n        }\n\n        if (Math.abs(snapGrid[nextSlide] - newPosition) < Math.abs(snapGrid[nextSlide - 1] - newPosition) || swiper.swipeDirection === 'next') {\n          newPosition = snapGrid[nextSlide];\n        } else {\n          newPosition = snapGrid[nextSlide - 1];\n        }\n\n        newPosition = -newPosition;\n      }\n\n      if (needsLoopFix) {\n        once('transitionEnd', () => {\n          swiper.loopFix();\n        });\n      } // Fix duration\n\n\n      if (swiper.velocity !== 0) {\n        if (rtl) {\n          momentumDuration = Math.abs((-newPosition - swiper.translate) / swiper.velocity);\n        } else {\n          momentumDuration = Math.abs((newPosition - swiper.translate) / swiper.velocity);\n        }\n\n        if (params.freeMode.sticky) {\n          // If freeMode.sticky is active and the user ends a swipe with a slow-velocity\n          // event, then durations can be 20+ seconds to slide one (or zero!) slides.\n          // It's easy to see this when simulating touch with mouse events. To fix this,\n          // limit single-slide swipes to the default slide duration. This also has the\n          // nice side effect of matching slide speed if the user stopped moving before\n          // lifting finger or mouse vs. moving slowly before lifting the finger/mouse.\n          // For faster swipes, also apply limits (albeit higher ones).\n          const moveDistance = Math.abs((rtl ? -newPosition : newPosition) - swiper.translate);\n          const currentSlideSize = swiper.slidesSizesGrid[swiper.activeIndex];\n\n          if (moveDistance < currentSlideSize) {\n            momentumDuration = params.speed;\n          } else if (moveDistance < 2 * currentSlideSize) {\n            momentumDuration = params.speed * 1.5;\n          } else {\n            momentumDuration = params.speed * 2.5;\n          }\n        }\n      } else if (params.freeMode.sticky) {\n        swiper.slideToClosest();\n        return;\n      }\n\n      if (params.freeMode.momentumBounce && doBounce) {\n        swiper.updateProgress(afterBouncePosition);\n        swiper.setTransition(momentumDuration);\n        swiper.setTranslate(newPosition);\n        swiper.transitionStart(true, swiper.swipeDirection);\n        swiper.animating = true;\n        $wrapperEl.transitionEnd(() => {\n          if (!swiper || swiper.destroyed || !data.allowMomentumBounce) return;\n          emit('momentumBounce');\n          swiper.setTransition(params.speed);\n          setTimeout(() => {\n            swiper.setTranslate(afterBouncePosition);\n            $wrapperEl.transitionEnd(() => {\n              if (!swiper || swiper.destroyed) return;\n              swiper.transitionEnd();\n            });\n          }, 0);\n        });\n      } else if (swiper.velocity) {\n        emit('_freeModeNoMomentumRelease');\n        swiper.updateProgress(newPosition);\n        swiper.setTransition(momentumDuration);\n        swiper.setTranslate(newPosition);\n        swiper.transitionStart(true, swiper.swipeDirection);\n\n        if (!swiper.animating) {\n          swiper.animating = true;\n          $wrapperEl.transitionEnd(() => {\n            if (!swiper || swiper.destroyed) return;\n            swiper.transitionEnd();\n          });\n        }\n      } else {\n        swiper.updateProgress(newPosition);\n      }\n\n      swiper.updateActiveIndex();\n      swiper.updateSlidesClasses();\n    } else if (params.freeMode.sticky) {\n      swiper.slideToClosest();\n      return;\n    } else if (params.freeMode) {\n      emit('_freeModeNoMomentumRelease');\n    }\n\n    if (!params.freeMode.momentum || timeDiff >= params.longSwipesMs) {\n      swiper.updateProgress();\n      swiper.updateActiveIndex();\n      swiper.updateSlidesClasses();\n    }\n  }\n\n  Object.assign(swiper, {\n    freeMode: {\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd\n    }\n  });\n}","export default function Grid(_ref) {\n  let {\n    swiper,\n    extendParams\n  } = _ref;\n  extendParams({\n    grid: {\n      rows: 1,\n      fill: 'column'\n    }\n  });\n  let slidesNumberEvenToRows;\n  let slidesPerRow;\n  let numFullColumns;\n\n  const initSlides = slidesLength => {\n    const {\n      slidesPerView\n    } = swiper.params;\n    const {\n      rows,\n      fill\n    } = swiper.params.grid;\n    slidesPerRow = slidesNumberEvenToRows / rows;\n    numFullColumns = Math.floor(slidesLength / rows);\n\n    if (Math.floor(slidesLength / rows) === slidesLength / rows) {\n      slidesNumberEvenToRows = slidesLength;\n    } else {\n      slidesNumberEvenToRows = Math.ceil(slidesLength / rows) * rows;\n    }\n\n    if (slidesPerView !== 'auto' && fill === 'row') {\n      slidesNumberEvenToRows = Math.max(slidesNumberEvenToRows, slidesPerView * rows);\n    }\n  };\n\n  const updateSlide = (i, slide, slidesLength, getDirectionLabel) => {\n    const {\n      slidesPerGroup,\n      spaceBetween\n    } = swiper.params;\n    const {\n      rows,\n      fill\n    } = swiper.params.grid; // Set slides order\n\n    let newSlideOrderIndex;\n    let column;\n    let row;\n\n    if (fill === 'row' && slidesPerGroup > 1) {\n      const groupIndex = Math.floor(i / (slidesPerGroup * rows));\n      const slideIndexInGroup = i - rows * slidesPerGroup * groupIndex;\n      const columnsInGroup = groupIndex === 0 ? slidesPerGroup : Math.min(Math.ceil((slidesLength - groupIndex * rows * slidesPerGroup) / rows), slidesPerGroup);\n      row = Math.floor(slideIndexInGroup / columnsInGroup);\n      column = slideIndexInGroup - row * columnsInGroup + groupIndex * slidesPerGroup;\n      newSlideOrderIndex = column + row * slidesNumberEvenToRows / rows;\n      slide.css({\n        '-webkit-order': newSlideOrderIndex,\n        order: newSlideOrderIndex\n      });\n    } else if (fill === 'column') {\n      column = Math.floor(i / rows);\n      row = i - column * rows;\n\n      if (column > numFullColumns || column === numFullColumns && row === rows - 1) {\n        row += 1;\n\n        if (row >= rows) {\n          row = 0;\n          column += 1;\n        }\n      }\n    } else {\n      row = Math.floor(i / slidesPerRow);\n      column = i - row * slidesPerRow;\n    }\n\n    slide.css(getDirectionLabel('margin-top'), row !== 0 ? spaceBetween && `${spaceBetween}px` : '');\n  };\n\n  const updateWrapperSize = (slideSize, snapGrid, getDirectionLabel) => {\n    const {\n      spaceBetween,\n      centeredSlides,\n      roundLengths\n    } = swiper.params;\n    const {\n      rows\n    } = swiper.params.grid;\n    swiper.virtualSize = (slideSize + spaceBetween) * slidesNumberEvenToRows;\n    swiper.virtualSize = Math.ceil(swiper.virtualSize / rows) - spaceBetween;\n    swiper.$wrapperEl.css({\n      [getDirectionLabel('width')]: `${swiper.virtualSize + spaceBetween}px`\n    });\n\n    if (centeredSlides) {\n      snapGrid.splice(0, snapGrid.length);\n      const newSlidesGrid = [];\n\n      for (let i = 0; i < snapGrid.length; i += 1) {\n        let slidesGridItem = snapGrid[i];\n        if (roundLengths) slidesGridItem = Math.floor(slidesGridItem);\n        if (snapGrid[i] < swiper.virtualSize + snapGrid[0]) newSlidesGrid.push(slidesGridItem);\n      }\n\n      snapGrid.push(...newSlidesGrid);\n    }\n  };\n\n  swiper.grid = {\n    initSlides,\n    updateSlide,\n    updateWrapperSize\n  };\n}","export default function appendSlide(slides) {\n  const swiper = this;\n  const {\n    $wrapperEl,\n    params\n  } = swiper;\n\n  if (params.loop) {\n    swiper.loopDestroy();\n  }\n\n  if (typeof slides === 'object' && 'length' in slides) {\n    for (let i = 0; i < slides.length; i += 1) {\n      if (slides[i]) $wrapperEl.append(slides[i]);\n    }\n  } else {\n    $wrapperEl.append(slides);\n  }\n\n  if (params.loop) {\n    swiper.loopCreate();\n  }\n\n  if (!params.observer) {\n    swiper.update();\n  }\n}","export default function prependSlide(slides) {\n  const swiper = this;\n  const {\n    params,\n    $wrapperEl,\n    activeIndex\n  } = swiper;\n\n  if (params.loop) {\n    swiper.loopDestroy();\n  }\n\n  let newActiveIndex = activeIndex + 1;\n\n  if (typeof slides === 'object' && 'length' in slides) {\n    for (let i = 0; i < slides.length; i += 1) {\n      if (slides[i]) $wrapperEl.prepend(slides[i]);\n    }\n\n    newActiveIndex = activeIndex + slides.length;\n  } else {\n    $wrapperEl.prepend(slides);\n  }\n\n  if (params.loop) {\n    swiper.loopCreate();\n  }\n\n  if (!params.observer) {\n    swiper.update();\n  }\n\n  swiper.slideTo(newActiveIndex, 0, false);\n}","export default function addSlide(index, slides) {\n  const swiper = this;\n  const {\n    $wrapperEl,\n    params,\n    activeIndex\n  } = swiper;\n  let activeIndexBuffer = activeIndex;\n\n  if (params.loop) {\n    activeIndexBuffer -= swiper.loopedSlides;\n    swiper.loopDestroy();\n    swiper.slides = $wrapperEl.children(`.${params.slideClass}`);\n  }\n\n  const baseLength = swiper.slides.length;\n\n  if (index <= 0) {\n    swiper.prependSlide(slides);\n    return;\n  }\n\n  if (index >= baseLength) {\n    swiper.appendSlide(slides);\n    return;\n  }\n\n  let newActiveIndex = activeIndexBuffer > index ? activeIndexBuffer + 1 : activeIndexBuffer;\n  const slidesBuffer = [];\n\n  for (let i = baseLength - 1; i >= index; i -= 1) {\n    const currentSlide = swiper.slides.eq(i);\n    currentSlide.remove();\n    slidesBuffer.unshift(currentSlide);\n  }\n\n  if (typeof slides === 'object' && 'length' in slides) {\n    for (let i = 0; i < slides.length; i += 1) {\n      if (slides[i]) $wrapperEl.append(slides[i]);\n    }\n\n    newActiveIndex = activeIndexBuffer > index ? activeIndexBuffer + slides.length : activeIndexBuffer;\n  } else {\n    $wrapperEl.append(slides);\n  }\n\n  for (let i = 0; i < slidesBuffer.length; i += 1) {\n    $wrapperEl.append(slidesBuffer[i]);\n  }\n\n  if (params.loop) {\n    swiper.loopCreate();\n  }\n\n  if (!params.observer) {\n    swiper.update();\n  }\n\n  if (params.loop) {\n    swiper.slideTo(newActiveIndex + swiper.loopedSlides, 0, false);\n  } else {\n    swiper.slideTo(newActiveIndex, 0, false);\n  }\n}","export default function removeSlide(slidesIndexes) {\n  const swiper = this;\n  const {\n    params,\n    $wrapperEl,\n    activeIndex\n  } = swiper;\n  let activeIndexBuffer = activeIndex;\n\n  if (params.loop) {\n    activeIndexBuffer -= swiper.loopedSlides;\n    swiper.loopDestroy();\n    swiper.slides = $wrapperEl.children(`.${params.slideClass}`);\n  }\n\n  let newActiveIndex = activeIndexBuffer;\n  let indexToRemove;\n\n  if (typeof slidesIndexes === 'object' && 'length' in slidesIndexes) {\n    for (let i = 0; i < slidesIndexes.length; i += 1) {\n      indexToRemove = slidesIndexes[i];\n      if (swiper.slides[indexToRemove]) swiper.slides.eq(indexToRemove).remove();\n      if (indexToRemove < newActiveIndex) newActiveIndex -= 1;\n    }\n\n    newActiveIndex = Math.max(newActiveIndex, 0);\n  } else {\n    indexToRemove = slidesIndexes;\n    if (swiper.slides[indexToRemove]) swiper.slides.eq(indexToRemove).remove();\n    if (indexToRemove < newActiveIndex) newActiveIndex -= 1;\n    newActiveIndex = Math.max(newActiveIndex, 0);\n  }\n\n  if (params.loop) {\n    swiper.loopCreate();\n  }\n\n  if (!params.observer) {\n    swiper.update();\n  }\n\n  if (params.loop) {\n    swiper.slideTo(newActiveIndex + swiper.loopedSlides, 0, false);\n  } else {\n    swiper.slideTo(newActiveIndex, 0, false);\n  }\n}","export default function removeAllSlides() {\n  const swiper = this;\n  const slidesIndexes = [];\n\n  for (let i = 0; i < swiper.slides.length; i += 1) {\n    slidesIndexes.push(i);\n  }\n\n  swiper.removeSlide(slidesIndexes);\n}","import appendSlide from './methods/appendSlide.js';\nimport prependSlide from './methods/prependSlide.js';\nimport addSlide from './methods/addSlide.js';\nimport removeSlide from './methods/removeSlide.js';\nimport removeAllSlides from './methods/removeAllSlides.js';\nexport default function Manipulation(_ref) {\n  let {\n    swiper\n  } = _ref;\n  Object.assign(swiper, {\n    appendSlide: appendSlide.bind(swiper),\n    prependSlide: prependSlide.bind(swiper),\n    addSlide: addSlide.bind(swiper),\n    removeSlide: removeSlide.bind(swiper),\n    removeAllSlides: removeAllSlides.bind(swiper)\n  });\n}","export default function effectInit(params) {\n  const {\n    effect,\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    overwriteParams,\n    perspective,\n    recreateShadows,\n    getEffectParams\n  } = params;\n  on('beforeInit', () => {\n    if (swiper.params.effect !== effect) return;\n    swiper.classNames.push(`${swiper.params.containerModifierClass}${effect}`);\n\n    if (perspective && perspective()) {\n      swiper.classNames.push(`${swiper.params.containerModifierClass}3d`);\n    }\n\n    const overwriteParamsResult = overwriteParams ? overwriteParams() : {};\n    Object.assign(swiper.params, overwriteParamsResult);\n    Object.assign(swiper.originalParams, overwriteParamsResult);\n  });\n  on('setTranslate', () => {\n    if (swiper.params.effect !== effect) return;\n    setTranslate();\n  });\n  on('setTransition', (_s, duration) => {\n    if (swiper.params.effect !== effect) return;\n    setTransition(duration);\n  });\n  on('transitionEnd', () => {\n    if (swiper.params.effect !== effect) return;\n\n    if (recreateShadows) {\n      if (!getEffectParams || !getEffectParams().slideShadows) return; // remove shadows\n\n      swiper.slides.each(slideEl => {\n        const $slideEl = swiper.$(slideEl);\n        $slideEl.find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').remove();\n      }); // create new one\n\n      recreateShadows();\n    }\n  });\n  let requireUpdateOnVirtual;\n  on('virtualUpdate', () => {\n    if (swiper.params.effect !== effect) return;\n\n    if (!swiper.slides.length) {\n      requireUpdateOnVirtual = true;\n    }\n\n    requestAnimationFrame(() => {\n      if (requireUpdateOnVirtual && swiper.slides && swiper.slides.length) {\n        setTranslate();\n        requireUpdateOnVirtual = false;\n      }\n    });\n  });\n}","export default function effectTarget(effectParams, $slideEl) {\n  if (effectParams.transformEl) {\n    return $slideEl.find(effectParams.transformEl).css({\n      'backface-visibility': 'hidden',\n      '-webkit-backface-visibility': 'hidden'\n    });\n  }\n\n  return $slideEl;\n}","export default function effectVirtualTransitionEnd(_ref) {\n  let {\n    swiper,\n    duration,\n    transformEl,\n    allSlides\n  } = _ref;\n  const {\n    slides,\n    activeIndex,\n    $wrapperEl\n  } = swiper;\n\n  if (swiper.params.virtualTranslate && duration !== 0) {\n    let eventTriggered = false;\n    let $transitionEndTarget;\n\n    if (allSlides) {\n      $transitionEndTarget = transformEl ? slides.find(transformEl) : slides;\n    } else {\n      $transitionEndTarget = transformEl ? slides.eq(activeIndex).find(transformEl) : slides.eq(activeIndex);\n    }\n\n    $transitionEndTarget.transitionEnd(() => {\n      if (eventTriggered) return;\n      if (!swiper || swiper.destroyed) return;\n      eventTriggered = true;\n      swiper.animating = false;\n      const triggerEvents = ['webkitTransitionEnd', 'transitionend'];\n\n      for (let i = 0; i < triggerEvents.length; i += 1) {\n        $wrapperEl.trigger(triggerEvents[i]);\n      }\n    });\n  }\n}","import effectInit from '../../shared/effect-init.js';\nimport effectTarget from '../../shared/effect-target.js';\nimport effectVirtualTransitionEnd from '../../shared/effect-virtual-transition-end.js';\nexport default function EffectFade(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    fadeEffect: {\n      crossFade: false,\n      transformEl: null\n    }\n  });\n\n  const setTranslate = () => {\n    const {\n      slides\n    } = swiper;\n    const params = swiper.params.fadeEffect;\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const $slideEl = swiper.slides.eq(i);\n      const offset = $slideEl[0].swiperSlideOffset;\n      let tx = -offset;\n      if (!swiper.params.virtualTranslate) tx -= swiper.translate;\n      let ty = 0;\n\n      if (!swiper.isHorizontal()) {\n        ty = tx;\n        tx = 0;\n      }\n\n      const slideOpacity = swiper.params.fadeEffect.crossFade ? Math.max(1 - Math.abs($slideEl[0].progress), 0) : 1 + Math.min(Math.max($slideEl[0].progress, -1), 0);\n      const $targetEl = effectTarget(params, $slideEl);\n      $targetEl.css({\n        opacity: slideOpacity\n      }).transform(`translate3d(${tx}px, ${ty}px, 0px)`);\n    }\n  };\n\n  const setTransition = duration => {\n    const {\n      transformEl\n    } = swiper.params.fadeEffect;\n    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;\n    $transitionElements.transition(duration);\n    effectVirtualTransitionEnd({\n      swiper,\n      duration,\n      transformEl,\n      allSlides: true\n    });\n  };\n\n  effectInit({\n    effect: 'fade',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    overwriteParams: () => ({\n      slidesPerView: 1,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n      spaceBetween: 0,\n      virtualTranslate: !swiper.params.cssMode\n    })\n  });\n}","import $ from '../../shared/dom.js';\nimport effectInit from '../../shared/effect-init.js';\nexport default function EffectCube(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    cubeEffect: {\n      slideShadows: true,\n      shadow: true,\n      shadowOffset: 20,\n      shadowScale: 0.94\n    }\n  });\n\n  const createSlideShadows = ($slideEl, progress, isHorizontal) => {\n    let shadowBefore = isHorizontal ? $slideEl.find('.swiper-slide-shadow-left') : $slideEl.find('.swiper-slide-shadow-top');\n    let shadowAfter = isHorizontal ? $slideEl.find('.swiper-slide-shadow-right') : $slideEl.find('.swiper-slide-shadow-bottom');\n\n    if (shadowBefore.length === 0) {\n      shadowBefore = $(`<div class=\"swiper-slide-shadow-${isHorizontal ? 'left' : 'top'}\"></div>`);\n      $slideEl.append(shadowBefore);\n    }\n\n    if (shadowAfter.length === 0) {\n      shadowAfter = $(`<div class=\"swiper-slide-shadow-${isHorizontal ? 'right' : 'bottom'}\"></div>`);\n      $slideEl.append(shadowAfter);\n    }\n\n    if (shadowBefore.length) shadowBefore[0].style.opacity = Math.max(-progress, 0);\n    if (shadowAfter.length) shadowAfter[0].style.opacity = Math.max(progress, 0);\n  };\n\n  const recreateShadows = () => {\n    // create new ones\n    const isHorizontal = swiper.isHorizontal();\n    swiper.slides.each(slideEl => {\n      const progress = Math.max(Math.min(slideEl.progress, 1), -1);\n      createSlideShadows($(slideEl), progress, isHorizontal);\n    });\n  };\n\n  const setTranslate = () => {\n    const {\n      $el,\n      $wrapperEl,\n      slides,\n      width: swiperWidth,\n      height: swiperHeight,\n      rtlTranslate: rtl,\n      size: swiperSize,\n      browser\n    } = swiper;\n    const params = swiper.params.cubeEffect;\n    const isHorizontal = swiper.isHorizontal();\n    const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n    let wrapperRotate = 0;\n    let $cubeShadowEl;\n\n    if (params.shadow) {\n      if (isHorizontal) {\n        $cubeShadowEl = $wrapperEl.find('.swiper-cube-shadow');\n\n        if ($cubeShadowEl.length === 0) {\n          $cubeShadowEl = $('<div class=\"swiper-cube-shadow\"></div>');\n          $wrapperEl.append($cubeShadowEl);\n        }\n\n        $cubeShadowEl.css({\n          height: `${swiperWidth}px`\n        });\n      } else {\n        $cubeShadowEl = $el.find('.swiper-cube-shadow');\n\n        if ($cubeShadowEl.length === 0) {\n          $cubeShadowEl = $('<div class=\"swiper-cube-shadow\"></div>');\n          $el.append($cubeShadowEl);\n        }\n      }\n    }\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const $slideEl = slides.eq(i);\n      let slideIndex = i;\n\n      if (isVirtual) {\n        slideIndex = parseInt($slideEl.attr('data-swiper-slide-index'), 10);\n      }\n\n      let slideAngle = slideIndex * 90;\n      let round = Math.floor(slideAngle / 360);\n\n      if (rtl) {\n        slideAngle = -slideAngle;\n        round = Math.floor(-slideAngle / 360);\n      }\n\n      const progress = Math.max(Math.min($slideEl[0].progress, 1), -1);\n      let tx = 0;\n      let ty = 0;\n      let tz = 0;\n\n      if (slideIndex % 4 === 0) {\n        tx = -round * 4 * swiperSize;\n        tz = 0;\n      } else if ((slideIndex - 1) % 4 === 0) {\n        tx = 0;\n        tz = -round * 4 * swiperSize;\n      } else if ((slideIndex - 2) % 4 === 0) {\n        tx = swiperSize + round * 4 * swiperSize;\n        tz = swiperSize;\n      } else if ((slideIndex - 3) % 4 === 0) {\n        tx = -swiperSize;\n        tz = 3 * swiperSize + swiperSize * 4 * round;\n      }\n\n      if (rtl) {\n        tx = -tx;\n      }\n\n      if (!isHorizontal) {\n        ty = tx;\n        tx = 0;\n      }\n\n      const transform = `rotateX(${isHorizontal ? 0 : -slideAngle}deg) rotateY(${isHorizontal ? slideAngle : 0}deg) translate3d(${tx}px, ${ty}px, ${tz}px)`;\n\n      if (progress <= 1 && progress > -1) {\n        wrapperRotate = slideIndex * 90 + progress * 90;\n        if (rtl) wrapperRotate = -slideIndex * 90 - progress * 90;\n      }\n\n      $slideEl.transform(transform);\n\n      if (params.slideShadows) {\n        createSlideShadows($slideEl, progress, isHorizontal);\n      }\n    }\n\n    $wrapperEl.css({\n      '-webkit-transform-origin': `50% 50% -${swiperSize / 2}px`,\n      'transform-origin': `50% 50% -${swiperSize / 2}px`\n    });\n\n    if (params.shadow) {\n      if (isHorizontal) {\n        $cubeShadowEl.transform(`translate3d(0px, ${swiperWidth / 2 + params.shadowOffset}px, ${-swiperWidth / 2}px) rotateX(90deg) rotateZ(0deg) scale(${params.shadowScale})`);\n      } else {\n        const shadowAngle = Math.abs(wrapperRotate) - Math.floor(Math.abs(wrapperRotate) / 90) * 90;\n        const multiplier = 1.5 - (Math.sin(shadowAngle * 2 * Math.PI / 360) / 2 + Math.cos(shadowAngle * 2 * Math.PI / 360) / 2);\n        const scale1 = params.shadowScale;\n        const scale2 = params.shadowScale / multiplier;\n        const offset = params.shadowOffset;\n        $cubeShadowEl.transform(`scale3d(${scale1}, 1, ${scale2}) translate3d(0px, ${swiperHeight / 2 + offset}px, ${-swiperHeight / 2 / scale2}px) rotateX(-90deg)`);\n      }\n    }\n\n    const zFactor = browser.isSafari || browser.isWebView ? -swiperSize / 2 : 0;\n    $wrapperEl.transform(`translate3d(0px,0,${zFactor}px) rotateX(${swiper.isHorizontal() ? 0 : wrapperRotate}deg) rotateY(${swiper.isHorizontal() ? -wrapperRotate : 0}deg)`);\n    $wrapperEl[0].style.setProperty('--swiper-cube-translate-z', `${zFactor}px`);\n  };\n\n  const setTransition = duration => {\n    const {\n      $el,\n      slides\n    } = swiper;\n    slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);\n\n    if (swiper.params.cubeEffect.shadow && !swiper.isHorizontal()) {\n      $el.find('.swiper-cube-shadow').transition(duration);\n    }\n  };\n\n  effectInit({\n    effect: 'cube',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    recreateShadows,\n    getEffectParams: () => swiper.params.cubeEffect,\n    perspective: () => true,\n    overwriteParams: () => ({\n      slidesPerView: 1,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n      resistanceRatio: 0,\n      spaceBetween: 0,\n      centeredSlides: false,\n      virtualTranslate: true\n    })\n  });\n}","import $ from './dom.js';\nexport default function createShadow(params, $slideEl, side) {\n  const shadowClass = `swiper-slide-shadow${side ? `-${side}` : ''}`;\n  const $shadowContainer = params.transformEl ? $slideEl.find(params.transformEl) : $slideEl;\n  let $shadowEl = $shadowContainer.children(`.${shadowClass}`);\n\n  if (!$shadowEl.length) {\n    $shadowEl = $(`<div class=\"swiper-slide-shadow${side ? `-${side}` : ''}\"></div>`);\n    $shadowContainer.append($shadowEl);\n  }\n\n  return $shadowEl;\n}","import $ from '../../shared/dom.js';\nimport createShadow from '../../shared/create-shadow.js';\nimport effectInit from '../../shared/effect-init.js';\nimport effectTarget from '../../shared/effect-target.js';\nimport effectVirtualTransitionEnd from '../../shared/effect-virtual-transition-end.js';\nexport default function EffectFlip(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    flipEffect: {\n      slideShadows: true,\n      limitRotation: true,\n      transformEl: null\n    }\n  });\n\n  const createSlideShadows = ($slideEl, progress, params) => {\n    let shadowBefore = swiper.isHorizontal() ? $slideEl.find('.swiper-slide-shadow-left') : $slideEl.find('.swiper-slide-shadow-top');\n    let shadowAfter = swiper.isHorizontal() ? $slideEl.find('.swiper-slide-shadow-right') : $slideEl.find('.swiper-slide-shadow-bottom');\n\n    if (shadowBefore.length === 0) {\n      shadowBefore = createShadow(params, $slideEl, swiper.isHorizontal() ? 'left' : 'top');\n    }\n\n    if (shadowAfter.length === 0) {\n      shadowAfter = createShadow(params, $slideEl, swiper.isHorizontal() ? 'right' : 'bottom');\n    }\n\n    if (shadowBefore.length) shadowBefore[0].style.opacity = Math.max(-progress, 0);\n    if (shadowAfter.length) shadowAfter[0].style.opacity = Math.max(progress, 0);\n  };\n\n  const recreateShadows = () => {\n    // Set shadows\n    const params = swiper.params.flipEffect;\n    swiper.slides.each(slideEl => {\n      const $slideEl = $(slideEl);\n      let progress = $slideEl[0].progress;\n\n      if (swiper.params.flipEffect.limitRotation) {\n        progress = Math.max(Math.min(slideEl.progress, 1), -1);\n      }\n\n      createSlideShadows($slideEl, progress, params);\n    });\n  };\n\n  const setTranslate = () => {\n    const {\n      slides,\n      rtlTranslate: rtl\n    } = swiper;\n    const params = swiper.params.flipEffect;\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const $slideEl = slides.eq(i);\n      let progress = $slideEl[0].progress;\n\n      if (swiper.params.flipEffect.limitRotation) {\n        progress = Math.max(Math.min($slideEl[0].progress, 1), -1);\n      }\n\n      const offset = $slideEl[0].swiperSlideOffset;\n      const rotate = -180 * progress;\n      let rotateY = rotate;\n      let rotateX = 0;\n      let tx = swiper.params.cssMode ? -offset - swiper.translate : -offset;\n      let ty = 0;\n\n      if (!swiper.isHorizontal()) {\n        ty = tx;\n        tx = 0;\n        rotateX = -rotateY;\n        rotateY = 0;\n      } else if (rtl) {\n        rotateY = -rotateY;\n      }\n\n      $slideEl[0].style.zIndex = -Math.abs(Math.round(progress)) + slides.length;\n\n      if (params.slideShadows) {\n        createSlideShadows($slideEl, progress, params);\n      }\n\n      const transform = `translate3d(${tx}px, ${ty}px, 0px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;\n      const $targetEl = effectTarget(params, $slideEl);\n      $targetEl.transform(transform);\n    }\n  };\n\n  const setTransition = duration => {\n    const {\n      transformEl\n    } = swiper.params.flipEffect;\n    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;\n    $transitionElements.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);\n    effectVirtualTransitionEnd({\n      swiper,\n      duration,\n      transformEl\n    });\n  };\n\n  effectInit({\n    effect: 'flip',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    recreateShadows,\n    getEffectParams: () => swiper.params.flipEffect,\n    perspective: () => true,\n    overwriteParams: () => ({\n      slidesPerView: 1,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n      spaceBetween: 0,\n      virtualTranslate: !swiper.params.cssMode\n    })\n  });\n}","import createShadow from '../../shared/create-shadow.js';\nimport effectInit from '../../shared/effect-init.js';\nimport effectTarget from '../../shared/effect-target.js';\nexport default function EffectCoverflow(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    coverflowEffect: {\n      rotate: 50,\n      stretch: 0,\n      depth: 100,\n      scale: 1,\n      modifier: 1,\n      slideShadows: true,\n      transformEl: null\n    }\n  });\n\n  const setTranslate = () => {\n    const {\n      width: swiperWidth,\n      height: swiperHeight,\n      slides,\n      slidesSizesGrid\n    } = swiper;\n    const params = swiper.params.coverflowEffect;\n    const isHorizontal = swiper.isHorizontal();\n    const transform = swiper.translate;\n    const center = isHorizontal ? -transform + swiperWidth / 2 : -transform + swiperHeight / 2;\n    const rotate = isHorizontal ? params.rotate : -params.rotate;\n    const translate = params.depth; // Each slide offset from center\n\n    for (let i = 0, length = slides.length; i < length; i += 1) {\n      const $slideEl = slides.eq(i);\n      const slideSize = slidesSizesGrid[i];\n      const slideOffset = $slideEl[0].swiperSlideOffset;\n      const centerOffset = (center - slideOffset - slideSize / 2) / slideSize;\n      const offsetMultiplier = typeof params.modifier === 'function' ? params.modifier(centerOffset) : centerOffset * params.modifier;\n      let rotateY = isHorizontal ? rotate * offsetMultiplier : 0;\n      let rotateX = isHorizontal ? 0 : rotate * offsetMultiplier; // var rotateZ = 0\n\n      let translateZ = -translate * Math.abs(offsetMultiplier);\n      let stretch = params.stretch; // Allow percentage to make a relative stretch for responsive sliders\n\n      if (typeof stretch === 'string' && stretch.indexOf('%') !== -1) {\n        stretch = parseFloat(params.stretch) / 100 * slideSize;\n      }\n\n      let translateY = isHorizontal ? 0 : stretch * offsetMultiplier;\n      let translateX = isHorizontal ? stretch * offsetMultiplier : 0;\n      let scale = 1 - (1 - params.scale) * Math.abs(offsetMultiplier); // Fix for ultra small values\n\n      if (Math.abs(translateX) < 0.001) translateX = 0;\n      if (Math.abs(translateY) < 0.001) translateY = 0;\n      if (Math.abs(translateZ) < 0.001) translateZ = 0;\n      if (Math.abs(rotateY) < 0.001) rotateY = 0;\n      if (Math.abs(rotateX) < 0.001) rotateX = 0;\n      if (Math.abs(scale) < 0.001) scale = 0;\n      const slideTransform = `translate3d(${translateX}px,${translateY}px,${translateZ}px)  rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(${scale})`;\n      const $targetEl = effectTarget(params, $slideEl);\n      $targetEl.transform(slideTransform);\n      $slideEl[0].style.zIndex = -Math.abs(Math.round(offsetMultiplier)) + 1;\n\n      if (params.slideShadows) {\n        // Set shadows\n        let $shadowBeforeEl = isHorizontal ? $slideEl.find('.swiper-slide-shadow-left') : $slideEl.find('.swiper-slide-shadow-top');\n        let $shadowAfterEl = isHorizontal ? $slideEl.find('.swiper-slide-shadow-right') : $slideEl.find('.swiper-slide-shadow-bottom');\n\n        if ($shadowBeforeEl.length === 0) {\n          $shadowBeforeEl = createShadow(params, $slideEl, isHorizontal ? 'left' : 'top');\n        }\n\n        if ($shadowAfterEl.length === 0) {\n          $shadowAfterEl = createShadow(params, $slideEl, isHorizontal ? 'right' : 'bottom');\n        }\n\n        if ($shadowBeforeEl.length) $shadowBeforeEl[0].style.opacity = offsetMultiplier > 0 ? offsetMultiplier : 0;\n        if ($shadowAfterEl.length) $shadowAfterEl[0].style.opacity = -offsetMultiplier > 0 ? -offsetMultiplier : 0;\n      }\n    }\n  };\n\n  const setTransition = duration => {\n    const {\n      transformEl\n    } = swiper.params.coverflowEffect;\n    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;\n    $transitionElements.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);\n  };\n\n  effectInit({\n    effect: 'coverflow',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    perspective: () => true,\n    overwriteParams: () => ({\n      watchSlidesProgress: true\n    })\n  });\n}","import createShadow from '../../shared/create-shadow.js';\nimport effectInit from '../../shared/effect-init.js';\nimport effectTarget from '../../shared/effect-target.js';\nimport effectVirtualTransitionEnd from '../../shared/effect-virtual-transition-end.js';\nexport default function EffectCreative(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    creativeEffect: {\n      transformEl: null,\n      limitProgress: 1,\n      shadowPerProgress: false,\n      progressMultiplier: 1,\n      perspective: true,\n      prev: {\n        translate: [0, 0, 0],\n        rotate: [0, 0, 0],\n        opacity: 1,\n        scale: 1\n      },\n      next: {\n        translate: [0, 0, 0],\n        rotate: [0, 0, 0],\n        opacity: 1,\n        scale: 1\n      }\n    }\n  });\n\n  const getTranslateValue = value => {\n    if (typeof value === 'string') return value;\n    return `${value}px`;\n  };\n\n  const setTranslate = () => {\n    const {\n      slides,\n      $wrapperEl,\n      slidesSizesGrid\n    } = swiper;\n    const params = swiper.params.creativeEffect;\n    const {\n      progressMultiplier: multiplier\n    } = params;\n    const isCenteredSlides = swiper.params.centeredSlides;\n\n    if (isCenteredSlides) {\n      const margin = slidesSizesGrid[0] / 2 - swiper.params.slidesOffsetBefore || 0;\n      $wrapperEl.transform(`translateX(calc(50% - ${margin}px))`);\n    }\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const $slideEl = slides.eq(i);\n      const slideProgress = $slideEl[0].progress;\n      const progress = Math.min(Math.max($slideEl[0].progress, -params.limitProgress), params.limitProgress);\n      let originalProgress = progress;\n\n      if (!isCenteredSlides) {\n        originalProgress = Math.min(Math.max($slideEl[0].originalProgress, -params.limitProgress), params.limitProgress);\n      }\n\n      const offset = $slideEl[0].swiperSlideOffset;\n      const t = [swiper.params.cssMode ? -offset - swiper.translate : -offset, 0, 0];\n      const r = [0, 0, 0];\n      let custom = false;\n\n      if (!swiper.isHorizontal()) {\n        t[1] = t[0];\n        t[0] = 0;\n      }\n\n      let data = {\n        translate: [0, 0, 0],\n        rotate: [0, 0, 0],\n        scale: 1,\n        opacity: 1\n      };\n\n      if (progress < 0) {\n        data = params.next;\n        custom = true;\n      } else if (progress > 0) {\n        data = params.prev;\n        custom = true;\n      } // set translate\n\n\n      t.forEach((value, index) => {\n        t[index] = `calc(${value}px + (${getTranslateValue(data.translate[index])} * ${Math.abs(progress * multiplier)}))`;\n      }); // set rotates\n\n      r.forEach((value, index) => {\n        r[index] = data.rotate[index] * Math.abs(progress * multiplier);\n      });\n      $slideEl[0].style.zIndex = -Math.abs(Math.round(slideProgress)) + slides.length;\n      const translateString = t.join(', ');\n      const rotateString = `rotateX(${r[0]}deg) rotateY(${r[1]}deg) rotateZ(${r[2]}deg)`;\n      const scaleString = originalProgress < 0 ? `scale(${1 + (1 - data.scale) * originalProgress * multiplier})` : `scale(${1 - (1 - data.scale) * originalProgress * multiplier})`;\n      const opacityString = originalProgress < 0 ? 1 + (1 - data.opacity) * originalProgress * multiplier : 1 - (1 - data.opacity) * originalProgress * multiplier;\n      const transform = `translate3d(${translateString}) ${rotateString} ${scaleString}`; // Set shadows\n\n      if (custom && data.shadow || !custom) {\n        let $shadowEl = $slideEl.children('.swiper-slide-shadow');\n\n        if ($shadowEl.length === 0 && data.shadow) {\n          $shadowEl = createShadow(params, $slideEl);\n        }\n\n        if ($shadowEl.length) {\n          const shadowOpacity = params.shadowPerProgress ? progress * (1 / params.limitProgress) : progress;\n          $shadowEl[0].style.opacity = Math.min(Math.max(Math.abs(shadowOpacity), 0), 1);\n        }\n      }\n\n      const $targetEl = effectTarget(params, $slideEl);\n      $targetEl.transform(transform).css({\n        opacity: opacityString\n      });\n\n      if (data.origin) {\n        $targetEl.css('transform-origin', data.origin);\n      }\n    }\n  };\n\n  const setTransition = duration => {\n    const {\n      transformEl\n    } = swiper.params.creativeEffect;\n    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;\n    $transitionElements.transition(duration).find('.swiper-slide-shadow').transition(duration);\n    effectVirtualTransitionEnd({\n      swiper,\n      duration,\n      transformEl,\n      allSlides: true\n    });\n  };\n\n  effectInit({\n    effect: 'creative',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    perspective: () => swiper.params.creativeEffect.perspective,\n    overwriteParams: () => ({\n      watchSlidesProgress: true,\n      virtualTranslate: !swiper.params.cssMode\n    })\n  });\n}","import createShadow from '../../shared/create-shadow.js';\nimport effectInit from '../../shared/effect-init.js';\nimport effectTarget from '../../shared/effect-target.js';\nimport effectVirtualTransitionEnd from '../../shared/effect-virtual-transition-end.js';\nexport default function EffectCards(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on\n  } = _ref;\n  extendParams({\n    cardsEffect: {\n      slideShadows: true,\n      transformEl: null,\n      rotate: true\n    }\n  });\n\n  const setTranslate = () => {\n    const {\n      slides,\n      activeIndex\n    } = swiper;\n    const params = swiper.params.cardsEffect;\n    const {\n      startTranslate,\n      isTouched\n    } = swiper.touchEventsData;\n    const currentTranslate = swiper.translate;\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const $slideEl = slides.eq(i);\n      const slideProgress = $slideEl[0].progress;\n      const progress = Math.min(Math.max(slideProgress, -4), 4);\n      let offset = $slideEl[0].swiperSlideOffset;\n\n      if (swiper.params.centeredSlides && !swiper.params.cssMode) {\n        swiper.$wrapperEl.transform(`translateX(${swiper.minTranslate()}px)`);\n      }\n\n      if (swiper.params.centeredSlides && swiper.params.cssMode) {\n        offset -= slides[0].swiperSlideOffset;\n      }\n\n      let tX = swiper.params.cssMode ? -offset - swiper.translate : -offset;\n      let tY = 0;\n      const tZ = -100 * Math.abs(progress);\n      let scale = 1;\n      let rotate = -2 * progress;\n      let tXAdd = 8 - Math.abs(progress) * 0.75;\n      const slideIndex = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.from + i : i;\n      const isSwipeToNext = (slideIndex === activeIndex || slideIndex === activeIndex - 1) && progress > 0 && progress < 1 && (isTouched || swiper.params.cssMode) && currentTranslate < startTranslate;\n      const isSwipeToPrev = (slideIndex === activeIndex || slideIndex === activeIndex + 1) && progress < 0 && progress > -1 && (isTouched || swiper.params.cssMode) && currentTranslate > startTranslate;\n\n      if (isSwipeToNext || isSwipeToPrev) {\n        const subProgress = (1 - Math.abs((Math.abs(progress) - 0.5) / 0.5)) ** 0.5;\n        rotate += -28 * progress * subProgress;\n        scale += -0.5 * subProgress;\n        tXAdd += 96 * subProgress;\n        tY = `${-25 * subProgress * Math.abs(progress)}%`;\n      }\n\n      if (progress < 0) {\n        // next\n        tX = `calc(${tX}px + (${tXAdd * Math.abs(progress)}%))`;\n      } else if (progress > 0) {\n        // prev\n        tX = `calc(${tX}px + (-${tXAdd * Math.abs(progress)}%))`;\n      } else {\n        tX = `${tX}px`;\n      }\n\n      if (!swiper.isHorizontal()) {\n        const prevY = tY;\n        tY = tX;\n        tX = prevY;\n      }\n\n      const scaleString = progress < 0 ? `${1 + (1 - scale) * progress}` : `${1 - (1 - scale) * progress}`;\n      const transform = `\n        translate3d(${tX}, ${tY}, ${tZ}px)\n        rotateZ(${params.rotate ? rotate : 0}deg)\n        scale(${scaleString})\n      `;\n\n      if (params.slideShadows) {\n        // Set shadows\n        let $shadowEl = $slideEl.find('.swiper-slide-shadow');\n\n        if ($shadowEl.length === 0) {\n          $shadowEl = createShadow(params, $slideEl);\n        }\n\n        if ($shadowEl.length) $shadowEl[0].style.opacity = Math.min(Math.max((Math.abs(progress) - 0.5) / 0.5, 0), 1);\n      }\n\n      $slideEl[0].style.zIndex = -Math.abs(Math.round(slideProgress)) + slides.length;\n      const $targetEl = effectTarget(params, $slideEl);\n      $targetEl.transform(transform);\n    }\n  };\n\n  const setTransition = duration => {\n    const {\n      transformEl\n    } = swiper.params.cardsEffect;\n    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;\n    $transitionElements.transition(duration).find('.swiper-slide-shadow').transition(duration);\n    effectVirtualTransitionEnd({\n      swiper,\n      duration,\n      transformEl\n    });\n  };\n\n  effectInit({\n    effect: 'cards',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    perspective: () => true,\n    overwriteParams: () => ({\n      watchSlidesProgress: true,\n      virtualTranslate: !swiper.params.cssMode\n    })\n  });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(402);\n"],"names":["root","factory","exports","module","define","amd","this","ActivityRequestTrigger","ActivityRequestError","code","message","request","ActivityResponse","rawContent","SuccessResponse","error","ErrorResponse","auth","_auth","buttons","button","type","undefined","value","URL","signinButton","e","tokenExchangeResource","LoginRequestResponse","logEvent","level","GlobalSettings","applets","logEnabled","onLogEvent","optionalParams","Enums","LogLevel","Warning","console","warn","Error","log","action","trigger","consecutiveActions","attemptNumber","retryAsync","onSend","_allowAutomaticCardUpdate","renderedElement","document","createElement","className","style","position","display","flexDirection","_cardHostElement","_refreshButtonHostElement","appendChild","displayCard","card","Utils","clearElementChildren","showManualRefreshButton","refreshAction","onShowManualRefreshButton","renderedRefreshButton","onRenderManualRefreshButton","Strings","runtime","refreshThisCard","refresh","mode","RefreshMode","Automatic","autoRefreshPausedMessage","automaticRefreshPaused","length","clckToRestartAutomaticRefresh","cardPayload","version","body","horizontalAlignment","inlines","text","selectAction","id","AdaptiveCard","parse","SerializationContext","Versions","v1_2","onExecuteAction","internalExecuteAction","render","removeProperty","createActivityRequest","ActivityRequest","sender","internalSendActivityRequestAsync","onPrepareActivityRequest","createMagicCodeInputCard","payload","color","wrap","placeholder","actions","AdaptiveApplet","_submitMagicCodeActionId","title","_cancelMagicCodeAuthActionId","cancelAutomaticRefresh","createSerializationContext","onCreateSerializationContext","internalSetCard","_cardPayload","hostConfig","serializationContext","onCardChanging","_card","authentication","onPrefetchSSOToken","Manual","onInputValueChanged","input","ChoiceSetInput","isDynamicTypeahead","filter","getFilterForDynamicSearch","dataQueryAction","DataQuery","dataset","choicesData","count","skip","_choiceSet","onCardChanged","maximumConsecutiveAutomaticRefreshes","timeBetweenAutomaticRefreshes","Info","window","setTimeout","Disabled","allowManualRefreshesAfterAutomaticRefreshes","UniversalAction","channelAdapter","onAction","createProgressOverlay","_progressOverlay","onCreateProgressOverlay","spinner","width","height","removeProgressOverlay","onRemoveProgressOverlay","removeChild","activityRequestSucceeded","response","parsedContent","onActivityRequestSucceeded","activityRequestFailed","onActivityRequestFailed","defaultTimeBetweenRetryAttempts","showAuthCodeInputDialog","onShowAuthCodeInputDialog","authCodeInputCard","submitMagicCodeAction","SubmitAction","authCode","data","alert","magicCodeInputCard","somethingWentWrong","ExecuteAction","internalSendExecuteRequestAsync","internalSendDataQueryRequestAsync","overlay","done","sendRequestAsync","JSON","maximumRetryAttempts","Promise","resolve","_reject","attemptOAuth","onSSOTokenNeeded","onShowSigninPrompt","left","screenX","outerWidth","authPromptWidth","screenY","outerHeight","authPromptHeight","open","authenticationFailed","stringify","showLoadingIndicator","showErrorIndicator","rawResponse","parsedResponse","renderChoices","removeLoadingIndicator","refreshCard","setCard","clearElement","element","trustedHtml","trustedTypes","emptyHTML","innerHTML","renderSeparation","separationDefinition","orientation","spacing","lineThickness","separator","makeCssClassName","Orientation","Horizontal","setAttribute","lineColor","stringToCssColor","paddingTop","marginBottom","borderBottom","paddingLeft","marginRight","borderRight","overflow","flex","_truncatedDueToOverflow","getValue","CardElement","langProperty","parent","lang","setValue","isVisibleProperty","useAdvancedCardBottomTruncation","undoOverflowTruncation","isVisible","updateRenderedElementVisibility","_renderedElement","raiseElementVisibilityChangedEvent","toString","internalRenderSeparator","renderedSeparator","getEffectiveSpacing","separatorOrientation","alwaysBleedSeparators","parentContainer","getParentContainer","getEffectivePadding","parentPhysicalPadding","paddingDefinitionToSpacingDefinition","marginLeft","right","displayMode","isDesignMode","_defaultRenderedElementDisplayMode","_separatorElement","isFirstElement","hideElementDueToOverflow","visibility","showElementHiddenDueToOverflow","handleOverflow","maxHeight","isHiddenDueToOverflow","handled","truncateOverflow","resetOverflow","sizeChanged","getDefaultSerializationContext","createPlaceholderElement","styleDefinition","getEffectiveStyleDefinition","foregroundCssColor","foregroundColors","default","subtle","border","padding","minHeight","fontSize","innerText","defaults","emptyElementText","getJsonTypeName","adjustRenderedElementSize","updateInputsVisualState","hover","allInputs","getAllInputs","inputEventType","InputEventType","MouseEnterOnCard","MouseLeaveOnCard","forEach","updateVisualState","isDisplayed","offsetHeight","overrideInternalRender","internalRender","applyPadding","separatorElement","isBleeding","PaddingDefinition","getImmediateSurroundingPadding","physicalPadding","_maxHeight","getDefaultPadding","getHasBackground","ignoreBackgroundImages","getHasBorder","getPadding","_padding","setPadding","shouldSerialize","context","elementRegistry","findByName","ContainerStyle","Default","source","asString","getEffectiveStyle","defaultStyle","containerStyles","getStyleByName","getEffectiveTextStyleDefinition","textStyles","getForbiddenActionTypes","result","processTop","processRight","processBottom","processLeft","doProcessTop","isTopElement","doProcessRight","isRightMostElement","doProcessBottom","isBottomElement","doProcessLeft","isLeftMostElement","effectivePadding","top","Spacing","None","bottom","getActionCount","getActionAt","index","errors","indexOutOfRange","indexOfAction","i","remove","CardElementContainer","removeItem","customCssSelector","classList","add","boxSizing","updateLayout","_processChildren","updateActionsEnabledState","getRootElement","getAllActions","updateEnabledState","indexOf","_cardElement","rootElement","designMode","_element","isLastElement","isAtTheVeryLeft","isAtTheVeryRight","isAtTheVeryTop","isAtTheVeryBottom","isBleedingAtTop","isBleedingAtBottom","getRootObject","currentElement","Container","processActions","push","getResourceInformation","getElementById","getActionById","_id","getElementByIdFromAction","ShowCardAction","getEffectiveHorizontalAlignment","HorizontalAlignment","Left","_hostConfig","defaultHostConfig","_parent","StringProperty","v1_1","BoolProperty","separatorProperty","v1_0","heightProperty","ValueSetProperty","horizontalAlignmentProperty","EnumProperty","spacingProperty","property","CardObject","targetVersion","name","forbiddenActionTypes","parseAction","toJSON","target","serializeValue","PropertyDefinition","ActionProperty","ariaHidden","populateSchema","schema","BaseTextBlock","selectActionProperty","textProperty","setText","getFontSize","fontType","effectiveSize","TextSize","Small","fontSizes","small","Medium","medium","Large","large","ExtraLarge","extraLarge","getColorDefinition","colorSet","TextColor","Accent","accent","Dark","dark","Light","light","Good","good","warning","Attention","attention","init","textDefinition","size","weight","isSubtle","applyStylesTo","targetElement","getFontTypeDefinition","effectiveFontType","fontFamily","fontWeight","colorDefinition","effectiveColor","targetColor","effectiveIsSubtle","effectiveWeight","TextWeight","Lighter","fontWeights","lighter","Bolder","bolder","sizeProperty","weightProperty","colorProperty","isSubtleProperty","fontTypeProperty","FontType","_treatAsPlainText","useMarkdown","restoreOriginalContent","maxLines","_computedLineHeight","originalHtml","TextBlock","_ttRoundtripPolicy","createHTML","_originalInnerHtml","truncateIfSupported","children","isTextOnly","tagName","toLowerCase","truncateText","_processedText","preProcessedText","preProcessPropertyValue","forElementId","labelElement","htmlFor","headingLevel","textBlock","supportsInteractivity","onclick","isEffectivelyEnabled","preventDefault","cancelBubble","execute","setupElementForAccessibility","formattedText","TextFormatters","formatText","allowMarkForTextHighlighting","replace","markdownProcessingResult","applyMarkdown","didProcess","outputHtml","markStyle","effectiveStyle","highlightBackgroundColor","highlightForegroundColor","processedHtml","_ttMarkdownPolicy","firstElementChild","HTMLElement","marginTop","textOverflow","lastElementChild","anchors","getElementsByTagName","anchor","raiseAnchorClickedEvent","oncontextmenu","Array","from","wordWrap","isInternetExplorer","useWebkitLineClamp","webkitBoxOrient","webkitLineClamp","whiteSpace","useAdvancedTextBlockTruncation","Center","textAlign","Right","lineHeights","lineHeight","processChildren","wrapProperty","maxLinesProperty","NumProperty","styleProperty","v1_5","createPolicy","italic","strikethrough","highlight","underline","href","getHref","fontStyle","textDecoration","backgroundColor","highlightColors","italicProperty","strikethroughProperty","highlightProperty","underlineProperty","v1_3","TextRun","_inlines","internalAddInline","inline","forceAdd","isInline","elementCannotBeUsedAsInline","inlineAlreadyParented","setParent","internalParse","isArray","jsonInline","textRun","parseElement","internalToJSON","jsonInlines","renderedInlines","renderedInline","getInlineCount","getInlineAt","addInline","removeInline","splice","RichTextBlock","getSchemaKey","titleProperty","valueProperty","Fact","SerializableObject","facts","borderWidth","borderSpacing","borderStyle","borderCollapse","trElement","factSet","tdElement","maxWidth","verticalAlign","factsProperty","SerializableObjectCollectionProperty","FactSet","internalName","fallbackProperty","getInternalName","sourceValue","defaultValue","isValid","SizeAndUnit","unit","SizeUnit","Pixel","physicalSize","isValidValue","logParseEvent","ValidationEvent","InvalidPropertyValue","invalidPropertyValue","isNaN","Size","Auto","ImageStyle","applySize","pixelWidth","pixelHeight","imageSizes","Stretch","url","alignItems","justifyContent","imageElement","renderedImageElement","onload","_e","raiseImageLoadedEvent","onerror","errorElement","minWidth","onkeypress","Person","borderRadius","backgroundPosition","backgroundRepeat","setImageSource","altTextProperty","Image","alt","mimeType","imageForceLoader","ImageForceLoader","forceLoad","configureImage","src","urlProperty","resetImage","backgroundColorProperty","pixelWidthProperty","ImageDimensionProperty","pixelHeightProperty","shouldForceLoadProperty","v1_6","doForceLoad","uniqueHash","Date","now","urlWithForceLoadOption","image","allowVerticalOverflow","isSelectable","isElementAllowed","isInteractive","SpacingDefinition","paddingRight","paddingBottom","forbiddenChildElements","releaseDOMResources","getItemCount","getItemAt","internalValidateProperties","item","addFailure","InteractivityNotAllowed","interactivityNotAllowed","elementTypeNotAllowed","_selectAction","overflowX","overflowY","findDOMNodeOwner","node","_images","imageSize","ImageSize","presentationStyle","ImageSetPresentationStyle","pixelOffset","flexWrap","imageSet","maxImageHeight","renderedImage","margin","Stacked","applyStackedPresentationStyle","dimension","StackedImageConfigurator","parseNumericPixelDimension","bgColor","getEffectiveBackgroundColor","configureImagesArrayAsStackedLayout","getFirstVisibleRenderedItem","getLastVisibleRenderedItem","itemIndex","addImage","cardElement","imagesProperty","imageSizeProperty","imagePresentationStyle","ImageSet","offset","sign45","maxImageCounts","normalizationConstant","Math","max","moveImageRight","moveImageUp","moveImageDown","makeImageRound","applyBorder","configureImageForBottomLeft","zIndex","configureImageForTopRight","elements","substring","parseInt","mimeTypeProperty","ContentSource","label","kind","labelProperty","CaptionSource","MediaSource","play","_posterUrl","MediaPlayer","owner","_selectedSources","_captionSources","processSources","_selectedMediaType","sources","mimeComponents","split","HTML5MediaPlayer","supportedMediaTypes","captionSources","canPlay","fetchVideoDetails","_mediaElement","altText","mediaPlayerAriaLabel","autoplay","controls","isMobileOS","muted","preload","renderedSource","captionSource","renderedCaptionSource","matches","CustomMediaPlayer","iFrameTitle","_videoId","container","iFrame","getEmbedVideoUrl","frameBorder","allow","allowFullscreen","IFrameMediaMediaPlayer","oEmbedUrl","fetch","ok","json","posterUrl","videoId","VimeoPlayer","apiUrl","DailymotionPlayer","_startTimeIndex","YouTubePlayer","createMediaPlayer","Media","customMediaPlayers","provider","urlPatterns","exec","handlePlayButtonInvoke","event","media","allowInlinePlayback","mediaPlayerElement","_mediaPlayer","focus","onPlay","displayPoster","poster","defaultPoster","parentNode","playButtonOuterElement","tabIndex","mediaPlayerPlayMedia","playButtonInnerElement","playButtonArrowWidth","playButtonArrowHeight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopColor","borderRightColor","borderBottomColor","transform","playButtonContainer","then","mediaSource","selectedMediaType","youTubeVideoPlayer","vimeoVideoPlayer","dailymotionVideoPlayer","sourcesProperty","captionSourcesProperty","posterProperty","inputStyle","InputStyle","getAllLabelIds","labelIds","labelledBy","_renderedLabelElement","_renderedErrorMessageElement","updateInputControlAriaLabelledBy","_renderedInputControlElement","join","removeAttribute","_inputControlContainerElement","_outerContainerElement","labelPosition","InputLabelPosition","Inline","renderedInputControlId","generateUniqueId","labelRichTextBlock","labelInline","isRequired","inputs","requiredInputs","isRequiredCueInline","suffix","suffixColor","optionalInputs","alignSelf","inputSpacing","isNullable","labelWidth","Weight","labelWidthInPercent","labelWidthInPixel","defaultLabelWidth","InitialRender","onblur","ev","FocusLeave","resetDirtyState","valueChanged","onInputValueChangedHandler","resetValidationFailureCue","onValueChanged","renderedInputControlElement","removeValidationFailureCue","showValidationErrorMessage","errorMessage","displayInputValidationErrors","errorMessageTextBlock","allowRevealOnHoverStyle","shouldHideInputAdornersForRevealOnHover","eventType","isInputInFocus","activeElement","inputHoverClassName","isMouseOverCard","contains","RevealOnHover","isDirty","_oldValue","PropertyCantBeNull","inputsMustHaveUniqueId","RequiredInputsShouldHaveLabel","RequiredInputsShouldHaveErrorMessage","validateValue","isSet","showValidationFailureCue","isRequiredProperty","errorMessageProperty","inputStyleProperty","labelWidthProperty","CustomProperty","prop","invalidLabelWidth","invalidInputLabelWidth","serializeNumber","labelPositionProperty","Above","Input","isMultiline","InputTextStyle","Text","setupInput","maxLength","oninput","ctrlKey","inlineAction","Password","renderedInputControl","iconUrl","textContent","inlineActionTitle","inputControlContainerElement","regex","RegExp","test","maxLengthProperty","isMultilineProperty","placeholderProperty","Tel","Url","Email","inlineActionProperty","regexProperty","TextInput","valueOn","valueOff","_checkboxInputElement","joinedLabelIds","_checkboxInputLabelElement","checked","_oldCheckboxValue","onchange","useMarkdownInRadioButtonAndCheckbox","spacerElement","valueOnProperty","valueOffProperty","ToggleInput","Choice","typeProperty","datasetProperty","countProperty","skipProperty","ChoiceSetInputDataQuery","isMultiSelect","choices","getUniqueCategoryName","uniqueCategoryName","_uniqueCategoryCounter","allowDynamicallyFilteredChoiceSet","_textInput","getDropdownElement","_filteredChoiceSet","dropdown","fetchedChoices","processResponse","createPlaceholderOptionWhenValueDoesNotExist","placeholderOption","selected","disabled","hidden","internalApplyAriaCurrent","_selectElement","options","option","renderCompoundInput","cssClassName","defaultValues","_toggleInputs","_labels","choice","_uniqueCategoryName","compoundInput","FilteredChoiceSet","textInput","onInputChangeEventHandler","debounce","processChoices","debounceTimeInMilliSeconds","choiceSetInputValueSeparator","inputContainer","dataList","append","isCompact","appearance","CollectionCantBeEmpty","choiceSetMustHaveAtLeastOneChoice","choiceSetChoicesMustHaveTitleAndValue","dynamicChoices","toggleInput","selectedIndex","choicesProperty","choicesDataProperty","SerializableObjectProperty","isMultiSelectProperty","choiceSetId","_choiceSetId","_choices","_dynamicChoices","_visibleChoiceCount","_highlightedChoiceId","choiceSetContainer","onkeydown","key","highlightChoice","click","_dropdown","createChoice","onmousemove","scrollIntoView","currentHighlightedChoice","nextHighlightedChoice","filterChoices","trim","matchIndex","matchedText","choiceContainer","getStatusIndicator","_errorIndicator","errorIndicator","_loadingIndicator","loadingIndicator","resetDropdown","showDropdown","hasChildNodes","map","_numberInputElement","min","valueAsNumber","minProperty","maxProperty","NumberInput","_dateInputElement","hideDatePicker","updateInputAdornersVisibility","valueAsDate","minDate","maxDate","DateInput","TimeProperty","convertTimeStringToDate","timeString","_timeInputElement","hideTimePicker","TimeInput","ActionStyle","ActionMode","Primary","_state","_isFocusable","renderButtonContent","titleElement","iconPlacement","ActionIconPlacement","AboveTitle","allowTitleToWrap","iconElement","iconSize","updateCssClasses","parentContainerStyle","isFocusable","Positive","makeCssClassNames","internalGetReferencedInputs","internalPrepareForExecution","_inputs","internalValidateInputs","referencedInputs","Object","keys","actionRegistry","raiseExecuteActionEvent","onExecuteActionHandler","onExecute","prepareForExecution","internalAfterExecute","rootObject","getAriaRole","ariaRole","getAriaRoleFromEnum","role","ActionRole","Button","Link","Menu","MenuItem","Tab","promoteTooltipToLabel","HTMLButtonElement","tooltip","buttonElement","_actionCollection","actionExecuted","getReferencedInputs","invalidInputs","removeAction","validateInputs","isEnabled","iconUrlProperty","Destructive","modeProperty","Secondary","tooltipProperty","isEnabledProperty","roleProperty","Action","disabledUnlessAssociatedInputsChange","_isPrepared","_areReferencedInputsDirty","associatedInputs","current","_originalData","_processedData","resetInputsDirtyStateAfterActionExecution","resetReferencedInputsDirtyState","dataProperty","associatedInputsProperty","disabledUnlessAssociatedInputsChangeProperty","SubmitActionBase","JsonTypeName","verbProperty","v1_4","filterProperty","OpenUrlAction","propertyMustBeSet","targetElements","updateAriaControlsAttribute","elementIds","ToggleVisibilityAction","elementId","addTargetElement","removeTargetElement","targetElementsProperty","parseBool","serializeArray","StringWithSubstitutions","set","parseString","getOriginal","_value","substituteInputValues","ContentTypes","applicationXWwwFormUrlencoded","get","newValue","nameProperty","StringWithSubstitutionProperty","HttpHeader","_ignoreInputValidation","_url","headers","_body","contentType","applicationJson","header","HttpAction","actionHttpHeadersMustHaveNameAndValue","bodyProperty","methodProperty","headersProperty","ignoreInputValidationProperty","InlineAdaptiveCard","effectiveHostConfig","state","jsonCard","showCardMustHaveCard","showCard","actionMode","ShowCardActionMode","Popup","_actions","overflowButtonText","overflowButtonTooltip","getActions","onDisplayOverflowActionMenuHandler","onDisplayOverflowActionMenu","PopupMenu","menuItem","onClick","actionToExecute","closePopup","items","onClose","popup","_items","_renderedActions","_owner","isActionAllowed","forbiddenTypes","forbiddenType","constructor","refreshContainer","_actionCardContainer","_actionCard","renderedActionCount","inlineTopMargin","layoutChanged","showActionCard","suppressStyle","raiseEvent","renderedCard","_expandedAction","raiseInlineCardExpandedEvent","collapseExpandedAction","previouslyExpandedAction","expandShowCardAction","afterSelectedAction","renderedAction","actionsOrientation","clear","jsonAction","forbiddenActions","ContainerWithActions","getForbiddenActionNames","addAction","propertyName","validateProperties","maxActions","TooManyActions","tooManyActions","ActionTypeNotAllowed","actionTypeNotAllowed","preExpandSingleShowCardAction","buttonStrip","actionAlignment","ActionAlignment","allowedActions","bind","overflowPrimaryActions","allowMoreThanMaxActionsInOverflowMenu","shouldRenderOverflowActionButton","_overflowAction","OverflowAction","isRootAction","isAtRootLevelActions","onRenderOverflowActionsHandler","onRenderOverflowActions","raiseRenderOverflowActionsEvent","buttonSpacing","spacer","buttonStripContainer","actionAlreadyParented","expandedAction","actionIndex","ActionCollection","orientationProperty","ActionSet","onGetInitialValue","Emphasis","ContainerStyleProperty","allowCustomStyle","StylableCardElementContainer","applyBackground","surroundingPadding","currentElementHasBackgroundImage","backgroundImage","hasExplicitStyle","Padding","explicitStyle","_bleed","minPixelHeight","getHasExpandedAction","getBleed","setBleed","alwaysAllowBleed","bleedProperty","minHeightProperty","PixelSizeProperty","ContainerBase","resetDefaultValues","apply","BackgroundImage","fillMode","FillMode","Repeat","RepeatHorizontally","RepeatVertically","Cover","backgroundSize","backgroundPositionX","verticalAlignment","VerticalAlignment","Top","backgroundPositionY","Bottom","fillModeProperty","verticalAlignmentProperty","_renderedItems","backgroundImageProperty","insertItemAt","forceInsert","elementAlreadyParented","isStandalone","elementTypeNotStandalone","getItemsCollectionPropertyName","applyRTL","rtl","dir","getEffectiveVerticalContentAlignment","renderedItem","placeholderElement","offsetTop","elt","getFitStatus","ContainerFitStatus","FullyInContainer","Overflowing","containerMaxHeight","FullyOutOfContainer","setShouldFallback","jsonItems","collectionPropertyName","removePaddingFromContainersWithBackgroundImage","verticalContentAlignment","isRtl","firstRenderedItem","lastRenderedItem","addItem","insertItemBefore","insertBefore","insertItemAfter","insertAfter","verticalContentAlignmentProperty","rtlProperty","_computedWeight","_context","Vertical","ColumnSet","widthProperty","invalidWidth","compareTo","invalidColumnWidth","Column","_columns","createColumnInstance","parseCardObject","typeName","_errorType","ElementTypeNotAllowed","_renderedColumns","totalWeight","column","computedWeight","renderedColumn","jsonColumns","getColumnAt","weightedColumns","stretchedColumns","Hint","hints","dontUseWeightedAndStrecthedColumnsInSameSet","addColumn","columnAlreadyBelongsToAnotherSet","onImageLoadedHandler","onImageLoaded","onAnchorClickedHandler","onAnchorClicked","isExpanded","onInlineCardExpandedHandler","onInlineCardExpanded","shouldUpdateLayout","onElementVisibilityChangedHandler","onElementVisibilityChanged","hide","readOnly","required","parseActions","renderedActions","renderIfEmpty","RefreshActionProperty","RefreshDefinition","actionProperty","userIdsProperty","StringArrayProperty","imageProperty","AuthCardButton","idProperty","uriProperty","providerIdProperty","TokenExchangeResource","connectionNameProperty","buttonsProperty","tokenExchangeResourceProperty","Authentication","refreshProperty","processMarkdownEventRemoved","onProcessMarkdown","markdownit","markdownIt","_haveWarnedAboutNoMarkdownProcessing","markdownProcessingNotEnabled","isVersionSupported","bypassVersionCheck","maxVersion","major","minor","_fallbackCard","fallbackElement","versionProperty","adaptiveCard","typeNameProperty","MissingCardType","invalidCardType","UnsupportedCardVersion","unsupportedCardVersion","shouldFallback","setTabIndexAtCardRoot","speak","onmouseenter","onmouseleave","inputElements","schemaUrl","$schemaProperty","Version","latest","invalidCardVersion","fallbackTextProperty","speakProperty","authenticationProperty","_forbiddenTypes","Set","internalParseCardObject","allowFallback","createInstanceCallback","has","TypeErrorType","ForbiddenType","tryToFallback","enableFallback","UnknownType","fallback","cardObjectParsed","o","onParseAction","onParseElement","forbiddenTypeNames","createInstance","errorType","UnknownElementType","unknownElementType","UnknownActionType","unknownActionType","_elementRegistry","GlobalRegistry","setElementRegistry","_actionRegistry","setActionRegistry","BaseSerializationContext","defaultElements","register","defaultActions","allIds","validationEvents","cardObject","phase","ValidationPhase","Validation","ValidationResults","_shouldFallback","requiresProperty","propertyValue","allowPreProcessingPropertyValues","currentObject","onPreProcessPropertyValue","requires","areAllMet","hostCapabilities","hasOwnProperty","DuplicateId","duplicateId","HostCapabilities","carouselSlide","getForbiddenChildElements","CarouselPage","carouselLoop","carouselOrientation","_pages","_currentIndex","_previousEventType","CarouselInteractionEvent","Pagination","timer","Carousel","timerProperty","carousel","minAutoplayDelay","tooLittleTimeDelay","initialPageProperty","isValidParsedPageIndex","invalidInitialPageIndex","isValidPageIndex","isValidRenderedPageIndex","_renderedPages","collectionSize","_containerForAdorners","carouselHeight","_carouselPageContainer","addPage","page","_carousel","slides","activeIndex","realIndex","jsonPages","createCarouselPageInstance","validateParsing","initialPageIndex","validateOrientationProperties","cardLevelContainer","carouselContainer","containerForAdorners","carouselWrapper","navigationContainer","prevElementDiv","nextElementDiv","updateCssForHorizontalCarousel","updateCssForVerticalCarousel","pagination","addCancelSelectActionEventHandler","requestedNumberOfPages","maxCarouselPages","tooManyCarouselPages","initializeCarouselControl","nextElement","prevElement","paginationElement","nextElementAdjustedForRtl","prevElementAdjustedForRtl","prevElementAdjustedForOrientation","nextElementAdjustedForOrientation","swiperOptions","loop","modules","Navigation","Scrollbar","A11y","History","Keyboard","el","clickable","navigation","prevEl","nextEl","a11y","enabled","keyboard","onlyInViewport","direction","resizeObserver","initialSlide","Autoplay","delay","pauseOnMouseEnter","Swiper","addEventListener","_event","stop","start","on","swiper","raiseCarouselEvent","NavigationNext","NavigationPrevious","currentIndex","paginationEl","bullets","bullet","slideTo","destroyResizeObserver","ariaLabel","carouselNavigationPreviousTooltip","carouselNavigationNextTooltip","createResizeObserver","createCarouselEvent","currentPageId","currentPageIndex","CarouselEvent","onCarouselEventHandler","onCarouselEvent","previousEventType","checkIfCarouselInValidStateForResizeEvent","_observer","ResizeObserver","entries","newWidth","newHeight","contentBoxSize","contentRect","inlineSize","blockSize","emit","observe","unobserve","destroyed","loopProperty","carouselHeightProperty","carouselId","activeCarouselPageId","activeCarouselPageIndex","ChannelAdapter","onItemAdded","onItemRemoved","Collection","tab","enter","escape","space","up","down","delete","Constants","_isEnabled","onmouseup","stopPropagation","_isOpen","keyDown","_rootElementBounds","renderContent","_popupElement","_overlayElement","documentElement","scrollWidth","scrollHeight","onfocus","rootElementBounds","getBoundingClientRect","rootElementLabel","getAttribute","popupElementBounds","availableSpaceBelow","innerHeight","availableSpaceAbove","availableSpaceRight","innerWidth","availableSpaceLeft","getScrollX","actualPopupHeight","getScrollY","actualPopupWidth","wasCancelled","PopupControl","_selectedIndex","selectedItemIndex","removeAriaExpanded","_capabilities","jsonVersion","addCapability","removeCapability","hasCapability","capabilityName","parseHostConfigEnum","targetEnum","parsedValue","parseEnum","defaultColor","subtleColor","obj","ColorDefinition","TextColorDefinition","AdaptiveCardConfig","parseNumber","ImageSetConfig","MediaConfig","cellSpacing","TableConfig","getDefaultWeight","BaseTextDefinition","TextStyleDefinition","heading","columnHeader","TextStyleSet","TextBlockConfig","RequiredInputLabelTextDefinition","InputLabelConfig","InputConfig","FactTextDefinition","FactTitleDefinition","FactSetConfig","ShowCardActionConfig","LeftOfTitle","sizeAndUnit","Shared","ActionsConfig","parseSingleColor","ColorSetDefinition","borderColor","ContainerStyleDefinition","_allStyles","BuiltInContainerStyleDefinition","customStyleArray","customStyle","styleName","isBuiltIn","emphasis","customStyles","ContainerStyleSet","monospace","FontTypeDefinition","getStyleDefinition","Monospace","FontTypeSet","CarouselConfig","table","String","_legacyFontType","fontTypes","paddingDefinition","classNames","cssClassNamePrefix","HostConfig","minAutoplayDuration","copyTo","typeRegistration","objectType","schemaVersion","registrationInfo","unregister","CardObjectRegistry","populateWithDefaultElements","registry","populateWithDefaultActions","_elements","reset","_isValid","_major","_minor","_label","versionString","_versionString","invalidVersionString","otherVersion","getAllDeclaredVersions","ctor","properties","match","sort","v1","v2","_validationEvents","isTemplateString","startsWith","tryDeleteValue","enableFullJsonRoundTrip","tryDeleteDefaultValue","forceDeleteIfNullOrDefault","serializeString","serializeBool","serializeEnum","enumType","serializedItem","clearEvents","Parse","getEventAt","isSerializationEnabled","sequentialNumber","_sequentialNumber","treatEmptyAsUndefined","regEx","values","versionedValue","propertyValueNotSupported","invalidValue","ToJSON","_values","keyAsNumber","enumValue","getEnumValueByName","nullable","serializedValue","hasAllDefaultValues","sourceCollection","sourceItem","onParse","onToJSON","_properties","getCount","SerializableObjectSchema","propertyKey","descriptor","getOwnPropertyDescriptor","defineProperty","_propertyBag","_rawProperties","defaultMaxVersion","s","getSchema","SimpleSerializationContext","sortedProperties","p1","p2","onRegisterCustomProperties","UnsupportedProperty","propertyNotSupported","serializedProperties","effectiveContext","toJSONOriginalParam","hasDefaultValue","setCustomProperty","getCustomProperty","_schemaCache","logLevel","_isProcessed","_original","_processed","matchedInput","valueForReplace","slice","encodeURIComponent","requireUnitSpecifier","expectedMatchCount","generate","d0","random","d1","d2","d3","UUID","lut","initialize","defaultingToVersion","supportedInVersion","versionUsed","maximumActions","maxSupportedVersion","tryAgain","pleaseLogin","enterMagicCode","pleaseEnterMagicCodeYouReceived","submit","cancel","elementType","horizontalCellContentAlignmentProperty","verticalCellContentAlignmentProperty","TableColumnDefinition","parseItem","createItemInstance","internalAddItem","internalRemoveItem","internalIndexOf","getCollectionPropertyName","instance","StylableContainer","_columnIndex","_cellType","parentRow","parentTable","showGridLines","gridStyle","cellElement","cellType","horizontalCellContentAlignment","columnIndex","verticalCellContentAlignment","TableCell","isFirstRow","getIsFirstRow","rowElement","getColumnCount","cell","firstRowAsHeaders","renderedCell","computedWidth","addCell","removeCellAt","ensureHasEnoughCells","cellCount","TableRow","Table","gridStyleProperty","ensureRowsHaveEnoughCells","removeCellsFromColumn","totalWeights","tableElement","borderTop","borderLeft","renderedRow","separatorRow","removeColumn","addRow","row","_columnsProperty","firstRowAsHeadersProperty","showGridLinesProperty","regularExpression","_regularExpression","format","internalFormat","date","toLocaleDateString","day","weekday","month","year","AbstractTextFormatter","toLocaleTimeString","hour","minute","DateFormatter","TimeFormatter","truncateWorker","fullText","truncateAt","fits","breakableIndices","html","results","idx","findNextCharacter","findBreakableIndices","lo","hi","bestBreakIdx","mid","floor","documentMode","userAgent","navigator","child","a","ttDeprecatedPolicy","currIdx","truncatedString","truncatedHTML","containerEnd","clientHeight","pageXOffset","pageYOffset","firstChild","fn","clearTimeout","args","isObject","extend","ssrDocument","removeEventListener","blur","nodeName","querySelector","querySelectorAll","createEvent","initEvent","childNodes","createElementNS","importNode","location","hash","host","hostname","origin","pathname","protocol","search","getDocument","doc","ssrWindow","history","replaceState","pushState","go","back","CustomEvent","getComputedStyle","getPropertyValue","screen","matchMedia","requestAnimationFrame","callback","cancelAnimationFrame","win","Dom7","super","proto","__proto__","makeReactive","arrayFlat","arr","res","arrayFilter","prototype","call","$","selector","toCreate","tempParent","qsa","nodeType","uniqueArray","arrayUnique","noTrigger","shortcut","Methods","addClass","classes","c","removeClass","hasClass","toggleClass","toggle","attr","attrs","arguments","attrName","removeAttr","transition","duration","transitionDuration","targetSelector","listener","capture","handleLiveEvent","eventData","dom7EventData","unshift","is","parents","k","handleEvent","events","j","dom7LiveListeners","proxyListener","dom7Listeners","off","handlers","handler","dom7proxy","evt","detail","bubbles","cancelable","dataIndex","dispatchEvent","transitionEnd","dom","fireCallBack","includeMargins","styles","offsetWidth","parseFloat","box","clientTop","clientLeft","scrollTop","scrollY","scrollLeft","scrollX","css","props","each","compareWith","webkitMatchesSelector","msMatchesSelector","previousSibling","eq","returnIndex","els","newChild","tempDiv","prepend","next","nextElementSibling","nextAll","nextEls","prev","previousElementSibling","prevAll","prevEls","closest","find","foundElements","found","methodName","writable","nextTick","getTranslate","axis","matrix","curTransform","transformMatrix","curStyle","currentStyle","WebKitCSSMatrix","webkitTransform","MozTransform","OTransform","MsTransform","msTransform","m41","m42","isNode","to","noExtend","nextSource","keysArray","nextIndex","len","nextKey","desc","enumerable","__swiper__","setCSSProperty","varName","varValue","setProperty","animateCSSModeScroll","_ref","targetPosition","side","startPosition","translate","time","startTime","params","speed","wrapperEl","scrollSnapType","cssModeFrameID","isOutOfBound","animate","getTime","progress","easeProgress","cos","PI","currentPosition","scrollTo","support","deviceCached","browser","getSupport","smoothScroll","touch","DocumentTouch","passiveListener","supportsPassive","opts","gestures","calcSupport","priority","self","eventsListeners","method","once","onceHandler","__emitterProxy","_len","_key","onAny","eventsAnyListeners","offAny","eventHandler","_len2","_key2","updateSize","$el","clientWidth","isHorizontal","isVertical","Number","assign","updateSlides","getDirectionLabel","getDirectionPropertyValue","$wrapperEl","swiperSize","rtlTranslate","wrongRTL","isVirtual","virtual","previousSlidesLength","slideClass","slidesLength","snapGrid","slidesGrid","slidesSizesGrid","offsetBefore","slidesOffsetBefore","offsetAfter","slidesOffsetAfter","previousSnapGridLength","previousSlidesGridLength","spaceBetween","slidePosition","prevSlideSize","virtualSize","centeredSlides","cssMode","gridEnabled","grid","rows","slideSize","initSlides","shouldResetSlideSize","slidesPerView","breakpoints","slide","updateSlide","slideStyles","currentTransform","currentWebKitTransform","roundLengths","swiperSlideSize","abs","slidesPerGroup","slidesPerGroupSkip","effect","setWrapperSize","updateWrapperSize","newSlidesGrid","slidesGridItem","_","slideIndex","centeredSlidesBounds","allSlidesSize","slideSizeValue","maxSnap","snap","centerInsufficientSlides","allSlidesOffset","snapIndex","addToSnapGrid","addToSlidesGrid","v","watchOverflow","checkOverflow","watchSlidesProgress","updateSlidesOffset","backFaceHiddenClass","containerModifierClass","hasClassBackfaceClassAdded","maxBackfaceHiddenSlides","updateAutoHeight","activeSlides","setTransition","getSlideByIndex","visibleSlides","ceil","swiperSlideOffset","offsetLeft","updateSlidesProgress","offsetCenter","slideVisibleClass","visibleSlidesIndexes","slideOffset","slideProgress","minTranslate","originalSlideProgress","slideBefore","slideAfter","originalProgress","updateProgress","multiplier","translatesDiff","maxTranslate","isBeginning","isEnd","wasBeginning","wasEnd","autoHeight","updateSlidesClasses","activeSlide","slideActiveClass","slideNextClass","slidePrevClass","slideDuplicateActiveClass","slideDuplicateNextClass","slideDuplicatePrevClass","slideDuplicateClass","nextSlide","prevSlide","emitSlidesClasses","updateActiveIndex","newActiveIndex","previousIndex","previousRealIndex","previousSnapIndex","normalizeSlideIndex","initialized","runCallbacksOnInit","updateClickedSlide","slideFound","clickedSlide","clickedIndex","slideToClickedSlide","transitionEmit","runCallbacks","step","internal","initial","indexAsNumber","isFinite","animating","preventInteractionOnTransition","normalizedTranslate","normalizedGrid","normalizedGridNext","allowSlideNext","allowSlidePrev","setTranslate","transitionStart","isH","t","_immediateVirtual","_swiperImmediateVirtual","behavior","onSlideToWrapperTransitionEnd","slideToLoop","newIndex","loopedSlides","slideNext","perGroup","slidesPerGroupAuto","slidesPerViewDynamic","increment","loopPreventsSlide","loopFix","_clientLeft","rewind","slidePrev","normalize","val","normalizedSnapGrid","prevSnap","prevSnapIndex","prevIndex","lastIndex","slideReset","slideToClosest","threshold","currentSnap","slideToIndex","loopCreate","$selector","loopFillGroupWithBlank","blankSlidesNum","blankNode","slideBlankClass","loopAdditionalSlides","prependSlides","appendSlides","cloneNode","diff","loopDestroy","onTouchStart","touchEventsData","touches","originalEvent","$targetEl","touchEventsTarget","isTouchEvent","which","isTouched","isMoved","noSwipingClass","shadowRoot","path","noSwipingSelector","isTargetShadow","noSwiping","base","__closestFrom","assignedSlot","getRootNode","closestElement","allowClick","swipeHandler","currentX","targetTouches","pageX","currentY","pageY","startX","startY","edgeSwipeDetection","iOSEdgeSwipeDetection","edgeSwipeThreshold","iOSEdgeSwipeThreshold","allowTouchCallbacks","isScrolling","startMoving","touchStartTime","swipeDirection","allowThresholdMove","focusableElements","shouldPreventDefault","allowTouchMove","touchStartPreventDefault","touchStartForcePreventDefault","isContentEditable","freeMode","onTouchMove","targetTouch","changedTouches","preventedByNestedSwiper","touchReleaseOnEdges","diffX","diffY","sqrt","touchAngle","atan2","touchMoveStopPropagation","nested","startTranslate","allowMomentumBounce","grabCursor","setGrabCursor","touchRatio","currentTranslate","disableParentSwiper","resistanceRatio","resistance","followFinger","onTouchEnd","touchEndTime","timeDiff","pathTree","composedPath","lastClickTime","currentPos","stopIndex","groupSize","rewindFirstIndex","rewindLastIndex","ratio","longSwipesMs","longSwipes","longSwipesRatio","shortSwipes","onResize","setBreakpoint","running","paused","run","preventClicks","preventClicksPropagation","stopImmediatePropagation","onScroll","newProgress","previousTranslate","dummyEventAttached","dummyEventListener","touchEvents","device","domMethod","swiperMethod","passiveListeners","passive","move","end","updateOnWindowResize","ios","android","attachEvents","detachEvents","isGridEnabled","addClasses","suffixes","prefix","resultClasses","prepareClasses","fill","emitContainerClasses","removeClasses","createElements","virtualTranslate","breakpointsBase","simulateTouch","uniqueNavElements","preloadImages","updateOnImagesReady","wrapperClass","_emitClasses","moduleExtendParams","allModulesParams","moduleParamName","moduleParams","auto","prototypes","eventsEmitter","update","byController","x","y","translateTo","translateBounds","newTranslate","onTranslateToWrapperTransitionEnd","moving","isLocked","cursor","unsetGrabCursor","breakpoint","getBreakpoint","currentBreakpoint","breakpointParams","originalParams","wasMultiRow","isMultiRow","wasEnabled","wasModuleEnabled","isModuleEnabled","disable","enable","directionChanged","needsReLoop","changeDirection","containerEl","currentHeight","points","point","minRatio","substr","b","wasLocked","lastSlideIndex","lastSlideRightEdge","images","loadImage","imageEl","srcset","sizes","checkForComplete","onReady","complete","imagesLoaded","imagesToLoad","currentSrc","extendedDefaults","swipers","newParams","overrides","_temp","platform","ua","screenWidth","screenHeight","ipad","ipod","iphone","windows","macos","os","calcDevice","isSafari","isWebView","calcBrowser","__modules__","mod","extendParams","swiperParams","passedParams","eventName","velocity","desktop","touchEventsTouch","touchEventsDesktop","clickTimeout","velocities","setProgress","cls","getSlideClasses","slideEl","updates","view","exact","spv","breakLoop","translateValue","translated","newDirection","needUpdate","currentDirection","changeLanguageDirection","mount","mounted","getWrapperSelector","getWrapper","wrapper","destroy","deleteInstance","cleanStyles","object","deleteProps","static","newDefaults","m","installModule","prototypeGroup","protoMethod","use","observer","animationFrame","resizeHandler","orientationChangeHandler","_ref2","observers","attach","MutationObserver","WebkitMutationObserver","mutations","observerUpdate","attributes","childList","characterData","observeParents","observeSlideChildren","containerParents","disconnect","Virtual","cssModeTimeout","renderSlide","cache","$slideEl","force","addSlidesBefore","addSlidesAfter","previousFrom","previousTo","previousSlidesGrid","previousOffset","offsetProp","slidesAfter","slidesBefore","onRendered","lazy","load","renderExternal","slidesToRender","renderExternalUpdate","prependIndexes","appendIndexes","appendSlide","prependSlide","numberOfNewSlides","newCache","cachedIndex","$cachedEl","cachedElIndex","removeSlide","slidesIndexes","removeAllSlides","handle","kc","keyCode","charCode","pageUpDown","isPageUp","isPageDown","isArrowLeft","isArrowRight","isArrowUp","isArrowDown","shiftKey","altKey","metaKey","inView","swiperWidth","swiperHeight","windowWidth","windowHeight","swiperOffset","swiperCoord","returnValue","Mousewheel","timeout","mousewheel","releaseOnEdges","invert","forceToAxis","sensitivity","eventsTarget","thresholdDelta","thresholdTime","lastEventBeforeSnap","lastScrollTime","recentWheelEvents","handleMouseEnter","mouseEntered","handleMouseLeave","animateSlider","newEvent","delta","raw","rtlFactor","sX","sY","pX","pY","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","positions","sign","ignoreWheelEvents","sticky","shift","prevEvent","firstEvent","snapToThreshold","autoplayDisableOnInteraction","releaseScroll","createElementIfNotDefined","checkProps","getEl","toggleEl","disabledClass","lockClass","$nextEl","$prevEl","onPrevClick","onNextClick","hideOnClick","hiddenClass","navigationDisabledClass","_s","targetEl","isHidden","classesToSelector","pfx","bulletSize","bulletElement","renderBullet","renderProgressbar","renderFraction","renderCustom","progressbarOpposite","dynamicBullets","dynamicMainBullets","formatFractionCurrent","number","formatFractionTotal","bulletClass","bulletActiveClass","modifierClass","currentClass","totalClass","progressbarFillClass","progressbarOppositeClass","clickableClass","horizontalClass","verticalClass","paginationDisabledClass","dynamicBulletIndex","isPaginationDisabled","setSideBullets","$bulletEl","total","paginationType","firstIndex","midIndex","$bullet","bulletIndex","$firstDisplayedBullet","$lastDisplayedBullet","dynamicBulletsLength","bulletsOffset","progressbarDirection","scale","scaleX","scaleY","paginationHTML","numberOfBullets","dragStartPos","dragSize","trackSize","divider","dragTimeout","scrollbar","$dragEl","newSize","newPos","opacity","getPointerPosition","clientX","clientY","setDragPosition","positionRatio","onDragStart","onDragMove","onDragEnd","snapOnRelease","activeListener","eventMethod","$swiperEl","dragClass","dragEl","draggable","scrollbarDisabledClass","Parallax","parallax","setTransform","p","currentOpacity","currentScale","_swiper","parallaxEl","$parallaxEl","parallaxDuration","Zoom","zoom","maxRatio","containerClass","zoomedSlideClass","gesturesEnabled","fakeGestureTouched","fakeGestureMoved","isScaling","gesture","slideWidth","slideHeight","$imageEl","$imageWrapEl","minX","minY","maxX","maxY","touchesStart","touchesCurrent","prevPositionX","prevPositionY","prevTime","getDistanceBetweenTouches","x1","y1","x2","y2","onGestureStart","scaleStart","onGestureChange","scaleMove","onGestureEnd","scaledWidth","scaledHeight","onTransitionEnd","zoomIn","touchX","touchY","offsetX","offsetY","translateX","translateY","imageWidth","imageHeight","translateMinX","translateMinY","translateMaxX","translateMaxY","touchAction","zoomOut","zoomToggle","getListeners","activeListenerWithCapture","getSlideSelector","toggleGestures","slideSelector","enableGestures","disableGestures","momentumDurationX","momentumDurationY","momentumDistanceX","newPositionX","momentumDistanceY","newPositionY","momentumDuration","in","out","Lazy","checkInView","loadPrevNext","loadPrevNextAmount","loadOnTransitionStart","scrollingElement","elementClass","loadingClass","loadedClass","preloaderClass","scrollHandlerAttached","initialImageLoaded","loadInSlide","loadInDuplicate","$images","background","$pictureEl","sourceEl","$source","slideOriginalIndex","slideExist","amount","maxIndex","minIndex","checkInViewOnLoad","$scrollElement","isWindow","scrollElementWidth","scrollElementHeight","Controller","LinearSpline","binarySearch","guess","array","i1","i3","interpolate","removeSpline","controller","control","spline","inverse","by","_t","controlled","controlledTranslate","setControlledTranslate","getInterpolateFunction","setControlledTransition","notificationClass","prevSlideMessage","nextSlideMessage","firstSlideMessage","lastSlideMessage","paginationBulletMessage","slideLabelMessage","containerMessage","containerRoleDescriptionMessage","itemRoleDescriptionMessage","slideRole","liveRegion","notify","notification","makeElFocusable","makeElNotFocusable","addElRole","addElRoleDescription","description","addElLabel","disableEl","enableEl","onEnterOrSpaceKey","hasPagination","hasClickablePagination","initNavEl","wrapperId","addElControls","handleFocus","includes","isActive","$containerEl","repeat","round","live","addElLive","updateNavigation","bulletEl","updatePagination","keepQuery","paths","slugify","getPathValues","urlOverride","pathArray","part","setHistory","currentState","scrollToSlide","setHistoryPopState","hashNavigation","HashNavigation","watchState","onHashChange","newHash","setHash","$activeSlideEl","autoplayResult","reverseDirection","stopOnLastSlide","pause","waitForTransition","onVisibilityChange","visibilityState","onMouseEnter","disableOnInteraction","onMouseLeave","Thumb","thumbs","multipleActiveThumbs","autoScrollOffset","slideThumbActiveClass","thumbsContainerClass","swiperCreated","onThumbClick","thumbsSwiper","thumbsParams","SwiperClass","thumbsSwiperParams","thumbsToActivate","thumbActiveClass","useOffset","newThumbsIndex","currentThumbsIndex","prevThumbsIndex","nextThumbsIndex","momentum","momentumRatio","momentumBounce","momentumBounceRatio","momentumVelocityRatio","minimumVelocity","lastMoveEvent","pop","velocityEvent","distance","momentumDistance","newPosition","afterBouncePosition","doBounce","bounceAmount","needsLoopFix","moveDistance","currentSlideSize","Grid","slidesNumberEvenToRows","slidesPerRow","numFullColumns","newSlideOrderIndex","groupIndex","slideIndexInGroup","columnsInGroup","order","addSlide","activeIndexBuffer","baseLength","slidesBuffer","currentSlide","indexToRemove","Manipulation","effectInit","overwriteParams","perspective","recreateShadows","getEffectParams","requireUpdateOnVirtual","overwriteParamsResult","slideShadows","effectTarget","effectParams","transformEl","effectVirtualTransitionEnd","allSlides","$transitionEndTarget","eventTriggered","triggerEvents","EffectFade","fadeEffect","crossFade","tx","ty","slideOpacity","EffectCube","cubeEffect","shadow","shadowOffset","shadowScale","createSlideShadows","shadowBefore","shadowAfter","$cubeShadowEl","wrapperRotate","slideAngle","tz","shadowAngle","sin","scale1","scale2","zFactor","createShadow","shadowClass","$shadowContainer","$shadowEl","EffectFlip","flipEffect","limitRotation","rotateY","rotateX","EffectCoverflow","coverflowEffect","rotate","stretch","depth","modifier","center","centerOffset","offsetMultiplier","translateZ","slideTransform","$shadowBeforeEl","$shadowAfterEl","EffectCreative","creativeEffect","limitProgress","shadowPerProgress","progressMultiplier","getTranslateValue","isCenteredSlides","r","custom","translateString","rotateString","scaleString","opacityString","shadowOpacity","EffectCards","cardsEffect","tX","tY","tZ","tXAdd","isSwipeToNext","isSwipeToPrev","subProgress","prevY","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","Symbol","toStringTag"],"sourceRoot":""}